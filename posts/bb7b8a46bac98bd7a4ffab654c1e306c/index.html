<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>15. 《C语言》——【如何动态内存开辟】 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/bb7b8a46bac98bd7a4ffab654c1e306c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="15. 《C语言》——【如何动态内存开辟】">
  <meta property="og:description" content="亲爱的读者，大家好！我是一名正在学习编程的高校生。在这个博客里，我将和大家一起探讨编程技巧、分享实用工具，并交流学习心得。希望通过我的博客，你能学到有用的知识，提高自己的技能，成为一名优秀的程序员。如果你有任何疑问或建议，请随时在评论区留言，让我们一起成长进步！现在，让我们开始这场知识之旅吧！
🚀个人主页：FEN03
📚收入专栏：C语言
文章目录 📚前言📘1. 为什么要动态内存分配❓📗2. 如何去动态内存开辟❓🔖2.1 malloc🔖2.2 free🔖2.3 calloc🔖2.4 realloc 👋结束语 📚前言 为什么需要动态内存开辟，如何向内存申请空间？接下来，就让我们去探讨吧~
📘1. 为什么要动态内存分配❓ 在先前，我们开辟内存的方法无非是在栈区创建一个变量，或者说一个数组。
#include&lt;stdio.h&gt; int main() { int a = 0; //在栈区开辟了4个字节的空间 int arr[10] = { 0 }; //在栈区开辟了40个连续字节的空间 return 0; } 这2种内存开辟，都存在着2种特点：
内存开辟的大小是固定的了。数组在创建时，必须是指定它的长度，一旦确定大小后不能再进行更改。 为了迎合更高的要求，上述的情况就不能满足了。那么为了解决这一问题，C语言引入了动态内存开辟，这样程序员就可以灵活的去申请和释放空间。
那么接下来就让我们探索如何去动态的向内存开辟。
📗2. 如何去动态内存开辟❓ 那么为了实现动态内存的开辟，C语言提供了4个函数，那么接下来，就让我们去学习如何使用这些函数吧~⬇️
🔖2.1 malloc 为了实现动态内存开辟，C语言提供了malloc函数。
函数语法形式：
void* malloc (size_t size); 这个函数能够向内存开辟一块连续可用的空间，并且会返回指向这块内存空间的指针。
如果内存开辟成功，则会返回指向这块开辟好的内存的指针。如果内存开辟失败，则会返回NULL，所以当我们使用malloc函数时，一定要检查是否开辟成功。malloc函数的返回类型是void* ，这是因为malloc函数并不知道程序员要开辟内存空间的类型，所以当程序员使用时由自己决定返回类型。如果size为0，这一行为是标准未定义的，而且也没必要，最终的结果也是编译器决定的。 使用malloc函数需要包含头文件：
#include&lt;stdlib.h&gt; 我们可以使用malloc来开辟下内存空间：
#include&lt;stdio.h&gt; #include&lt;stdlib.h&gt; int main() { //向内存开辟40个字节 int*p = (int*)malloc(10 * sizeof(int)); //使用if语句来判断是否开辟成功，如果失败则提示错误信息以及提前结束 if (p == NULL) { perror(&#34;">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-11T14:20:10+08:00">
    <meta property="article:modified_time" content="2024-06-11T14:20:10+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">15. 《C语言》——【如何动态内存开辟】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/af/e7/rUvSG6sY_o.gif" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p><strong>亲爱的读者，大家好！我是一名正在学习编程的高校生。在这个博客里，我将和大家一起探讨编程技巧、分享实用工具，并交流学习心得。希望通过我的博客，你能学到有用的知识，提高自己的技能，成为一名优秀的程序员。如果你有任何疑问或建议，请随时在评论区留言，让我们一起成长进步！现在，让我们开始这场知识之旅吧！</strong></p> 
</blockquote> 
<hr> 
<hr> 
<p>🚀<strong>个人主页：</strong><a href="https://blog.csdn.net/m0_74357092?">FEN03</a><br> 📚<strong>收入专栏：</strong><a href="https://blog.csdn.net/m0_74357092/category_12695622.html">C语言</a></p> 
<p><img src="https://images2.imgbox.com/4a/15/l0nRyZ8b_o.gif" alt="在这里插入图片描述"></p> 
<hr> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_21" rel="nofollow">📚前言</a></li><li><a href="#1__26" rel="nofollow">📘1. 为什么要动态内存分配❓</a></li><li><a href="#2__47" rel="nofollow">📗2. 如何去动态内存开辟❓</a></li><li><ul><li><a href="#21_malloc_50" rel="nofollow">🔖2.1 malloc</a></li><li><a href="#22_free_100" rel="nofollow">🔖2.2 free</a></li><li><a href="#23_calloc_148" rel="nofollow">🔖2.3 calloc</a></li><li><a href="#24_realloc_195" rel="nofollow">🔖2.4 realloc</a></li></ul> 
  </li><li><a href="#_267" rel="nofollow">👋结束语</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_21"></a>📚前言</h2> 
<blockquote> 
 <p><em><strong>为什么需要动态内存开辟，如何向内存申请空间？接下来，就让我们去探讨吧~</strong></em></p> 
</blockquote> 
<hr> 
<h2><a id="1__26"></a>📘1. 为什么要动态内存分配❓</h2> 
<hr> 
<p>在先前，我们开辟内存的方法无非是在栈区创建一个变量，或者说一个数组。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//在栈区开辟了4个字节的空间</span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//在栈区开辟了40个连续字节的空间</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> 
<p>这2种内存开辟，都存在着<strong>2种特点</strong>：</p> 
<ol><li>内存开辟的<strong>大小是固定的</strong>了。</li><li><strong>数组在创建时</strong>，必须是指定它的长度，<strong>一旦确定大小后不能再进行更改</strong>。</li></ol> 
<p>为了迎合更高的要求，上述的情况就不能满足了。那么为了解决这一问题，C语言引入了动态内存开辟，这样程序员就可以灵活的去申请和释放空间。</p> 
<p>那么接下来就让我们探索如何去动态的向内存开辟。</p> 
<hr> 
<h2><a id="2__47"></a>📗2. 如何去动态内存开辟❓</h2> 
<p>那么为了实现动态内存的开辟，C语言提供了4个函数，那么接下来，就让我们去学习如何使用这些函数吧~⬇️</p> 
<hr> 
<h3><a id="21_malloc_50"></a>🔖2.1 malloc</h3> 
<p>为了实现动态内存开辟，C语言提供了<a href="https://legacy.cplusplus.com/reference/cstdlib/malloc/?kw=malloc" rel="nofollow">malloc</a>函数。</p> 
<p>函数语法形式：</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">malloc</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>这个函数能够向内存开辟一块<strong>连续可用</strong>的空间，并且会返回指向这块内存空间的指针。</p> 
<ol><li>如果内存开辟成功，则会返回指向这块开辟好的内存的指针。</li><li>如果内存开辟失败，则会返回NULL，所以当我们使用malloc函数时，一定要检查是否开辟成功。</li><li>malloc函数的返回类型是void* ，这是因为malloc函数并不知道程序员要开辟内存空间的类型，所以当程序员使用时由自己决定返回类型。</li><li>如果size为0，这一行为是标准未定义的，而且也没必要，最终的结果也是编译器决定的。</li></ol> 
<hr> 
<p>使用malloc函数需要包含头文件：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
</code></pre> 
<p>我们可以使用malloc来开辟下内存空间：</p> 
<pre><code class="prism language-c">
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//向内存开辟40个字节</span>
	<span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
	<span class="token comment">//使用if语句来判断是否开辟成功，如果失败则提示错误信息以及提前结束</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>

	<span class="token comment">//...... </span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> 
<p>我们进行调试看看是否开辟成功？</p> 
<p><img src="https://images2.imgbox.com/3f/e1/AypMQhIF_o.png" alt="在这里插入图片描述"></p> 
<p>我们看到已经内存开辟成功了，这些值都是cd，也就是一些随机值。</p> 
<p>但是malloc只是这样使用吗，其实并不是，malloc是需要搭配free函数使用的。接下来，就让我们介绍free函数吧~ ⬇️</p> 
<hr> 
<h3><a id="22_free_100"></a>🔖2.2 free</h3> 
<p>C语言提供了<a href="https://legacy.cplusplus.com/reference/cstdlib/free/?kw=free" rel="nofollow">free</a>函数，那么free函数有什么用❓，我们在前边介绍了malloc函数，是用来向内存申请空间的，那么free函数就是专门用来对动态内存开辟的空间进行释放和回收。<br> 在生活中，我们都知道有借有还，再借不难。那么在内存中也是这个道理。</p> 
<hr> 
<p>free函数的原型如下：</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">free</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> ptr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol><li>如果参数ptr指向的内存空间不是动态内存开辟的，那么free函数的行为是未定义的。</li><li>如果参数ptr是NULL，则函数什么事都不做。</li></ol> 
<p>free和malloc所包含的头文件一样。</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
</code></pre> 
<hr> 
<p>如何与malloc搭配使用❓❓❓</p> 
<p>代码如下：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//向内存开辟40个字节</span>
	<span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
	<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>

	<span class="token comment">//使用...... </span>

	<span class="token comment">//释放内存空间</span>
	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	p <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> 

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> 
<p>这样free函数就能够释放p所指向的动态内存开辟的内存空间，那么为什么还需要把p置为NULL呢？</p> 
<p>是因为，free函数虽然已经释放掉了开辟的内存空间，但是指针p还是指向这一空间，为了<strong>避免野指针</strong>，所以置为了NULL。</p> 
<hr> 
<h3><a id="23_calloc_148"></a>🔖2.3 calloc</h3> 
<p>动态内存开辟的函数不仅仅是malloc函数，C语言还提供了另一种函数：<a href="https://legacy.cplusplus.com/reference/cstdlib/calloc/?kw=calloc" rel="nofollow">calloc</a></p> 
<p>calloc函数原型：</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">calloc</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> num<span class="token punctuation">,</span> <span class="token class-name">size_t</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol><li>函数有2个参数，第一个 <strong>num 为个数</strong>，第二个 <strong>size 为字节大小</strong>，那么它会开辟程序员所要求的内存空间，并且把空间的每一个字节<strong>初始化为0</strong>（malloc，值都是cd（随机值））。</li><li>当内存开辟成功，返回的是指向该内存的指针；失败时，返回NULL ，所以当我们使用时，也和malloc一样，需要检查。</li></ol> 
<hr> 
<p>calloc函数如何向内存申请空间呢？让我们接着往下看⬇️⬇️⬇️</p> 
<p>当我需要向内存申请40个字节大小时：</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//calloc向内存申请40个字节空间  </span>
	<span class="token keyword">int</span><span class="token operator">*</span> p  <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">calloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token comment">//判断是否开辟成功</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"calloc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
	<span class="token comment">//使用..... </span>
	

	<span class="token comment">//释放内存空间</span>
	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	p <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果如何？ 让我们来调试看看吧~</p> 
<p><img src="https://images2.imgbox.com/de/55/CW6XE9OB_o.png" alt="在这里插入图片描述"></p> 
<p>我们观察到，calloc函数向内存开辟的40个字节成功，并且每一个字节初始化为0。</p> 
<p>calloc函数和malloc函数都是向内存申请空间，既然是申请，那么也需要归还内存空间，一样的都是需要free函数释放把内存还给系统。</p> 
<hr> 
<h3><a id="24_realloc_195"></a>🔖2.4 realloc</h3> 
<p>在前边，我们介绍了malloc函数和calloc函数以及free函数，最后我们介绍<a href="https://legacy.cplusplus.com/reference/cstdlib/realloc/?kw=realloc" rel="nofollow">realloc</a>函数。</p> 
<p>那么我们需要先了解，realloc函数有什么用存在的意义是什么？</p> 
<p>其实是为了让动态内存开辟更加的灵活，有时候，我们使用malloc或者calloc申请内存空间时，可能到某一时间段发现空间太大了或者不够用小了。<br> 那么为了对内存空间进行调整，C语言呢就提供了realloc函数，这样我们就可以对内存的大小进行灵活的调整。</p> 
<hr> 
<p>realloc函数原型：</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">realloc</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> ptr<span class="token punctuation">,</span> <span class="token class-name">size_t</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol><li>ptr是需要调整的内存地址</li><li>size是调整后的大小</li><li>返回值为调整后的内存起始位置</li><li>这个函数调整会在原内存空间的基础上，还会将原来内存中的数据移动到新的内存空间</li><li>realloc函数在调整内存空间时，会分为2中情况：<br> 情况1：当原有空间之后有着足够大的空间，那么就会在原有空间的基础上，调整大小。<br> 情况2：当原有空间之后没有足够大的空间，那么会另开辟一块新的空间，并且把原有空间移到新空间，再进行调整，原有空间会被释放<br> <img src="https://images2.imgbox.com/f4/7c/1djFRr6H_o.png" alt="在这里插入图片描述"></li></ol> 
<hr> 
<p>那么如何使用realloc函数开辟内存空间？ 接着往下看吧~⬇️⬇️⬇️</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//malloc向内存开辟40个字节</span>
	<span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//发现不够用，那么使用realloc函数调整内存大小</span>
	<span class="token comment">//调整为80个字节</span>
	<span class="token keyword">int</span><span class="token operator">*</span> ptr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token number">20</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ptr <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		p <span class="token operator">=</span> ptr<span class="token punctuation">;</span> 
		ptr <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>  
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"realloc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>

	<span class="token comment">//使用..... </span>



	<span class="token comment">//释放内存空间</span>
	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
	p <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>是否开辟成功？我们进行调试看看</p> 
<p><img src="https://images2.imgbox.com/6d/58/aLV9uZwQ_o.png" alt="在这里插入图片描述"></p> 
<p>我们可以看到之前malloc函数开辟的内存为40个字节，经过realloc函数调整大小后，为80个字节。</p> 
<hr> 
<h2><a id="_267"></a>👋结束语</h2> 
<blockquote> 
 <p><strong>非常感谢您花时间阅读我的博客，希望我的分享能为您带来收获。如果您对本文有任何想法或疑问，欢迎在评论区留言交流。如果您喜欢我的博客，请继续关注，我会定期更新更多精彩内容。最后，别忘了行动起来的力量，让我们一起实践这些方法，见证自己的成长和进步！</strong></p> 
</blockquote> 
<p><strong>那么到此，关于动态内存开辟就讲解完了~</strong></p> 
<p><strong>再见，祝您生活愉快！</strong></p> 
<p><img src="https://images2.imgbox.com/7d/33/5HHsEfMB_o.png" alt="在这里插入图片描述"></p> 
<hr>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c1f611db9f3b708e83bb9ebbe37a575d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JSONObject.toJSONString(***) json化后的值中的日期值被转换为时间戳？如何修改？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/83ee7e2793506e80547b7401d2511913/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Stable diffusion的SDXL模型，针不错！（含实操）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>