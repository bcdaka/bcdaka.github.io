<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SQL-正则表达式和约束 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/3a7886d2b3367703bed33766652e29b0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="SQL-正则表达式和约束">
  <meta property="og:description" content="文章目录 主要内容一.正则表达式1.操作1代码如下（示例）: 2.操作2代码如下（示例）: 3.操作3代码如下（示例）: 4.操作4代码如下（示例）: 二.约束1.主键约束 2.自增长约束3.非空约束4.唯一约束代码如下（示例）: 5.默认约束6.零填充约束代码如下（示例）: 总结 主要内容 正则表达式约束 一.正则表达式 正则表达式是一种用来描述字符串模式的工具，它可以用于匹配、查找、替换等操作。正则表达式由字符和特殊字符组成，可以使用这些字符来定义匹配规则。
常用的正则表达式字符和特殊字符有：
普通字符：表示匹配该字符本身，如a表示匹配字母&#34;a&#34;。元字符：具有特殊含义的字符，如.表示匹配除换行符以外的任意字符。字符类：用[]表示，表示匹配括号内的任意一个字符，如[abc]表示匹配字符&#34;a&#34;、“b&#34;或&#34;c”。反义字符类：用[^]表示，表示匹配除括号内字符以外的任意字符，如[^abc]表示匹配除&#34;a&#34;、“b”、&#34;c&#34;以外的任意字符。重复字符：用*、&#43;、?表示，分别表示匹配前一个字符0次或多次、1次或多次、0次或1次。边界匹配：用^、$表示，分别表示匹配字符串的开头和结尾。分组：用()表示，可以将多个字符组合为一个整体，如(ab)&#43;表示匹配&#34;ab&#34;、“abab”、&#34;ababab&#34;等。转义字符：用\表示，可以将特殊字符转义为普通字符，如\.表示匹配字符&#34;.&#34;。 正则表达式的用法有：
匹配：使用match()函数可以在字符串中查找匹配正则表达式的部分，并返回一个包含匹配结果的数组。查找：使用search()函数可以在字符串中查找匹配正则表达式的部分，并返回第一个匹配的位置。替换：使用replace()函数可以将字符串中匹配正则表达式的部分替换为指定的内容。分割：使用split()函数可以根据正则表达式将字符串分割为多个部分，并返回一个数组。 其他用法
量词：用来指定前面的字符或字符类的重复次数。常用的量词有：
*：匹配前一个字符0次或多次。&#43;：匹配前一个字符1次或多次。?：匹配前一个字符0次或1次。{n}：匹配前一个字符恰好n次。{n,}：匹配前一个字符至少n次。{n,m}：匹配前一个字符至少n次，最多m次。 特殊字符：
.：匹配除换行符以外的任意字符。\d：匹配数字字符。\D：匹配非数字字符。\w：匹配字母、数字、下划线字符。\W：匹配非字母、数字、下划线字符。\s：匹配空白字符（空格、制表符、换行符等）。\S：匹配非空白字符。\b：匹配单词边界。\B：匹配非单词边界。 分组和引用：
()：将多个字符组合为一个整体。(?:)：非捕获分组，用于只匹配但不捕获。\1、\2、…：引用前面的分组，用于匹配相同的内容。 断言：
(?=...)：正向肯定前瞻，用于匹配满足某个条件的位置。(?!...)：正向否定前瞻，用于匹配不满足某个条件的位置。(?&lt;=...)：反向肯定后顾，用于匹配位于某个条件之后的位置。(?&lt;!...)：反向否定后顾，用于匹配不位于某个条件之后的位置。 正则表达式的用法非常灵活，可以根据具体的需求来选择合适的字符、特殊字符、量词、分组等来构建匹配规则。同时，正则表达式还支持一些高级的特性，如贪婪模式、非贪婪模式、修饰符等，可以进一步扩展正则表达式的功能。
正则表达式的详细用法还有很多，可以根据具体的需求来选择合适的正则表达式和相应的函数来进行操作。
1.操作1 代码如下（示例）: -- ^ 在字符串开始处进行匹配 SELECT &#39;abc&#39; REGEXP &#39;^a&#39;; -- $ 在字符串末尾开始匹配 SELECT &#39;abc&#39; REGEXP &#39;a$&#39;; SELECT &#39;abc&#39; REGEXP &#39;c$’; -- . 匹配任意字符 SELECT &#39;abc&#39; REGEXP &#39;.b&#39;; SELECT &#39;abc&#39; REGEXP &#39;.c&#39;; SELECT &#39;abc&#39; REGEXP &#39;a.&#39;; -- [...] 匹配括号内的任意单个字符 SELECT &#39;abc&#39; REGEXP &#39;[xyz]&#39;; SELECT &#39;abc&#39; REGEXP &#39;[xaz]&#39;; 2.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-10-28T00:55:58+08:00">
    <meta property="article:modified_time" content="2023-10-28T00:55:58+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SQL-正则表达式和约束</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">主要内容</a></li><li><a href="#_7" rel="nofollow">一.正则表达式</a></li><li><ul><li><a href="#_8" rel="nofollow"></a></li><li><ul><li><a href="#_76" rel="nofollow"></a></li><li><a href="#11_77" rel="nofollow">1.操作1</a></li><li><ul><li><ul><li><a href="#_78" rel="nofollow">代码如下（示例）:</a></li></ul> 
    </li></ul> 
    </li><li><a href="#22_95" rel="nofollow">2.操作2</a></li><li><ul><li><ul><li><a href="#_96" rel="nofollow">代码如下（示例）:</a></li></ul> 
    </li></ul> 
    </li><li><a href="#33_113" rel="nofollow">3.操作3</a></li><li><ul><li><ul><li><a href="#_114" rel="nofollow">代码如下（示例）:</a></li></ul> 
    </li></ul> 
    </li><li><a href="#44_131" rel="nofollow">4.操作4</a></li><li><ul><li><ul><li><a href="#_132" rel="nofollow">代码如下（示例）:</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
  </li><li><a href="#_146" rel="nofollow">二.约束</a></li><li><ul><li><ul><li><a href="#1_169" rel="nofollow">1.主键约束</a></li></ul> 
   </li><li><a href="#2_260" rel="nofollow">2.自增长约束</a></li><li><ul><li><a href="#3_305" rel="nofollow">3.非空约束</a></li><li><a href="#4_336" rel="nofollow">4.唯一约束</a></li><li><ul><li><ul><li><a href="#_337" rel="nofollow">代码如下（示例）:</a></li></ul> 
    </li></ul> 
    </li><li><a href="#5_365" rel="nofollow">5.默认约束</a></li><li><a href="#6_395" rel="nofollow">6.零填充约束</a></li><li><ul><li><ul><li><a href="#_402" rel="nofollow">代码如下（示例）:</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
  </li><li><a href="#_418" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>主要内容</h2> 
<ol><li>正则表达式</li><li>约束</li></ol> 
<h2><a id="_7"></a>一.正则表达式</h2> 
<h3><a id="_8"></a></h3> 
<blockquote> 
 <p>正则表达式是一种用来描述字符串模式的工具，它可以用于匹配、查找、替换等操作。正则表达式由字符和特殊字符组成，可以使用这些字符来定义匹配规则。</p> 
</blockquote> 
<p>常用的正则表达式字符和特殊字符有：</p> 
<ol><li>普通字符：表示匹配该字符本身，如<code>a</code>表示匹配字母"a"。</li><li>元字符：具有特殊含义的字符，如<code>.</code>表示匹配除换行符以外的任意字符。</li><li>字符类：用<code>[]</code>表示，表示匹配括号内的任意一个字符，如<code>[abc]</code>表示匹配字符"a"、“b"或"c”。</li><li>反义字符类：用<code>[^]</code>表示，表示匹配除括号内字符以外的任意字符，如<code>[^abc]</code>表示匹配除"a"、“b”、"c"以外的任意字符。</li><li>重复字符：用<code>*</code>、<code>+</code>、<code>?</code>表示，分别表示匹配前一个字符0次或多次、1次或多次、0次或1次。</li><li>边界匹配：用<code>^</code>、<code>$</code>表示，分别表示匹配字符串的开头和结尾。</li><li>分组：用<code>()</code>表示，可以将多个字符组合为一个整体，如<code>(ab)+</code>表示匹配"ab"、“abab”、"ababab"等。</li><li>转义字符：用<code>\</code>表示，可以将特殊字符转义为普通字符，如<code>\.</code>表示匹配字符"."。</li></ol> 
<p>正则表达式的用法有：</p> 
<ol><li>匹配：使用<code>match()</code>函数可以在字符串中查找匹配正则表达式的部分，并返回一个包含匹配结果的数组。</li><li>查找：使用<code>search()</code>函数可以在字符串中查找匹配正则表达式的部分，并返回第一个匹配的位置。</li><li>替换：使用<code>replace()</code>函数可以将字符串中匹配正则表达式的部分替换为指定的内容。</li><li>分割：使用<code>split()</code>函数可以根据正则表达式将字符串分割为多个部分，并返回一个数组。</li></ol> 
<p>其他用法</p> 
<ol><li> <p>量词：用来指定前面的字符或字符类的重复次数。常用的量词有：</p> 
  <ul><li><code>*</code>：匹配前一个字符0次或多次。</li><li><code>+</code>：匹配前一个字符1次或多次。</li><li><code>?</code>：匹配前一个字符0次或1次。</li><li><code>{n}</code>：匹配前一个字符恰好n次。</li><li><code>{n,}</code>：匹配前一个字符至少n次。</li><li><code>{n,m}</code>：匹配前一个字符至少n次，最多m次。</li></ul> </li><li> <p>特殊字符：</p> 
  <ul><li><code>.</code>：匹配除换行符以外的任意字符。</li><li><code>\d</code>：匹配数字字符。</li><li><code>\D</code>：匹配非数字字符。</li><li><code>\w</code>：匹配字母、数字、下划线字符。</li><li><code>\W</code>：匹配非字母、数字、下划线字符。</li><li><code>\s</code>：匹配空白字符（空格、制表符、换行符等）。</li><li><code>\S</code>：匹配非空白字符。</li><li><code>\b</code>：匹配单词边界。</li><li><code>\B</code>：匹配非单词边界。</li></ul> </li><li> <p>分组和引用：</p> 
  <ul><li><code>()</code>：将多个字符组合为一个整体。</li><li><code>(?:)</code>：非捕获分组，用于只匹配但不捕获。</li><li><code>\1</code>、<code>\2</code>、…：引用前面的分组，用于匹配相同的内容。</li></ul> </li><li> <p>断言：</p> 
  <ul><li><code>(?=...)</code>：正向肯定前瞻，用于匹配满足某个条件的位置。</li><li><code>(?!...)</code>：正向否定前瞻，用于匹配不满足某个条件的位置。</li><li><code>(?&lt;=...)</code>：反向肯定后顾，用于匹配位于某个条件之后的位置。</li><li><code>(?&lt;!...)</code>：反向否定后顾，用于匹配不位于某个条件之后的位置。</li></ul> </li></ol> 
<p><img src="https://images2.imgbox.com/d0/d5/mFzUSSp4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3b/8f/mlXX19jh_o.png" alt="在这里插入图片描述"></p> 
<p>正则表达式的用法非常灵活，可以根据具体的需求来选择合适的字符、特殊字符、量词、分组等来构建匹配规则。同时，正则表达式还支持一些高级的特性，如贪婪模式、非贪婪模式、修饰符等，可以进一步扩展正则表达式的功能。</p> 
<p>正则表达式的详细用法还有很多，可以根据具体的需求来选择合适的正则表达式和相应的函数来进行操作。</p> 
<h4><a id="_76"></a></h4> 
<h4><a id="11_77"></a>1.操作1</h4> 
<h6><a id="_78"></a>代码如下（示例）:</h6> 
<pre><code class="prism language-sql"><span class="token comment">-- ^ 在字符串开始处进行匹配</span>
<span class="token keyword">SELECT</span> <span class="token string">'abc'</span> <span class="token operator">REGEXP</span> <span class="token string">'^a'</span><span class="token punctuation">;</span>
<span class="token comment">-- $ 在字符串末尾开始匹配</span>
<span class="token keyword">SELECT</span> <span class="token string">'abc'</span> <span class="token operator">REGEXP</span> <span class="token string">'a$'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'abc'</span> <span class="token operator">REGEXP</span> <span class="token string">'c$’;
-- . 匹配任意字符
SELECT '</span>abc<span class="token string">' REGEXP '</span><span class="token punctuation">.</span>b<span class="token string">';
SELECT '</span>abc<span class="token string">' REGEXP '</span><span class="token punctuation">.</span>c<span class="token string">';
SELECT '</span>abc<span class="token string">' REGEXP '</span>a<span class="token punctuation">.</span><span class="token string">';
-- [...] 匹配括号内的任意单个字符
SELECT '</span>abc<span class="token string">' REGEXP '</span><span class="token punctuation">[</span>xyz<span class="token punctuation">]</span><span class="token string">';
SELECT '</span>abc<span class="token string">' REGEXP '</span><span class="token punctuation">[</span>xaz<span class="token punctuation">]</span>'<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="22_95"></a>2.操作2</h4> 
<h6><a id="_96"></a>代码如下（示例）:</h6> 
<pre><code class="prism language-sql"><span class="token comment">-- [^...] 注意 ^ 符合只有在 [] 内才是取反的意思，在别的地方都是表示开始处匹配</span>
<span class="token keyword">SELECT</span> <span class="token string">'a'</span> <span class="token operator">REGEXP</span> <span class="token string">'[^abc]'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'x'</span> <span class="token operator">REGEXP</span> <span class="token string">'[^abc]'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'abc'</span> <span class="token operator">REGEXP</span> <span class="token string">'[^a]'</span><span class="token punctuation">;</span>
<span class="token comment">-- a* 匹配 0 个或多个 a, 包括空字符串。 可以作为占位符使用 . 有没有指定字符都可以匹配</span>
到数据
<span class="token keyword">SELECT</span> <span class="token string">'stab'</span> <span class="token operator">REGEXP</span> <span class="token string">'.ta*b'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'stb'</span> <span class="token operator">REGEXP</span> <span class="token string">'.ta*b'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">''</span> <span class="token operator">REGEXP</span> <span class="token string">'a*'</span><span class="token punctuation">;</span>
<span class="token comment">-- a+ 匹配 1 个或者多个 a, 但是不包括空字符</span>
<span class="token keyword">SELECT</span> <span class="token string">'stab'</span> <span class="token operator">REGEXP</span> <span class="token string">'.ta+b'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'stb'</span> <span class="token operator">REGEXP</span> <span class="token string">'.ta+b'</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="33_113"></a>3.操作3</h4> 
<h6><a id="_114"></a>代码如下（示例）:</h6> 
<pre><code class="prism language-sql"><span class="token comment">-- [^...] 注意 ^ 符合只有在 [] 内才是取反的意思，在别的地方都是表示开始处匹配</span>
<span class="token keyword">SELECT</span> <span class="token string">'a'</span> <span class="token operator">REGEXP</span> <span class="token string">'[^abc]'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'x'</span> <span class="token operator">REGEXP</span> <span class="token string">'[^abc]'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'abc'</span> <span class="token operator">REGEXP</span> <span class="token string">'[^a]'</span><span class="token punctuation">;</span>
<span class="token comment">-- a* 匹配 0 个或多个 a, 包括空字符串。 可以作为占位符使用 . 有没有指定字符都可以匹配</span>
到数据
<span class="token keyword">SELECT</span> <span class="token string">'stab'</span> <span class="token operator">REGEXP</span> <span class="token string">'.ta*b'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'stb'</span> <span class="token operator">REGEXP</span> <span class="token string">'.ta*b'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">''</span> <span class="token operator">REGEXP</span> <span class="token string">'a*'</span><span class="token punctuation">;</span>
<span class="token comment">-- a+ 匹配 1 个或者多个 a, 但是不包括空字符</span>
<span class="token keyword">SELECT</span> <span class="token string">'stab'</span> <span class="token operator">REGEXP</span> <span class="token string">'.ta+b'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'stb'</span> <span class="token operator">REGEXP</span> <span class="token string">'.ta+b'</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="44_131"></a>4.操作4</h4> 
<h6><a id="_132"></a>代码如下（示例）:</h6> 
<pre><code class="prism language-sql"><span class="token comment">-- a{m,n} 匹配 m 到 n 个 a, 包含 m 和 n</span>
<span class="token keyword">SELECT</span> <span class="token string">'auuuuc'</span> <span class="token operator">REGEXP</span> <span class="token string">'au{3,5}c'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'auuuuc'</span> <span class="token operator">REGEXP</span> <span class="token string">'au{4,5}c'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'auuuuc'</span> <span class="token operator">REGEXP</span> <span class="token string">'au{5,10}c'</span><span class="token punctuation">;</span>
<span class="token comment">-- (abc) abc 作为一个序列匹配，不用括号括起来都是用单个字符去匹配，如果要把多个字符</span>
作为一个整体去匹配就需要用到括号，所以括号适合上面的所有情况。
<span class="token keyword">SELECT</span> <span class="token string">'xababy'</span> <span class="token operator">REGEXP</span> <span class="token string">'x(abab)y'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'xababy'</span> <span class="token operator">REGEXP</span> <span class="token string">'x(ab)*y'</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token string">'xababy'</span> <span class="token operator">REGEXP</span> <span class="token string">'x(ab){1,2}y'</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="_146"></a>二.约束</h2> 
<blockquote> 
 <p>SQL约束是用于限制数据库表中数据的完整性和一致性的规则。它们定义了对表中数据的操作所允许的条件和限制。约束可以应用于表的列或整个表。</p> 
</blockquote> 
<p>约束的分类：</p> 
<ol><li>主键约束（Primary Key Constraint）：用于标识表中的唯一记录。主键约束要求列中的值是唯一的且不为空。</li><li>外键约束（Foreign Key Constraint）：用于建立表之间的关系。外键约束要求一个表的列的值必须是另一个表的主键值。</li><li>唯一约束（Unique Constraint）：用于确保列中的值是唯一的。唯一约束要求列中的值不能重复。</li><li>非空约束（Not Null Constraint）：用于确保列中的值不为空。非空约束要求列中的值不能为NULL。</li><li>检查约束（Check Constraint）：用于定义列中值的范围或条件。检查约束要求列中的值必须满足指定的条件。</li></ol> 
<p>约束的作用：</p> 
<ol><li>数据完整性：约束可以确保表中的数据满足特定的条件和规则，防止无效或不一致的数据进入数据库。</li><li>数据一致性：约束可以确保表之间的关系是正确的，避免了数据冗余和不一致。</li><li>数据安全性：约束可以防止对表中数据的非法操作，保护数据的安全性。</li></ol> 
<p>约束的用法：</p> 
<ol><li>创建约束：在创建表时，可以使用CREATE TABLE语句来定义约束。例如，可以使用PRIMARY KEY关键字定义主键约束，使用UNIQUE关键字定义唯一约束，使用FOREIGN KEY关键字定义外键约束等。</li><li>修改约束：可以使用ALTER TABLE语句来修改表的约束。例如，可以使用ADD CONSTRAINT关键字来添加新的约束，使用DROP CONSTRAINT关键字来删除约束等。</li><li>禁用约束：可以使用ALTER TABLE语句来禁用约束。例如，可以使用DISABLE CONSTRAINT关键字来禁用约束，以便在需要时可以绕过约束进行操作。</li><li>启用约束：可以使用ALTER TABLE语句来启用约束。例如，可以使用ENABLE CONSTRAINT关键字来启用约束，以便在禁用后重新启用约束。</li></ol> 
<p>总结起来，SQL约束是用于限制数据库表中数据的完整性和一致性的规则。它们可以应用于表的列或整个表，通过定义特定的条件和规则来确保数据的有效性和安全性。</p> 
<h4><a id="1_169"></a>1.主键约束</h4> 
<p><strong>添加单列主键</strong></p> 
<pre><code class="prism language-sql">方法<span class="token number">1</span>:
<span class="token comment">--在create table语句时，通过primary key</span>
<span class="token comment">-- 在定义字段的同时指定主键，语法格式如下：</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token punctuation">(</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token operator">&lt;</span> 字段名 <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> 数据类型 <span class="token operator">&gt;</span> <span class="token keyword">primary</span> <span class="token keyword">key</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span>

方式 <span class="token number">1</span><span class="token operator">-</span> 实现：
<span class="token keyword">create</span> <span class="token keyword">table</span> emp1<span class="token punctuation">(</span>
	eid <span class="token keyword">int</span> primay <span class="token keyword">key</span><span class="token punctuation">,</span>
	name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	deptId <span class="token keyword">int</span><span class="token punctuation">,</span>
	salary <span class="token keyword">double</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

方法<span class="token number">2</span>：
<span class="token comment">-- 在定义字段之后再指定主键，语法格式如下：</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token punctuation">(</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token punctuation">[</span><span class="token keyword">constraint</span> <span class="token operator">&lt;</span> 约束名 <span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">[</span> 字段名<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

方式 <span class="token number">2</span><span class="token operator">-</span> 实现：
<span class="token keyword">create</span> <span class="token keyword">table</span> emp2<span class="token punctuation">(</span>
	eid <span class="token keyword">INT</span><span class="token punctuation">,</span>
	name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	deptId <span class="token keyword">INT</span><span class="token punctuation">,</span>
	salary <span class="token keyword">double</span><span class="token punctuation">,</span>
	<span class="token keyword">constraint</span> pk1 <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p><strong>添加多列主键（联合主键）</strong></p> 
<pre><code class="prism language-sql">语法：
<span class="token keyword">create</span> <span class="token keyword">table</span> 表名（
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>字段<span class="token number">1</span>，字段<span class="token number">2</span>，<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>，字段n<span class="token punctuation">)</span>
）<span class="token punctuation">;</span>

实现：
<span class="token keyword">create</span> <span class="token keyword">table</span> emp3<span class="token punctuation">(</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	deptId <span class="token keyword">int</span><span class="token punctuation">,</span>
	salary <span class="token keyword">double</span><span class="token punctuation">,</span>
	<span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>deptId<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p><strong>通过修改表结构添加主键</strong></p> 
<pre><code class="prism language-sql">主键约束不仅可以在创建表的同时创建，也可以在修改表时添加。

语法<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token punctuation">(</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token operator">&lt;</span> 表名 <span class="token operator">&gt;</span> <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> （字段列表 <span class="token punctuation">)</span><span class="token punctuation">;</span>

实现：
<span class="token comment">-- 添加单列主键</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> emp4<span class="token punctuation">(</span>
	eid <span class="token keyword">int</span><span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	deptId <span class="token keyword">int</span><span class="token punctuation">,</span>
	salary <span class="token keyword">double</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp4 <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> （ eid<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p><strong>删除主键约束</strong></p> 
<pre><code class="prism language-sql">格式：
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token operator">&lt;</span>数据表名<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>

实现：
<span class="token comment">-- 删除单列主键</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp1 <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>
<span class="token comment">-- 删除联合主键</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp5 <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="2_260"></a>2.自增长约束</h3> 
<blockquote> 
 <p>在 MySQL中，当主键定义为自增长后，这个主键的值就不再需要用户输入数据了，而由数据库系统根据定义自动赋值。每增加一条记录，主键会自动以相同的步长进行增长。<br> 通过给字段添加 auto_increment 属性来实现主键自增长</p> 
</blockquote> 
<pre><code class="prism language-sql">语法：
字段名 数据类型 <span class="token keyword">auto_increment</span>

实现：
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user1<span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p><strong>特点：</strong></p> 
<ul><li>默认情况下， auto_increment 的初始值是 1 ，每新增一条记录，字段值自动加 1 。</li><li>一个表中只能有一个字段使用auto_increment 约束，且该字段必须有唯一索引，以避免序号重复（即为主键或 主键的一部分）。</li><li>auto_increment约束的字段必须具备 NOT NULL 属性。 auto_increment 约束的字段只能是整数类型（ TINYINT 、SMALLINT 、 INT 、 BIGINT 等。</li><li>auto_increment 约束字段的最大值受该字段的数据类型约束，如果达到上限， auto_increment 就会失效。</li></ul> 
<p><strong>指定自增字段初始值</strong></p> 
<pre><code class="prism language-sql"><span class="token comment">-- 方式 1 ，创建表时指定</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user2 <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">auto_increment</span><span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment">--方式2，创建表之后指定</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user3 <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> t_user2 <span class="token keyword">auto_increment</span><span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>

</code></pre> 
<blockquote> 
 <p>delete 和 truncate 在删除后自增列的变化：<br> delete：数据之后自动增长从断点开始<br> truncate：数据之后自动增长从默认起始值开始</p> 
</blockquote> 
<h4><a id="3_305"></a>3.非空约束</h4> 
<pre><code class="prism language-sql">语法：
方式 <span class="token number">1</span> ： <span class="token operator">&lt;</span> 字段名 <span class="token operator">&gt;</span><span class="token operator">&lt;</span> 数据类型 <span class="token operator">&gt;</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
方式 <span class="token number">2</span> ： <span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 字段 类型 <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

添加非空约束
<span class="token comment">--方法1，创建表时指定</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user6 <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
	address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--方法2，之后指定</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user7 <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token comment">-- 指定非空约束</span>
	address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment">-- 指定非空约束</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> t_user7 <span class="token keyword">modify</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> t_user7 <span class="token keyword">modify</span> address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

删除非空约束：
<span class="token comment">-- alter table 表名 modify 字段 类型</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> t_user7 <span class="token keyword">modify</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> t_user7 <span class="token keyword">modify</span> address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre> 
<h4><a id="4_336"></a>4.唯一约束</h4> 
<h6><a id="_337"></a>代码如下（示例）:</h6> 
<pre><code class="prism language-sql">语法：
方式 <span class="token number">1</span> ： <span class="token operator">&lt;</span> 字段名 <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> 数据类型 <span class="token operator">&gt;</span> <span class="token keyword">unique</span>
方式 <span class="token number">2</span> ： <span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token keyword">constraint</span> 约束名 <span class="token keyword">unique</span><span class="token punctuation">(</span> 列 <span class="token punctuation">)</span><span class="token punctuation">;</span>

添加唯一约束 <span class="token operator">-</span> 方式 <span class="token number">1</span>
<span class="token comment">-- 创建表时指定</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user8 <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
	phone_number <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">unique</span> <span class="token comment">-- 指定唯一约束</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

添加唯一约束 <span class="token operator">-</span> 方式 <span class="token number">2</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user9 <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
	phone_number <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment">-- 指定唯一约束</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> t_user9 <span class="token keyword">add</span> <span class="token keyword">constraint</span> unique_ph <span class="token keyword">unique</span><span class="token punctuation">(</span>phone_number<span class="token punctuation">)</span><span class="token punctuation">;</span>

删除唯一约束
<span class="token comment">-- alter table &lt; 表名 &gt; drop index &lt; 唯一约束名 &gt;;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> t_user9 <span class="token keyword">drop</span> <span class="token keyword">index</span> unique_ph<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="5_365"></a>5.默认约束</h4> 
<pre><code class="prism language-sql">语法
方式 <span class="token number">1</span> ： <span class="token operator">&lt;</span> 字段名 <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> 数据类型 <span class="token operator">&gt;</span> <span class="token keyword">default</span> <span class="token operator">&lt;</span> 默认值 <span class="token operator">&gt;</span><span class="token punctuation">;</span>
方式 <span class="token number">2</span>: <span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 列名 类型 <span class="token keyword">default</span> 默认值 <span class="token punctuation">;</span>

添加默认约束 <span class="token operator">-</span> 方式 <span class="token number">1</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> t_user10 <span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token punctuation">,</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> ‘ 北京’ <span class="token comment">-- 指定默认约束</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

添加默认约束 <span class="token operator">-</span> 方式 <span class="token number">2</span>
<span class="token comment">--alter table 表名 modify 列名 类型 default 默认值</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> t_user11 <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token punctuation">,</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
	address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> t_user11 <span class="token keyword">modify</span> address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> ‘ 北京’ <span class="token punctuation">;</span>

删除默认约束
<span class="token comment">-- alter table &lt; 表名 &gt; modify column &lt; 字段名 &gt; &lt; 类型 &gt; default null;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> t_user11 <span class="token keyword">modify</span> <span class="token keyword">column</span> address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="6_395"></a>6.零填充约束</h4> 
<ul><li>插入数据时，当该字段的值的长度小于定义的长度时，会在该值的前面补上相应的 0</li><li>zerofill 默认为 int(10)</li><li>当使用 zerofill 时，默认会自动加 unsigned （无符号）属性，使用 unsigned 属性后，数值范围 是原值的 2 倍，例如，有符号为 -128~+127 ，无符号为 0~256 。</li></ul> 
<h6><a id="_402"></a>代码如下（示例）:</h6> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> t_user12 <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> zerofill <span class="token punctuation">,</span> <span class="token comment">-- 零填充约束</span>
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

删除
<span class="token keyword">alter</span> <span class="token keyword">table</span> t_user12 <span class="token keyword">modify</span> id <span class="token keyword">int</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<h2><a id="_418"></a>总结</h2> 
<p><a href="http://t.csdnimg.cn/l87Gy" rel="nofollow">MySQL的视图</a><br> 以上是今天要讲的内容，学到了正则表达式和约束，包括正则表达式的字符和特殊字符，约束的分类，约束的作用，约束的用法。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9d5037221a1ec55eda2393b9dd099fd7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【ETL工具】Datax-ETL-SqlServerToHDFS</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5c32baf18e8d0cdba15788e8a00326fc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【项目实战】基于Spark大数据的餐饮外卖数据分析可视化系统hadoop项目hive计算机程序设计</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>