<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring AI教程（十六）：检索增强生成（RAG）与函数调用 | Spring AI教程（十七）：实现RAG技术与评估AI响应 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ad4d5ba6dd5128f4590c7c067ca2ac10/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Spring AI教程（十六）：检索增强生成（RAG）与函数调用 | Spring AI教程（十七）：实现RAG技术与评估AI响应">
  <meta property="og:description" content="Spring AI教程（十六）：检索增强生成（RAG）与函数调用 在前面的文章中，我们讨论了Prompt模板、嵌入技术和Token管理。这篇文章将进一步探讨检索增强生成（Retrieval Augmented Generation, RAG）和函数调用技术，帮助你将Spring AI的功能发挥到极致。
检索增强生成（RAG） 检索增强生成（RAG）是一种结合信息检索和生成模型的技术，用于将相关数据嵌入到Prompts中，以提高AI模型的响应准确性。该方法包括一个批处理风格的编程模型，读取未结构化的数据，将其转换，然后写入向量数据库。总体上，这是一个ETL（Extract, Transform, Load）管道。向量数据库在RAG技术中用于检索部分。
RAG的关键步骤 分割文档 将原始文档分割成较小的部分，同时保持内容的语义边界。例如，对于包含段落和表格的文档，避免在段落或表格中间进行分割。对于代码，避免在方法实现中间进行分割。
调整部分大小 将文档的部分进一步分割成更小的部分，其大小应为AI模型Token限制的一小部分。
示例：实现RAG 创建分割服务 创建一个服务类，用于分割文档并保持语义边界：
import org.springframework.stereotype.Service; import java.util.ArrayList; import java.util.List; @Service public class DocumentSplitService { public List&lt;String&gt; splitDocument(String document, int tokenLimit) { List&lt;String&gt; parts = new ArrayList&lt;&gt;(); // 假设每个段落作为一个独立部分 String[] paragraphs = document.split(&#34;\n\n&#34;); StringBuilder currentPart = new StringBuilder(); for (String paragraph : paragraphs) { if (currentPart.length() &#43; paragraph.length() &lt;= tokenLimit) { currentPart.append(paragraph).append(&#34;\n\n&#34;); } else { parts.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-07T11:35:50+08:00">
    <meta property="article:modified_time" content="2024-06-07T11:35:50+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring AI教程（十六）：检索增强生成（RAG）与函数调用 | Spring AI教程（十七）：实现RAG技术与评估AI响应</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="Spring_AIRAG_0"></a>Spring AI教程（十六）：检索增强生成（RAG）与函数调用</h4> 
<p>在前面的文章中，我们讨论了Prompt模板、嵌入技术和Token管理。这篇文章将进一步探讨检索增强生成（Retrieval Augmented Generation, RAG）和函数调用技术，帮助你将Spring AI的功能发挥到极致。</p> 
<h4><a id="RAG_4"></a>检索增强生成（RAG）</h4> 
<p>检索增强生成（RAG）是一种结合信息检索和生成模型的技术，用于将相关数据嵌入到Prompts中，以提高AI模型的响应准确性。该方法包括一个批处理风格的编程模型，读取未结构化的数据，将其转换，然后写入向量数据库。总体上，这是一个ETL（Extract, Transform, Load）管道。向量数据库在RAG技术中用于检索部分。</p> 
<h5><a id="RAG_8"></a>RAG的关键步骤</h5> 
<ol><li><strong>分割文档</strong></li></ol> 
<p>将原始文档分割成较小的部分，同时保持内容的语义边界。例如，对于包含段落和表格的文档，避免在段落或表格中间进行分割。对于代码，避免在方法实现中间进行分割。</p> 
<ol start="2"><li><strong>调整部分大小</strong></li></ol> 
<p>将文档的部分进一步分割成更小的部分，其大小应为AI模型Token限制的一小部分。</p> 
<h5><a id="RAG_18"></a>示例：实现RAG</h5> 
<ol><li><strong>创建分割服务</strong></li></ol> 
<p>创建一个服务类，用于分割文档并保持语义边界：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DocumentSplitService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">splitDocument</span><span class="token punctuation">(</span><span class="token class-name">String</span> document<span class="token punctuation">,</span> <span class="token keyword">int</span> tokenLimit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> parts <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 假设每个段落作为一个独立部分</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> paragraphs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">StringBuilder</span> currentPart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> paragraph <span class="token operator">:</span> paragraphs<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPart<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> paragraph<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> tokenLimit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                currentPart<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>paragraph<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                parts<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>currentPart<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                currentPart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span>paragraph<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPart<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            parts<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>currentPart<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> parts<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li><strong>创建RAG服务</strong></li></ol> 
<p>创建一个服务类，用于处理用户输入并使用RAG技术生成响应：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springai<span class="token punctuation">.</span></span><span class="token class-name">OpenAiChatService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springai<span class="token punctuation">.</span></span><span class="token class-name">VectorDatabaseService</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RagService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">OpenAiChatService</span> openAiChatService<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">VectorDatabaseService</span> vectorDatabaseService<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DocumentSplitService</span> documentSplitService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RagService</span><span class="token punctuation">(</span><span class="token class-name">OpenAiChatService</span> openAiChatService<span class="token punctuation">,</span> <span class="token class-name">VectorDatabaseService</span> vectorDatabaseService<span class="token punctuation">,</span> <span class="token class-name">DocumentSplitService</span> documentSplitService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>openAiChatService <span class="token operator">=</span> openAiChatService<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vectorDatabaseService <span class="token operator">=</span> vectorDatabaseService<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>documentSplitService <span class="token operator">=</span> documentSplitService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generateResponse</span><span class="token punctuation">(</span><span class="token class-name">String</span> userPrompt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">String</span> retrievedInformation <span class="token operator">=</span> vectorDatabaseService<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>userPrompt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> documentParts <span class="token operator">=</span> documentSplitService<span class="token punctuation">.</span><span class="token function">splitDocument</span><span class="token punctuation">(</span>retrievedInformation<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 假设Token限制为1000</span>

        <span class="token class-name">StringBuilder</span> combinedPrompt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span>userPrompt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> part <span class="token operator">:</span> documentParts<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            combinedPrompt<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">" 相关信息："</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>part<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> openAiChatService<span class="token punctuation">.</span><span class="token function">chat</span><span class="token punctuation">(</span>combinedPrompt<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li><strong>使用RAG服务</strong></li></ol> 
<p>创建一个控制器，使用RAG服务生成响应：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RagController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RagService</span> ragService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/generate-rag-response"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generateRagResponse</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> prompt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> ragService<span class="token punctuation">.</span><span class="token function">generateResponse</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="Function_Calling_117"></a>函数调用（Function Calling）</h4> 
<p>函数调用技术允许注册自定义的用户函数，将大型语言模型连接到外部系统的API。Spring AI大大简化了支持函数调用所需的代码。</p> 
<h5><a id="_121"></a>示例：实现函数调用</h5> 
<ol><li><strong>创建自定义函数</strong></li></ol> 
<p>创建一个自定义函数，供AI模型调用：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomFunctionService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">customFunction</span><span class="token punctuation">(</span><span class="token class-name">String</span> input<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 执行自定义逻辑</span>
        <span class="token keyword">return</span> <span class="token string">"自定义函数处理的结果："</span> <span class="token operator">+</span> input<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li><strong>注册自定义函数</strong></li></ol> 
<p>在Spring AI中注册自定义函数：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springai<span class="token punctuation">.</span></span><span class="token class-name">FunctionRegistry</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FunctionConfig</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">FunctionRegistry</span> <span class="token function">functionRegistry</span><span class="token punctuation">(</span><span class="token class-name">CustomFunctionService</span> customFunctionService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">FunctionRegistry</span> registry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FunctionRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registry<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"customFunction"</span><span class="token punctuation">,</span> customFunctionService<span class="token operator">::</span><span class="token function">customFunction</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> registry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li><strong>调用自定义函数</strong></li></ol> 
<p>创建一个控制器，调用自定义函数：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springai<span class="token punctuation">.</span></span><span class="token class-name">FunctionRegistry</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FunctionController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">FunctionRegistry</span> functionRegistry<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/call-custom-function"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">callCustomFunction</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> input<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> functionRegistry<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">"customFunction"</span><span class="token punctuation">,</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_185"></a>结论</h4> 
<p>通过理解和应用检索增强生成（RAG）和函数调用技术，Spring AI可以处理更复杂的任务和更大规模的数据。这些技术不仅提高了AI模型的响应准确性，还扩展了其功能。希望这篇文章能帮助你在实际项目中应用这些技术，并激发你更多的创意。</p> 
<p>下一篇文章中，我们将继续探讨更多实际应用场景和高级功能，帮助你进一步掌握这一强大的工具。</p> 
<h4><a id="Spring_AIRAGAI_191"></a>Spring AI教程（十七）：实现RAG技术与评估AI响应</h4> 
<p>在前面的文章中，我们探讨了Prompt模板、嵌入技术和函数调用。这篇文章将进一步深入探讨如何在Spring AI中实现检索增强生成（RAG）技术，并评估AI响应的质量。</p> 
<h4><a id="RAG_195"></a>实现RAG技术</h4> 
<p>RAG技术通过将相关数据嵌入到Prompts中，提高AI模型的响应准确性。以下是实现RAG技术的关键概念和步骤：</p> 
<h5><a id="RAG_199"></a>RAG的关键概念</h5> 
<ul><li><strong>DocumentReader</strong>：一个Java函数接口，负责从数据源加载<code>List&lt;Document&gt;</code>。常见的数据源包括PDF、Markdown和JSON。</li><li><strong>Document</strong>：数据源的文本表示形式，包含描述内容的元数据。</li><li><strong>DocumentTransformer</strong>：负责以各种方式处理数据（例如，将文档分割成较小的部分或向<code>Document</code>添加额外的元数据）。</li><li><strong>DocumentWriter</strong>：允许将<code>Document</code>持久化到数据库中（通常是向量数据库）。</li><li><strong>Embedding</strong>：将数据表示为<code>List&lt;Double&gt;</code>，用于向量数据库计算用户查询与相关文档的相似性。</li></ul> 
<h5><a id="RAG_207"></a>示例：实现RAG</h5> 
<ol><li><strong>创建DocumentReader</strong></li></ol> 
<p>创建一个<code>DocumentReader</code>接口和其实现类，用于从数据源加载文档：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DocumentReader</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> <span class="token function">readDocuments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PdfDocumentReader</span> <span class="token keyword">implements</span> <span class="token class-name">DocumentReader</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> <span class="token function">readDocuments</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 从PDF文件中读取文档的实现逻辑</span>
        <span class="token comment">// 示例代码省略</span>
        <span class="token keyword">return</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Document</span><span class="token punctuation">(</span><span class="token string">"Example content"</span><span class="token punctuation">,</span> <span class="token string">"metadata"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li><strong>创建DocumentTransformer</strong></li></ol> 
<p>创建一个<code>DocumentTransformer</code>接口和其实现类，用于分割文档并添加元数据：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DocumentTransformer</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> <span class="token function">transform</span><span class="token punctuation">(</span><span class="token class-name">Document</span> document<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleDocumentTransformer</span> <span class="token keyword">implements</span> <span class="token class-name">DocumentTransformer</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> <span class="token function">transform</span><span class="token punctuation">(</span><span class="token class-name">Document</span> document<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 分割文档的实现逻辑</span>
        <span class="token comment">// 示例代码省略</span>
        <span class="token keyword">return</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li><strong>创建DocumentWriter</strong></li></ol> 
<p>创建一个<code>DocumentWriter</code>接口和其实现类，用于将文档写入向量数据库：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DocumentWriter</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token function">writeDocuments</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> documents<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VectorDatabaseDocumentWriter</span> <span class="token keyword">implements</span> <span class="token class-name">DocumentWriter</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeDocuments</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> documents<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 将文档写入向量数据库的实现逻辑</span>
        <span class="token comment">// 示例代码省略</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="4"><li><strong>实现RAG服务</strong></li></ol> 
<p>创建一个服务类，结合以上组件实现RAG技术：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springai<span class="token punctuation">.</span></span><span class="token class-name">OpenAiChatService</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RagService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DocumentReader</span> documentReader<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DocumentTransformer</span> documentTransformer<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">DocumentWriter</span> documentWriter<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">OpenAiChatService</span> openAiChatService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RagService</span><span class="token punctuation">(</span><span class="token class-name">DocumentReader</span> documentReader<span class="token punctuation">,</span> <span class="token class-name">DocumentTransformer</span> documentTransformer<span class="token punctuation">,</span> <span class="token class-name">DocumentWriter</span> documentWriter<span class="token punctuation">,</span> <span class="token class-name">OpenAiChatService</span> openAiChatService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>documentReader <span class="token operator">=</span> documentReader<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>documentTransformer <span class="token operator">=</span> documentTransformer<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>documentWriter <span class="token operator">=</span> documentWriter<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>openAiChatService <span class="token operator">=</span> openAiChatService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generateResponse</span><span class="token punctuation">(</span><span class="token class-name">String</span> userPrompt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> documents <span class="token operator">=</span> documentReader<span class="token punctuation">.</span><span class="token function">readDocuments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Document</span> document <span class="token operator">:</span> documents<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> transformedDocuments <span class="token operator">=</span> documentTransformer<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>
            documentWriter<span class="token punctuation">.</span><span class="token function">writeDocuments</span><span class="token punctuation">(</span>transformedDocuments<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">String</span> retrievedInformation <span class="token operator">=</span> <span class="token string">"retrieved information"</span><span class="token punctuation">;</span> <span class="token comment">// 示例代码省略</span>
        <span class="token class-name">String</span> combinedPrompt <span class="token operator">=</span> userPrompt <span class="token operator">+</span> <span class="token string">" 相关信息："</span> <span class="token operator">+</span> retrievedInformation<span class="token punctuation">;</span>
        <span class="token keyword">return</span> openAiChatService<span class="token punctuation">.</span><span class="token function">chat</span><span class="token punctuation">(</span>combinedPrompt<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="5"><li><strong>使用RAG服务</strong></li></ol> 
<p>创建一个控制器，使用RAG服务生成响应：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RagController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">RagService</span> ragService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/generate-rag-response"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">generateRagResponse</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> prompt<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> ragService<span class="token punctuation">.</span><span class="token function">generateResponse</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="Function_Calling_339"></a>函数调用（Function Calling）</h4> 
<p>函数调用技术允许注册自定义的用户函数，将大型语言模型连接到外部系统的API。Spring AI简化了支持函数调用所需的代码。</p> 
<h5><a id="_343"></a>示例：实现函数调用</h5> 
<ol><li><strong>创建自定义函数</strong></li></ol> 
<p>创建一个自定义函数，供AI模型调用：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomFunctionService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">customFunction</span><span class="token punctuation">(</span><span class="token class-name">String</span> input<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 执行自定义逻辑</span>
        <span class="token keyword">return</span> <span class="token string">"自定义函数处理的结果："</span> <span class="token operator">+</span> input<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li><strong>注册自定义函数</strong></li></ol> 
<p>在Spring AI中注册自定义函数：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springai<span class="token punctuation">.</span></span><span class="token class-name">FunctionRegistry</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FunctionConfig</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">FunctionRegistry</span> <span class="token function">functionRegistry</span><span class="token punctuation">(</span><span class="token class-name">CustomFunctionService</span> customFunctionService<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">FunctionRegistry</span> registry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FunctionRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registry<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">"customFunction"</span><span class="token punctuation">,</span> customFunctionService<span class="token operator">::</span><span class="token function">customFunction</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> registry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="3"><li><strong>调用自定义函数</strong></li></ol> 
<p>创建一个控制器，调用自定义函数：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestParam</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>springai<span class="token punctuation">.</span></span><span class="token class-name">FunctionRegistry</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FunctionController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">FunctionRegistry</span> functionRegistry<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/call-custom-function"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">callCustomFunction</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">String</span> input<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> functionRegistry<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">"customFunction"</span><span class="token punctuation">,</span> input<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="AI_407"></a>评估AI响应</h4> 
<p>有效评估AI系统的输出是确保其质量和可靠性的关键步骤。以下是评估AI响应的一些方法：</p> 
<h5><a id="1__411"></a>1. 人工评估</h5> 
<p>通过人工评估AI的响应，可以判断其准确性和相关性。虽然这种方法耗时，但对于关键任务非常重要。</p> 
<h5><a id="2__415"></a>2. 自动化评估</h5> 
<p>使用自动化工具和指标，如BLEU、ROUGE等，可以快速评估AI响应的质量。这种方法适合于大规模的测试和评估。</p> 
<h5><a id="3__419"></a>3. 用户反馈</h5> 
<p>收集用户反馈，了解AI响应的实际效果和改进空间。这种方法能够帮助开发者不断优化和改进AI模型。</p> 
<h4><a id="_423"></a>结论</h4> 
<p>通过理解和应用检索增强生成（RAG）技术和函数调用，Spring AI可以处理更复杂的任务和更大规模的数据。此外，有效评估AI响应能够确保其质量和可靠性。希望这篇文章能帮助你在实际项目中应用这些技术，并激发你更多的创意。</p> 
<p>下一篇文章中，我们将继续探讨更多实际应用场景和高级功能，帮助你进一步掌握这一强大的工具。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dd3b6d4d9d547f2ec96e02aa499a5007/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【人工智能】一文教会你使用和创建智能体</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f04e50c0b42601708d3a951731fffb0c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring AI教程（二十二）：更多模型支持与图像、音频处理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>