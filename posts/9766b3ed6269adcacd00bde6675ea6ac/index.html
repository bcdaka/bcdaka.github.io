<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>详解main函数参数argc、argv及如何传参 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9766b3ed6269adcacd00bde6675ea6ac/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="详解main函数参数argc、argv及如何传参">
  <meta property="og:description" content="目录
1、main()函数参数
2、main函数如何传参
2.1 环境准备
2.2 通过 Powershell 窗口传参
2.3 通过vs界面传参
3、int main() 和 int main(int argc, char *argv[]) 特点
1、main()函数参数 在C语言中，main函数可以带参数。main函数的原型通常为以下两种形式之一：
1、int main(void) 2、int main(int argc, char *argv[]) 在我们实际写代码时，大都是使用第一种方式，不给main函数传递参数，即 int main()。而实际上main函数也可以接收参数，并有其固定的格式，即第二种形式。
可以发现main函数接收两个参数，分别是 argc 和 argv[]：
argc 表示命令行参数的个数（argument count），包括程序本身。即 argc 的值至少为 1。argv[] 是一个指向字符串数组的指针，其中每个元素是一个指向传递给程序的参数的指针（argument vector），这些字符串是命令行参数。 到这里先知道 main 函数参数的形式即可，它第一个参数为 int 类型的变量，第二个参数是一个char* 类型的指针数组，关于char* argv[ ] 和 （char*）argv[] 的区别在下面文章中有详细讲解。
深入理解c指针（六）-CSDN博客
2、main函数如何传参 2.1 环境准备 为了能详细讲解，从vs新建项目开始。
上述是一个简单的测试代码，在传参后用来打印参数的个数、程序名称、命令行参数。 ps：若不了解指针相关知识请看本人C语言专栏内容，有对指针的详细讲解。 在 Visual Studio 中，Debug 模式和 Release 模式是两种常用的配置选项，它们在编译和运行项目时有一些重要的区别：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-21T18:36:15+08:00">
    <meta property="article:modified_time" content="2024-03-21T18:36:15+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">详解main函数参数argc、argv及如何传参</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="1%E3%80%81main()%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0-toc" style="margin-left:80px;"><a href="#1%E3%80%81main%28%29%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0" rel="nofollow">1、main()函数参数</a></p> 
<p id="2%E3%80%81main%E5%87%BD%E6%95%B0%E5%A6%82%E4%BD%95%E4%BC%A0%E5%8F%82-toc" style="margin-left:80px;"><a href="#2%E3%80%81main%E5%87%BD%E6%95%B0%E5%A6%82%E4%BD%95%E4%BC%A0%E5%8F%82" rel="nofollow">2、main函数如何传参</a></p> 
<p id="2.1%20%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87-toc" style="margin-left:120px;"><a href="#2.1%20%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87" rel="nofollow">2.1 环境准备</a></p> 
<p id="2.2%20%E9%80%9A%E8%BF%87%20Powershell%20%E7%AA%97%E5%8F%A3%E4%BC%A0%E5%8F%82-toc" style="margin-left:120px;"><a href="#2.2%20%E9%80%9A%E8%BF%87%20Powershell%20%E7%AA%97%E5%8F%A3%E4%BC%A0%E5%8F%82" rel="nofollow">2.2 通过 Powershell 窗口传参</a></p> 
<p id="2.3%20%E9%80%9A%E8%BF%87vs%E7%95%8C%E9%9D%A2%E4%BC%A0%E5%8F%82-toc" style="margin-left:120px;"><a href="#2.3%20%E9%80%9A%E8%BF%87vs%E7%95%8C%E9%9D%A2%E4%BC%A0%E5%8F%82" rel="nofollow">2.3 通过vs界面传参</a></p> 
<p id="3%E3%80%81int%20main()%20%E5%92%8C%20int%20main(int%20argc%2C%20char%20*argv%5B%5D)%20%E7%89%B9%E7%82%B9-toc" style="margin-left:80px;"><a href="#3%E3%80%81int%20main%28%29%20%E5%92%8C%20int%20main%28int%20argc%2C%20char%20*argv%5B%5D%29%20%E7%89%B9%E7%82%B9" rel="nofollow">3、int main() 和 int main(int argc, char *argv[]) 特点</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h4 id="1%E3%80%81main()%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span style="color:#fe2c24;">1、main()函数参数</span></h4> 
<p>在C语言中，main函数可以带参数。main函数的原型通常为以下两种形式之一：</p> 
<pre><code class="language-cpp">1、int main(void)

2、int main(int argc, char *argv[])</code></pre> 
<p>        在我们实际写代码时，大都是使用第一种方式，不给main函数传递参数，即 int main()。而实际上main函数也可以接收参数，并有其固定的格式，即第二种形式。</p> 
<p>可以发现main函数接收两个参数，分别是 <code><strong>argc 和</strong></code> <strong><code>argv[]</code></strong>：</p> 
<ul><li><code>argc</code> 表示命令行参数的个数（argument count），包括程序本身。即 argc 的值至少为 1。</li><li><code>argv[]</code> 是一个指向字符串数组的指针，其中每个元素是一个指向传递给程序的参数的指针（argument vector），这些字符串是命令行参数。</li></ul> 
<p>       到这里先知道 main 函数参数的形式即可，它第一个参数为 int 类型的变量，第二个参数是一个char* 类型的指针数组，关于char* argv[ ] 和 （char*）argv[] 的区别在下面文章中有详细讲解。</p> 
<p> <a href="https://blog.csdn.net/2301_81723939/article/details/136361148?spm=1001.2014.3001.5501" title="深入理解c指针（六）-CSDN博客">深入理解c指针（六）-CSDN博客</a></p> 
<h5></h5> 
<h4 id="2%E3%80%81main%E5%87%BD%E6%95%B0%E5%A6%82%E4%BD%95%E4%BC%A0%E5%8F%82"><span style="color:#fe2c24;">2、main函数如何传参</span></h4> 
<h5 id="2.1%20%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87"><span style="color:#fe2c24;">2.1 环境准备</span></h5> 
<p>为了能详细讲解，从vs新建项目开始。</p> 
<p><img alt="" height="658" src="https://images2.imgbox.com/87/53/pbjgatDm_o.png" width="1011"></p> 
<p><img alt="" height="671" src="https://images2.imgbox.com/2a/c2/AvLLrl0t_o.png" width="1011"></p> 
<p><img alt="" height="439" src="https://images2.imgbox.com/15/21/lfYmt2ij_o.png" width="883"></p> 
<p><img alt="" height="460" src="https://images2.imgbox.com/7f/2b/hwXOIAdT_o.png" width="723"></p> 
<p class="img-center"><img alt="" height="118" src="https://images2.imgbox.com/82/4f/WxRoVs2E_o.png" width="398"></p> 
<p><img alt="" height="452" src="https://images2.imgbox.com/11/95/A4sMmoXj_o.png" width="900"></p> 
<p>上述是一个简单的测试代码，在传参后用来打印参数的个数、程序名称、命令行参数。 </p> 
<p><strong>ps：</strong>若不了解指针相关知识请看本人C语言专栏内容，有对指针的详细讲解。 </p> 
<p><img alt="" height="406" src="https://images2.imgbox.com/eb/b1/LgCIiRLO_o.png" width="948"></p> 
<p>在 Visual Studio 中，Debug 模式和 Release 模式是两种常用的配置选项，它们在编译和运行项目时有一些重要的区别：</p> 
<ol><li> <p><strong>Debug 模式</strong>：</p> 
  <ul><li>在 Debug 模式下编译生成的文件通常包含调试信息，这些信息可以用于调试和跟踪代码执行过程。</li><li>编译优化等操作会被减少或禁用，使得生成的代码更易于调试。</li><li>编译时间可能会比较长，但生成的可执行文件体积通常比较大。</li><li>在 Debug 模式下运行程序时，可以使用调试器进行逐行调试、查看变量的值、设置断点等操作。</li></ul></li><li> <p><strong>Release 模式</strong>：</p> 
  <ul><li>在 Release 模式下编译生成的文件通常会进行优化，以提高程序的性能和减小体积。</li><li>调试信息通常会被剔除，使得生成的可执行文件更加精简。</li><li>生成的代码经过优化，执行速度可能会更快。</li><li>编译时间相对较短，生成的可执行文件体积通常比较小。</li></ul></li></ol> 
<p>       总的来说，Debug 模式用于开发阶段，便于调试和追踪问题；而 Release 模式用于发布产品版本，以提高性能和减小文件体积。在开发过程中，通常会在 Debug 模式下进行开发和调试，然后在发布时切换到 Release 模式进行编译和部署。</p> 
<h5></h5> 
<h5 id="2.2%20%E9%80%9A%E8%BF%87%20Powershell%20%E7%AA%97%E5%8F%A3%E4%BC%A0%E5%8F%82"><span style="color:#fe2c24;">2.2 通过 Powershell 窗口传参</span></h5> 
<p>         通过2.1部分的环境准备，在选择Debug模式并F5调试代码后，会在创建项目的位置生成Debug文件，打开 Debug 文件里面会自动生成一个可执行程序。</p> 
<p><strong>什么是可执行程序？</strong>可执行程序是一种计算机文件，其中包含了计算机能够直接执行的指令。在Windows系统中，可执行程序的文件扩展名通常是.exe。在类Unix系统中，可执行程序通常没有特定的文件扩展名，但可以通过文件权限和文件头部信息来指示其可执行性。</p> 
<p><img alt="" height="380" src="https://images2.imgbox.com/14/df/F5lLuHY0_o.png" width="1004"></p> 
<p><img alt="" height="288" src="https://images2.imgbox.com/95/98/gzrr11X7_o.png" width="881"> </p> 
<p><img alt="" height="304" src="https://images2.imgbox.com/d6/50/ElViSfbB_o.png" width="723"> </p> 
<p>        在Debug文件夹所在位置按住 Shift 键同时右击鼠标（Shift + 鼠标右键），在弹出的选项栏中选择 “ 在此处打开Powershell窗口 ”，如下图所示。</p> 
<p><img alt="" height="530" src="https://images2.imgbox.com/fc/6c/UQndwGp2_o.png" width="876"></p> 
<p><img alt="" height="324" src="https://images2.imgbox.com/d7/7b/3fWLYCBf_o.png" width="1106"> </p> 
<p><strong>当使用第二种形式的main函数时，int main(int argc, char *argv[ ])，记住以下几点：</strong></p> 
<p>（1）argc 代表命令行参数的个数，是一个整数值，虽然它也是一个参数，但不用去单独输入，在           给 argv[ ]传参后，系统会根据空格自动记录共有多少参数，并赋值给 argc。</p> 
<p>（2）argc 至少为1，因为<strong>第一个参数永远是程序的名称（即执行程序的文件名）</strong>所以，当没有额           外的命令行参数传入时，<code>argc</code>的值为1。</p> 
<p>（3）<code>argv</code>是一个指向字符串数组的指针，每个元素都是一个指向传递给程序的参数的指针。这些           <strong>参数以空格作为分隔符</strong>，在命令行中按顺序输入。</p> 
<p></p> 
<p><strong>如何理解char* argv[ ]？</strong></p> 
<p>        这是一个指针数组，说明这个数组的每个元素都是一个指针，而根据上面第三点，输入的每个参数都可以理解为是一个独立的字符串，并以空格分隔。故 argc[ ]中的每个指针都指向参数里对应的字符串。</p> 
<p>      如果你运行程序时输入命令 <code>.\program.exe arg1 arg2</code>，那么<code>argc</code>的值将为3，<code>argv</code>数组包含以下内容：</p> 
<ul><li><code>argv[0]</code>：指向程序名称 <code>./program</code> 的字符串指针</li><li><code>argv[1]</code>：指向 <code>arg1</code> 的字符串指针</li><li><code>argv[2]</code>：指向 <code>arg2</code> 的字符串指针</li></ul> 
<p><strong> 以刚刚建立的项目为例：</strong></p> 
<p>生成的可执行文件名称为 Project_3_21.exe ，同时我想输入的参数为564、*89！、54a、-/*/。那么在弹出的 Powershell 窗口中输入如下：</p> 
<p><img alt="" height="237" src="https://images2.imgbox.com/53/5a/C30ZkAlz_o.png" width="810"></p> 
<p><strong>注意：</strong></p> 
<p><strong>（1）第一个参数可执行程序名称前要加  .\ </strong></p> 
<p>       在 PowerShell 窗口输入可执行程序名称前加 <code>.\</code> 是为了指定当前目录下的可执行文件。这是因为 PowerShell 默认不会在当前目录下搜索可执行文件，而是在系统 PATH 变量中定义的路径中查找可执行文件。</p> 
<p>       当你输入一个可执行文件的名称时，PowerShell 会在 PATH 中定义的目录中查找该文件。如果可执行文件位于当前目录（即你当前所在的目录），而当前目录又不在 PATH 中，那么 PowerShell 就无法直接找到该文件，需要显式指定路径。</p> 
<p><strong>（2）每输入一个参数都要加一个空格，代表该字符串结束。</strong></p> 
<p><strong>（3）输入所有参数后按回车键，参数会传递到main函数同时运行代码，在该Powershell窗口输             出运行结果。</strong></p> 
<p><img alt="" height="253" src="https://images2.imgbox.com/a1/15/6DJU9BvK_o.png" width="858"></p> 
<p> 测试代码：</p> 
<pre><code class="language-cpp">#include&lt;stdio.h&gt;
int main(int argc, char* argv[])
{
    int i;

    printf("参数个数：%d\n", argc);

    // 打印程序的名称（第一个参数）
    printf("程序名称：%s\n", argv[0]);

    // 打印命令行参数
    for (i = 1; i &lt; argc; i++)
    {
        printf("参数 %d: %s\n", i, argv[i]);
    }
    return 0;
}</code></pre> 
<p> </p> 
<h5 id="2.3%20%E9%80%9A%E8%BF%87vs%E7%95%8C%E9%9D%A2%E4%BC%A0%E5%8F%82">2.3 通过vs界面传参</h5> 
<p> <img alt="" height="533" src="https://images2.imgbox.com/5a/71/myHMncdO_o.png" width="1165"></p> 
<p class="img-center"><img alt="" height="700" src="https://images2.imgbox.com/f5/c2/YV6b2NU7_o.png" width="405"></p> 
<p class="img-center"><img alt="" height="400" src="https://images2.imgbox.com/2f/70/v6cCp2fD_o.png" width="572"></p> 
<p><img alt="" height="149" src="https://images2.imgbox.com/0f/e6/sgzqjWLN_o.png" width="775"></p> 
<p>保存设置后 ctrl + F5 运行代码， 结果如下：</p> 
<p><img alt="" height="449" src="https://images2.imgbox.com/68/41/eqdTJhg9_o.png" width="975"></p> 
<p>        通过调试可以发现每个指针都指向了对应参数字符串的首地址，且这些参数保存到了一块连续的内存空间。本次只是做个简单的示例，由于以字符数组的形式存储，这样就可以增加程序的灵活性，比如通过参数传入某个文件的路径，这样就可以在代码里直接进行读取等。</p> 
<p><img alt="" height="226" src="https://images2.imgbox.com/d4/89/4ZkteyBU_o.png" width="925"></p> 
<h4 id="3%E3%80%81int%20main()%20%E5%92%8C%20int%20main(int%20argc%2C%20char%20*argv%5B%5D)%20%E7%89%B9%E7%82%B9"><span style="color:#fe2c24;">3、int main() 和 int main(int argc, char *argv[]) 特点</span></h4> 
<p>不给main函数传递参数的优势：</p> 
<ol><li>简单明了：不带参数的main函数写起来更简单，对于一些小型的程序来说，可能并不需要从外部接收额外的参数。</li><li>无需处理参数：不带参数的main函数不需要处理命令行传入的参数，省去了解析和验证参数的步骤，减少了程序的复杂性。</li></ol> 
<p>给main函数传参的优势：</p> 
<ol><li>灵活性：通过命令行参数可以向程序传递不同的数据，使得程序可以根据输入的参数执行不同的操作，增加了程序的灵活性和通用性。</li><li>交互性：可以通过命令行参数与用户进行交互，使得程序可以接收用户输入或配置信息，增强了程序的交互性。</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a1bfa2f0ad306044e74870ea3f10b022/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac电脑安装nvm(node包版本管理工具)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e132555f01a8600489d36ba0894ddcba/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43;利用开散列哈希表封装unordered_set,unordered_map</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>