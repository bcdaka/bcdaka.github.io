<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言：深入了解（联合体和枚举） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/671dbac30bc1a6c1af58515a7ac0ed6b/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="C语言：深入了解（联合体和枚举）">
  <meta property="og:description" content="目录
联合体
联合体的类型的声明
联合体的特点
相同成员的结构体和联合体对比
联合体大小的计算
联合体的使用举例
联合体的类型：判断联合体是大端还是小端
枚举类型
枚举类型声明
枚举类型的优点
枚举类型的使用
联合体 联合体的类型的声明 像结构体⼀样，联合体也是由⼀个或者多个成员构成，这些成员可以不同的类型。
但是编译器只为最⼤的成员分配⾜够的内存空间。联合体的特点是所有成员共⽤同⼀块内存空间。所
以联合体也叫：共⽤体。
给联合体其中⼀个成员赋值，其他成员的值也跟着变化。
联合体输出的结果为什么是4呢？
联合体的特点 联合的成员是共⽤同⼀块内存空间的，这样⼀个联合变量的⼤⼩，⾄少是最⼤成员的⼤⼩（因为联合
⾄少得有能⼒保存最⼤的那个成员）。
联合体是共⽤同⼀块内存空间的所以不能同时使用联合体，不能同时使用
我们可以看到3个地址都是一样的。
union a { char a; int b; }; int main() { union a p = { 0 }; printf(&#34;%zd\n&#34;, sizeof(union a)); printf(&#34;%p\n&#34;, &amp;p); printf(&#34;%p\n&#34;, &amp;p.a); printf(&#34;%p\n&#34;, &amp;p.b); } 相同成员的结构体和联合体对比 struct bp//结构体 { char a; int b; }; union ar//联合体 { char a; int b; }; 联合体大小的计算 联合的⼤⼩⾄少是最⼤成员的⼤⼩。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-01T11:32:59+08:00">
    <meta property="article:modified_time" content="2024-06-01T11:32:59+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言：深入了解（联合体和枚举）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4 id="%E2%80%8B%E7%BC%96%E8%BE%91" style="text-align:center;"><img alt="" height="426" src="https://images2.imgbox.com/a4/58/qPEoYlEK_o.gif" width="758"></h4> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E8%81%94%E5%90%88%E4%BD%93-toc" style="margin-left:80px;"><a href="#%E8%81%94%E5%90%88%E4%BD%93" rel="nofollow">联合体</a></p> 
<p id="%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%A3%B0%E6%98%8E-toc" style="margin-left:120px;"><a href="#%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%A3%B0%E6%98%8E" rel="nofollow">联合体的类型的声明</a></p> 
<p id="%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E7%89%B9%E7%82%B9-toc" style="margin-left:120px;"><a href="#%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E7%89%B9%E7%82%B9" rel="nofollow">联合体的特点</a></p> 
<p id="%E7%9B%B8%E5%90%8C%E6%88%90%E5%91%98%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8C%E8%81%94%E5%90%88%E4%BD%93%E5%AF%B9%E6%AF%94-toc" style="margin-left:120px;"><a href="#%E7%9B%B8%E5%90%8C%E6%88%90%E5%91%98%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8C%E8%81%94%E5%90%88%E4%BD%93%E5%AF%B9%E6%AF%94" rel="nofollow">相同成员的结构体和联合体对比</a></p> 
<p id="%E8%81%94%E5%90%88%E4%BD%93%E5%A4%A7%E5%B0%8F%E7%9A%84%E8%AE%A1%E7%AE%97-toc" style="margin-left:120px;"><a href="#%E8%81%94%E5%90%88%E4%BD%93%E5%A4%A7%E5%B0%8F%E7%9A%84%E8%AE%A1%E7%AE%97" rel="nofollow">联合体大小的计算</a></p> 
<p id="%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%BE%E4%BE%8B-toc" style="margin-left:120px;"><a href="#%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%BE%E4%BE%8B" rel="nofollow">联合体的使用举例</a></p> 
<p id="%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%9A%E5%88%A4%E6%96%AD%E8%81%94%E5%90%88%E4%BD%93%E6%98%AF%E5%A4%A7%E7%AB%AF%E8%BF%98%E6%98%AF%E5%B0%8F%E7%AB%AF-toc" style="margin-left:120px;"><a href="#%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%9A%E5%88%A4%E6%96%AD%E8%81%94%E5%90%88%E4%BD%93%E6%98%AF%E5%A4%A7%E7%AB%AF%E8%BF%98%E6%98%AF%E5%B0%8F%E7%AB%AF" rel="nofollow">联合体的类型：判断联合体是大端还是小端</a></p> 
<p id="%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B-toc" style="margin-left:80px;"><a href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B" rel="nofollow">枚举类型</a></p> 
<p id="%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E-toc" style="margin-left:120px;"><a href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E" rel="nofollow">枚举类型声明</a></p> 
<p id="%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BC%98%E7%82%B9-toc" style="margin-left:120px;"><a href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BC%98%E7%82%B9" rel="nofollow">枚举类型的优点</a></p> 
<p id="%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BD%BF%E7%94%A8-toc" style="margin-left:120px;"><a href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BD%BF%E7%94%A8" rel="nofollow">枚举类型的使用</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h4 id="%E8%81%94%E5%90%88%E4%BD%93">联合体</h4> 
<h5 id="%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%A3%B0%E6%98%8E">联合体的类型的声明</h5> 
<p>像结构体⼀样，联合体也是由⼀个或者多个成员构成，这些成员可以不同的类型。<br> 但是编译器只为最⼤的成员分配⾜够的内存空间。联合体的特点是所有成员共⽤同⼀块内存空间。所<br> 以联合体也叫：共⽤体。<br> 给联合体其中⼀个成员赋值，其他成员的值也跟着变化。</p> 
<p><img alt="" height="468" src="https://images2.imgbox.com/89/d8/vpoEWsBf_o.png" width="609"></p> 
<p>联合体输出的结果为什么是4呢？</p> 
<hr> 
<h5 id="%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E7%89%B9%E7%82%B9">联合体的特点</h5> 
<p>联合的成员是共⽤同⼀块内存空间的，这样⼀个联合变量的⼤⼩，⾄少是最⼤成员的⼤⼩（因为联合<br> ⾄少得有能⼒保存最⼤的那个成员）。</p> 
<p><span style="color:#fe2c24;">联合体是共⽤同⼀块内存空间的<strong>所以不能同时使用联合体，不能同时使用</strong></span></p> 
<p>我们可以看到3个地址都是一样的。</p> 
<p><img alt="" height="394" src="https://images2.imgbox.com/44/c4/ePplN4kJ_o.png" width="593"></p> 
<p><img alt="" height="498" src="https://images2.imgbox.com/70/a9/5xm2Y1Op_o.png" width="660"></p> 
<pre><code class="language-cpp">union a
{
	char a;
	int b;
};

int main()
{
	union a p = { 0 };
	printf("%zd\n", sizeof(union a));
	printf("%p\n", &amp;p);
	printf("%p\n", &amp;p.a);
	printf("%p\n", &amp;p.b);

}
</code></pre> 
<hr> 
<h5 id="%E7%9B%B8%E5%90%8C%E6%88%90%E5%91%98%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8C%E8%81%94%E5%90%88%E4%BD%93%E5%AF%B9%E6%AF%94">相同成员的结构体和联合体对比</h5> 
<pre><code class="language-cpp">struct bp//结构体
{
	char a;
	int b;
};
</code></pre> 
<pre><code class="language-cpp">union ar//联合体
{
	char a;
	int b;
};</code></pre> 
<h4><img alt="" height="555" src="https://images2.imgbox.com/e0/ec/X3dVuPe8_o.png" width="1200"></h4> 
<p><img alt="" height="245" src="https://images2.imgbox.com/4f/40/gHJn2cO5_o.png" width="519"></p> 
<p><img alt="" height="238" src="https://images2.imgbox.com/ab/fa/TOG84iQW_o.png" width="477"></p> 
<hr> 
<h5 id="%E8%81%94%E5%90%88%E4%BD%93%E5%A4%A7%E5%B0%8F%E7%9A%84%E8%AE%A1%E7%AE%97">联合体大小的计算</h5> 
<p>联合的⼤⼩⾄少是最⼤成员的⼤⼩。<br> 当最⼤成员⼤⼩不是最⼤对⻬数的整数倍的时候，就要对⻬到最⼤对⻬数的整数倍。</p> 
<p><img alt="" height="595" src="https://images2.imgbox.com/68/78/QFDbBSQ4_o.png" width="1200"></p> 
<h4></h4> 
<h4><img alt="" height="519" src="https://images2.imgbox.com/f5/de/CVgBtWuk_o.png" width="1095"></h4> 
<hr> 
<h5 id="%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E4%BD%BF%E7%94%A8%E4%B8%BE%E4%BE%8B">联合体的使用举例</h5> 
<p>⽐如，我们要搞⼀个活动，要上线⼀个礼品兑换单，礼品兑换单中有三种商品：图书、杯⼦、衬衫。<br> 每⼀种商品都有：<span style="color:#fe2c24;">库存量、价格、商品类型</span>和商品类型相关的<strong>其他信息</strong>。</p> 
<blockquote> 
 <p>图书：书名、作者、⻚数<br> 杯⼦：设计<br> 衬衫：设计、可选颜⾊、可选尺⼨</p> 
</blockquote> 
<h4><img alt="" height="397" src="https://images2.imgbox.com/7f/3c/9w2zl1cD_o.png" width="879"></h4> 
<hr> 
<p></p> 
<p>下面这代码，当我们要描述一个杯⼦的时候，只用到<strong>公共属性和设计属性</strong>其他属性都没用这样非常浪费空间</p> 
<pre><code class="language-cpp">struct lx
{
	//公共属性
	int stock_number; //库存量
	double price; //定价
	int item_type; //商品类型
	//特殊属性
	char title[20]; //书名
	char author[20]; //作者
	int num_pages; //⻚数

	char design[30]; //设计

	int colors; //颜⾊
	int sizes; //尺⼨
};</code></pre> 
<p>上述的结构其实设计的很简单，⽤起来也⽅便，但是结构的设计中包含了所有礼品的各种属性，这样<br> 使得结构体的⼤⼩就会偏⼤，⽐较浪费内存。因为对于礼品兑换单中的商品来说，只有部分属性信息<br> 是常⽤的。⽐如：<br> 商品是图书，就不需要design、colors、sizes。?<br> 所以我们就可以把公共属性单独写出来，剩余属于各种商品本⾝的属性使⽤联合体起来，这样就可以<br> 介绍所需的内存空间，⼀定程度上节省了内存。</p> 
<p><strong><span style="color:#fe2c24;">下面这联合体在同一时间只能使用一次结构体，不能同时使用2个</span></strong></p> 
<p><img alt="" height="762" src="https://images2.imgbox.com/7a/31/qjUv0yPQ_o.png" width="631"></p> 
<pre><code class="language-cpp">struct lx
{
	//公共属性
	int stock_number; //库存量
	double price; //定价
	int item_type; //商品类型

	//特殊属性
	union //不完全声明只能用一次
	{
		//同一时间只能用一次结构体，不能同时用2个

		struct //不完全声明只能用一次
		{
			char title[20]; //书名
			char author[20]; //作者
			int num_pages; //⻚数
		}shu;

		struct //只能用一次
		{
			char design[30]; //设计
		}bei;

		struct //只能用一次
		{
			int colors; //颜⾊
			int sizes; //尺⼨
		}chens;

	}tssx;

};</code></pre> 
<hr> 
<h5 id="%E8%81%94%E5%90%88%E4%BD%93%E7%9A%84%E7%B1%BB%E5%9E%8B%EF%BC%9A%E5%88%A4%E6%96%AD%E8%81%94%E5%90%88%E4%BD%93%E6%98%AF%E5%A4%A7%E7%AB%AF%E8%BF%98%E6%98%AF%E5%B0%8F%E7%AB%AF">联合体的类型：判断联合体是大端还是小端</h5> 
<p>把1赋值给a，在内存中是小端存放的所以用char类型的来进行判断第一个字节是不是大端小端</p> 
<pre><code class="language-cpp">union a
{
	int a;
	char b;

};

int main()
{
	union a p = { 0 };
	p.a = 1;// 小端:01 00 00 00
	if (p.b == 1)//判断第1个字节是不是1
	{
		printf("小端\n");
	}
	else
	{
		printf("大端\n");
	}
}</code></pre> 
<hr> 
<h4 id="%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B">枚举类型</h4> 
<h5 id="%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E">枚举类型声明</h5> 
<blockquote> 
 <p>枚举顾名思义就是⼀⼀列举。<br> 把可能的取值⼀⼀列举。<br> ⽐如我们现实⽣活中：<br> ⼀周的星期⼀到星期⽇是有限的7天，可以⼀⼀列举?<br> 性别有：男、⼥、保密，也可以⼀⼀列举<br> ⽉份有12个⽉，也可以⼀⼀列举?<br> 三原⾊，也是可以意义列举</p> 
</blockquote> 
<pre><code class="language-cpp">enum a//星期
{
	z1 = 1,//周1
	z2,//周2
	z3,//周3
	z4,//周4
	z5,//周5
	z6,//周6
	z7 //周7
};

enum r//性别
{
	nan,
	nv,
	bm
};

enum e//颜色
{
	RED,
	GREEN,
	BLUE
};
</code></pre> 
<hr> 
<p>下面这枚举我们可以看到不赋值的话，是从0开始的</p> 
<p><img alt="" height="307" src="https://images2.imgbox.com/dd/c8/lOXjC4PX_o.png" width="392"></p> 
<hr> 
<p>赋值的话可以打印赋值的数值</p> 
<p><img alt="" height="346" src="https://images2.imgbox.com/49/96/Nfze1du1_o.png" width="430"></p> 
<hr> 
<p>给其中一个赋值的话后面的都会递增1</p> 
<p><img alt="" height="306" src="https://images2.imgbox.com/6f/4d/Lx8k6R4p_o.png" width="456"></p> 
<p><img alt="" height="327" src="https://images2.imgbox.com/ee/a0/Zv1tPW3K_o.png" width="395"></p> 
<hr> 
<h5 id="%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BC%98%E7%82%B9">枚举类型的优点</h5> 
<blockquote> 
 <p>为什么使⽤枚举<br> 我们可以使⽤ #define 定义常量，为什么⾮要使⽤枚举<br> 枚举的优点：<br> 1. 增加代码的可读性和可维护性<br> 2. 和#define定义的标识符⽐较枚举有类型检查，更加严谨。<br> 3. 便于调试，预处理阶段会删除 #define 定义的符号<br> 4. 使⽤⽅便，⼀次可以定义多个常量<br> 5. 枚举常量是遵循作⽤域规则的，枚举声明在函数内，只能在函数内使⽤</p> 
</blockquote> 
<hr> 
<h5 id="%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%BD%BF%E7%94%A8" style="background-color:transparent;">枚举类型的使用</h5> 
<pre><code class="language-cpp">//打印菜单
cd()
{
	printf("***************************\n");
	printf("****** 1.加法   2.减法 ****\n");
	printf("****** 3.除法   4.乘法 ****\n");
	printf("************ 0.退出 *******\n");
}
//枚举
enum p
{
	tc,//0
	jian,//1
	jia,//2
	chu,//3
	cheng//4
};
jian_ys(int a,int b)//加法
{
	int r = a + b;
	printf("%d\n", r);
}
jia_ys(int a, int b)//减法
{
	int r = a - b;
	printf("%d\n", r);
}
chu_ys(int a, int b)//除法
{
	int r = a / b;
	printf("%d\n", r);
}
cheng_ys(int a, int b)//乘法
{
	int r = a * b;
	printf("%d\n", r);
}
int main()
{
	int a = 0;
	int b = 0;
	int r = 0;
	do
	{
		//打印菜单
		cd();
		scanf("%d", &amp;r);
		switch (r)
		{
		case tc:
			printf("退出\n");
			break;
		case jian://1
			printf("请输入2个数值:\n");
			scanf("%d %d", &amp;a, &amp;b);
			jian_ys(a,b);
			break;//2
		case jia:
			printf("请输入2个数值:\n");
			scanf("%d %d", &amp;a, &amp;b);
			jia_ys(a, b);
			break;
		case chu://3
			printf("请输入2个数值:\n");
			scanf("%d %d", &amp;a, &amp;b);
			chu_ys(a, b);
			break;
		case cheng://4
			printf("请输入2个数值:\n");
			scanf("%d %d", &amp;a, &amp;b);
			cheng_ys(a, b);
			break;
		default:
			printf("输入错误请重新输入\n");
			break;
		}
	} while (r);
}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d3c7ef7c46f5f79676f81b7e428b98fb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AI编程新手快速体验SpringCloud Alibaba 集成AI功能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/45e58e9901999c69007196a48b7ce5db/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">django基于大数据&#43;Spring的新冠肺炎疫情实时监控系统设计和实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>