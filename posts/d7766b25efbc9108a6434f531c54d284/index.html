<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android ORM 框架之 greenDAO - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/d7766b25efbc9108a6434f531c54d284/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Android ORM 框架之 greenDAO">
  <meta property="og:description" content="Android ORM 框架之 greenDAO 官网地址GitHub地址greenDAO 描述greenDAO 特点greenDAO 核心类DaoMasterDaoSessionDAO实体 使用 greenDAO将 greenDAO 插件添加到项目中创建实体实体常用注解 初始化 DaoSession操作数据(CRUD) 官网地址 GitHub地址 greenDAO 描述 greenDAO 是一个轻量且快速的 Android ORM，可将对象映射到 SQLite 数据库，
greenDAO 针对 Android 进行了高度优化，可提供出色的性能并消耗最少的内存。
ORM： 对象关系映射，是一种程序技术，用于实现面向对象编程语言里不同类型系统的数据之间的转换。是一个可在编程语言里使用的——“虚拟对象数据库”。
greenDAO 特点 体积小：小于100KB，以保持较低的构建时间并避免65k方法限制简单：简洁直接易于使用的API，V3带注释高性能：可能是 Android 最快的 ORM，由智能代码生成驱动强大的联接：跨实体查询，甚至对复杂关系进行链式联接灵活的属性类型：使用自定义类或枚举来表示实体中的数据数据库加密：greenDAO支持SQLCipher来保证用户数据的安全安全且富有表现力的查询 API：QueryBuilder 使用属性常量来避免拼写错误稳定：greenDAO 自 2011 年以来一直存在并被无数著名应用程序使用(GitHub 12k&#43; stars) greenDAO 核心类 DaoMaster 官方释义：使用 greenDAO 的入口点。DaoMaster 持有数据库对象（SQLiteDatabase）并管理特定模式的 DAO 类（而不是对象）。它有静态方法来创建或删除表。它的内部类 OpenHelper 和 DevOpenHelper 是 SQLiteOpenHelper 实现，用于在 SQLite 数据库中创建架构。我的理解：创建数据库的框架。DaoMaster 做了createAllTables dropAllTables的操作；其内部类 OpenHelper 初始化时调用了 DaoMaster 的 createAllTables 方法、内部类 DevOpenHelper 在数据库升级时调用了 DaoMaster 的 dropAllTables 方法； DaoSession 官方释义：管理特定模式的所有可用 DAO 对象，您可以使用其中一种 getter 方法获取这些对象。DaoSession 还提供了一些通用的持久化方法，如实体的插入、加载、更新、刷新和删除。最后，DaoSession 对象还跟踪身份范围。我的理解：获取各个实体对应的 DAO 对象、操作具体的 DAO 对象(初始化、注册、清除缓存数据(GreenDao默认开启了缓存))； DAO 官方释义：数据访问对象（DAO）持续存在并查询实体。对于每个实体，greenDAO 都会生成一个 DAO。它比 DaoSession 有更多的持久化方法，例如：count、loadAll 和 insertInTx。我的理解：对应实际生成的实体类。Dao 类中包含了 实体的属性以及 queryBuilde 的引用列名、createTable 时的SQL语句、dropTable 时的SQL语句、get 实体属性值到语句、将光标当前位置值 set 到实体属性中，有更多的方法来操作数据库元素； 实体 官方释义：持久化对象。通常，实体是使用标准 Java 属性（如 POJO 或 JavaBean）表示数据库行的对象。我的理解：就是使用了 @Entity 注解的类对象； 使用 greenDAO 将 greenDAO 插件添加到项目中 将以下 gradle 配置添加到 Android 项目的根 build.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-01-25T00:36:44+08:00">
    <meta property="article:modified_time" content="2024-01-25T00:36:44+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android ORM 框架之 greenDAO</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Android ORM 框架之 greenDAO</h4> 
 <ul><li><a href="#httpsgreenrobotorggreendao_1" rel="nofollow">官网地址</a></li><li><a href="#GitHubhttpsgithubcomgreenrobotgreenDAO_2" rel="nofollow">GitHub地址</a></li><li><a href="#greenDAO__3" rel="nofollow">greenDAO 描述</a></li><li><a href="#greenDAO__8" rel="nofollow">greenDAO 特点</a></li><li><a href="#greenDAO__17" rel="nofollow">greenDAO 核心类</a></li><li><ul><li><a href="#DaoMaster_19" rel="nofollow">DaoMaster</a></li><li><a href="#DaoSession_22" rel="nofollow">DaoSession</a></li><li><a href="#DAO_25" rel="nofollow">DAO</a></li><li><a href="#_28" rel="nofollow">实体</a></li></ul> 
  </li><li><a href="#_greenDAO_32" rel="nofollow">使用 greenDAO</a></li><li><ul><li><a href="#_greenDAO__33" rel="nofollow">将 greenDAO 插件添加到项目中</a></li><li><a href="#_68" rel="nofollow">创建实体</a></li><li><ul><li><a href="#_98" rel="nofollow">实体常用注解</a></li></ul> 
   </li><li><a href="#_DaoSession_131" rel="nofollow">初始化 DaoSession</a></li><li><a href="#CRUD_180" rel="nofollow">操作数据(CRUD)</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="httpsgreenrobotorggreendao_1"></a><a href="https://greenrobot.org/greendao/" rel="nofollow">官网地址</a></h2> 
<h2><a id="GitHubhttpsgithubcomgreenrobotgreenDAO_2"></a><a href="https://github.com/greenrobot/greenDAO">GitHub地址</a></h2> 
<h2><a id="greenDAO__3"></a>greenDAO 描述</h2> 
<blockquote> 
 <p><strong>greenDAO</strong> 是一个轻量且快速的 Android ORM，可将对象映射到 SQLite 数据库，<br> <strong>greenDAO</strong> 针对 Android 进行了高度优化，可提供出色的性能并消耗最少的内存。<br> <img src="https://images2.imgbox.com/ca/16/Bhu2SGnU_o.png" alt="在这里插入图片描述"><br> <strong>ORM：</strong> 对象关系映射，是一种程序技术，用于实现面向对象编程语言里不同类型系统的数据之间的转换。是一个可在编程语言里使用的——“虚拟对象数据库”。</p> 
</blockquote> 
<h2><a id="greenDAO__8"></a>greenDAO 特点</h2> 
<ul><li>体积小：小于100KB，以保持较低的构建时间并避免65k方法限制</li><li>简单：简洁直接易于使用的API，V3带注释</li><li>高性能：可能是 Android 最快的 ORM，由智能代码生成驱动</li><li>强大的联接：跨实体查询，甚至对复杂关系进行链式联接</li><li>灵活的属性类型：使用自定义类或枚举来表示实体中的数据</li><li>数据库加密：greenDAO支持SQLCipher来保证用户数据的安全</li><li>安全且富有表现力的查询 API：QueryBuilder 使用属性常量来避免拼写错误</li><li>稳定：greenDAO 自 2011 年以来一直存在并被无数著名应用程序使用(GitHub 12k+ stars)</li></ul> 
<h2><a id="greenDAO__17"></a>greenDAO 核心类</h2> 
<p><img src="https://images2.imgbox.com/99/68/MoR4Stjo_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="DaoMaster_19"></a>DaoMaster</h3> 
<ul><li>官方释义：使用 greenDAO 的入口点。DaoMaster 持有数据库对象（SQLiteDatabase）并管理特定模式的 DAO 类（而不是对象）。它有静态方法来创建或删除表。它的内部类 OpenHelper 和 DevOpenHelper 是 SQLiteOpenHelper 实现，用于在 SQLite 数据库中创建架构。</li><li>我的理解：创建数据库的框架。DaoMaster 做了createAllTables dropAllTables的操作；其内部类 OpenHelper 初始化时调用了 DaoMaster 的 createAllTables 方法、内部类 DevOpenHelper 在数据库升级时调用了 DaoMaster 的 dropAllTables 方法；</li></ul> 
<h3><a id="DaoSession_22"></a>DaoSession</h3> 
<ul><li>官方释义：管理特定模式的所有可用 DAO 对象，您可以使用其中一种 getter 方法获取这些对象。DaoSession 还提供了一些通用的持久化方法，如实体的插入、加载、更新、刷新和删除。最后，DaoSession 对象还跟踪身份范围。</li><li>我的理解：获取各个实体对应的 DAO 对象、操作具体的 DAO 对象(初始化、注册、清除缓存数据(GreenDao默认开启了缓存))；</li></ul> 
<h3><a id="DAO_25"></a>DAO</h3> 
<ul><li>官方释义：数据访问对象（DAO）持续存在并查询实体。对于每个实体，greenDAO 都会生成一个 DAO。它比 DaoSession 有更多的持久化方法，例如：count、loadAll 和 insertInTx。</li><li>我的理解：对应实际生成的实体类。Dao 类中包含了 实体的属性以及 queryBuilde 的引用列名、createTable 时的SQL语句、dropTable 时的SQL语句、get 实体属性值到语句、将光标当前位置值 set 到实体属性中，有更多的方法来操作数据库元素；</li></ul> 
<h3><a id="_28"></a>实体</h3> 
<ul><li>官方释义：持久化对象。通常，实体是使用标准 Java 属性（如 POJO 或 JavaBean）表示数据库行的对象。</li><li>我的理解：就是使用了 @Entity 注解的类对象；</li></ul> 
<h2><a id="_greenDAO_32"></a>使用 greenDAO</h2> 
<h3><a id="_greenDAO__33"></a>将 greenDAO 插件添加到项目中</h3> 
<ol><li>将以下 gradle 配置添加到 Android 项目的根 build.gradle 文件中</li></ol> 
<pre><code class="prism language-java">buildscript <span class="token punctuation">{<!-- --></span>
    repositories <span class="token punctuation">{<!-- --></span>
        <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    dependencies <span class="token punctuation">{<!-- --></span>
        classpath <span class="token string">'org.greenrobot:greendao-gradle-plugin:3.3.1'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>将以下 gradle 配置添加到 应用程序模块的 build.gradle 文件中</li></ol> 
<pre><code class="prism language-java">plugins <span class="token punctuation">{<!-- --></span>
    id <span class="token string">'org.greenrobot.greendao'</span>
<span class="token punctuation">}</span>
 
dependencies <span class="token punctuation">{<!-- --></span>
    implementation <span class="token string">'org.greenrobot:greendao:3.3.0'</span>
<span class="token punctuation">}</span>

<span class="token comment">// 配置 greendao 参数</span>
greendao <span class="token punctuation">{<!-- --></span>
    schemaVersion <span class="token number">1</span> <span class="token comment">// 数据库当前版本</span>
    targetGenDir <span class="token string">'src/main/java'</span> <span class="token comment">// 生成数据库文件的目录</span>
    daoPackage <span class="token string">"com.example.model"</span> <span class="token comment">// 生成的 DAO、DaoMaster 和 DaoSession 的包名称(默认为源实体的包名称)</span>
    <span class="token comment">// generateTests 设为 true 以自动生成单元测试</span>
    <span class="token comment">// targetGenDirTests 生成的单元测试应存储的目录(默认为 src/androidTest/java)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/96/cc/3lN42dY5_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li>点击 Sync Project with Gradle Files 引入即可<br> <img src="https://images2.imgbox.com/35/ed/jMVdzVId_o.png" alt="在这里插入图片描述"></li></ol> 
<h3><a id="_68"></a>创建实体</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>gaojc<span class="token punctuation">.</span>app<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>greenrobot<span class="token punctuation">.</span>greendao<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Entity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>greenrobot<span class="token punctuation">.</span>greendao<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Id</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>greenrobot<span class="token punctuation">.</span>greendao<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Index</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>greenrobot<span class="token punctuation">.</span>greendao<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">NotNull</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Entity</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserBean</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@Index</span>
    <span class="token keyword">private</span> <span class="token keyword">long</span> studentId<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@NotNull</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@NotNull</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>写完实体类需 Make Project 重新编译项目，它会生成 DaoMaster、DaoSession 和 实体Dao 等类</strong></p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/18/2a/eJh9GlT1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e5/a7/qPUgXPfs_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h4><a id="_98"></a>实体常用注解</h4> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Entity</span>：将 <span class="token class-name">Java</span> 类转换为数据库支持的实体。指示 greenDAO 生成代码（例如 <span class="token class-name">UserBeanDao</span>）
    <span class="token annotation punctuation">@Entity</span>（）括号内可加入更详细的设置，如：
      nameInDb <span class="token operator">=</span> <span class="token string">"TABLE_NAME"</span> ——<span class="token operator">&gt;</span> 声明该表的表名，默认取类名
      createInDb <span class="token operator">=</span> <span class="token boolean">true</span> ——<span class="token operator">&gt;</span> 是否创建表，默认为<span class="token boolean">true</span>
      generateConstructors <span class="token operator">=</span> <span class="token boolean">true</span> ——<span class="token operator">&gt;</span> 是否生成含所有参数的构造函数，默认为<span class="token boolean">true</span>
      generateGettersSetters <span class="token operator">=</span> <span class="token boolean">true</span> ——<span class="token operator">&gt;</span> 是否生成getter<span class="token operator">/</span>setter，默认为<span class="token boolean">true</span>

<span class="token annotation punctuation">@Id</span>：选择一个<span class="token keyword">long</span> <span class="token operator">/</span> <span class="token class-name">Long</span>属性作为实体ID，主键
    <span class="token annotation punctuation">@Id</span>（）括号可加入 autoincrement <span class="token operator">=</span> <span class="token boolean">true</span> 表明自增长

<span class="token annotation punctuation">@NotNull</span>：表示该字段不可以为空

<span class="token annotation punctuation">@Transient</span>：该注解表示这个属性将不会作为数据表中的一个字段

<span class="token annotation punctuation">@Index</span>：可以为相应的数据库列创建数据库索引

<span class="token annotation punctuation">@Unique</span>：向数据库列添加 UNIQUE 约束，表示该字段唯一

<span class="token annotation punctuation">@Generated</span>：由 greendao 生成的构造函数或方法

<span class="token annotation punctuation">@Property</span>：表示该属性将作为表的一个字段
    <span class="token annotation punctuation">@Property</span><span class="token punctuation">(</span>nameInDb <span class="token operator">=</span> <span class="token string">"NAME"</span><span class="token punctuation">)</span> 用来声明其变量在表中的实际字段名为 NAME

<span class="token annotation punctuation">@OrderBy</span>：排序

<span class="token annotation punctuation">@Keep</span>：指定在下次运行 greenDAO 生成过程中应保留目标，在<span class="token class-name">Entity</span>类本身上使用此注释将禁用任何类修改

<span class="token annotation punctuation">@ToOne</span>：一对一

<span class="token annotation punctuation">@ToMany</span>：一对多
</code></pre> 
<h3><a id="_DaoSession_131"></a>初始化 DaoSession</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>gaojc<span class="token punctuation">.</span>app</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">Application</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">android<span class="token punctuation">.</span>database<span class="token punctuation">.</span>sqlite<span class="token punctuation">.</span></span><span class="token class-name">SQLiteDatabase</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>gaojc<span class="token punctuation">.</span>app<span class="token punctuation">.</span>greenDao<span class="token punctuation">.</span></span><span class="token class-name">DaoMaster</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>gaojc<span class="token punctuation">.</span>app<span class="token punctuation">.</span>greenDao<span class="token punctuation">.</span></span><span class="token class-name">DaoSession</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个 application 类继承 Application，在此完成 DaoSession 的初始化</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyApplication</span> <span class="token keyword">extends</span> <span class="token class-name">Application</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">DaoMaster<span class="token punctuation">.</span>DevOpenHelper</span> mHelper<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">SQLiteDatabase</span> db<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">DaoMaster</span> mDaoMaster<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">DaoSession</span> mDaoSession<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">MyApplication</span> instances<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        instances <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token function">setDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">MyApplication</span> <span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> instances<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">setDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 注意：默认的 DaoMaster.DevOpenHelper 会在数据库升级时，删除所有的表，意味着这将导致数据的丢失（可创建临时表迁移数据）</span>
        <span class="token comment">// 此处 user_db 表示数据库名称</span>
        mHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DaoMaster<span class="token punctuation">.</span>DevOpenHelper</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"user_db"</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        db <span class="token operator">=</span> mHelper<span class="token punctuation">.</span><span class="token function">getWritableDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mDaoMaster <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DaoMaster</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mDaoSession <span class="token operator">=</span> mDaoMaster<span class="token punctuation">.</span><span class="token function">newSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">DaoSession</span> <span class="token function">getDaoSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> mDaoSession<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">SQLiteDatabase</span> <span class="token function">getDb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> db<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="CRUD_180"></a>操作数据(CRUD)</h3> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">top<span class="token punctuation">.</span>gaojc<span class="token punctuation">.</span>app<span class="token punctuation">.</span>utils</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>gaojc<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">MyApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>gaojc<span class="token punctuation">.</span>app<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">UserBean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">top<span class="token punctuation">.</span>gaojc<span class="token punctuation">.</span>app<span class="token punctuation">.</span>greenDao<span class="token punctuation">.</span></span><span class="token class-name">UserBeanDao</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataUtil</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 增</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">insertData</span><span class="token punctuation">(</span><span class="token class-name">UserBean</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDaoSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUserBeanDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 删</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">deleteData</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDaoSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUserBeanDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">deleteByKey</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 改</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">updateData</span><span class="token punctuation">(</span><span class="token class-name">UserBean</span> user<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDaoSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUserBeanDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 查</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">queryData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserBean</span><span class="token punctuation">&gt;</span></span> allUsers <span class="token operator">=</span> <span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDaoSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUserBeanDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loadAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 查询所有数据</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserBean</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> <span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDaoSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUserBeanDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">queryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token class-name">UserBeanDao<span class="token punctuation">.</span>Properties<span class="token punctuation">.</span>Name</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 根据姓名查找</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6a5caebaa3f0d6cb387b70be6dce8844/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【算法专题】动态规划之简单多状态 dp 问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e421f2a726de7a508429b65d501be737/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spark实战项目：电商数据分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>