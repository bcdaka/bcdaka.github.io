<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Flink-DataWorks第六部分：数据运维（第62天） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/dd5d9769db3f212c68b8b344480b81d4/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Flink-DataWorks第六部分：数据运维（第62天）">
  <meta property="og:description" content="系列文章目录 运维中心
4.1 功能概述
4.2 操作流程
4.2.1 操作流程概览
4.2.2 步骤一：查看周期任务配置
4.2.3 步骤二：测试周期任务
4.2.4 步骤三：周期任务补历史数据
4.2.5 步骤四：查看周期实例
4.2.6 步骤五：查看执行结果
4.2.7 步骤六：创建自定义监控规则 文章目录 系列文章目录前言4. 运维中心4.1 功能概述4.2 操作流程4.2.1 操作流程概览4.2.2 步骤一：查看周期任务配置4.2.3 步骤二：测试周期任务4.2.4 步骤三：周期任务补历史数据4.2.5 步骤四：查看周期实例4.2.6 步骤五：查看执行结果4.2.7 步骤六：创建自定义监控规则 前言 本文主要详解了DataWorks的数据运维，
后续章节：flink业务开发
4. 运维中心 4.1 功能概述 运维中心包括运维大屏、实时任务运维、周期任务运维、手动任务运维、智能监控、智能诊断、资源运维和引擎运维功能模块，为用户提供任务操作与状态、引擎、资源等多方位的运维能力。
4.2 操作流程 登录DataWorks控制台，单击左侧导航栏的数据建模与开发 &gt; 运维中心，在下拉框中选择对应工作空间后单击进入运维中心。或者直接点击上方的运维中心进入。
4.2.1 操作流程概览 操作流程可以分为两个阶段：
阶段一：测试验证调度任务
步骤一：查看周期任务配置
为避免周期任务调度不符合预期，建议在任务发布后先检查周期任务配置的调度参数、调度资源组等是否正确。若不符合预期，请修改相应配置并重新发布。
步骤二：测试周期任务
通过冒烟测试功能验证周期任务在生产环境执行是否正确。若执行出错，请根据报错及时处理，保障任务可正常运行。
步骤三：周期任务补历史数据
通过补数据功能可重新计算历史时间段内的数据。
步骤四：查看周期实例
周期任务发布成功后会根据调度周期生成周期实例，如果在DataStudio中配置的实例生成方式为T&#43;1次日生成，则任务将在第二天开始调度；如果配置为发布后即时生成，则任务当天便会调度。用户可查看调度实例的生成及运行情况，判断任务的周期调度是否正常。
步骤五：查看执行结果
节点执行测试或补数据操作后，用户可查看数据的写入情况。
阶段二：监控周期调度任务
步骤六：创建自定义监控规则
用户可根据业务需求，为周期调度任务配置智能监控规则，监控任务的调度运行状况，保障该任务后续可以正常调度。
步骤七：创建资源组自动运维规则
通过自定义独享资源组的监控规则，对独享资源组的使用率及资源组上等待的实例数设置监控报警，并进行相关运维操作。
4.2.2 步骤一：查看周期任务配置 为避免周期任务调度不符合预期，建议在任务发布后先查看该任务的配置（例如，任务的调度参数、节点依赖关系等）是否正确。
（1）进入运维中心。
（2）查找目标节点。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-11T07:08:30+08:00">
    <meta property="article:modified_time" content="2024-08-11T07:08:30+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Flink-DataWorks第六部分：数据运维（第62天）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>系列文章目录</h2> 
<ol start="4"><li>运维中心<br> 4.1 功能概述<br> 4.2 操作流程<br> 4.2.1 操作流程概览<br> 4.2.2 步骤一：查看周期任务配置<br> 4.2.3 步骤二：测试周期任务<br> 4.2.4 步骤三：周期任务补历史数据<br> 4.2.5 步骤四：查看周期实例<br> 4.2.6 步骤五：查看执行结果<br> 4.2.7 步骤六：创建自定义监控规则</li></ol> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li>系列文章目录</li><li>前言</li><li>4. 运维中心</li><li><ul><li>4.1 功能概述</li><li>4.2 操作流程</li><li><ul><li>4.2.1 操作流程概览</li><li>4.2.2 步骤一：查看周期任务配置</li><li>4.2.3 步骤二：测试周期任务</li><li>4.2.4 步骤三：周期任务补历史数据</li><li>4.2.5 步骤四：查看周期实例</li><li>4.2.6 步骤五：查看执行结果</li><li>4.2.7 步骤六：创建自定义监控规则</li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_16"></a>前言</h2> 
<p>本文主要详解了DataWorks的数据运维，<br> 后续章节：flink业务开发</p> 
<h2><a id="4_%09_22"></a>4. 运维中心</h2> 
<h3><a id="41_%09_23"></a>4.1 功能概述</h3> 
<p>运维中心包括运维大屏、实时任务运维、周期任务运维、手动任务运维、智能监控、智能诊断、资源运维和引擎运维功能模块，为用户提供任务操作与状态、引擎、资源等多方位的运维能力。<br> <img src="https://images2.imgbox.com/42/3e/ciTXQrSe_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/87/75/r1wo3Skl_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/57/f0/Tneo0j0I_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="42_%09_28"></a>4.2 操作流程</h3> 
<p>登录DataWorks控制台，单击左侧导航栏的数据建模与开发 &gt; 运维中心，在下拉框中选择对应工作空间后单击进入运维中心。或者直接点击上方的运维中心进入。<br> <img src="https://images2.imgbox.com/bc/95/mrkKF0bI_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="421_%09_32"></a>4.2.1 操作流程概览</h4> 
<p>操作流程可以分为两个阶段：<br> 阶段一：测试验证调度任务<br> 步骤一：查看周期任务配置<br> 为避免周期任务调度不符合预期，建议在任务发布后先检查周期任务配置的调度参数、调度资源组等是否正确。若不符合预期，请修改相应配置并重新发布。<br> 步骤二：测试周期任务<br> 通过冒烟测试功能验证周期任务在生产环境执行是否正确。若执行出错，请根据报错及时处理，保障任务可正常运行。<br> 步骤三：周期任务补历史数据<br> 通过补数据功能可重新计算历史时间段内的数据。<br> 步骤四：查看周期实例<br> 周期任务发布成功后会根据调度周期生成周期实例，如果在DataStudio中配置的实例生成方式为T+1次日生成，则任务将在第二天开始调度；如果配置为发布后即时生成，则任务当天便会调度。用户可查看调度实例的生成及运行情况，判断任务的周期调度是否正常。<br> 步骤五：查看执行结果<br> 节点执行测试或补数据操作后，用户可查看数据的写入情况。<br> 阶段二：监控周期调度任务<br> 步骤六：创建自定义监控规则<br> 用户可根据业务需求，为周期调度任务配置智能监控规则，监控任务的调度运行状况，保障该任务后续可以正常调度。<br> 步骤七：创建资源组自动运维规则<br> 通过自定义独享资源组的监控规则，对独享资源组的使用率及资源组上等待的实例数设置监控报警，并进行相关运维操作。</p> 
<h4><a id="422_%09_50"></a>4.2.2 步骤一：查看周期任务配置</h4> 
<p>为避免周期任务调度不符合预期，建议在任务发布后先查看该任务的配置（例如，任务的调度参数、节点依赖关系等）是否正确。</p> 
<p>（1）进入运维中心。<br> （2）查找目标节点。<br> a.在左侧导航栏单击周期任务运维 &gt; 周期任务。<br> b.在周期任务页面搜索目标节点。<br> （3）查看节点详情。<br> a.单击目标节点，进入节点DAG图。<br> b.单击展开详情，查看节点的详细信息。<br> 本文示例在周期任务列表中，查找已发布的result_table节点，查看其调度参数、调度资源组配置是否正确。<br> <img src="https://images2.imgbox.com/2f/b4/MuDXKRX2_o.png" alt="在这里插入图片描述"></p> 
<p>另外，周期任务中还可以对任务进行其他管理。<br> <img src="https://images2.imgbox.com/c3/91/kKMdbGkm_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/48/22/G0xMfBmK_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/13/03/RgeeAZgf_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8f/b3/eI0E9p2W_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3e/1a/evlESwy6_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="423_%09_74"></a>4.2.3 步骤二：测试周期任务</h4> 
<p>通过对周期任务执行冒烟测试，验证该任务在生产环境的调度运行是否符合预期。该操作将真实执行代码逻辑。<br> 注意：如果在数据开发环节进行了冒烟测试，这里可以跳过。<br> （1）进入冒烟测试<br> 可以通过以下两种方式进入冒烟测试<br>  方式一：在周期任务列表，单击目标任务操作列的测试。</p> 
<p> 方式二：在目标任务的DAG图，右键单击该任务，选择测试。<br> <img src="https://images2.imgbox.com/b6/7b/GZDsKCUP_o.png" alt="在这里插入图片描述"></p> 
<p>（2）配置任务测试运行的业务日期及运行时间，单击确定。<br> 任务测试运行时会生成测试实例，用户可进入周期任务运维 &gt; 测试实例页面查看实例的运行详情，判断其运行状况。<br> 本文示例测试result_table节点的运行是否成功。<br> <img src="https://images2.imgbox.com/3e/e0/bx2etwoh_o.png" alt="在这里插入图片描述"></p> 
<p>测试结果：<br> <img src="https://images2.imgbox.com/e0/6f/MhyhIifP_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="424_%09_94"></a>4.2.4 步骤三：周期任务补历史数据</h4> 
<p>周期任务开发完成并提交发布后，会按照调度配置定时运行。如果希望重新计算历史时间段内的数据，则可通过补数据功能实现。<br> （1）进入补数据。可通过如下两种方式进入补数据页面。<br>  方式一：在周期任务列表，单击目标任务操作列的补数据。<br>  方式二：在目标任务的DAG图，右键单击该任务，选择补数据。<br> （2）选择补数据模式。<br> 可根据需求选择如下补数据模式：<br> <img src="https://images2.imgbox.com/b3/7f/BxySZFlk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/16/ad/g1Tv9vlk_o.png" alt="在这里插入图片描述"></p> 
<p>（3）配置补数据参数。<br> 根据业务需求配置补数据的业务日期、待补数据的节点等。<br> 本文示例使用当前节点模式，对result_table节点补业务日期20231108~20231109时间段的数据。配置步骤参考下图。<br> <img src="https://images2.imgbox.com/30/64/hi5LxCFt_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1c/93/Tl8reivB_o.png" alt="在这里插入图片描述"></p> 
<p>点击确定后，可以在补数据实例中看到补数据实例。<br> <img src="https://images2.imgbox.com/ac/8e/9cRxy7EQ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="425_%09_113"></a>4.2.5 步骤四：查看周期实例</h4> 
<p>周期任务发布成功后会根据调度周期生成周期实例，如果在DataStudio中配置的实例生成方式为T+1次日生成，则任务将在第二天开始调度；如果配置为发布后即时生成，则任务当天便会调度。用户可查看生成的周期实例，判断任务的调度运行是否正常。<br> （1）进入周期实例。<br> 在运维中心左侧导航栏，单击周期任务运维 &gt; 周期实例。<br> （2）查看周期实例。<br> 根据周期任务的调度配置，查看该任务是否调度生成相应周期实例并运行正常。</p> 
<p>若实例为未运行状态，建议进行如下处理：<br> 找到未运行的节点，然后右键展开父节点，然后选择层数（可以选择最多的层数）。此时可以看到上游所有依赖的节点，看一下具体哪一个报错了或者没有运行导致该节点没有运行。<br> <img src="https://images2.imgbox.com/09/91/QjkjEsxX_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="426_%09_124"></a>4.2.6 步骤五：查看执行结果</h4> 
<p>周期任务进行测试或补数据后，除了在临时查询中使用sql查询数据外，还可以进入数据地图查看。在数据地图查询目标表，通过查看表详情确认数据写入是否正确。<br> 进入数据地图，搜索result_table，然后点击表进去<br> <img src="https://images2.imgbox.com/70/26/YiZkfybJ_o.png" alt="在这里插入图片描述"></p> 
<p>即可以看表的元数据信息，以及进行数据预览</p> 
<p><img src="https://images2.imgbox.com/b3/31/kLoq5zXz_o.png" alt="在这里插入图片描述"></p> 
<p>注意：<br> （1）RAM用户默认无MaxCompute引擎中生产表的查询权限。用户可进入数据地图，在表的详情页申请该表权限。详情请参见申请表权限。<br> （2）在使用临时查询时，默认是开发环境的表，如果需要查询生产环境的表需要加上项目名。</p> 
<pre><code>set odps.sql.allow.fullscan=true;

select * from dwhmcx.result_table;
</code></pre> 
<p><img src="https://images2.imgbox.com/0e/1d/8kSTS5Rk_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="427_%09_145"></a>4.2.7 步骤六：创建自定义监控规则</h4> 
<p>节点测试验证无误后，可为节点自定义监控规则，监控节点运行状态。当节点运行出错时DataWorks会根据配置发送相应报警，以便用户及时发现并处理异常，保障节点日后可正常调度。<br> （1）在左侧导航栏单击智能监控 &gt; 规则管理。<br> （2）新建自定义规则。<br>  单击新建自定义规则。<br>  配置规则信息。<br> 可根据业务需求，自定义所需规则。</p> 
<p>在配置规则时，可以为单个任务节点配置，也可以为基线或工作空间或业务流程或资源组配置，配置详情请参见规则管理。<br> 通常用的有基线管理和工作空间和业务流程，在这里，以工作空间为例进行学习。<br>  规则名称设置为工作空间监控<br>  对象类型设置为工作空间<br>  规则对象选择dwhmcx，并添加<br>  触发条件也有多种选择，这里选择出错<br> <img src="https://images2.imgbox.com/6c/a3/nipW64EB_o.png" alt="在这里插入图片描述"></p> 
<p> 报警方式选择短信<br>  接收人勾选任务责任人以及相关开发人员<br>  配置完成后点击确认</p> 
<p><img src="https://images2.imgbox.com/f6/66/D6o26R2T_o.png" alt="在这里插入图片描述"></p> 
<p>常见问题：</p> 
<pre><code>https://help.aliyun.com/zh/dataworks/support/faq-9/?spm=a2c4g.11186623.0.0.40f627f7ms4p5i
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/aecd8f217411c5c5504f332f6ffdd86d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">批发行业进销存-webview 读取NFC，会员卡 源码CyberWinApp-SAAS 本地化及未来之窗行业应用跨平台架构</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7bc078eb3253b132e5701d4c8af8a0e1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Temu（拼多多跨境电商） API接口： 获取商品详情信息</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>