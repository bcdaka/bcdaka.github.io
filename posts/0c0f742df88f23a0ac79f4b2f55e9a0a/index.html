<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>学习日志8.7--Security Zone防火墙安全区域 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/0c0f742df88f23a0ac79f4b2f55e9a0a/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="学习日志8.7--Security Zone防火墙安全区域">
  <meta property="og:description" content="安全区域实验拓扑开始之前先通过一台主机和防火墙相连，设置主机的IP地址和网关，开启防火墙设置防火墙接口g1/0/1的IP地址为192.168.1.254，将防火墙设置为主机的网关，尝试能不能用主机ping通防火墙。尝试之后，发现失败，不能正常通信。学习之后了解到防火墙的安全区域，才知道不能ping通。
防火墙通过设置不同的安全区域对来自不同的网络流量加以区分，用来表达所连接的网络的安全程度。防火墙会通过将接口划分到一个划定的安全区域，表示这个接口所连接的网络属于一个安全区域。而这个接口本身处于一个Local的安全区域，其所连接的网络又表示一个安全区域。
例如，防火墙将接口4划分到安全区域C之后，表示的是接口4所连接的网络属于安全区域C，而接口4并不属于安全区域C。
防火墙默认的安全区域：Trust（信任区）比如内网公司的内部网络、Untrust（非信任区）比如互联网Internet外网容易受到攻击流量、DMZ（Demilitarized Zone）介于安全与非安全的一种区域比如服务器，既服务内网又服务外网，当被外网攻击的时候服务器容易变成肉鸡攻击内网，介于安全与非安全的区域。
注意，防火墙自己的接口也有安全区域，叫做Local，意味着防火墙的接口是属于Local的安全区域。如果防火墙的接口需要使用，就必须将这个接口划分到安全区域，才能使用，可以理解为划分到安全区域就是对这个接口进行管控，对这个接口通过的流量进行管控，只用防火墙的接口进行管控之后才能被使用。
在刚刚的试验中，因为只是对接口进行IP地址的配置，没有将接口划分进安全区域，所以不能使用，主机也就无法ping通防火墙。
在防火墙中通过命令来查看防火墙的安全区域的配置
命令：&lt;FW01&gt;dis current-configuration，查看当前配置有四个安全区域，分别是：Local安全程度是100、Trust安全程度85、Untrust安全程度5、DMZ安全程度50。可以看到在默认情况下g0/0/0口已经默认属于Trust区域，所以在防火墙上g0/0/0可以不用给g0/0/0划分安全区域，可以直接使用。
那将一个接口划分到安全区域，只要进入这个安全区域，然后添加接口就可以。
命令：[FW01]firewall zone trust，在系统视图下进入安全区域
命令：[FW01-zone-trust]add interface GigabitEthernet 1/0/1，在这个安全区域内添加接口
然后查看配置信息，g1/0/1接口已经添加进Trust安全区域。
现在接口已经划分了安全区域，试验测试一下主机能不能ping通防火墙发现主机还是不能和防火墙连接通信。
发现这个主机所在的网络是Trust的区域，而这个接口g1/0/1是属于Local的区域，在主机通信的时候，相当于从Trust的区域去访问Local的区域。但是每个Local的接口自身是包含一个访问控制安全策略，包括http、https、ping、ssh、snmp、telnet等权限的限制，只有开启这些权限接口才能为这些服务
命令：[FW01-GigabitEthernet1/0/1]service-manage all permit，打开接口g1/0/1的服务权限查看配置情况就已经打开了接口的服务权限。
开启接口下的服务权限之后，再用主机去ping防火墙，通信成功。
接口的服务权限是拦截两个安全区域之间流量来使用的。
注意系统的默认安全区域的优先级（安全程度）是不能更改的
命令：[FW01-zone-trust]set priority 80，设置优先级，后面加数字
提示错误，不能修改（modify）系统安全区域的优先级。
防火墙通过受信任级别来控制他的安全程度，收信任级别越高，其安全程度越高。
防火墙支持自定义安全区域。
命令：[FW01]firewall zone name test1，在系统视图下自定义安全区域后面跟上安全区域的名字test1
查看一下配置，在每个安全区域都有一个id，这个id（4-9）可以自己配置，
命令：[FW01]firewall zone name test2 id 5，创建防火墙区域名字是test2配置的id是5
查看配置。
然后对每一个创建的安全区域都要设置一个安全优先级
命令：[FW01-zone-test1]set priority 15，在之前创建的test1下设置优先级15查看配置情况。
设置好优先级之后，给定义好的安全区域添加接口
注意，一个接口只能设置在一个安全区域内。
命令：[FW01-zone-test1]add interface GigabitEthernet 1/0/1，这里是给自定义的安全区域添加接口为g1/0/1，但是在默认的Trust安全区域内已经添加了g1/0/1，意味着一个接口只能划分在一个安全区域。
这个时候就要undo掉之前设置的接口
命令：[FW01-zone-trust]undo add interface GigabitEthernet 1/0/1，在Trust安全区域下undo掉添加的接口然后查看配置信息，已经取消掉，g1/0/1在Trust区域上
然后在把G1/0/1接口添加到test1上。
命令：[FW01]firewall zone test1，进入到test1安全区域
命令：[FW01-zone-test1]add interface GigabitEthernet 1/0/1，将g1/0/1接口划分到test1查看配置信息">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-07T19:06:11+08:00">
    <meta property="article:modified_time" content="2024-08-07T19:06:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">学习日志8.7--Security Zone防火墙安全区域</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>安全区域实验拓扑<img alt="" height="372" src="https://images2.imgbox.com/63/31/fwElbXBQ_o.png" width="854">开始之前先通过一台主机和防火墙相连，设置主机的IP地址和网关，开启防火墙设置防火墙接口g1/0/1的IP地址为192.168.1.254，将防火墙设置为主机的网关，尝试能不能用主机ping通防火墙。<img alt="" height="666" src="https://images2.imgbox.com/eb/17/zPE9MjDK_o.png" width="977">尝试之后，发现失败，不能正常通信。学习之后了解到防火墙的安全区域，才知道不能ping通。</p> 
<p>防火墙通过设置不同的安全区域对来自不同的网络流量加以区分，用来表达所连接的网络的安全程度。防火墙会通过将接口划分到一个划定的安全区域，表示这个接口所连接的网络属于一个安全区域。而这个接口本身处于一个Local的安全区域，其所连接的网络又表示一个安全区域。<img alt="" height="828" src="https://images2.imgbox.com/4e/53/AGKWvY8x_o.jpg" width="1200"></p> 
<p>例如，防火墙将接口4划分到安全区域C之后，表示的是接口4所连接的网络属于安全区域C，而接口4并不属于安全区域C。</p> 
<p>防火墙默认的安全区域：Trust（信任区）比如内网公司的内部网络、Untrust（非信任区）比如互联网Internet外网容易受到攻击流量、DMZ（Demilitarized Zone）介于安全与非安全的一种区域比如服务器，既服务内网又服务外网，当被外网攻击的时候服务器容易变成肉鸡攻击内网，介于安全与非安全的区域。</p> 
<p>注意，防火墙自己的接口也有安全区域，叫做Local，意味着防火墙的接口是属于Local的安全区域。如果防火墙的接口需要使用，就必须将这个接口划分到安全区域，才能使用，可以理解为划分到安全区域就是对这个接口进行管控，对这个接口通过的流量进行管控，只用防火墙的接口进行管控之后才能被使用。</p> 
<p>在刚刚的试验中，因为只是对接口进行IP地址的配置，没有将接口划分进安全区域，所以不能使用，主机也就无法ping通防火墙。</p> 
<p>在防火墙中通过命令来查看防火墙的安全区域的配置<br> 命令：&lt;FW01&gt;dis current-configuration，查看当前配置<img alt="" height="368" src="https://images2.imgbox.com/c4/a1/tnjNXQjA_o.png" width="753">有四个安全区域，分别是：Local安全程度是100、Trust安全程度85、Untrust安全程度5、DMZ安全程度50。可以看到在默认情况下g0/0/0口已经默认属于Trust区域，所以在防火墙上g0/0/0可以不用给g0/0/0划分安全区域，可以直接使用。</p> 
<p>那将一个接口划分到安全区域，只要进入这个安全区域，然后添加接口就可以。<br> 命令：[FW01]firewall zone trust，在系统视图下进入安全区域<br> 命令：[FW01-zone-trust]add interface GigabitEthernet 1/0/1，在这个安全区域内添加接口<br><img alt="" height="190" src="https://images2.imgbox.com/32/57/ZNYlb53U_o.png" width="755">然后查看配置信息，g1/0/1接口已经添加进Trust安全区域。<br> 现在接口已经划分了安全区域，试验测试一下主机能不能ping通防火墙<img alt="" height="666" src="https://images2.imgbox.com/de/ef/Xa7dZhrq_o.png" width="977">发现主机还是不能和防火墙连接通信。<br> 发现这个主机所在的网络是Trust的区域，而这个接口g1/0/1是属于Local的区域，在主机通信的时候，相当于从Trust的区域去访问Local的区域。但是每个Local的接口自身是包含一个访问控制安全策略，包括http、https、ping、ssh、snmp、telnet等权限的限制，只有开启这些权限接口才能为这些服务<br> 命令：[FW01-GigabitEthernet1/0/1]service-manage all permit，打开接口g1/0/1的服务权限<img alt="" height="323" src="https://images2.imgbox.com/53/89/BVvTRwKb_o.png" width="706">查看配置情况就已经打开了接口的服务权限。<br> 开启接口下的服务权限之后，再用主机去ping防火墙，通信成功。<img alt="" height="372" src="https://images2.imgbox.com/04/c9/v4ERyMtf_o.png" width="780"><br> 接口的服务权限是拦截两个安全区域之间流量来使用的。</p> 
<p>注意系统的默认安全区域的优先级（安全程度）是不能更改的<br> 命令：[FW01-zone-trust]set priority 80，设置优先级，后面加数字<br><img alt="" height="89" src="https://images2.imgbox.com/fb/c8/z4lXDohR_o.png" width="843">提示错误，不能修改（modify）系统安全区域的优先级。</p> 
<p>防火墙通过受信任级别来控制他的安全程度，收信任级别越高，其安全程度越高。</p> 
<p>防火墙支持自定义安全区域。<br> 命令：[FW01]firewall zone name test1，在系统视图下自定义安全区域后面跟上安全区域的名字test1<img alt="" height="164" src="https://images2.imgbox.com/1c/e3/zppZjZsi_o.png" width="613"><br> 查看一下配置，在每个安全区域都有一个id，这个id（4-9）可以自己配置，<br> 命令：[FW01]firewall zone name test2 id 5，创建防火墙区域名字是test2配置的id是5<img alt="" height="157" src="https://images2.imgbox.com/f5/47/8wknayc3_o.png" width="563"><br> 查看配置。<br> 然后对每一个创建的安全区域都要设置一个安全优先级<br> 命令：[FW01-zone-test1]set priority 15，在之前创建的test1下设置优先级15<img alt="" height="172" src="https://images2.imgbox.com/90/9d/e9VYUBjf_o.png" width="684">查看配置情况。<br> 设置好优先级之后，给定义好的安全区域添加接口</p> 
<p>注意，一个接口只能设置在一个安全区域内。<br> 命令：[FW01-zone-test1]add interface GigabitEthernet 1/0/1，这里是给自定义的安全区域添加接口为g1/0/1，但是在默认的Trust安全区域内已经添加了g1/0/1，意味着一个接口只能划分在一个安全区域。<br><img alt="" height="102" src="https://images2.imgbox.com/71/4a/gZ9MaMIV_o.png" width="877"><br> 这个时候就要undo掉之前设置的接口<br> 命令：[FW01-zone-trust]undo add interface GigabitEthernet 1/0/1，在Trust安全区域下undo掉添加的接口<img alt="" height="215" src="https://images2.imgbox.com/4e/5d/xGmYIbkl_o.png" width="668">然后查看配置信息，已经取消掉，g1/0/1在Trust区域上<br> 然后在把G1/0/1接口添加到test1上。<br> 命令：[FW01]firewall zone test1，进入到test1安全区域<br> 命令：[FW01-zone-test1]add interface GigabitEthernet 1/0/1，将g1/0/1接口划分到test1<img alt="" height="187" src="https://images2.imgbox.com/8c/e6/xVTzyzc0_o.png" width="811">查看配置信息</p> 
<p>用命令：[FW01]display  current-configuration，可以查看当前防火墙配置的信息<img alt="" height="294" src="https://images2.imgbox.com/3e/2e/m6qs8eQs_o.png" width="568"><br> 接口g1/0/1的接口服务权限已经全部打开<img alt="" height="534" src="https://images2.imgbox.com/cb/55/s50nI5fZ_o.png" width="630"><br> 自己添加的安全区域也能查看到test1和test2。</p> 
<p>将test2安全区域删除<br> 命令：[FW01]undo firewall zone name test2，在系统视图下undo掉安全区域 test2<img alt="" height="537" src="https://images2.imgbox.com/ac/98/ZjgkfWI7_o.png" width="765">查看配置信息，test2安全区域已经被删除。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e011470c22a7d3e98df0117cedcea932/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL —— 约束</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3ed54d4b7325da2e21af2d6d8c41ca78/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vue3使用el-table实现多级表头合并列</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>