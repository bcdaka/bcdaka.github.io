<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pywebview桌面程序开发（技术路线：前端&#43;Python，全网独一份！！！！！！） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9ebabba30fe8fe9a14d20c264ea39319/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="pywebview桌面程序开发（技术路线：前端&#43;Python，全网独一份！！！！！！）">
  <meta property="og:description" content="一、pywebview 官网：https://pywebview.flowrl.com/
1、简介 pywebview声称Build GUI for your Python program with JavaScript, HTML, and CSS。就是可以使用web技术来实现桌面应用程序开发。其内核我理解仍然是浏览器，只不过将浏览器封装成系统窗口，这样就可以将web无缝切换到桌面应用，相比pyQt等重武器还是比较方便的。
对于目前比较火的electron，Python的加入给应用程序提供了上限，据说打包的大小也比electron小。
2、安装 pip install pywebview Hello world 的demo:
import webview webview.create_window(&#39;Hello world&#39;, &#39;https://pywebview.flowrl.com/&#39;) webview.start() 3、依赖 windows程序依赖pythonnet（要求 &gt; .NET 4.0），pythonnet可以让python调用.NET代码。
为了使用最新版本的 Chromium（Chromium是谷歌的开源项目，国产的所有 “双核浏览器”，都是基于 Chromium 开发的，甚至 Chrome 也是基于它。），需要安装WebView2。
选择Web应用还是原生应用来开发是一种在通用性和本地权限之前的权衡。WebApp兼容的范围很广，而且Web前端代码基于浏览器天生跨平台，而且前端框架多好开发。而原生应用有很大本地权限，可以进行各种文件和操作系统接口的调用。WebView可以结合这两者的优点进行开发。WebView2允许你在本地App里面嵌入web相关的技术（例如HTML，CSS和JavaScript）。WebView2控件使用微软的Edge作为渲染引擎，你可以嵌入一部分或者整个App都用WebView来做。
WebView2下载地址：https://developer.microsoft.com/en-us/microsoft-edge/webview2/?form=MA13LH
4、使用 4.1、最简单示例 import webview window = webview.create_window(&#39;Woah dude!&#39;, &#39;https://pywebview.flowrl.com&#39;) webview.start() create_window:
返回窗口实例，该实例可以使用许多窗口操作和DOM函数，可创建任意数量窗口，在GUI循环启动后创建的窗口会立即显示。所有打开的窗口都以列表形式存储在webview.windows中。create_window第二个参数可以是url（远程url或本地url），也可设置html来加载html。html与url同时存在，html优先级高。
4.2、http server示例 pywebview提供一个与WSGI兼容的http服务器。
import webview webview.create_window(&#39;Woah dude!&#39;, &#39;index.html&#39;) webview.start(http_server=True) 将http_server设为true
一般使用外部WSGI兼容的http服务器，将服务器对象作为url传递
from flask import Flask import webview server = Flask(__name__, static_folder=&#39;.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-03-01T23:00:37+08:00">
    <meta property="article:modified_time" content="2024-03-01T23:00:37+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pywebview桌面程序开发（技术路线：前端&#43;Python，全网独一份！！！！！！）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="pywebview_0"></a>一、pywebview</h3> 
<p>官网：https://pywebview.flowrl.com/</p> 
<h3><a id="1_4"></a>1、简介</h3> 
<p>pywebview声称Build GUI for your Python program with JavaScript, HTML, and CSS。就是可以使用web技术来实现桌面应用程序开发。其内核我理解仍然是浏览器，只不过将浏览器封装成系统窗口，这样就可以将web无缝切换到桌面应用，相比pyQt等重武器还是比较方便的。</p> 
<p>对于目前比较火的electron，Python的加入给应用程序提供了上限，据说打包的大小也比electron小。</p> 
<h3><a id="2_10"></a>2、安装</h3> 
<pre><code class="prism language-python">pip install pywebview
</code></pre> 
<p>Hello world 的demo:</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> webview
webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span><span class="token string">'Hello world'</span><span class="token punctuation">,</span> <span class="token string">'https://pywebview.flowrl.com/'</span><span class="token punctuation">)</span>
webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="3_24"></a>3、依赖</h3> 
<p>windows程序依赖pythonnet（要求 &gt; .NET 4.0），pythonnet可以让python调用.NET代码。</p> 
<p>为了使用最新版本的 Chromium（Chromium是谷歌的开源项目，国产的所有 “双核浏览器”，都是基于 Chromium 开发的，甚至 Chrome 也是基于它。），需要安装WebView2。</p> 
<p>选择Web应用还是原生应用来开发是一种在通用性和本地权限之前的权衡。WebApp兼容的范围很广，而且Web前端代码基于浏览器天生跨平台，而且前端框架多好开发。而原生应用有很大本地权限，可以进行各种文件和操作系统接口的调用。WebView可以结合这两者的优点进行开发。WebView2允许你在本地App里面嵌入web相关的技术（例如HTML，CSS和JavaScript）。WebView2控件使用微软的Edge作为渲染引擎，你可以嵌入一部分或者整个App都用WebView来做。</p> 
<p>WebView2下载地址：https://developer.microsoft.com/en-us/microsoft-edge/webview2/?form=MA13LH</p> 
<h3><a id="4_34"></a>4、使用</h3> 
<h4><a id="41_36"></a>4.1、最简单示例</h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> webview

window <span class="token operator">=</span> webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span><span class="token string">'Woah dude!'</span><span class="token punctuation">,</span> <span class="token string">'https://pywebview.flowrl.com'</span><span class="token punctuation">)</span>
webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li> <p>create_window:</p> <p>返回窗口实例，该实例可以使用许多窗口操作和DOM函数，可创建任意数量窗口，在GUI循环启动后创建的窗口会立即显示。所有打开的窗口都以列表形式存储在webview.windows中。create_window第二个参数可以是url（远程url或本地url），也可设置html来加载html。<strong>html与url同时存在，html优先级高。</strong></p> </li></ul> 
<h4><a id="42http_server_51"></a>4.2、http server示例</h4> 
<p>pywebview提供一个与WSGI兼容的http服务器。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> webview

webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span><span class="token string">'Woah dude!'</span><span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>
webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span>http_server<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p>将http_server设为true</p> 
<p>一般使用外部WSGI兼容的http服务器，将服务器对象作为url传递</p> 
<pre><code class="prism language-py"><span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask
<span class="token keyword">import</span> webview

server <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">,</span> static_folder<span class="token operator">=</span><span class="token string">'./assets'</span><span class="token punctuation">,</span> template_folder<span class="token operator">=</span><span class="token string">'./templates'</span><span class="token punctuation">)</span>
webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span><span class="token string">'Flask example'</span><span class="token punctuation">,</span> server<span class="token punctuation">)</span>
webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="43_75"></a>4.3、线程模型</h4> 
<p>webview.start会开启一个GUI循环，并且它是一个阻塞函数。当GUI循环被阻塞时，必须在一个单独的线程和进程中执行后端逻辑</p> 
<p>。可以通过手动开启线程/进程，或者将函数作为要启动的第一个参数来启动。第二个参数设置函数的参数。这种方法会在后台启动一个线程，与手动起一个线程相同。</p> 
<pre><code class="prism language-py"><span class="token keyword">import</span> webview

<span class="token keyword">def</span> <span class="token function">custom_logic</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">:</span>
    window<span class="token punctuation">.</span>evaluate_js<span class="token punctuation">(</span><span class="token string">'alert("welcome")'</span><span class="token punctuation">)</span>

window <span class="token operator">=</span> webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span><span class="token string">'Woah dude!'</span><span class="token punctuation">,</span> html<span class="token operator">=</span><span class="token string">'&lt;h1&gt;Woah dude!&lt;h1&gt;'</span><span class="token punctuation">)</span>
webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span>custom_logic<span class="token punctuation">,</span> window<span class="token punctuation">)</span>
<span class="token comment"># anything below this line will be executed after program is finished executing</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">#只有窗口关闭了才能打印</span>
</code></pre> 
<h4><a id="44Pythonevaluate_js_93"></a>4.4、Python与evaluate_js通信</h4> 
<ul><li> <p>在Python调用Javascript</p> <p>使用evaluate_js可以在Python中调用Javascript 函数，如：window.evaluate_js(‘alert(“welcome”)’)</p> </li><li> <p>在Javascript 中调用Python</p> <p><strong>方法1（十分反人类）</strong>：在一个Python类中先写一个html网页，在其中的Javascript 使用pywebview.api.方法名来调用Python函数，方法名不能以下划线开头。示例如下：</p> <pre><code class="prism language-py"><span class="token keyword">import</span> random
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> threading
<span class="token keyword">import</span> time

<span class="token keyword">import</span> webview

html <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head lang="en"&gt;
&lt;meta charset="UTF-8"&gt;

&lt;style&gt;
    #response-container {
        display: none;
        padding: 3rem;
        margin: 3rem 5rem;
        font-size: 120%;
        border: 5px dashed #ccc;
    }

    label {
        margin-left: 0.3rem;
        margin-right: 0.3rem;
    }

    button {
        font-size: 100%;
        padding: 0.5rem;
        margin: 0.3rem;
        text-transform: uppercase;
    }

&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h1&gt;JS API Example&lt;/h1&gt;
&lt;p id='pywebview-status'&gt;&lt;i&gt;pywebview&lt;/i&gt; is not ready&lt;/p&gt;

&lt;button onClick="initialize()"&gt;Hello Python&lt;/button&gt;&lt;br/&gt;
&lt;button id="heavy-stuff-btn" onClick="doHeavyStuff()"&gt;Perform a heavy operation&lt;/button&gt;&lt;br/&gt;
&lt;button onClick="getRandomNumber()"&gt;Get a random number&lt;/button&gt;&lt;br/&gt;
&lt;label for="name_input"&gt;Say hello to:&lt;/label&gt;&lt;input id="name_input" placeholder="put a name here"&gt;
&lt;button onClick="greet()"&gt;Greet&lt;/button&gt;&lt;br/&gt;
&lt;button onClick="catchException()"&gt;Catch Exception&lt;/button&gt;&lt;br/&gt;

&lt;div id="response-container"&gt;&lt;/div&gt;
&lt;script&gt;
    window.addEventListener('pywebviewready', function() {
        var container = document.getElementById('pywebview-status')
        container.innerHTML = '&lt;i&gt;pywebview&lt;/i&gt; is ready'
    })

    function showResponse(response) {
        var container = document.getElementById('response-container')

        container.innerText = response.message
        container.style.display = 'block'
    }

    function initialize() {
        pywebview.api.init().then(showResponse)
    }

    function doHeavyStuff() {
        var btn = document.getElementById('heavy-stuff-btn')

        pywebview.api.doHeavyStuff().then(function(response) {
            showResponse(response)
            btn.onclick = doHeavyStuff
            btn.innerText = 'Perform a heavy operation'
        })

        showResponse({message: 'Working...'})
        btn.innerText = 'Cancel the heavy operation'
        btn.onclick = cancelHeavyStuff
    }

    function cancelHeavyStuff() {
        pywebview.api.cancelHeavyStuff()
    }

    function getRandomNumber() {
        pywebview.api.getRandomNumber().then(showResponse)
    }

    function greet() {
        var name_input = document.getElementById('name_input').value;
        pywebview.api.sayHelloTo(name_input).then(showResponse)
    }

    function catchException() {
        pywebview.api.error().catch(showResponse)
    }

&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
"""</span>

<span class="token keyword">class</span> <span class="token class-name">Api</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>cancel_heavy_stuff_flag <span class="token operator">=</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">init</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        response <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'Hello from Python {0}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>sys<span class="token punctuation">.</span>version<span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token keyword">return</span> response

    <span class="token keyword">def</span> <span class="token function">getRandomNumber</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        response <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'Here is a random number courtesy of randint: {0}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>
                random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100000000</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> response

    <span class="token keyword">def</span> <span class="token function">doHeavyStuff</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span>  <span class="token comment"># sleep to prevent from the ui thread from freezing for a moment</span>
        now <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>cancel_heavy_stuff_flag <span class="token operator">=</span> <span class="token boolean">False</span>
        <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            _ <span class="token operator">=</span> i <span class="token operator">*</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> self<span class="token punctuation">.</span>cancel_heavy_stuff_flag<span class="token punctuation">:</span>
                response <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'Operation cancelled'</span><span class="token punctuation">}</span>
                <span class="token keyword">break</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            then <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>
            response <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
                <span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'Operation took {0:.1f} seconds on the thread {1}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>
                    <span class="token punctuation">(</span>then <span class="token operator">-</span> now<span class="token punctuation">)</span><span class="token punctuation">,</span> threading<span class="token punctuation">.</span>current_thread<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token keyword">return</span> response

    <span class="token keyword">def</span> <span class="token function">cancelHeavyStuff</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>cancel_heavy_stuff_flag <span class="token operator">=</span> <span class="token boolean">True</span>

    <span class="token keyword">def</span> <span class="token function">sayHelloTo</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">:</span>
        response <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'message'</span><span class="token punctuation">:</span> <span class="token string">'Hello {0}!'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token keyword">return</span> response

    <span class="token keyword">def</span> <span class="token function">error</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> Exception<span class="token punctuation">(</span><span class="token string">'This is a Python exception'</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    api <span class="token operator">=</span> Api<span class="token punctuation">(</span><span class="token punctuation">)</span>
    window <span class="token operator">=</span> webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span><span class="token string">'JS API example'</span><span class="token punctuation">,</span> html<span class="token operator">=</span>html<span class="token punctuation">,</span> js_api<span class="token operator">=</span>api<span class="token punctuation">)</span>
    webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <p><strong>方法二</strong>：将Python函数公开到Javascript域,示例如下：</p> <pre><code class="prism language-py"><span class="token keyword">import</span> webview

<span class="token keyword">def</span> <span class="token function">lol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'LOL'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">wtf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'WTF'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">echo</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> arg3<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>arg1<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>arg2<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>arg3<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">expose</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">:</span>
    window<span class="token punctuation">.</span>expose<span class="token punctuation">(</span>echo<span class="token punctuation">)</span>  <span class="token comment"># expose a function during the runtime</span>

    window<span class="token punctuation">.</span>evaluate_js<span class="token punctuation">(</span><span class="token string">'pywebview.api.lol()'</span><span class="token punctuation">)</span>
    window<span class="token punctuation">.</span>evaluate_js<span class="token punctuation">(</span><span class="token string">'pywebview.api.wtf()'</span><span class="token punctuation">)</span>
    window<span class="token punctuation">.</span>evaluate_js<span class="token punctuation">(</span><span class="token string">'pywebview.api.echo(1, 2, 3)'</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    window <span class="token operator">=</span> webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span>
        <span class="token string">'JS Expose Example'</span><span class="token punctuation">,</span> html<span class="token operator">=</span><span class="token string">'&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;JS Expost&lt;/body&gt;&lt;/html&gt;'</span>
    <span class="token punctuation">)</span>
    window<span class="token punctuation">.</span>expose<span class="token punctuation">(</span>lol<span class="token punctuation">,</span> wtf<span class="token punctuation">)</span>  <span class="token comment"># expose functions beforehand</span>

    webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span>expose<span class="token punctuation">,</span> window<span class="token punctuation">,</span> debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> <p><strong>方法三（最实用）</strong>：</p> <p>运行一个PythonWeb服务，让前端代码对其API进行调用。对于将Web一直到应用程序非常便捷。</p> </li></ul> 
<h4><a id="45_297"></a>4.5、事件</h4> 
<p>Windows对象有许多声明周期事件，订阅事件使用+=语法，即windows.events.loaded+=函数名，事件触发时会调用该函数，不能重复订阅，多次订阅也只调用一次。取消订阅使用windows.events.loaded-=函数名。</p> 
<ul><li>events.closed：窗口关闭后触发的事件</li><li>events.closing：窗口正在关闭，在确认时候触发的事件</li><li>events.loaded：DOM准备就绪时触发的事件</li><li>events.minimized：窗口最小化触发的事件</li><li>events.restore：窗口恢复时触发的事件</li><li>events.maximized：窗口最大化触发的事件</li><li>events.resized：窗口大小变化时触发的事件</li><li>events.shown：窗口显示时触发的事件</li></ul> 
<h3><a id="5_312"></a>5、常用示例</h3> 
<h4><a id="5110url_314"></a>5.1、10秒后改变加载的url</h4> 
<pre><code class="prism language-py"><span class="token keyword">import</span> time

<span class="token keyword">import</span> webview

<span class="token keyword">def</span> <span class="token function">change_url</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># wait a few seconds before changing url:</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>

    <span class="token comment"># change url:</span>
    window<span class="token punctuation">.</span>load_url<span class="token punctuation">(</span><span class="token string">'https://pywebview.flowrl.com/hello'</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    window <span class="token operator">=</span> webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span><span class="token string">'URL Change Example'</span><span class="token punctuation">,</span> <span class="token string">'http://www.google.com'</span><span class="token punctuation">)</span>
    webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span>change_url<span class="token punctuation">,</span> window<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="52_333"></a>5.2、带有确认对话框的窗口</h4> 
<pre><code class="prism language-py"><span class="token keyword">import</span> webview

<span class="token keyword">def</span> <span class="token function">open_confirmation_dialog</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> window<span class="token punctuation">.</span>create_confirmation_dialog<span class="token punctuation">(</span><span class="token string">'Question'</span><span class="token punctuation">,</span> <span class="token string">'Are you ok with this?'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> result<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'User clicked OK'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'User clicked Cancel'</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    window <span class="token operator">=</span> webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span>
        <span class="token string">'Confirmation dialog example'</span><span class="token punctuation">,</span> <span class="token string">'https://pywebview.flowrl.com/hello'</span>
    <span class="token punctuation">)</span>
    webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span>open_confirmation_dialog<span class="token punctuation">,</span> window<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="53_352"></a>5.3、常用事件</h4> 
<pre><code class="prism language-py"><span class="token keyword">import</span> webview

<span class="token keyword">def</span> <span class="token function">on_closed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'pywebview window is closed'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">on_closing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'pywebview window is closing'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">on_shown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'pywebview window shown'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">on_minimized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'pywebview window minimized'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">on_restored</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'pywebview window restored'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">on_maximized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'pywebview window maximized'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">on_resized</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>
        <span class="token string">'pywebview window is resized. new dimensions are {width} x {height}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>
            width<span class="token operator">=</span>width<span class="token punctuation">,</span> height<span class="token operator">=</span>height
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">on_loaded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'DOM is ready'</span><span class="token punctuation">)</span>

    <span class="token comment"># unsubscribe event listener</span>
    webview<span class="token punctuation">.</span>windows<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span>loaded <span class="token operator">-=</span> on_loaded
    webview<span class="token punctuation">.</span>windows<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>load_url<span class="token punctuation">(</span><span class="token string">'https://pywebview.flowrl.com/hello'</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">on_moved</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'pywebview window is moved. new coordinates are x: {x}, y: {y}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>x<span class="token operator">=</span>x<span class="token punctuation">,</span> y<span class="token operator">=</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    window <span class="token operator">=</span> webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span>
        <span class="token string">'Simple browser'</span><span class="token punctuation">,</span> <span class="token string">'https://pywebview.flowrl.com/'</span><span class="token punctuation">,</span> confirm_close<span class="token operator">=</span><span class="token boolean">True</span>
    <span class="token punctuation">)</span>

    window<span class="token punctuation">.</span>events<span class="token punctuation">.</span>closed <span class="token operator">+=</span> on_closed
    window<span class="token punctuation">.</span>events<span class="token punctuation">.</span>closing <span class="token operator">+=</span> on_closing
    window<span class="token punctuation">.</span>events<span class="token punctuation">.</span>shown <span class="token operator">+=</span> on_shown
    window<span class="token punctuation">.</span>events<span class="token punctuation">.</span>loaded <span class="token operator">+=</span> on_loaded
    window<span class="token punctuation">.</span>events<span class="token punctuation">.</span>minimized <span class="token operator">+=</span> on_minimized
    window<span class="token punctuation">.</span>events<span class="token punctuation">.</span>maximized <span class="token operator">+=</span> on_maximized
    window<span class="token punctuation">.</span>events<span class="token punctuation">.</span>restored <span class="token operator">+=</span> on_restored
    window<span class="token punctuation">.</span>events<span class="token punctuation">.</span>resized <span class="token operator">+=</span> on_resized
    window<span class="token punctuation">.</span>events<span class="token punctuation">.</span>moved <span class="token operator">+=</span> on_moved

    webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span>debug<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="54_410"></a>5.4、文件打开</h4> 
<pre><code class="prism language-py"><span class="token keyword">import</span> webview

<span class="token keyword">def</span> <span class="token function">open_file_dialog</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">:</span>
    file_types <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'Image Files (*.bmp;*.jpg;*.gif)'</span><span class="token punctuation">,</span> <span class="token string">'All files (*.*)'</span><span class="token punctuation">)</span>

    result <span class="token operator">=</span> window<span class="token punctuation">.</span>create_file_dialog<span class="token punctuation">(</span>
        webview<span class="token punctuation">.</span>OPEN_DIALOG<span class="token punctuation">,</span> allow_multiple<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> file_types<span class="token operator">=</span>file_types
    <span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token comment">#result为文件的绝对路径</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    window <span class="token operator">=</span> webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span><span class="token string">'Open file dialog example'</span><span class="token punctuation">,</span> <span class="token string">'https://pywebview.flowrl.com/hello'</span><span class="token punctuation">)</span>
    webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span>open_file_dialog<span class="token punctuation">,</span> window<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="55_428"></a>5.5、文件保存</h4> 
<pre><code class="prism language-py"><span class="token keyword">import</span> webview

<span class="token keyword">def</span> <span class="token function">save_file_dialog</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">import</span> time

    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> window<span class="token punctuation">.</span>create_file_dialog<span class="token punctuation">(</span>
        webview<span class="token punctuation">.</span>SAVE_DIALOG<span class="token punctuation">,</span> directory<span class="token operator">=</span><span class="token string">'/'</span><span class="token punctuation">,</span> save_filename<span class="token operator">=</span><span class="token string">'test.file'</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    window <span class="token operator">=</span> webview<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span><span class="token string">'Save file dialog'</span><span class="token punctuation">,</span> <span class="token string">'https://pywebview.flowrl.com/hello'</span><span class="token punctuation">)</span>
    webview<span class="token punctuation">.</span>start<span class="token punctuation">(</span>save_file_dialog<span class="token punctuation">,</span> window<span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/00771f19d58ba9f0375e511784161f67/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringBoot 整合WebService</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/477cf05a9b11a18d6774bba83d5ed99a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【python】python双十一美妆数据分析（源码&#43;报告）【独一无二】课程设计-毕业设计</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>