<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java-根据前缀-日期-数字-生成流水号（不重复） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/d7a7425be1ac0b079470ea63b7f379e1/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Java-根据前缀-日期-数字-生成流水号（不重复）">
  <meta property="og:description" content="🎈边走、边悟🎈迟早会好
小伙伴们在日常开发时可能会遇到的业务-生成流水号，在企业中可以说是比较常见的需求，
可以采用&#34;前缀&#43;日期&#43;数字&#34;的方式（ps:此方式是需要用到缓存的）
前缀：为了更好的标识这个流水号是属于哪种类型；
日期：为了防止重复；
数字：为了表示当前的流水所处序号。
SimpleDateFormat df = new SimpleDateFormat(&#34;yyyyMMdd&#34;); //todo 替换自己想要的前缀 String code = &#34;xicui-&#34; &#43; df.format(new Date()); //模糊查询当前最大的编号 String maxCode = baseMapper.maxRoundCode(code); String newCode = null; if (StringUtils.isEmpty(maxCode)) { newCode = code &#43; &#34;-01&#34;; } else { //切割字符串，取查到编号的最后两位 String getMaxCode = maxCode.substring(maxCode.length()-2,maxCode.length()); newCode = code &#43; &#34;-&#34;&#43;getNum(getMaxCode); } 编号生成的方法-直接复制即可 //编号生成 public static String getNum(String code) { String roundCode = &#34;-01&#34;; if (code != null &amp;&amp; !code.isEmpty()) { int intCode = Integer.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-25T18:13:52+08:00">
    <meta property="article:modified_time" content="2024-07-25T18:13:52+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java-根据前缀-日期-数字-生成流水号（不重复）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <table align="center" border="1" cellpadding="1" cellspacing="1" style="width:690px;"><tbody><tr><td> <p style="text-align:center;"><em><span style="color:#ff9900;"><strong>🎈边走、边悟🎈迟早会好</strong></span></em></p> </td></tr></tbody></table> 
<p>小伙伴们在日常开发时可能会遇到的业务-<span style="color:#fe2c24;"><span style="background-color:#fbd4d0;">生成流水号</span></span>，在企业中可以说是比较常见的需求，</p> 
<p>可以采用"前缀+日期+数字"的方式（ps:此方式是需要用到缓存的）<br><strong>前缀</strong>：为了更好的标识这个流水号是属于哪种类型；<br><strong>日期</strong>：为了防止重复；<br><strong>数字</strong>：为了表示当前的流水所处序号。</p> 
<pre><code class="language-java">SimpleDateFormat df = new SimpleDateFormat("yyyyMMdd");
//todo  替换自己想要的前缀
String code = "xicui-" + df.format(new Date());
//模糊查询当前最大的编号
String maxCode = baseMapper.maxRoundCode(code);
String newCode = null;
if (StringUtils.isEmpty(maxCode)) {
    newCode = code + "-01";
} else {
    //切割字符串，取查到编号的最后两位
    String getMaxCode = maxCode.substring(maxCode.length()-2,maxCode.length());
    newCode = code + "-"+getNum(getMaxCode);
}</code></pre> 
<blockquote> 
 <p>编号生成的方法-直接复制即可 </p> 
</blockquote> 
<pre><code class="language-java">//编号生成
public static String getNum(String code) {
    String roundCode = "-01";
    if (code != null &amp;&amp; !code.isEmpty()) {
        int intCode = Integer.parseInt(code) + 1;
        if (intCode &lt; 99) {
            roundCode = String.format(String.valueOf(intCode));
        } else {
            throw new RuntimeException("500轮次编号达到最大");
        }
    }
    //编号前面补0
    DecimalFormat df = new DecimalFormat("00");
    String newCode = df.format(Integer.parseInt(roundCode));
    return newCode;
}</code></pre> 
<blockquote> 
 <p> 模糊查询sql</p> 
</blockquote> 
<pre><code class="language-sql">select max(serial_number) from admission where serial_number like concat(#{code},'%')</code></pre> 
<p> </p> 
<blockquote> 
 <p> 🌟感谢支持 <a href="https://blog.csdn.net/weixin_64296810?type=blog" title="听忆.-CSDN博客">听忆.-CSDN博客</a></p> 
</blockquote> 
<p style="text-align:center;"><img alt="" height="1080" src="https://images2.imgbox.com/3a/67/QCOFOX2a_o.jpg" width="1200"></p> 
<p></p> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:690px;"><tbody><tr><td style="text-align:center;"><em><strong><span style="color:#ff9900;">🎈众口难调🎈从心就好</span></strong></em></td></tr></tbody></table> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5d311057d05ad505eb8d14f40f2b5130/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">最大405B：Llama-3.1 发布，第一时间详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/21713924f76104571d26fa217a2c1681/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">godot新建项目及设置外部编辑器为vscode</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>