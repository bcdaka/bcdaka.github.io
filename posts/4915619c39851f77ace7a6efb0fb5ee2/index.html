<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>详解数据结构之二叉树(堆) - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/4915619c39851f77ace7a6efb0fb5ee2/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="详解数据结构之二叉树(堆)">
  <meta property="og:description" content="详解数据结构之二叉树(堆) 树 树的概念 树是一个非线性结构的数据结构，它是由 n(n&gt;=0)个有限节点组成的一个具有层次关系的集合，它的外观形似一颗倒挂着的树，根朝上，叶朝下，所以称呼为树。每颗子树的根节点有且只有一个前驱，可以0个有多个后继。
如图：这两颗树就不是树形结构，子树是不会相交的，除根节点外每个节点有且只有一个父节点，一颗有n个节点的树有n - 1条边。
根节点
根节点没有前驱节点，如图：9为根节点。 父节点：若一个节点含有子节点，则称这个节点为字节的的父节点，如图9为12个父节点。
子节点/孩子节点：一个节点含有父节点那这个节点就为孩子节点，如图12.
节点的度：一个节点右多少个孩子节点那他的度就为多少。
树的度，为最大节点的度，如上图，12这个节点的度为3，它是最大的，那他就为树的度。 树的层次：从根开始定义为第一层，根节点的子节点为第二层，以此类推。
树的深度、高度：树的最大层次，如图，树最大有4层，那树的深度为4。
叶子节点：度为0的节点为叶子节点。
分支节点：度不为0的节点。
兄弟节点：具有相同父节点的节点互称为兄弟节点。
节点的祖先：从根到该结点所经分⽀上的所有结点
所有节点的祖先为根节点 节点的子孙：以某结点为根的⼦树中任⼀结点都称为该结点的⼦孙
除根节点外所有节点是根节点的子孙。 森林：由m颗不相加的树的集合（m &gt; 0）。
二叉树 在树形结构里最常用的就是二叉树，一颗二叉树是节点的有限集合，该集合右一个根节点加上两颗左子树和右字树组成或者为空。
二叉树形态：
空二叉树只有一个根节点根节点只有左子树根节点只有右子树根节点有左右子树 二叉树的特点： 二叉树不存在度大于2的节点二叉树的节点有左右之分，次序不能颠倒，而二叉树又是有序树 特殊二叉树： 满二叉树 满二叉树是节点总数满足 2^k - 1（k为树的最大层数）的树，每一层的节点个数都达到最大值。
完全二叉树： 完全二叉树：对于一颗具有n个节点的二叉树按层序编号，如果编号为i（1 &lt;= i &lt;= n）的节点与同样深度的满二叉树中编号为i的节点在二叉树中的位置完全相同，这颗二叉树称为完全二叉树。
例如：
序号为2的节点没有右节点而序号为3的节点先有了序号为5、6的节点此时它们的序号与上图的完全二叉树序号并不相同，那它就不是完全二叉树。
正确的完全二叉树：
判断完全二叉树时，可以先按照当前二叉树的层次画一个或着心里想一个满二叉树，判断对应位置上的序号大小是否一致。
完全二叉树的性质：
叶子节点只能出现在最后两层最下层的叶子节点一定集中在左部连续的位置倒数第二层有叶子节点那他一定在右部连续位置 二叉树的性质 二叉树总节点个数：深度为k的二叉树具有，n = 2^k - 1个节点
二叉树第i层的节点个数：第i层的节点有，2^(i-1) 个。
对应具有n个节点个数的二叉树对应的深度为：k = logn &#43; 1，底数为2
堆 堆，将一个元素集合k里，所有数据按照完成二叉树的存储方式存储。
这里的堆是基于顺序存储结构实现，因为堆是一种要求严格的二叉树，在节点的顺序上，必须是从左孩子节点开始放数据，不会允许一个节点先有右孩子节点，而没有左孩子节点。
有了这种特殊的限制，在数组里就可以利用节点所对应的下标来寻找对于的父亲节点，孩子节点。‘
对于具有 n 个结点的完全⼆叉树，如果按照从上到下从左到右的数组顺序对所有结点从 0 开始编号，则对于序号为 i 的结点有：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-22T19:33:56+08:00">
    <meta property="article:modified_time" content="2024-07-22T19:33:56+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">详解数据结构之二叉树(堆)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>详解数据结构之二叉树(堆)</h2> 
<h2><a id="_2"></a>树</h2> 
<h3><a id="_6"></a>树的概念</h3> 
<ul><li>树是一个非线性结构的数据结构，它是由 n(n&gt;=0)个有限节点组成的一个具有层次关系的集合，它的外观形似一颗倒挂着的树，根朝上，叶朝下，所以称呼为树。每颗子树的根节点有且只有一个前驱，可以0个有多个后继。<br> <img src="https://images2.imgbox.com/c3/e5/friXDSTe_o.png" alt="在这里插入图片描述"></li></ul> 
<p>如图：这两颗树就不是树形结构，<strong>子树是不会相交的</strong>，<strong>除根节点外每个节点有且只有一个父节点</strong>，<strong>一颗有n个节点的树有n - 1条边。</strong></p> 
<p><img src="https://images2.imgbox.com/c1/cd/hCLnq72D_o.png" alt="在这里插入图片描述"></p> 
<ul><li> <p>根节点</p> 
  <ul><li>根节点没有前驱节点，如图：9为根节点。</li></ul> </li><li> <p>父节点：若一个节点含有子节点，则称这个节点为字节的的父节点，如图9为12个父节点。</p> </li><li> <p>子节点/孩子节点：一个节点含有父节点那这个节点就为孩子节点，如图12.</p> </li><li> <p>节点的度：一个节点右多少个孩子节点那他的度就为多少。</p> 
  <ul><li>树的度，为最大节点的度，如上图，12这个节点的度为3，它是最大的，那他就为树的度。</li></ul> </li><li> <p>树的层次：从根开始定义为第一层，根节点的子节点为第二层，以此类推。</p> </li><li> <p>树的深度、高度：树的最大层次，如图，树最大有4层，那树的深度为4。</p> </li><li> <p>叶子节点：度为0的节点为叶子节点。</p> </li><li> <p>分支节点：度不为0的节点。</p> </li><li> <p>兄弟节点：具有相同父节点的节点互称为兄弟节点。</p> </li><li> <p>节点的祖先：从根到该结点所经分⽀上的所有结点</p> 
  <ul><li>所有节点的祖先为根节点</li></ul> </li><li> <p>节点的子孙：以某结点为根的⼦树中任⼀结点都称为该结点的⼦孙</p> 
  <ul><li>除根节点外所有节点是根节点的子孙。</li></ul> </li><li> <p>森林：由m颗不相加的树的集合（m &gt; 0）。</p> </li></ul> 
<h2><a id="_38"></a>二叉树</h2> 
<p>在树形结构里最常用的就是二叉树，一颗二叉树是节点的有限集合，该集合右一个根节点加上两颗左子树和右字树组成或者为空。</p> 
<p>二叉树形态：</p> 
<ol><li>空二叉树</li><li>只有一个根节点</li><li>根节点只有左子树</li><li>根节点只有右子树</li><li>根节点有左右子树</li></ol> 
<h3><a id="_50"></a>二叉树的特点：</h3> 
<ol><li>二叉树不存在度大于2的节点</li><li>二叉树的节点有左右之分，次序不能颠倒，而二叉树又是有序树</li></ol> 
<h3><a id="_55"></a>特殊二叉树：</h3> 
<ul><li> <h4><a id="_57"></a>满二叉树</h4> </li></ul> 
<p>满二叉树是节点总数满足 2^k - 1（k为树的最大层数）的树，每一层的节点个数都达到最大值。<br> <img src="https://images2.imgbox.com/1e/dd/GiyJrAs0_o.png" alt="在这里插入图片描述"></p> 
<ul><li> <h4><a id="_64"></a>完全二叉树：</h4> </li></ul> 
<p>完全二叉树：对于一颗具有n个节点的二叉树<mark>按层序编号</mark>，如果编号为i（1 &lt;= i &lt;= n）的节点与同样深度的满二叉树中编号为i的节点在二叉树中的位置完全相同，这颗二叉树称为完全二叉树。</p> 
<p>例如：</p> 
<p>序号为2的节点没有右节点而序号为3的节点先有了序号为5、6的节点此时它们的序号与上图的完全二叉树序号并不相同，那它就不是完全二叉树。<br> <img src="https://images2.imgbox.com/63/c0/s3DB974W_o.png" alt="在这里插入图片描述"></p> 
<p>正确的完全二叉树：<br> <img src="https://images2.imgbox.com/b1/d2/kXr8wfEp_o.png" alt="在这里插入图片描述"></p> 
<p><mark>判断完全二叉树</mark>时，可以先按照当前二叉树的层次画一个或着心里想一个满二叉树，判断对应位置上的序号大小是否一致。</p> 
<p>完全二叉树的性质：</p> 
<ol><li>叶子节点只能出现在最后两层</li><li>最下层的叶子节点一定集中在左部连续的位置</li><li>倒数第二层有叶子节点那他一定在右部连续位置</li></ol> 
<h3><a id="_88"></a>二叉树的性质</h3> 
<p><mark>二叉树总节点个数</mark>：深度为k的二叉树具有，n = 2^k - 1个节点</p> 
<p><mark>二叉树第i层的节点个数</mark>：第i层的节点有，2^(i-1) 个。</p> 
<p><mark>对应具有n个节点个数的二叉树对应的深度为</mark>：k = logn + 1，底数为2</p> 
<h2><a id="_96"></a>堆</h2> 
<p>堆，将一个元素集合k里，所有数据按照完成二叉树的存储方式存储。</p> 
<p>这里的堆是基于顺序存储结构实现，因为堆是一种要求严格的二叉树，在节点的顺序上，必须是从左孩子节点开始放数据，不会允许一个节点先有右孩子节点，而没有左孩子节点。</p> 
<p>有了这种特殊的限制，在数组里就可以利用节点所对应的下标来寻找对于的父亲节点，孩子节点。‘</p> 
<p>对于具有 n 个结点的完全⼆叉树，如果按照从上到下从左到右的数组顺序对所有结点从 0 开始编号，则对于序号为 i 的结点有：</p> 
<p><mark>i &gt; 0 ,i 位置的节点的双亲序号为：(i - 1) / 2，i = 0 为根节点为双亲</mark>。</p> 
<p><mark>若 2i + 1 &lt; n,左孩子序号：2i + 1，否则2i + 1&gt;= n无左孩子</mark></p> 
<p><mark>若 2i + 2 &lt; n,右孩子序号：2i + 2，否则2i + 2&gt;= n无右孩子</mark></p> 
<p>堆的分类：</p> 
<ul><li> <p>小根堆（小堆），父亲节点的大小总是小于孩子节点<br> <img src="https://images2.imgbox.com/14/e7/nkBgFCoY_o.png" alt="在这里插入图片描述"></p> </li><li> <p>大根堆（大堆），父亲节点的大小总是大于孩子节点</p> </li></ul> 
<p>不满足以上两种的堆是无序的无效的堆，必须对其的循序进行调整。</p> 
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> HeapDataType<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Heap</span>
<span class="token punctuation">{<!-- --></span>
	HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">;</span>
	<span class="token keyword">int</span> size<span class="token punctuation">;</span>
	<span class="token keyword">int</span> capacity<span class="token punctuation">;</span>
<span class="token punctuation">}</span>Heap<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_135"></a>功能实现</h3> 
<pre><code class="prism language-c"><span class="token comment">//初始化</span>
<span class="token keyword">void</span> <span class="token function">HpInit</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//销毁</span>
<span class="token keyword">void</span> <span class="token function">HpDestory</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//堆尾放数据</span>
<span class="token keyword">void</span> <span class="token function">HpPush</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">,</span> HeapDataType x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//出堆顶数据</span>
<span class="token keyword">void</span> <span class="token function">HpPop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//自下向上调整</span>
<span class="token keyword">void</span> <span class="token function">AdjustUp</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//自上向下调整</span>
<span class="token keyword">void</span> <span class="token function">AdjustDown</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//返回堆顶数据</span>
HeapDataType <span class="token function">HeapTop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//返回堆的数据个数</span>
<span class="token keyword">int</span> <span class="token function">HeapSize</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>；
<span class="token comment">//交换函数Swap</span>
<span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> x<span class="token punctuation">,</span> HeapDataType<span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_158"></a>初始化、销毁</h3> 
<p>初始化：基于顺序结构实现的堆，将指向堆的变量的地址传递过来使用一级指针接收，实现形参的改变影响到实参。初始化堆，只需对其指针置空、空间大小和栈顶置0即可。</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">HpInit</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span><span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">)</span>
         <span class="token function">free</span><span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	hp<span class="token operator">-&gt;</span>arr <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	hp<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> hp<span class="token operator">-&gt;</span>size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>销毁堆：堆的空间是使用函数动态开辟的，那他得使用对应得free对空间进行释放，让后将堆的空间大小和，size置0即可。</p> 
<p>需要注意的是若数组本身是空的那就不能对齐进行释放，在使用free释放前还需要使用if语句进行判断。是否为空。</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">HpDestory</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">)</span>
		<span class="token function">free</span><span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	hp<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> hp<span class="token operator">-&gt;</span>size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_187"></a>堆插入数据、自下向上调整算法</h3> 
<p>在堆里插入数据有着严格的要求，必须按照这从左节点到右节点的顺序放入数据，不能跳过左节点，先放入右节点的数据。<br> <img src="https://images2.imgbox.com/5c/ce/6lv0tQZk_o.png" alt="在这里插入图片描述"></p> 
<p>现在想要在堆里放入一个数据，不能是我想在哪放就在哪放的，必须先将节点20的右孩子节点放入数据，才能到下一层放入数据。这些严格的要求也导致了用数组实现堆，存放数据也是从末尾开始。</p> 
<p>而前文说过，堆是按照一定顺序存放的，在如图的小堆里，我放入了一个10的数据，改如何应对呢？这里就得使用到堆的自下向上调整函数，其函数功能是将堆里新放入的数据按照小堆的结构摆放。</p> 
<h4><a id="_198"></a>堆插入数据</h4> 
<p>在堆里放入数据只需在数组末尾存放即可。</p> 
<p>需要注意的是，对空间大小的判断，以及自下向上调整算法。</p> 
<p>在函数里，需要对有效数据个数和空间大小是否相等进行判断，所以使用if语句，在if语句里，使用realloc函数开辟，为啥不使用malloc函数呢~，我们需要实现的动态开辟，存放的数据越多，空间越开越大，malloc函数做不到。扩容时需扩容原空间的2倍或3倍可以减少扩容操作的频率。如果每次只增加少量空间，那么在元素数量增长时，需要频繁进行扩容操作，这会降低性能。</p> 
<p>在完成对空间大小的判断与开辟后，将待插入数据放入数组末尾即可。然后使用自下向上调整算法对新放入的数据根据大小调整顺序。</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">HpPush</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">,</span> HeapDataType x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>capacity <span class="token operator">==</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> newcapacity <span class="token operator">=</span> hp<span class="token operator">-&gt;</span>arr <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> hp<span class="token operator">-&gt;</span>capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
		HeapDataType<span class="token operator">*</span> newarr <span class="token operator">=</span> <span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>HeapDataType<span class="token punctuation">)</span> <span class="token operator">*</span> newcapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>newarr <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		hp<span class="token operator">-&gt;</span>arr <span class="token operator">=</span> newarr<span class="token punctuation">;</span>
		hp<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span>hp<span class="token operator">-&gt;</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
	<span class="token function">AdjustUp</span><span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	hp<span class="token operator">-&gt;</span>size<span class="token operator">++</span><span class="token punctuation">;</span><span class="token comment">//交换完在进行加加，提前加加hp-&gt;arr[hp-&gt;size++] = x;然后在调整会有越界情况</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_230"></a>自下向上调整算法</h4> 
<p>这里将交换两个数据的功能封装为一个函数，后续实现出堆顶数据还需要使用它。</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> x<span class="token punctuation">,</span> HeapDataType<span class="token operator">*</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	HeapDataType temp <span class="token operator">=</span> <span class="token operator">*</span>x<span class="token punctuation">;</span>
	<span class="token operator">*</span>x <span class="token operator">=</span> <span class="token operator">*</span>y<span class="token punctuation">;</span>
	<span class="token operator">*</span>y <span class="token operator">=</span> temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>计算<mark>父亲节点的大小：父亲 = （孩子 - 1） / 2</mark>。</p> 
<p>自下向上算法的实现基于二叉树的性质，更具孩子节点找父亲节点。新插入的孩子节点需要与父亲节点进行比较大小，若孩子节点小于父亲节点就交换顺序，而新的父亲节点又是前一个节点的孩子节点，同样需要判断其大小，然后交换顺序，若父亲节点小于孩子节点的话就不需要继续循环下去使用break跳出。</p> 
<p>循环结束的条件：<strong>当child不大于0时跳出</strong>，若child都小于0了还怎么访问堆里的数据，而child刚好为0的说明此时孩子指的是根节点，根节点并不需要交换，所以child不大于0时跳出即可。</p> 
<p>从孩子开始为堆的最后一个数据，所以称为自下向上调整。</p> 
<pre><code class="prism language-c">
<span class="token keyword">void</span> <span class="token function">AdjustUp</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> child<span class="token punctuation">)</span><span class="token comment">//传递数组和数组的大小，也就是插入数据的位置</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> parent <span class="token operator">=</span> <span class="token punctuation">(</span>child <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
        <span class="token comment">//小堆：&lt;</span>
        <span class="token comment">//大堆：&gt;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//交换</span>
			child <span class="token operator">=</span> parent<span class="token punctuation">;</span><span class="token comment">//交换完后更新孩子节点的位置。</span>
			parent <span class="token operator">=</span> <span class="token punctuation">(</span>child <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token comment">//跟新父亲节点的位置，为新孩子节点的父亲节点。</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_274"></a>建大堆</h5> 
<p>若我们需要一个大堆，这里只需要改变if语句里的条件判断，将找更小的逻辑改为找更大的数据即可。</p> 
<h3><a id="_278"></a>出堆顶数据、自上向下调整算法</h3> 
<p>出堆顶数据也有严格的要求，并不是将数组末尾的数据删除，直接将size减1，也不是让数组所有数据前移一位，这将会到的堆的顺序全部乱套了~坏掉了！</p> 
<h4><a id="_282"></a>出堆顶数据</h4> 
<p>出堆顶数据是将堆顶的数据与堆尾的数据进行交换，然后让size减1（堆的数据个数），最后将新的堆顶数据按照小堆的摆放调整顺序。</p> 
<p>出堆顶数据时需要注意，堆不能为空，以及数组也不能为空否则将会做坏事，导致统子哥报错。</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">HpPop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp <span class="token operator">&amp;&amp;</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span>hp<span class="token operator">-&gt;</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将最后一个元素与堆顶元素交换</span>
	hp<span class="token operator">-&gt;</span>size<span class="token operator">--</span><span class="token punctuation">;</span>
	<span class="token comment">//调整顺序</span>
	<span class="token function">AdjustDown</span><span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_299"></a>自上向下调整算法</h4> 
<p><mark>左孩子：孩子 = 父亲 * 2 + 1，child &lt; n</mark></p> 
<p><mark>右孩子：孩子 = 父亲 * 2 + 2，child &lt; n</mark></p> 
<p>前文提过的自下向上调整算法是向上找父亲节点，而自上向下算法是向下找孩子节点更具传递过来的参数 parent 向下个找孩子。</p> 
<p>与前一个调整算法相比，它会进行更多的判断，因为向下找的孩子有两个。而我们默认的孩子起始是左孩子节点。</p> 
<p>在对孩子节点与父亲节点比较大小交换之前还需要比较左孩子节点和右孩子节点，<code>arr[child] &gt; arr[child + 1]</code>，若左孩子节点大于有孩子，那child就需要加1，但还有个前提，万一child加1后刚好不满足 child &lt; n的条件从而在后续的交换里导致数组越界访问，所以在if语句里还需要加上一条判断 <code>child + 1 &lt; n</code>。</p> 
<p>执行孩子节点与父亲节点交换的if语句里，在交换完两个节点后需要更新新的父亲节点，和孩子节点来是否存在比父亲节点还小的值。最后若孩子节点大于父亲节点，那就说明不需要交换，使用break跳出循环即可。</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">AdjustDown</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> child <span class="token operator">=</span> parent <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&lt;</span> n<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
                               <span class="token comment">//小堆：&gt;</span>
        					   <span class="token comment">//大堆：&lt;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>child <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			child<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
        <span class="token comment">//小堆：&lt;</span>
        <span class="token comment">//大堆：&gt;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			parent <span class="token operator">=</span> child<span class="token punctuation">;</span>
			child <span class="token operator">=</span> parent <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_341"></a>建大堆</h5> 
<p>若我们需要一个大堆，那该如何调整，这里只需要改变其两个if语句里的条件判断，将找更小的逻辑改为找更大的数据即可。</p> 
<h3><a id="_345"></a>返回堆顶数据</h3> 
<p>将数组下标为零的元素返回，即是堆顶。</p> 
<pre><code class="prism language-c">HeapDataType <span class="token function">HeapTop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp <span class="token operator">&amp;&amp;</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_357"></a>返回堆的数据个数</h3> 
<p>将size的大小返回即是堆存储的数据个数。</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">HeapSize</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_369"></a>源码</h2> 
<p><mark>Heap.h</mark></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;assert.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdbool.h&gt;</span></span>

<span class="token keyword">typedef</span> <span class="token keyword">int</span> HeapDataType<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Heap</span>
<span class="token punctuation">{<!-- --></span>
	HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">;</span>
	<span class="token keyword">int</span> size<span class="token punctuation">;</span>
	<span class="token keyword">int</span> capacity<span class="token punctuation">;</span>
<span class="token punctuation">}</span>Heap<span class="token punctuation">;</span>



<span class="token comment">//初始化</span>
<span class="token keyword">void</span> <span class="token function">HpInit</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//销毁</span>
<span class="token keyword">void</span> <span class="token function">HpDestory</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//堆尾放数据</span>
<span class="token keyword">void</span> <span class="token function">HpPush</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">,</span> HeapDataType x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//出堆顶数据</span>
<span class="token keyword">void</span> <span class="token function">HpPop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//自下向上调整</span>
<span class="token keyword">void</span> <span class="token function">AdjustUp</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//自上向下调整</span>
<span class="token keyword">void</span> <span class="token function">AdjustDown</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//返回堆顶数据</span>
HeapDataType <span class="token function">HeapTop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//返回堆的数据个数</span>
<span class="token keyword">int</span> <span class="token function">HeapSize</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>；
<span class="token comment">//交换函数Swap</span>
<span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> x<span class="token punctuation">,</span> HeapDataType<span class="token operator">*</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><mark>Heap.c</mark></p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">_CRT_SECURE_NO_WARNINGS</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Heap.h"</span></span>

<span class="token comment">//初始化</span>
<span class="token keyword">void</span> <span class="token function">HpInit</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	hp<span class="token operator">-&gt;</span>arr <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	hp<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> hp<span class="token operator">-&gt;</span>size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//销毁</span>
<span class="token keyword">void</span> <span class="token function">HpDestory</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">)</span>
		<span class="token function">free</span><span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	hp<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> hp<span class="token operator">-&gt;</span>size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> x<span class="token punctuation">,</span> HeapDataType<span class="token operator">*</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	HeapDataType temp <span class="token operator">=</span> <span class="token operator">*</span>x<span class="token punctuation">;</span>
	<span class="token operator">*</span>x <span class="token operator">=</span> <span class="token operator">*</span>y<span class="token punctuation">;</span>
	<span class="token operator">*</span>y <span class="token operator">=</span> temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//自下向上调整</span>
<span class="token keyword">void</span> <span class="token function">AdjustUp</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> child<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> parent <span class="token operator">=</span> <span class="token punctuation">(</span>child <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			child <span class="token operator">=</span> parent<span class="token punctuation">;</span>
			parent <span class="token operator">=</span> <span class="token punctuation">(</span>child <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//堆尾放数据</span>
<span class="token keyword">void</span> <span class="token function">HpPush</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">,</span> HeapDataType x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>capacity <span class="token operator">==</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> newcapacity <span class="token operator">=</span> hp<span class="token operator">-&gt;</span>arr <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> hp<span class="token operator">-&gt;</span>capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
		HeapDataType<span class="token operator">*</span> newarr <span class="token operator">=</span> <span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">realloc</span><span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>HeapDataType<span class="token punctuation">)</span> <span class="token operator">*</span> newcapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>newarr <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"malloc "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		hp<span class="token operator">-&gt;</span>arr <span class="token operator">=</span> newarr<span class="token punctuation">;</span>
		hp<span class="token operator">-&gt;</span>capacity <span class="token operator">=</span> newcapacity<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span>hp<span class="token operator">-&gt;</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
	<span class="token function">AdjustUp</span><span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	hp<span class="token operator">-&gt;</span>size<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//自上向下调整</span>
<span class="token keyword">void</span> <span class="token function">AdjustDown</span><span class="token punctuation">(</span>HeapDataType<span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> child <span class="token operator">=</span> parent <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&lt;</span> n<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>child <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			child<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			parent <span class="token operator">=</span> child<span class="token punctuation">;</span>
			child <span class="token operator">=</span> parent <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//出堆顶数据</span>
<span class="token keyword">void</span> <span class="token function">HpPop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp <span class="token operator">&amp;&amp;</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span>hp<span class="token operator">-&gt;</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将最后一个元素与堆顶元素交换</span>
	hp<span class="token operator">-&gt;</span>size<span class="token operator">--</span><span class="token punctuation">;</span>
	<span class="token comment">//调整顺序</span>
	<span class="token function">AdjustDown</span><span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//返回堆顶数据</span>
HeapDataType <span class="token function">HeapTop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp <span class="token operator">&amp;&amp;</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">HeapSize</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			parent <span class="token operator">=</span> child<span class="token punctuation">;</span>
			child <span class="token operator">=</span> parent <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//出堆顶数据</span>
<span class="token keyword">void</span> <span class="token function">HpPop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp <span class="token operator">&amp;&amp;</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span>hp<span class="token operator">-&gt;</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将最后一个元素与堆顶元素交换</span>
	hp<span class="token operator">-&gt;</span>size<span class="token operator">--</span><span class="token punctuation">;</span>
	<span class="token comment">//调整顺序</span>
	<span class="token function">AdjustDown</span><span class="token punctuation">(</span>hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//返回堆顶数据</span>
HeapDataType <span class="token function">HeapTop</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp <span class="token operator">&amp;&amp;</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> hp<span class="token operator">-&gt;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">HeapSize</span><span class="token punctuation">(</span>Heap<span class="token operator">*</span> hp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>hp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> hp<span class="token operator">-&gt;</span>size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/54d5e67cc71671b62bbeec514802e050/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Spring Boot】网页五子棋项目中遇到的困难及解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f5f0215783e7785916531243560f03c6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据结构之栈</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>