<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>从 0 开始实现一个 SpringBoot &#43; Vue 项目 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e047fc1023a1c02f51ea1ab35de6afdc/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="从 0 开始实现一个 SpringBoot &#43; Vue 项目">
  <meta property="og:description" content="从 0 开始实现一个 SpringBoot &#43; Vue 项目 从 0 开始实现一个 SpringBoot &#43; Vue 项目软件和工具创建 SpringBoot 后端项目创建 MySQL 数据库配置文件实现增删改查接口Model 层mapper 层service 层controller 层测试 实现项目功能接口代码测试 创建 Vue 前端安装 Node.js配置 npm 镜像安装脚手架创建并配置项目项目结构Vue 组件结构Vue 组件调用与传值Vue 组件的生命周期测试 Vue 程序需求分析 实现项目页面框架搭建项目配置主界面设计设置路由内容组件设计发送组件设计分页面设计排行页面 LikesSortedView.vue最新页面 NewestView.vue随机页面 RandomView.vue 项目启动 源码下载 从 0 开始实现一个 SpringBoot &#43; Vue 项目 参考：梦想屋A
软件和工具 后端开发软件：IntelliJ IDEA前端开发软件：Visual Studio Code后端框架：SpringBoot后端语言：Java前端框架：Vue 这是后面要用的妙妙小工具：
服务器连接工具：Termius数据库：MySQL数据库管理工具：Navicat Premium数据库连接工具：MyBatisAPI 文档生成工具：SwaggerAPI 文档美化工具：Knife4jUI 组件库：Element网络请求库：Axios字体处理库：SfntlyJSON 处理工具：FastjsonJava 工具库：Lombok 可以不必全部用这些来做，有很多类似的产品可以替代。
创建 SpringBoot 后端项目 首先我们打开 IDEA，点击新建项目，选择 Spring Initializr，然后在右侧填写项目名称，类型选择 Maven，JDK 版本选择1.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-18T21:42:48+08:00">
    <meta property="article:modified_time" content="2023-12-18T21:42:48+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">从 0 开始实现一个 SpringBoot &#43; Vue 项目</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>从 0 开始实现一个 SpringBoot + Vue 项目</h4> 
 <ul><li><a href="#_0__SpringBoot__Vue__2" rel="nofollow">从 0 开始实现一个 SpringBoot + Vue 项目</a></li><li><ul><li><a href="#_5" rel="nofollow">软件和工具</a></li><li><a href="#_SpringBoot__36" rel="nofollow">创建 SpringBoot 后端项目</a></li><li><a href="#_MySQL__177" rel="nofollow">创建 MySQL 数据库</a></li><li><a href="#_205" rel="nofollow">配置文件</a></li><li><a href="#_278" rel="nofollow">实现增删改查接口</a></li><li><ul><li><a href="#Model__280" rel="nofollow">Model 层</a></li><li><a href="#mapper__352" rel="nofollow">mapper 层</a></li><li><a href="#service__465" rel="nofollow">service 层</a></li><li><a href="#controller__553" rel="nofollow">controller 层</a></li><li><a href="#_654" rel="nofollow">测试</a></li></ul> 
   </li><li><a href="#_828" rel="nofollow">实现项目功能接口</a></li><li><ul><li><a href="#_833" rel="nofollow">代码</a></li><li><a href="#_1192" rel="nofollow">测试</a></li></ul> 
   </li><li><a href="#_Vue__1297" rel="nofollow">创建 Vue 前端</a></li><li><ul><li><a href="#_Nodejs_1300" rel="nofollow">安装 Node.js</a></li><li><a href="#_npm__1315" rel="nofollow">配置 npm 镜像</a></li><li><a href="#_1344" rel="nofollow">安装脚手架</a></li><li><a href="#_1354" rel="nofollow">创建并配置项目</a></li><li><a href="#_1511" rel="nofollow">项目结构</a></li><li><a href="#Vue__1560" rel="nofollow">Vue 组件结构</a></li><li><a href="#Vue__1569" rel="nofollow">Vue 组件调用与传值</a></li><li><a href="#Vue__1637" rel="nofollow">Vue 组件的生命周期</a></li><li><a href="#_Vue__1667" rel="nofollow">测试 Vue 程序</a></li><li><a href="#_1706" rel="nofollow">需求分析</a></li></ul> 
   </li><li><a href="#_1721" rel="nofollow">实现项目页面</a></li><li><ul><li><a href="#_1723" rel="nofollow">框架搭建</a></li><li><a href="#_1739" rel="nofollow">项目配置</a></li><li><a href="#_1792" rel="nofollow">主界面设计</a></li><li><a href="#_1905" rel="nofollow">设置路由</a></li><li><a href="#_1944" rel="nofollow">内容组件设计</a></li><li><a href="#_2160" rel="nofollow">发送组件设计</a></li><li><a href="#_2315" rel="nofollow">分页面设计</a></li><li><ul><li><a href="#_LikesSortedViewvue_2318" rel="nofollow">排行页面 LikesSortedView.vue</a></li><li><a href="#_NewestViewvue_2415" rel="nofollow">最新页面 NewestView.vue</a></li><li><a href="#_RandomViewvue_2489" rel="nofollow">随机页面 RandomView.vue</a></li></ul> 
    </li><li><a href="#_2564" rel="nofollow">项目启动</a></li></ul> 
   </li><li><a href="#_2588" rel="nofollow">源码下载</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_0__SpringBoot__Vue__2"></a>从 0 开始实现一个 SpringBoot + Vue 项目</h2> 
<p>参考：<a href="https://blog.csdn.net/BYZY1314/article/details/129057543">梦想屋A</a></p> 
<h3><a id="_5"></a>软件和工具</h3> 
<ul><li>后端开发软件：IntelliJ IDEA</li><li>前端开发软件：Visual Studio Code</li><li>后端框架：SpringBoot</li><li>后端语言：Java</li><li>前端框架：Vue</li></ul> 
<p>这是后面要用的妙妙小工具：</p> 
<ul><li>服务器连接工具：Termius</li><li>数据库：MySQL</li><li>数据库管理工具：Navicat Premium</li><li>数据库连接工具：MyBatis</li><li>API 文档生成工具：Swagger</li><li>API 文档美化工具：Knife4j</li><li>UI 组件库：Element</li><li>网络请求库：Axios</li><li>字体处理库：Sfntly</li><li>JSON 处理工具：Fastjson</li><li>Java 工具库：Lombok</li></ul> 
<blockquote> 
 <p>可以不必全部用这些来做，有很多类似的产品可以替代。</p> 
</blockquote> 
<h3><a id="_SpringBoot__36"></a>创建 SpringBoot 后端项目</h3> 
<p>首先我们打开 IDEA，点击新建项目，选择 Spring Initializr，然后在右侧填写项目名称，类型选择 Maven，JDK 版本选择1.8，如下图所示，然后点击下一步。</p> 
<p><img src="https://images2.imgbox.com/25/60/oSTFCGeh_o.png" alt="在这里插入图片描述"></p> 
<p>在新的页面中选择 SpringBoot 版本 3.0.2，引入一些依赖，点击创建。</p> 
<p><img src="https://images2.imgbox.com/d8/f8/pTtenuXq_o.png" alt="在这里插入图片描述"></p> 
<p>后面在 pom.xml 中把 Java 版本改回 1.8，SpringBoot 版本改回 2.7.6。</p> 
<p>项目结构：</p> 
<p><img src="https://images2.imgbox.com/0d/fb/HYzFr5kA_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到 SpringBoot 的基础结构有三个文件：</p> 
<ul><li>src/main/java 下的程序入口：DreamHouseApplication</li><li>src/main/resources 下的配置文件：application.properties</li><li>src/test 下的测试入口：DreamHouseApplicationTests</li></ul> 
<p>在运行类 DreamHouseApplication 同级目录下创建 controller、service、mapper、model 四个目录:</p> 
<p><img src="https://images2.imgbox.com/25/ea/0Rp8yxQA_o.png" alt="在这里插入图片描述"></p> 
<p>controller 层：控制层</p> 
<ul><li>作用是请求和响应控制。</li><li>负责前后端交互，接受前端请求，调用 service 层，接收 service 层返回的数据，最后返回具体的页面和数据到客户端。</li></ul> 
<p>service 层：业务逻辑层</p> 
<ul><li>作用是完成功能设计。</li><li>调用 mapper 层接口，接收 mapper 层返回的数据，完成项目的基本功能设计。</li></ul> 
<p>mapper 层：数据持久层，也被称为 dao 层</p> 
<ul><li>作用是访问数据库，向数据库发送 sql 语句，完成数据的增删改查任务。</li></ul> 
<p>model 层：数据库实体层，也被称为 entity 层、pojo 层</p> 
<ul><li>用于存储数据库中的数据，类属性与数据库表字段对应。</li><li>通常情况下，Model 层使用 ORM（对象关系映射）技术，如 JPA，MyBatis 等与数据库进行交互。</li></ul> 
<p>在项目目录中的 pom.xml 配置文件中引入本次项目中需要用到的相关依赖：</p> 
<pre><code class="prism language-xml">        <span class="token comment">&lt;!--MyBatis--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--Swagger3--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--knife4j--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.xiaoymin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>knife4j-spring-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--JSON--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.15<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--MySQL--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.31<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--Lombok--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>将这些依赖放到&lt;dependencies&gt;&lt;/dependencies&gt;标签内，就接着 SpringBoot 自带的一些依赖下面就行了。</p> 
<p>稍微解释一下这些依赖:</p> 
<ul><li> <p>Lombok：可以通过注解的方式为 Java 类生成许多常用的方法，例如 getter、setter、toString、equals 等，省去了手写这些方法的代码。</p> </li><li> <p>Swagger：开源的 API 文档生成工具，可以根据代码中的注释自动生成 API 文档。</p> </li><li> <p>Knife4j：用来美化 Swagger 生成的 API 文档。</p> </li><li> <p>MyBatis：持久层框架，主要用于简化数据库操作，提高代码可读性，降低数据访问代码的维护难度，提高效率。</p> </li><li> <p>MySQL：MySQL 官方提供的 Java 用的 JDBC 驱动，它允许 Java 程序通过 JDBC API 连接到 MySQL 数据库。</p> </li><li> <p>JSON：用来将 json 数据序列化和反序列化的，主要是觉得 SpringBoot 自带的 json 工具不好用。</p> </li></ul> 
<h3><a id="_MySQL__177"></a>创建 MySQL 数据库</h3> 
<p>安装 MySQL 这里就不讲了，这里用 Navicat Premium 连接数据库。</p> 
<p>填写连接名、主机IP、端口、用户名和密码等，然后点击连接。</p> 
<p><img src="https://images2.imgbox.com/96/2d/e3ItmqyK_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>可以先点测试连接，显示连接成功，在点确定。</p> 
</blockquote> 
<p>连接上数据库之后，新建数据库–&gt;新建表–&gt;添加 id、ip、province、time、str、likes 六个字段。</p> 
<p>表名为 dream，具体内容如下所示：</p> 
<p><img src="https://images2.imgbox.com/ef/93/ldjX2cdA_o.png" alt="在这里插入图片描述"></p> 
<p>这里有两个细节：</p> 
<ol><li>id 要设置自动递增</li><li>likes 设置为无符号</li></ol> 
<p>友情链接：<a href="https://blog.csdn.net/weixin_36302350/article/details/113283438">mysql自增navicat_navicat怎么设置主键自增</a></p> 
<h3><a id="_205"></a>配置文件</h3> 
<p>让我们回到 SpringBoot，打开刚刚介绍到的配置文件 application.properties 进行项目配置：</p> 
<pre><code class="prism language-cpp">server<span class="token punctuation">.</span>port <span class="token operator">=</span> <span class="token number">8087</span>

spring<span class="token punctuation">.</span>mvc<span class="token punctuation">.</span>pathmatch<span class="token punctuation">.</span>matching<span class="token operator">-</span>strategy <span class="token operator">=</span> ant_path_matcher

<span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">Swagger</span></span>
swagger<span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span>

<span class="token macro property"><span class="token directive-hash">#</span> <span class="token expression">MySQL</span></span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>url <span class="token operator">=</span> jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token punctuation">(</span>服务器IP地址<span class="token punctuation">)</span><span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span><span class="token punctuation">(</span>数据库名<span class="token punctuation">)</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>username <span class="token operator">=</span> <span class="token punctuation">(</span>用户名<span class="token punctuation">)</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token punctuation">(</span>密码<span class="token punctuation">)</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>driver<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">-</span>name <span class="token operator">=</span> com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver
</code></pre> 
<p>稍微解释一下：</p> 
<ul><li> <p>server.port：指定项目使用 8087 端口，默认 8080 端口。</p> </li><li> <p>spring.mvc.pathmatch.matching-strategy：指定 Spring MVC 框架中 URL 路径匹配策略的实现类的类名，ant_path_matcher 是一种路径匹配策略，使用 Ant 风格的通配符来匹配 URL 路径。</p> </li><li> <p>swagger.enabled：启用 Swagger 工具。</p> </li><li> <p>spring.datasource.url：指定 MySQL 数据库的 URL。这里的服务器 IP 地址就是主机名，我的是 localhost（前面要带//），数据库名是 dreamhouse，完整格式：jdbc:mysql://localhost:3306/dreamhouse。</p> </li><li> <p>spring.datasource.username：指定连接 MySQL 数据库使用的用户名。我的是 root。</p> </li><li> <p>spring.datasource.password：指定连接 MySQL 数据库使用的密码。</p> </li><li> <p>spring.datasource.driver-class-name：指定连接 MySQL 数据库使用的 JDBC 驱动程序的类名。</p> </li></ul> 
<p>这里可能会有注释中文乱码问题，在设置中可以解决，全部换成 UTF-8：</p> 
<p><img src="https://images2.imgbox.com/b0/2a/1nfZjItT_o.png" alt="在这里插入图片描述"></p> 
<p>友情链接：<a href="https://blog.csdn.net/jabony/article/details/88579115">【SpringBoot2】读取配置application.properties文件乱码问题解决</a></p> 
<p>第一次用要安装点驱动啥的，点一下就安装好了，没截到图。</p> 
<p>配置好以后，可以测试连接：</p> 
<p><img src="https://images2.imgbox.com/b1/2a/ixz1eQAU_o.png" alt="在这里插入图片描述"></p> 
<p>也可以在 IDEA 看到数据库：</p> 
<p><img src="https://images2.imgbox.com/a4/92/rqEfXbUb_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_278"></a>实现增删改查接口</h3> 
<h4><a id="Model__280"></a>Model 层</h4> 
<p>回顾一下 model 层：数据库实体层，也被称为 entity 层、pojo 层</p> 
<ul><li>用于存储数据库中的数据，类属性与数据库表字段对应。</li><li>通常情况下，Model 层使用 ORM（对象关系映射）技术，如 JPA，MyBatis 等与数据库进行交互。</li></ul> 
<p>在 model 目录下新建 Data 类：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>model</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModelProperty</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @BelongsProject:dream_house
 * @BelongsPackage:com.example.dream_house.model
 * @Author:Uestc_Xiye
 * @CreateTime:2023-12-17 16:29:49
 */</span>
 
<span class="token annotation punctuation">@lombok.Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span><span class="token string">"数据库字段"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Data</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"信息所属ID"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"信息来源IP地址"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> ip<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"信息来源所属省份"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"广东"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> province<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"内容发布时间"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"2023-12-17 16:58:00"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> time<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"梦想内容"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"环游世界！"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> str<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"点赞数"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"52"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> likes<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>接下来说一下这段代码中的各个注解的作用：</p> 
<ul><li> <p>@lombok.Data：这是 Lombok 框架提供的注解，它会自动生成 getter、setter、toString、equals、hashCode 等方法。使用该注解可以简化代码，并提高开发效率。</p> </li><li> <p>@NoArgsConstructor：这也是 Lombok 提供的注解，它会生成一个无参构造器，可以避免手动编写无参构造器。这个注解常用于一些框架或工具的实例化。</p> </li><li> <p>@AllArgsConstructor：同样是 Lombok 提供的注解，它会生成一个全参构造器，可以避免手动编写全参构造器。这个注解也常用于一些框架或工具的实例化。</p> </li><li> <p>@ApiModel：这是 Swagger 框架提供的注解，用于描述一个模型类。这个注解的作用是将模型类描述为一个 API 文档的模型，可以通过该注解指定模型类的名称和描述信息。</p> </li><li> <p>@ApiModelProperty：也是 Swagger 框架提供的注解，用于描述模型类中的属性信息。该注解可以设置属性的名称、描述、是否必需等信息，以便在 Swagger 生成的 API 文档中显示。</p> 
  <ul><li> <p>value：属性的描述信息，用于在 API 文档中显示该属性的作用。</p> </li><li> <p>required：属性是否必需。当该值为 true 时，表示该属性必须包含在请求中；当该值为 false 时，表示该属性可以为空或者不包含在请求中。</p> </li><li> <p>example：属性的示例值。用于在 API 文档中显示该属性的样例值，方便开发者理解该属性的类型和取值范围。</p> </li></ul> </li></ul> 
<h4><a id="mapper__352"></a>mapper 层</h4> 
<p>回顾一下 mapper 层：数据持久层，也被称为 dao 层</p> 
<ul><li>作用是访问数据库，向数据库发送 sql 语句，完成数据的增删改查任务。</li></ul> 
<p>在 mapper 目录下新建 DataMapper 接口：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>mapper</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @BelongsProject:dream_house
 * @BelongsPackage:com.example.dream_house.mapper
 * @Author:Uestc_Xiye
 * @CreateTime:2023-12-17 16:36:57
 */</span>

<span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DataMapper</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 信息来源IP地址
     * @param ip
     * 信息来源省份
     * @param province
     * 信息发出时间
     * @param time
     * 信息内容
     * @param str
     * 点赞数
     * @param likes
     *
     * @return
     */</span>
    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">"insert into dream (ip, province, time, str, likes) values(#{ip}, #{province}, #{time}, #{str}, #{likes})"</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"ip"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> ip<span class="token punctuation">,</span>
               <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"province"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> province<span class="token punctuation">,</span>
               <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"time"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> time<span class="token punctuation">,</span>
               <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"str"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> str<span class="token punctuation">,</span>
               <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"likes"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> likes<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 信息id
     * @param id
     *
     * @return
     *
     * property属性对应Data对象中的成员名，column对应select出的字段名。
     */</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"ip"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"ip"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"province"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"province"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"time"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"time"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"str"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"str"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"likes"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"likes"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from dream where id = #{id}"</span><span class="token punctuation">)</span>
    <span class="token class-name">Data</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 用Data对象来作为传参,这样语句中的#{id}、#{ip}等数据就分别对应Data对象中的id和ip等属性。
     *
     * @param data
     */</span>
    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">"update dream set ip=#{ip}, province=#{province}, time=#{time}, str=#{str}, likes=#{likes} where id=#{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Data</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 删除该id对应的信息
     *
     * @param id
     */</span>
    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">"delete from dream where id =#{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>相关注解的作用：</p> 
<ul><li> <p>@Mapper：是 MyBatis 框架提供的注解，用于标记一个 Java 接口，该接口用于定义数据访问方法。在使用 @Mapper 注解后，MyBatis 会自动扫描该接口，为其创建一个代理对象。该代理对象可以将接口方法与 MyBatis 的 SQL 映射文件中的 SQL 语句进行绑定，并完成数据访问的操作。</p> </li><li> <p>@Insert：也是 MyBatis 框架提供的注解，该注解的值为 SQL 语句，用于指定插入操作的具体逻辑。该 SQL 语句使用了预处理语句，从而避免了 SQL 注入的问题。</p> </li><li> <p>@Param：</p> 
  <ul><li> <p>/** */中的内容是 JavaDoc（Java文档注释），它用于对方法进行说明、描述和文档化。</p> </li><li> <p>在方法中的 @Param 注解用于指定参数的名称，以便在 SQL 语句中使用相应的占位符。</p> </li></ul> </li><li> <p>@Results：用于定义从查询结果集中将查询结果映射为 Java 对象的过程。</p> </li><li> <p>@Select：同样是 MyBatis 框架提供的注解，该注解的值为 SQL 语句，用于指定查询操作的具体逻辑。</p> </li><li> <p>@Update：MyBatis 框架提供的注解，用于指定更新操作的 SQL 语句。</p> </li><li> <p>@Delete：MyBatis 框架提供的注解，用于指定删除操作的 SQL 语句。</p> </li></ul> 
<h4><a id="service__465"></a>service 层</h4> 
<p>简单回顾一下 service 层：业务逻辑层</p> 
<ul><li>作用是完成功能设计。</li><li>调用 mapper 层接口，接收 mapper 层返回的数据，完成项目的基本功能设计。</li></ul> 
<p>在 service 目录下新建 DataService 类：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>mapper<span class="token punctuation">.</span></span><span class="token class-name">DataMapper</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @BelongsProject:dream_house
 * @BelongsPackage:com.example.dream_house.service
 * @Author:Uestc_Xiye
 * @CreateTime:2023-12-17 17:04:45
 */</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">DataMapper</span> dataMapper<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 新增信息
     *
     * @param ip
     * @param province
     * @param time
     * @param str
     * @param likes
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span> ip<span class="token punctuation">,</span> <span class="token class-name">String</span> province<span class="token punctuation">,</span> <span class="token class-name">String</span> time<span class="token punctuation">,</span> <span class="token class-name">String</span> str<span class="token punctuation">,</span> <span class="token keyword">int</span> likes<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        dataMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>ip<span class="token punctuation">,</span> province<span class="token punctuation">,</span> time<span class="token punctuation">,</span> str<span class="token punctuation">,</span> likes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"succeed"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 查询id对应的信息
     *
     * @param id
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Data</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> dataMapper<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 更新信息
     *
     * @param data
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Data</span> data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        dataMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 删除id对应的信息
     *
     * @param id
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        dataMapper<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>相关注解的作用：</p> 
<ul><li> <p>@Service：用于标注一个类为 Spring 框架中的一个服务类，该类中通常包含了业务逻辑的实现。使用该注解可以使 Spring 框架自动扫描并将该类实例化，并将其作为服务类注册到容器中，以供其他组件使用。当我们需要在其他类中使用该服务类时，只需要通过依赖注入的方式获取该类的实例即可。</p> </li><li> <p>@Autowired：用于实现 Spring 框架中的自动装配功能，将需要使用的 Bean 对象注入到指定的属性中。通过使用该注解，可以避免手动创建 Bean 实例和手动注入对象的麻烦。</p> </li></ul> 
<h4><a id="controller__553"></a>controller 层</h4> 
<p>简单回顾一下 controller 层：控制层</p> 
<ul><li>作用是请求和响应控制。</li><li>负责前后端交互，接受前端请求，调用 service 层，接收 service 层返回的数据，最后返回具体的页面和数据到客户端。</li></ul> 
<p>在 controller 目录下新建 DataController 类：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">DataService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">Api</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiOperation</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>v3<span class="token punctuation">.</span>oas<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span>parameters<span class="token punctuation">.</span></span><span class="token class-name">RequestBody</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @BelongsProject:dream_house
 * @BelongsPackage:com.example.dream_house.controller
 * @Author:Uestc_Xiye
 * @CreateTime:2023-12-17 17:17:36
 */</span>

<span class="token annotation punctuation">@Api</span><span class="token punctuation">(</span>tags <span class="token operator">=</span> <span class="token string">"API接口"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@CrossOrigin</span><span class="token punctuation">(</span>origins <span class="token operator">=</span> <span class="token string">"*"</span><span class="token punctuation">,</span> maxAge <span class="token operator">=</span> <span class="token number">3600</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DataController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">DataService</span> dataService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"添加完整信息"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/insert"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Data</span> data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// @RequestBody注解用来绑定通过http请求中application/json类型上传的数据</span>
        <span class="token keyword">return</span> dataService<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">getIp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">getProvince</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">getStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token function">getLikes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"查询id对应的信息"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/findById/{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Data</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> dataService<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"更新信息"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">"/update"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Data</span> data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        dataService<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"删除指定id的信息"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">"/delete/{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        dataService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>相关注解的作用：</p> 
<ul><li> <p>@Api：Swagger 的注解之一，用于对 API 接口进行注释和说明。tags 属性是 Swagger 文档中的一个重要属性，可以用来将 API 接口进行分类，方便管理和查找。</p> </li><li> <p>@RestController：Spring MVC 中的注解之一，用于标识该类是一个基于 RESTful 风格的 Web 服务类。</p> </li><li> <p>@CrossOrigin：Spring 中的一个注解，用于支持跨域请求。跨域请求通常指在一个域名下的页面中使用 AJAX 技术向不同的域名或端口号的 Web 服务发送请求。</p> </li><li> <p>@ApiOperation：Swagger 的注解之一，用于对 API 接口中的具体操作进行注释和说明。</p> </li><li> <p>@PostMapping：Spring MVC 中的注解之一，表示该方法接收 POST 请求。</p> </li><li> <p>@RequestBody：Spring MVC 中的注解之一，表示该方法接收的请求参数为请求体中的数据。</p> </li><li> <p>@GetMapping：Spring MVC 中的注解之一，表示该方法接收 GET 请求。</p> </li><li> <p>@PathVariable：Spring MVC 中的注解之一，表示该方法接收的请求参数为路径参数。</p> </li><li> <p>@PutMapping：Spring MVC 中的注解之一，表示该方法接收 PUT 请求。</p> </li><li> <p>@DeleteMapping：Spring MVC 中的注解之一，表示该方法接收 DELETE 请求。</p> </li></ul> 
<p>这里要引入 Spring Web，不然在使用这些注解的时候报错无法解析。</p> 
<p><img src="https://images2.imgbox.com/3b/a1/n7haRW7G_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_654"></a>测试</h4> 
<p>预先设置一些数据库内容：</p> 
<p><img src="https://images2.imgbox.com/83/f0/1p2xvKPn_o.png" alt="在这里插入图片描述"></p> 
<p>在把上面的四层架构都处理完之后，我们直接启动项目。</p> 
<p>运行 DreamHouseApplication，或者运行它的 main 方法。</p> 
<p>踩坑 1：Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstre</p> 
<p>切换“跳过测试”模式：</p> 
<p><img src="https://images2.imgbox.com/65/21/8azMdVKD_o.png" alt="在这里插入图片描述"></p> 
<p>友情链接：<a href="https://blog.csdn.net/HKkkkkSky/article/details/124280771">解决:Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstre</a></p> 
<p>踩坑点2：Consider defining a bean of type ‘com.example.dream_house.mapper.DataMapper’ in your configuration.</p> 
<pre><code>18:10:27.233 [Thread-1] DEBUG org.springframework.boot.devtools.restart.classloader.RestartClassLoader - Created RestartClassLoader org.springframework.boot.devtools.restart.classloader.RestartClassLoader@6d1a5149

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v2.7.6)

2023-12-17 18:10:27.843  INFO 11824 --- [  restartedMain] c.e.dream_house.DreamHouseApplication    : Starting DreamHouseApplication using Java 1.8.0_192 on LAPTOP-P25TKBR2 with PID 11824 (C:\Users\81228\Documents\Program\Java Project\DreamHouse\dream_house\target\classes started by 81228 in C:\Users\81228\Documents\Program\Java Project\DreamHouse\dream_house)
2023-12-17 18:10:27.844  INFO 11824 --- [  restartedMain] c.e.dream_house.DreamHouseApplication    : No active profile set, falling back to 1 default profile: "default"
2023-12-17 18:10:27.975  INFO 11824 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-12-17 18:10:27.975  INFO 11824 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-12-17 18:10:29.551  WARN 11824 --- [  restartedMain] o.m.s.mapper.ClassPathMapperScanner      : No MyBatis mapper was found in '[com.example.dream_house]' package. Please check your configuration.
2023-12-17 18:10:30.264  INFO 11824 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8087 (http)
2023-12-17 18:10:30.265  INFO 11824 --- [  restartedMain] o.a.catalina.core.AprLifecycleListener   : An older version [1.2.24] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [1.2.30]
2023-12-17 18:10:30.265  INFO 11824 --- [  restartedMain] o.a.catalina.core.AprLifecycleListener   : Loaded Apache Tomcat Native library [1.2.24] using APR version [1.7.0].
2023-12-17 18:10:30.265  INFO 11824 --- [  restartedMain] o.a.catalina.core.AprLifecycleListener   : APR capabilities: IPv6 [true], sendfile [true], accept filters [false], random [true], UDS [false].
2023-12-17 18:10:30.265  INFO 11824 --- [  restartedMain] o.a.catalina.core.AprLifecycleListener   : APR/OpenSSL configuration: useAprConnector [false], useOpenSSL [true]
2023-12-17 18:10:30.283  INFO 11824 --- [  restartedMain] o.a.catalina.core.AprLifecycleListener   : OpenSSL successfully initialized [OpenSSL 1.1.1g  21 Apr 2020]
2023-12-17 18:10:30.295  INFO 11824 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-12-17 18:10:30.295  INFO 11824 --- [  restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.69]
2023-12-17 18:10:30.507  INFO 11824 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2023-12-17 18:10:30.507  INFO 11824 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2531 ms
2023-12-17 18:10:30.645  WARN 11824 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataController': Unsatisfied dependency expressed through field 'dataService'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataService': Unsatisfied dependency expressed through field 'dataMapper'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.example.dream_house.mapper.DataMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
2023-12-17 18:10:30.651  INFO 11824 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2023-12-17 18:10:30.679  INFO 11824 --- [  restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2023-12-17 18:10:30.751 ERROR 11824 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Field dataMapper in com.example.dream_house.service.DataService required a bean of type 'com.example.dream_house.mapper.DataMapper' that could not be found.

The injection point has the following annotations:
	- @org.springframework.beans.factory.annotation.Autowired(required=true)


Action:

Consider defining a bean of type 'com.example.dream_house.mapper.DataMapper' in your configuration.
</code></pre> 
<p>解决方法：在 dataService.java 的 private DataMapper dataMapper; 的上面的@Autowired 改成 @Autowired(required = false)。</p> 
<p><img src="https://images2.imgbox.com/af/f6/e8NZ6QTE_o.png" alt="在这里插入图片描述"></p> 
<p>友情链接：<a href="https://blog.csdn.net/Andrew_Chenwq/article/details/132636315">Consider defining a bean of type问题解决</a></p> 
<p>运行成功后，在浏览器中访问 http://127.0.0.1:8087/doc.html 页面，该页面是 Swagger 生成的 API 文档经过 knife4j 美化过后的 API 文档页面。</p> 
<p><img src="https://images2.imgbox.com/a4/ce/juPoeb68_o.png" alt="在这里插入图片描述"></p> 
<p>点击左侧的 “API接口” 可以看到出现了四个熟悉的接口，就是我们刚刚写的 “增删改查” 对应的接口，该 API 文档的好处就是可以在线对接口进行测试。</p> 
<p>首先测试添加接口，依次点击并填写数据信息：</p> 
<p><img src="https://images2.imgbox.com/6f/f6/RvWIUw5a_o.png" alt="在这里插入图片描述"></p> 
<p>然后点击发送，看到响应内容 succeed 说明添加成功了：</p> 
<p><img src="https://images2.imgbox.com/44/1d/YvA8pQJP_o.png" alt="在这里插入图片描述"></p> 
<p>我们前往 Navicat Premium 查看数据库内容有没有变化，刷新一下页面，可以看到在最下面的数据出现了我们刚刚添加进去的内容：</p> 
<p><img src="https://images2.imgbox.com/91/5e/hbgfnqBw_o.png" alt="在这里插入图片描述"></p> 
<p>其次测试查询接口，依次点击并填写 id 信息，然后点击发送。</p> 
<p>可以看到响应内容成功拿到数据：</p> 
<p><img src="https://images2.imgbox.com/7d/b3/T6coDN7I_o.png" alt="在这里插入图片描述"></p> 
<p>然后测试更新接口，依次点击并填写信息，然后点击发送：</p> 
<p><img src="https://images2.imgbox.com/27/ab/XREzrHbp_o.png" alt="在这里插入图片描述"></p> 
<p>由于没有设置返回值，所以响应内容为空。</p> 
<p>我们直接去看数据库的内容变化，刷新一下数据库，可以看到该条数据已经发生了变化：</p> 
<p><img src="https://images2.imgbox.com/1e/87/WZ7Joicn_o.png" alt="在这里插入图片描述"></p> 
<p>最后测试删除接口，点击并填写 id 信息，然后点击发送：</p> 
<p><img src="https://images2.imgbox.com/75/fd/u2cmq3gm_o.png" alt="在这里插入图片描述"></p> 
<p>由于没有设置返回值，所以还是直接前往数据库查看，刷新数据库，发现 id 为 4 的这条数据不见了，说明接口没问题：</p> 
<p><img src="https://images2.imgbox.com/2a/dc/mZEjMXC0_o.png" alt="在这里插入图片描述"></p> 
<p>经过测试，“增删改查”四个接口全部都能够正常使用。</p> 
<h3><a id="_828"></a>实现项目功能接口</h3> 
<p>上面详细介绍了编写 “增删改查” 四个接口，下面给出其他项目功能接口。</p> 
<h4><a id="_833"></a>代码</h4> 
<p>model 层之前写的一个 Data 的实体类就继续保留，我们再增加一个 getUser 类，用来作为前端从接口获取到的信息的类。</p> 
<p>原理与 Data 类相同，这里就不再进行讲解了，直接上代码：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>model</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span>annotations<span class="token punctuation">.</span></span><span class="token class-name">ApiModelProperty</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">AllArgsConstructor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">NoArgsConstructor</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @BelongsProject:dream_house
 * @BelongsPackage:com.example.dream_house.model
 * @Author:Uestc_Xiye
 * @CreateTime:2023-12-17 22:25:14
 */</span>

<span class="token annotation punctuation">@lombok.Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token annotation punctuation">@ApiModel</span><span class="token punctuation">(</span><span class="token string">"获取信息内容"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> getUser <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"信息所属ID"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"信息来源所属省份"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"湖北"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> province<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"梦想内容"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"环游世界"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> str<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@ApiModelProperty</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"点赞数"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> example <span class="token operator">=</span> <span class="token string">"52"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> likes<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>其实就是 Data 类去掉了 ip 和 time。</p> 
<p>mapper 层我们需要在 DataMapper 接口中添加新的内容，新增的方法有：</p> 
<ul><li>查询点赞数前 50 名的信息。</li><li>查询最新的 50 条信息。</li><li>查询随机的 50 条信息。</li><li>更新指定 id 的点赞数 + 1。</li><li>更新指定 id 的点赞数 - 1。</li></ul> 
<p>方法的原理还是与之前相同，只是改变了 SQL 语句。</p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     * 查询点赞数前50名的信息
     */</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"province"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"province"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"str"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"str"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"likes"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"likes"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM dream ORDER BY likes DESC LIMIT 50"</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>getUser<span class="token punctuation">&gt;</span></span> <span class="token function">findByLikes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 查询最新的50条信息
     */</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"province"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"province"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"str"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"str"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"likes"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"likes"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM dream ORDER BY time DESC LIMIT 50"</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>getUser<span class="token punctuation">&gt;</span></span> <span class="token function">findByTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 查询随机的50条信息
     */</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"province"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"province"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"str"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"str"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"likes"</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">"likes"</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM dream ORDER BY rand() DESC LIMIT 50"</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>getUser<span class="token punctuation">&gt;</span></span> <span class="token function">findByRand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 更新指定id的点赞数+1
     */</span>
    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">"UPDATE dream SET likes = likes + 1 WHERE id = #{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">increaseLikesById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 更新指定id的点赞数-1
     */</span>
    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">"UPDATE dream SET likes = likes - 1 WHERE id = #{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">decreaseLikesById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>service 层在这里增加的内容比较多，因为是业务逻辑层，需要完成功能设计。</p> 
<p>首先在 service 目录下新建 getIP、getProvince、getTime 三个类，分别用来获取用户 IP 地址、用户所在省份、内容发送时间。</p> 
<p>getIP 类代码如下，可以从用户的请求头中筛选出用户真实的IP地址：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletResponse</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @BelongsProject:dream_house
 * @BelongsPackage:com.example.dream_house.service
 * @Author:Uestc_Xiye
 * @CreateTime:2023-12-18 09:12:22
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> getIP <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getIp</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置响应头允许ajax跨域访问，星号表示所有的异域请求都可以接受</span>
        response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Origin"</span><span class="token punctuation">,</span> <span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Methods"</span><span class="token punctuation">,</span> <span class="token string">"GET,POST"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">getIpAddr</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getIpAddr</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 获取请求头"x-forwarded-for"对应的value</span>
        <span class="token class-name">String</span> ip <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"x-forwarded-for"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 如果获取的ip值为空</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ip <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> ip<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">"unknown"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 则获取请求头"Proxy-Client-IP"对应的value</span>
            ip <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"Proxy-Client-IP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 如果获取的ip值仍为空</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ip <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> ip<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">"unknown"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//则获取请求头"WL-Proxy-Client-IP"对应的value</span>
            ip <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"WL-Proxy-Client-IP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 如果以上方式获取的ip值都为空</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ip <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> ip<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">"unknown"</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//则直接获取ip地址</span>
            ip <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRemoteAddr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 返回ip地址</span>
        <span class="token keyword">return</span> ip<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>getProvince 类代码如下，可以调用外部 API 来检测出用户 ip 地址所属的省份：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span><span class="token class-name">JSON</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span><span class="token class-name">JSONObject</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">ResponseEntity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestTemplate</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @BelongsProject:dream_house
 * @BelongsPackage:com.example.dream_house.service
 * @Author:Uestc_Xiye
 * @CreateTime:2023-12-18 09:23:34
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> getProvince <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * @param ip
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get_Province</span><span class="token punctuation">(</span><span class="token class-name">String</span> ip<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 设置api的url</span>
        <span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"https://ip.useragentinfo.com/json?ip="</span> <span class="token operator">+</span> ip<span class="token punctuation">;</span>

        <span class="token class-name">RestTemplate</span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 发起一个HTTP GET请求，获取指定URL的响应实体，String.class表示要获取的响应实体的类型是字符串类型</span>
        <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> response <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">getForEntity</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 将Spring类型转换为JSON类型</span>
        <span class="token class-name">JSONObject</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 取出json中的数据</span>
        <span class="token class-name">String</span> province <span class="token operator">=</span> json<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"province"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> province<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>getTime 类代码如下，直接调用 Java 自带的包就行：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dream_house<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token class-name">SimpleDateFormat</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @BelongsProject:dream_house
 * @BelongsPackage:com.example.dream_house.service
 * @Author:Uestc_Xiye
 * @CreateTime:2023-12-18 09:29:50
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> getTime <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">get_Time</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 设置日期格式</span>
        <span class="token class-name">SimpleDateFormat</span> simpleDateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取当前系统时间</span>
        <span class="token class-name">String</span> date <span class="token operator">=</span> simpleDateFormat<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> date<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>接下来修改 DataService 类的内容，需要新增以下方法：</p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     * 获取用户数据并调用mapper层上传数据库
     *
     * @param request
     * @param response
     * @param str
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token class-name">Add</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        getIP getIP <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">getIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        getProvince getProvince <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">getProvince</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        getTime getTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取信息的IP地址</span>
        <span class="token class-name">String</span> ip <span class="token operator">=</span> getIP<span class="token punctuation">.</span><span class="token function">getIp</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取信息所属省份</span>
        <span class="token class-name">String</span> province <span class="token operator">=</span> getProvince<span class="token punctuation">.</span><span class="token function">get_Province</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取当前时间</span>
        <span class="token class-name">String</span> time <span class="token operator">=</span> getTime<span class="token punctuation">.</span><span class="token function">get_Time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置当前点赞数为0</span>
        <span class="token keyword">int</span> currentLikes <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token comment">// 上传数据</span>
        dataMapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>ip<span class="token punctuation">,</span> province<span class="token punctuation">,</span> time<span class="token punctuation">,</span> str<span class="token punctuation">,</span> currentLikes<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">"succeed"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 查询点赞数排名前50的信息
     *
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>getUser<span class="token punctuation">&gt;</span></span> <span class="token function">findByLikes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> dataMapper<span class="token punctuation">.</span><span class="token function">findByLikes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 查询最新的50条信息
     *
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>getUser<span class="token punctuation">&gt;</span></span> <span class="token function">findByTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> dataMapper<span class="token punctuation">.</span><span class="token function">findByTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 查询随机的50条信息
     *
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>getUser<span class="token punctuation">&gt;</span></span> <span class="token function">findByRand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> dataMapper<span class="token punctuation">.</span><span class="token function">findByRand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 更新指定id对应的点赞数+1
     *
     * @param id
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">increaseLikesById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        dataMapper<span class="token punctuation">.</span><span class="token function">increaseLikesById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">"succeed"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 更新指定id对应的点赞数-1
     *
     * @param id
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">decreaseLikesById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        dataMapper<span class="token punctuation">.</span><span class="token function">decreaseLikesById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">"succeed"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>controller 层需要新增以下接口：</p> 
<pre><code class="prism language-java">    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"上传信息接口"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/Add/{str}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token class-name">Add</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name"><span class="token namespace">dataService<span class="token punctuation">.</span></span>Add</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"查询点赞数前50名的信息"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/findByLikes"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>getUser<span class="token punctuation">&gt;</span></span> <span class="token function">findByLikes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> dataService<span class="token punctuation">.</span><span class="token function">findByLikes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"查询最新的50条信息"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/findByTime"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>getUser<span class="token punctuation">&gt;</span></span> <span class="token function">findByTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> dataService<span class="token punctuation">.</span><span class="token function">findByTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"查询随机的50条信息"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/findByRand"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span>getUser<span class="token punctuation">&gt;</span></span> <span class="token function">findByRand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> dataService<span class="token punctuation">.</span><span class="token function">findByRand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"更新指定id对应的点赞数+1"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">"/increaseLikesById/{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">increaseLikesById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> dataService<span class="token punctuation">.</span><span class="token function">increaseLikesById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"更新指定id对应的点赞数-1"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">"/decreaseLikesById/{id}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">decreaseLikesById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> dataService<span class="token punctuation">.</span><span class="token function">decreaseLikesById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_1192"></a>测试</h4> 
<p>启动项目，访问 API 文档页面 http://127.0.0.1:8087/doc.html，可以看到我们编写的接口都在这里：</p> 
<p><img src="https://images2.imgbox.com/eb/c0/hwtrtoqz_o.png" alt="在这里插入图片描述"></p> 
<p>发现问题：上传信息接口无效。</p> 
<p>原因是 service 层的 get_Province 函数中的：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"https://ip.useragentinfo.com/json?ip="</span> <span class="token operator">+</span> ip<span class="token punctuation">;</span>
</code></pre> 
<p>我们去 <a href="https://ip.useragentinfo.com" rel="nofollow">https://ip.useragentinfo.com</a> 这个网址看看：</p> 
<p><img src="https://images2.imgbox.com/be/9f/jtT6aOcu_o.png" alt="在这里插入图片描述"></p> 
<p>查询一下，确实能用，但是和代码里的不同，注意这里的网址：</p> 
<p><img src="https://images2.imgbox.com/84/b4/aRRRVX6J_o.png" alt="在这里插入图片描述"></p> 
<p>我们把代码改一下：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> url <span class="token operator">=</span> <span class="token string">"https://ip.useragentinfo.com/?ip="</span> <span class="token operator">+</span> ip<span class="token punctuation">;</span>
</code></pre> 
<p>还是不行，原因是这个网站已经不支持带参数查询了（悲）。</p> 
<p><img src="https://images2.imgbox.com/12/e9/6Y85MMcz_o.png" alt=""></p> 
<p>我们只能按下面的方法修改 get_IP、getIpAddr 和 getProvince 函数。</p> 
<p>友情链接：<a href="https://blog.csdn.net/weixin_53904739/article/details/131295412">java实现获取IP及归属地</a></p> 
<p>其他测试了都没什么大问题。</p> 
<p>有个小问题就是，测试上传信息接口的时候，是能上传，但是 IP 地址是 0:0:0:0:0:0:0:0:1。</p> 
<p><img src="https://images2.imgbox.com/8a/a9/5bPyduAI_o.png" alt="在这里插入图片描述"></p> 
<p>友情链接：<a href="https://zhuanlan.zhihu.com/p/563554028" rel="nofollow">手把手教你用Java获取IP归属地</a></p> 
<p>这里面说，在本地环境调用获取 IP，要么是 0:0:0:0:0:0:0:1，或者是局域网IP。</p> 
<blockquote> 
 <p>局域网IP是以192.168.x.x开头，或者是127.0.0.1的IP。</p> 
</blockquote> 
<p>所以需要部署到外网服务器才能获取到公网地址，部署到外网服务器才能成功获取 IP 地址。</p> 
<p>再查了一下，在本地测试时，这个是无解的。</p> 
<p>要是在局域网中运行，访问时使用本身的 IP 访问。这时候请求会通过路由器转发，因此服务器获取的就是本机的局域网内 IP，在 Java 中获取的 IP 就是局域网 IP，不是 localhost 或者 127.0.0.1 这种东西。</p> 
<p>友情链接：<a href="https://blog.csdn.net/nlcexiyue/article/details/111560274">java获取IP为0:0:0:0:0:0:0:1的情况</a></p> 
<p>详细解释：</p> 
<p>0:0:0:0:0:0:0:1是属于 ipv6，后来我又进行另一台电脑做测试，发现这种情况只有在服务器和客户端都在同一台电脑上才会出现（例如用 localhost 访问的时候才会出现），这是hosts配置文件的问题。</p> 
<p>友情链接：</p> 
<ol><li><a href="https://blog.csdn.net/liquid_road/article/details/117404500">request.getRemoteAddr()获取ip地址时得到的值是[0:0:0:0:0:0:0:1]原因和解决方法</a></li><li><a href="https://www.cnblogs.com/recorderM/p/15974319.html" rel="nofollow">查询本地ip地址为0:0:0:0:0:0:0:1</a></li></ol> 
<p>总结：</p> 
<p>因为电脑优先把 localhost 解析成了 IPv6，用 localhost 测试，返回 IPv6 地址，get_Province 能解析到省份。</p> 
<p>用 127.0.0.1 测试，返回本机 IPv4 地址，get_Province 不能解析到省份，是“本机地址”。</p> 
<p><img src="https://images2.imgbox.com/ed/f9/8nFtwJxu_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_Vue__1297"></a>创建 Vue 前端</h3> 
<h4><a id="_Nodejs_1300"></a>安装 Node.js</h4> 
<p>Node.js 简介：<a href="https://blog.csdn.net/ProgramNovice/article/details/126299915">Node.js 入门 ｜ 青训营笔记</a></p> 
<p>官网下载安装：https://nodejs.org/zh-cn/</p> 
<p>调出终端，输入指令 node -v，显示版本号说明 node 安装好了。</p> 
<p>输入指令 npm -v，显示版本号，说明 npm 可以正常使用。</p> 
<p><img src="https://images2.imgbox.com/d6/93/0UC6iTtz_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_npm__1315"></a>配置 npm 镜像</h4> 
<p>npm 默认的仓库地址在国外，访问速度较慢，我们切换成国内的淘宝镜像。</p> 
<p>输入指令安装：<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code></p> 
<p><img src="https://images2.imgbox.com/27/c1/uJrBefQF_o.png" alt="在这里插入图片描述"></p> 
<p>输入指令 cnpm -v，显示版本号说明 cnpm 安装好了。</p> 
<p><img src="https://images2.imgbox.com/2c/e1/Uaw9kNun_o.png" alt="在这里插入图片描述"></p> 
<p>前端代码在 Visual Studio Code 上写，在它上面再测一下：</p> 
<p><img src="https://images2.imgbox.com/77/96/GAtjJ06q_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_1344"></a>安装脚手架</h4> 
<p>终端输入指令 <code>cnpm i -g @vue/cli</code> 或 <code>npm i -g @vue/cli</code> 全局安装。</p> 
<p>安装细节很长，这样就算成功了：</p> 
<p><img src="https://images2.imgbox.com/70/f8/c664ofrJ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_1354"></a>创建并配置项目</h4> 
<p>在任意位置新建一个文件夹用来放置项目。</p> 
<p>终端中通过 cd 指令跳转到这个文件夹（我这里已经到项目文件夹了）。</p> 
<p>输入指令 <code>vue create dream_house</code> 创建项目。</p> 
<ul><li>上下键：表示选择</li><li>回车键：表示确认</li></ul> 
<p>选择 Manually select features 手动配置。</p> 
<p><img src="https://images2.imgbox.com/30/07/KZmn45OM_o.png" alt="在这里插入图片描述"></p> 
<p>选择需要安装的插件，勾选如下插件，按空格键选择：</p> 
<p><img src="https://images2.imgbox.com/ad/74/qJ8sB1Ze_o.png" alt="在这里插入图片描述"></p> 
<ul><li>Babel：解析 es6 转 es5 的插件</li><li>TypeScript：TypeScript 插件</li><li>Progressive Web App (PWA) Support：渐进式 Web 应用程序（PWA）支持</li><li>Router：vue 路由插件</li><li>Vuex：Vuex 插件</li><li>CSS Pre-processors：css 预处理插件</li><li>Linter/Formatter：格式化程序</li><li>Unit Testing：单元测试</li><li>E2E Testing：端到端（end-to-end）</li></ul> 
<p>回车（Enter）确认。</p> 
<p>版本选择：选 2.x。</p> 
<p><img src="https://images2.imgbox.com/0a/26/KdpwzMB6_o.png" alt="在这里插入图片描述"></p> 
<p>路由模式：选择是否为 history 模式，y 表示是，n 表示使用 hash 模式，这里选择的是 n。</p> 
<ul><li>history：利用了 HTML5 History Interface 中新增的 pushState() 和 replaceState() 方法（需要特定浏览器支持）<br> *hash： 浏览器 url 址栏中的 # 符号（如这个 URL：http://love.byzy.love/#/SuiJi ，hash 的值为“ #/SuiJi ”），hash 不被包括在 HTTP 请求中，所以对后端完全没有影响。因此改变 hash 不会重新加载页面，更容易进行打包上传服务器。</li></ul> 
<p><img src="https://images2.imgbox.com/3f/2f/M1KRFDMC_o.png" alt="在这里插入图片描述"></p> 
<p>选择 CSS 预处理器：选第一个</p> 
<p><img src="https://images2.imgbox.com/5c/87/YecWPXFk_o.png" alt="在这里插入图片描述"></p> 
<p>选择编码规则：</p> 
<ul><li> <p>ESLint with error prevention only：只配置使用 ESLint 官网的推荐规则</p> </li><li> <p>ESLint + Airbnb config：官网推荐的规则 + Airbnb 第三方的配置</p> </li><li> <p>ESLint + Standard config：使用 ESLint 官网推荐的规则 + Standard 第三方的配置</p> </li><li> <p>ESLint + Prettier：使用 ESLint 官网推荐的规则 + Prettier 第三方的配置</p> </li></ul> 
<p><img src="https://images2.imgbox.com/26/94/SLpyuuys_o.png" alt="在这里插入图片描述"></p> 
<p>建议初学者（就是我）选择第一项，表示只有报错时才会验证。</p> 
<p>检测条件：</p> 
<ul><li> <p>Lint on save：保存就检测</p> </li><li> <p>Lint and fix on commit：fix 和 commit 时候检查</p> </li></ul> 
<p><img src="https://images2.imgbox.com/e1/60/WY316TgT_o.png" alt="在这里插入图片描述"></p> 
<p>选 Lint on save。</p> 
<p>存放配置：</p> 
<ul><li>In dedicated config files：独立文件放置</li><li>In package.json：放 package.json 里</li></ul> 
<p>选 In package.json。</p> 
<p>最后输入 y：</p> 
<p><img src="https://images2.imgbox.com/a3/de/wir4vpsR_o.png" alt="在这里插入图片描述"></p> 
<p>保存配置并命名：</p> 
<p><img src="https://images2.imgbox.com/e2/a1/9aG6Wj4O_o.png" alt="在这里插入图片描述"></p> 
<p>包管理器就选 npm：</p> 
<p><img src="https://images2.imgbox.com/05/0d/v3pAR2YC_o.png" alt="在这里插入图片描述"></p> 
<p>等下载完成，显示出如下界面说明配置完成：</p> 
<p><img src="https://images2.imgbox.com/60/7f/wpjWMXCH_o.png" alt="在这里插入图片描述"></p> 
<p>输入指令 cd dream_house 进入项目。</p> 
<h4><a id="_1511"></a>项目结构</h4> 
<p>Visual Studio Code 打开项目文件夹，观察左侧项目目录。</p> 
<p>项目结构说明如下：</p> 
<ul><li>node_modules： 包含所有安装的 npm 包。</li><li>public：包含所有不需要经过 Webpack 处理的静态文件，如：index.html、favicon.ico等。 
  <ul><li>favicon.ico</li><li>index.html</li></ul> </li><li>src：包含所有源代码 
  <ul><li>assets：存放静态资源文件，如图片、样式表等 
    <ul><li>logo.png</li></ul> </li><li>components：存放 Vue 组件 
    <ul><li>HelloWorld.vue</li></ul> </li><li>router：存放 Vue 路由 
    <ul><li>index.js</li></ul> </li><li>store：存放 Vuex 状态管理相关的代码 
    <ul><li>index.js</li></ul> </li><li>views：存放页面级别的 Vue 组件 
    <ul><li>AboutView.vue</li><li>HomeView.vue</li></ul> </li><li>App.vue：Vue应用程序的根组件</li><li>main.js：Vue应用程序的入口文件</li></ul> </li><li>.gitignore：Git 忽略文件列表，告诉 Git 哪些文件和目录应该被忽略，不被纳入版本控制中。</li><li>babel.config.js：Babel 配置文件，用于转换 ES6+ 代码到 ES5，以便它们能够在更旧的浏览器中运行。</li><li>jsconfig.json：用于配置 Vusial Studio Code 的 JavaScript 语言服务的 JSON 配置文件。它可以用来设置JS项目的编译选项、路径别名、自动引入模块等选项。</li><li>package-lock.json：记录当前项目的依赖项及其版本信息，确保不同计算机或者环境下的依赖项保持一致。</li><li>package.json：Vue.js 项目的元数据文件，包含项目的名称、版本、作者、依赖项等信息。其中，dependencies 字段记录的是项目的运行时依赖项，而 devDependencies 字段记录的是项目的开发时依赖项。</li><li>README.md：项目的说明文档，描述项目的目的、功能、使用方法等等。</li><li>vue.config.js：Vue.js 项目的配置文件，包含了一些 Vue CLI 的默认配置，可以用于自定义 Webpack 配置、开发环境的代理设置等等。使用 vue-cli-service 命令时，它将自动被加载并应用于项目配置。</li></ul> 
<h4><a id="Vue__1560"></a>Vue 组件结构</h4> 
<p>一个 Vue 组件分为三个部分，分别是：template 部分、script 部分、style 部分。</p> 
<ul><li>template：组件的模板部分，用来定义组件的 html 结构。<br> 必须在里面放置一个 html 标签来包裹所有的代码，例如 &lt;div&gt;&lt;/div&gt; 标签。</li><li>script：组件的 JavaScript 代码部分，用来定义组件的逻辑和属性。</li><li>style：组件的样式部分，它用来定义组件的样式。</li></ul> 
<h4><a id="Vue__1569"></a>Vue 组件调用与传值</h4> 
<p>我们就从官方的例子中来理解 Vue 组件间的传值与调用。由于 HelloWorld.vue 中的内容过多，所以我进行了删减。</p> 
<p>观察下面的两段 Vue 代码。</p> 
<p>HomeView.vue：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Vue logo<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../assets/logo.png<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token attr-name">msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Welcome to Your Vue.js App<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// @ is an alias to /src</span>
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">'@/components/HelloWorld.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HomeView'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    HelloWorld
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>HelloWorld.vue：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hello<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'HelloWorld'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">msg</span><span class="token operator">:</span> String
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>可以看到 HomeView.vue 组件中 template 部分有一个 HelloWorld 标签，这个就是我们自定义的 HelloWorld 组件，在这个标签中，我们将一串字符串赋值给 msg 传递了过去。</p> 
<p>在 script 部分中，使用 ES6 的 import 语法引入了 “@/components/HelloWorld.vue” 文件，并将其赋值给 HelloWorld 变量。</p> 
<ul><li> <p>export default：使用 ES6 的 export 语法导出一个默认的对象，该对象包含了组件的各种属性和方法。</p> </li><li> <p>name：定义了组件的名称，可以在代码中用来引用这个组件。</p> </li><li> <p>components：定义了组件所包含的子组件。在这里，我们将 HelloWorld 子组件注册为了 HomeView 组件的一个子组件，以便在 HomeView 组件的模板中使用 HelloWorld 组件。</p> </li></ul> 
<p>接下来看 HelloWorld.vue 组件中的 script 部分，我们可以看到 props 属性，这个属性定义了该组件的数据属性，也就是它的输入。在这里，我们定义了一个名为 msg 的属性，它是一个字符串类型。该属性可以从组件外部传递进来，在组件内部使用。</p> 
<p>然后在 template 部分，&lt;h1&gt;{<!-- -->{ msg }}&lt;/h1&gt; 调用了该值。</p> 
<h4><a id="Vue__1637"></a>Vue 组件的生命周期</h4> 
<p>Vue组件的生命周期是指在组件实例化时，从开始到结束，不同阶段会自动执行的一些函数。Vue提供了一些钩子函数，让我们在这些生命周期阶段执行我们的自定义逻辑。Vue组件的生命周期可以分为以下三个阶段：</p> 
<ol><li> <p>创建阶段：包括组件实例化、数据观测、模板编译和挂载等过程。<br> 具体的生命周期函数有：</p> 
  <ul><li> <p>beforeCreate：在实例初始化之后，数据观测和事件配置之前被调用，此时data和methods 等组件属性还未初始化。</p> </li><li> <p>created：在实例创建完成后被立即调用，此时 data 和 methods 等组件属性已经初始化，但是 DOM 节点还未挂载。</p> </li><li> <p>beforeMount：在挂载开始之前被调用，此时模板已经编译完成，但是还未渲染成 DOM。</p> </li><li> <p>mounted：在挂载完成后被调用，此时组件已经挂载到 DOM 上，可以进行 DOM 操作和异步数据请求等操作。</p> </li></ul> </li><li> <p>更新阶段：更新阶段包括数据更新和重新渲染等过程。<br> 具体的生命周期函数有：</p> 
  <ul><li> <p>beforeUpdate：在数据更新之前被调用，此时组件还未重新渲染。</p> </li><li> <p>updated：在数据更新之后被调用，此时组件已经重新渲染。</p> </li></ul> </li><li> <p>销毁阶段：销毁阶段包括组件销毁和清理等过程。<br> 具体的生命周期函数有：</p> 
  <ul><li> <p>beforeDestroy：在实例销毁之前被调用，此时组件还未销毁，可以进行一些清理工作。</p> </li><li> <p>destroyed：在实例销毁之后被调用，此时组件已经完全销毁，不再可用。</p> </li></ul> </li></ol> 
<p>在组件的生命周期中，我们可以使用这些生命周期函数来执行一些初始化、清理和动态更新等操作。例如，在 created 生命周期函数中可以发起异步请求获取数据，在 beforeDestroy 生命周期函数中可以清理定时器或取消订阅等操作。</p> 
<h4><a id="_Vue__1667"></a>测试 Vue 程序</h4> 
<p>我们先看看默认的 Vue 程序如何运行。</p> 
<p>第一步：<code>npm install</code></p> 
<p><img src="https://images2.imgbox.com/11/df/mDTJwudB_o.png" alt="在这里插入图片描述"></p> 
<p>第二步：<code>npm run serve</code></p> 
<p><img src="https://images2.imgbox.com/bb/f7/j27yahAY_o.png" alt="在这里插入图片描述"></p> 
<p>第三步：打开浏览器，进入 http://localhost:8080/</p> 
<p><img src="https://images2.imgbox.com/0d/f5/JvBLCXMV_o.png" alt="在这里插入图片描述"></p> 
<p>友情链接：<a href="https://blog.csdn.net/lwf3115841/article/details/130604476">如何运行vue项目(超详细图解）</a></p> 
<h4><a id="_1706"></a>需求分析</h4> 
<p>整理需求：</p> 
<ol><li>一个导航栏</li><li>三个页面</li><li>页面中显示每个用户发出的内容</li><li>可以给内容点赞</li><li>可以发送内容</li><li>先把整体页面的框架模型搭建起来，然后再进行修饰</li></ol> 
<p>在了解了需求之后，就可以开始动手操作了。</p> 
<h3><a id="_1721"></a>实现项目页面</h3> 
<h4><a id="_1723"></a>框架搭建</h4> 
<p>在 views 目录下新建 LikesSortedView.vue、NewestView.vue、RandomView.vue。</p> 
<p>在 components 目录下新建 UserList.vue、InputText.vue。</p> 
<p><img src="https://images2.imgbox.com/29/c4/UyF4E53w_o.png" alt="在这里插入图片描述"></p> 
<p>LikesSortedView.vue、NewestView.vue、RandomView.vue 三个组件作为三个页面，内容包括所有的 UserList.vue 组件排列起来。</p> 
<p>UserList.vue 组件作为单个用户发送的内容，上面显示省份与点赞等内容。</p> 
<p>InputText.vue 组件作为发送内容的组件，包括一个输入框和一个发送按钮。</p> 
<h4><a id="_1739"></a>项目配置</h4> 
<p>我们需要把项目运行端口更改一下，不然默认是 8080 端口。在 vue.config.js 文件中更改：</p> 
<pre><code class="prism language-js"><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@vue/cli-service'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">transpileDependencies</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8086</span><span class="token punctuation">,</span> <span class="token comment">// 此处修改你想要的端口号</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>然后在项目中我们会用到 Axios 以及 Element ，所以需要下载相关依赖并在 main.js 中引入。</p> 
<ul><li> <p>安装 Axios 指令：<code>npm install axios</code>。</p> </li><li> <p>安装 Element 指令：<code>npm install element-ui</code>。</p> </li></ul> 
<p>安装好以后，修改 main.js：</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>

<span class="token keyword">import</span> ElementUI <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token punctuation">;</span>                      <span class="token comment">// 引入element-ui</span>
<span class="token keyword">import</span> <span class="token string">'element-ui/lib/theme-chalk/index.css'</span><span class="token punctuation">;</span>           <span class="token comment">// element-ui的css样式要单独引入</span>

<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$axios <span class="token operator">=</span> axios

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementUI<span class="token punctuation">)</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  router<span class="token punctuation">,</span>
  store<span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_1792"></a>主界面设计</h4> 
<p>主页面的设计在根组件 App.vue 中进行，主要负责一些全局内容的显示。</p> 
<p>在 template 部分为一个标题，一个导航栏，一个 InputText 组件，一条每页都需要显示的提示文字。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>MyName<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Dream House<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>排行<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> |
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/Newest<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>最新<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span> |
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/Random<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>随机<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nav</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>InputText</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>newText<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>该列表仅显示50条内容！<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>在 script 部分引入 InputText.vue 组件。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> InputText <span class="token keyword">from</span> <span class="token string">'@/components/InputText.vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'App'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    InputText
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>在 style 部分设置该组件的样式，以及一些全局效果。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">#app</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> Avenir<span class="token punctuation">,</span> Helvetica<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
  <span class="token property">-webkit-font-smoothing</span><span class="token punctuation">:</span> antialiased<span class="token punctuation">;</span>
  <span class="token property">-moz-osx-font-smoothing</span><span class="token punctuation">:</span> grayscale<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #2c3e50<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">nav</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> pyt<span class="token punctuation">;</span>
  <span class="token property">text-shadow</span><span class="token punctuation">:</span> 2px 2px 2px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token selector">a</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #2c3e50<span class="token punctuation">;</span>

    <span class="token selector">&amp;.router-link-exact-active</span> <span class="token punctuation">{<!-- --></span>
      <span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span> //清除蓝框
      <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
      <span class="token property">color</span><span class="token punctuation">:</span> #42b983<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token selector">.MyName</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> pyt<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>
  <span class="token property">background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span>
  <span class="token property">-webkit-background-clip</span><span class="token punctuation">:</span> text<span class="token punctuation">;</span>
  <span class="token property">-webkit-text-fill-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #41ffa9<span class="token punctuation">,</span> <span class="token function">rgba</span><span class="token punctuation">(</span>79<span class="token punctuation">,</span> 168<span class="token punctuation">,</span> 252<span class="token punctuation">,</span> 0.6<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 20px 10px 0px 10px<span class="token punctuation">;</span>
  <span class="token property">text-shadow</span><span class="token punctuation">:</span> 3px 3px 3px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span> //文本阴影
<span class="token punctuation">}</span>
<span class="token selector">body</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>244<span class="token punctuation">,</span> 189<span class="token punctuation">,</span> 255<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>
    90deg<span class="token punctuation">,</span>
    <span class="token function">rgb</span><span class="token punctuation">(</span>183<span class="token punctuation">,</span> 180<span class="token punctuation">,</span> 255<span class="token punctuation">)</span> 0%<span class="token punctuation">,</span>
    <span class="token function">rgb</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">)</span> 50%<span class="token punctuation">,</span>
    <span class="token function">rgb</span><span class="token punctuation">(</span>165<span class="token punctuation">,</span> 240<span class="token punctuation">,</span> 255<span class="token punctuation">)</span> 100%
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">// 设置全局滚动条
body::-webkit-scrollbar</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f5f5f5<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">body::-webkit-scrollbar-thumb</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> inset 0 0 6px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #c4ffe4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.newText</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 10px auto<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="_1905"></a>设置路由</h4> 
<p>在 router 目录下的 index.js 中设置路由：</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueRouter<span class="token punctuation">)</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'排行'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/LikesSortedView.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/Newest'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'最新'</span><span class="token punctuation">,</span>
    <span class="token comment">// route level code-splitting</span>
    <span class="token comment">// this generates a separate chunk (Newest.[hash].js) for this route</span>
    <span class="token comment">// which is lazy-loaded when the route is visited.</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: "about" */</span> <span class="token string">'../views/NewestView.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/Random'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'随机'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/RandomView.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  routes
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router

</code></pre> 
<h4><a id="_1944"></a>内容组件设计</h4> 
<p>UserList.vue 的 template 部分如下，显示一个主要内容，在左下角显示省份，右下角显示点赞数和一个图片按钮。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UserList<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>str<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{str}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>province<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{province}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>likes<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>{<!-- -->{likes}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
          <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>imagePath<span class="token punctuation">"</span></span>
          <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>toggleImage<span class="token punctuation">"</span></span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img-btn<span class="token punctuation">"</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>style 部分如下，设置对应的标签显示的位置，以及样式等。</p> 
<pre><code class="prism language-html"><span class="token comment">&lt;!-- 添加“scoped作用域”属性以将 CSS 限制为此组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.UserList</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.box</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ddd<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 2px 2px 4px #ddd<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span> //将 flex 子元素沿竖直方向排列
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span> //将 flex 子元素在纵轴上居中对齐
  <span class="token property">margin</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease<span class="token punctuation">;</span> //面板放大
<span class="token punctuation">}</span>

<span class="token selector">.box:hover</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.04<span class="token punctuation">)</span><span class="token punctuation">;</span> //面板放大
<span class="token punctuation">}</span>

<span class="token selector">.box1</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.str</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  //<span class="token property">font-family</span><span class="token punctuation">:</span>wpyt<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">text-shadow</span><span class="token punctuation">:</span> 1px 1px 1px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.box2</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.province</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 120px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.likes</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> auto 5px auto auto<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> flex-end<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.img-btn</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease<span class="token punctuation">;</span> // 设置按钮元素的过渡效果
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>script 部分如下，获取从上级页面传来的数据，在 created() 钩子函数中判断是否给这个内容点过赞，并将图片按钮初始化。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'UserList'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">Obj</span><span class="token operator">:</span> Object
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">imagePath</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@/assets/点赞-no.png"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">str</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Obj<span class="token punctuation">.</span>str<span class="token punctuation">,</span>
      <span class="token literal-property property">province</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Obj<span class="token punctuation">.</span>province<span class="token punctuation">,</span>
      <span class="token literal-property property">likes</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Obj<span class="token punctuation">.</span>likes
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">isLiked</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>Obj<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>imagePath <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@/assets/点赞-yes.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">toggleImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 判断是否点赞过</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>imagePath <span class="token operator">===</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@/assets/点赞-no.png"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token comment">// 获取按钮元素</span>
        <span class="token keyword">const</span> imgBtn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.img-btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 给按钮元素应用缩放和旋转的样式</span>
        imgBtn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">'scale(1.2) rotate(-10deg)'</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置计时器，在 300 毫秒之后给按钮元素应用新的样式</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          imgBtn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">'scale(1) rotate(10deg)'</span><span class="token punctuation">;</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            imgBtn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">'scale(1) rotate(0deg)'</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>likes<span class="token operator">++</span><span class="token punctuation">;</span>

        <span class="token comment">// 将图片替换为已点赞的图片</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imagePath <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@/assets/点赞-yes.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将已点赞的状态存入 localStorage</span>
        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">isLiked</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>Obj<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//向服务器发送发送put请求</span>
        axios<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:8087/increaseLikesById/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>Obj<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>

            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"点赞出错！"</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>likes<span class="token operator">--</span><span class="token punctuation">;</span>

        <span class="token comment">// 否则将图片替换为未点赞的图片</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imagePath <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@/assets/点赞-no.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 并且删除已点赞的状态</span>
        localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">isLiked</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>Obj<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 向服务器发送发送put请求</span>
        axios<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:8087/decreaseLikesById/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>Obj<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"取消点赞出错！"</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>按钮绑定 toggleImage() 函数，通过点击按钮触发此函数，触发图片按钮的动作，以及更换图片，并且向服务器发出 put 请求，更新数据库中的数据，更新页面中显示的数据。</p> 
<p>assets 文件夹下要放图片：</p> 
<p><img src="https://images2.imgbox.com/f9/f5/1AteLTcI_o.png" alt="在这里插入图片描述"></p> 
<p>友情链接：<a href="https://www.iconfont.cn/" rel="nofollow">阿里巴巴矢量图标库</a></p> 
<h4><a id="_2160"></a>发送组件设计</h4> 
<p>InputText.vue 的 template 部分如下，只有一个输入框以及一个图片按钮。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>InputText<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
      <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span>
      <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15<span class="token punctuation">"</span></span>
      <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inputValue<span class="token punctuation">"</span></span>
      <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>发送你的梦想！<span class="token punctuation">"</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../assets/send.png<span class="token punctuation">"</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit-btn<span class="token punctuation">"</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>style 部分如下，依然是设置整个发送组件的样式。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.InputText</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
  //设置 z-index 值为 999<span class="token punctuation">,</span>显示为最顶部
  <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">input[type="text"]</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">flex</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 10px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.7<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid transparent<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 10px #42b983<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease-in-out<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">input[type="text"]:hover</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.05<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 15px <span class="token function">rgba</span><span class="token punctuation">(</span>24<span class="token punctuation">,</span> 144<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.submit-btn</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 2px 0px 0px 10px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 0.3s ease-in-out<span class="token punctuation">;</span>
  <span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.submit-btn:hover</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1.2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>script 部分如下，通过点击按钮触发 submit() 函数，播放按钮的动画，以及获取输入框的内容，发送到服务器上。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'InputText'</span><span class="token punctuation">,</span>

  <span class="token comment">// 定义数据</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">isAnimating</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 用于标识动画是否正在播放</span>
      <span class="token literal-property property">inputValue</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 定义提交方法</span>
    <span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

      <span class="token comment">// 如果动画正在播放，直接返回</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isAnimating<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

      <span class="token comment">//向服务器发送发送post请求</span>
      axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:8087/Add/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>inputValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>

          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>inputValue <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>

          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'发送成功！'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">2000</span> <span class="token comment">// 自动关闭延迟时间，单位毫秒</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>

          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'发送失败！'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">2000</span> <span class="token comment">// 自动关闭延迟时间，单位毫秒</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"发送信息出错！"</span><span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 标记动画正在播放</span>
      <span class="token comment">// 获取提交按钮元素</span>
      <span class="token keyword">const</span> btn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".submit-btn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 记录提交按钮的原始 transform 值</span>
      <span class="token keyword">const</span> originalTransform <span class="token operator">=</span> btn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform<span class="token punctuation">;</span>
      <span class="token comment">// 设置提交按钮的 transform 值，使其向右上方移动</span>
      btn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">"translate(100%, -100%)"</span><span class="token punctuation">;</span>

      <span class="token comment">// 设置动画播放完成后的回调函数</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 将提交按钮的 transform 值设置为原始值</span>
        btn<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> originalTransform<span class="token punctuation">;</span>
        <span class="token comment">// 标记动画已经播放完毕</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isAnimating <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 在组件挂载完成后，给提交按钮元素绑定 click 事件</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".submit-btn"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>submit<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>assets 文件夹下要放图片：</p> 
<p><img src="https://images2.imgbox.com/20/d9/5jfqjLmU_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_2315"></a>分页面设计</h4> 
<p>三个分页面的作用是向数据库发出请求，获取到内容数据，再调用内容组件将各个内容排列显示在页面上。</p> 
<h5><a id="_LikesSortedViewvue_2318"></a>排行页面 LikesSortedView.vue</h5> 
<p>template 部分如下，在该部分中只使用了一个自定义组件 UserList ，使用 Vue 的模板语法动态的生成一个组件列表。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>PaiHang<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UserList</span>
      <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in Obj<span class="token punctuation">"</span></span>
      <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span>
      <span class="token attr-name">:Obj</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>解释：</p> 
<ul><li> <p>v-for="(item, index) in Obj"指令表示对 Obj 对象进行遍历，生成对应数量的 组件。</p> </li><li> <p>:key="index"属性用于标识每个组件的唯一性，使 Vue 能够更高效地管理组件的状态。</p> </li><li> <p>:Obj="item"属性将当前元素的值 item 传递给 组件，作为组件的参数之一。</p> </li></ul> 
<p>script 部分如下，在该页面被初始化的的时候会调用 getList() 方法从服务器拿到数据，然后将 json 数据传入对应的 UserList 组件中。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// @ 是 /src 的别名</span>
<span class="token keyword">import</span> UserList <span class="token keyword">from</span> <span class="token string">'@/components/UserList.vue'</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'LikesSortedView'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    UserList
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">Obj</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// computed会缓存结果，methods每次都会重新计算</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> newObjects <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>

      axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8087/findByLikes'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          list <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            newObjects<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObjects<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>Obj <span class="token operator">=</span> newObjects<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'获取页面内容失败！'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">2000</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"获取排行出错！"</span><span class="token punctuation">)</span>
          console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<h5><a id="_NewestViewvue_2415"></a>最新页面 NewestView.vue</h5> 
<p>最新页面基本上与排行页面相同，唯一不同的地方就是请求的参数不同，所以只需要把请求的 url 改一下就行了，改成 API 定义的对应的接口。</p> 
<p>url：http://(接口IP地址):8087/findByTime</p> 
<p>然后就是本组件的名字需要改一下。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Newest<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UserList</span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in Obj<span class="token punctuation">"</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span>
        <span class="token attr-name">:Obj</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// @ 是 /src 的别名</span>
  <span class="token keyword">import</span> UserList <span class="token keyword">from</span> <span class="token string">'@/components/UserList.vue'</span>
  <span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
  
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'NewestView'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      UserList
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">Obj</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
    <span class="token comment">// computed会缓存结果，methods每次都会重新计算</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> newObjects <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  
        axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8087/findByTime'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            list <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
              newObjects<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObjects<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Obj <span class="token operator">=</span> newObjects<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
              <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'获取页面内容失败！'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">2000</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"获取排行出错！"</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
      <span class="token punctuation">}</span>
  
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
  <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>  
</code></pre> 
<h5><a id="_RandomViewvue_2489"></a>随机页面 RandomView.vue</h5> 
<p>同理，改一下请求的 url 就行。</p> 
<p>url：http://(接口IP地址):8087/findByRand</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Random<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UserList</span>
        <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in Obj<span class="token punctuation">"</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span>
        <span class="token attr-name">:Obj</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// @ 是 /src 的别名</span>
  <span class="token keyword">import</span> UserList <span class="token keyword">from</span> <span class="token string">'@/components/UserList.vue'</span>
  <span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
  
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'RandomView'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      UserList
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">Obj</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
    <span class="token comment">// computed会缓存结果，methods每次都会重新计算</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> newObjects <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  
        axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8087/findByRand'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            list <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
              newObjects<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObjects<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Obj <span class="token operator">=</span> newObjects<span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
              <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'获取页面内容失败！'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">2000</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"获取排行出错！"</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
      <span class="token punctuation">}</span>
  
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
    <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  
  <span class="token punctuation">}</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="_2564"></a>项目启动</h4> 
<p>在终端中输入指令：<code>npm run serve</code>。</p> 
<p>可以看到如下界面，说明项目成功运行：</p> 
<p><img src="https://images2.imgbox.com/46/b5/qzIpNoH0_o.png" alt="在这里插入图片描述"></p> 
<p>根据提示访问本地地址 http://localhost:8086/。</p> 
<p><img src="https://images2.imgbox.com/92/ab/sqLpUwxI_o.png" alt="在这里插入图片描述"></p> 
<p>发现所有功能都正常使用，页面正常排布。</p> 
<p>经测试，点赞按钮和发送按钮动画正常播放，页面数据正常更新，梦想内容正常发布，各功能使用正常。</p> 
<p>至此，“梦想屋” 小项目成功完成。</p> 
<h3><a id="_2588"></a>源码下载</h3> 
<p>GitHub：<a href="https://github.com/UestcXiye/DreamHouse">https://github.com/UestcXiye/DreamHouse</a></p> 
<p>CSDN：<a href="https://download.csdn.net/download/ProgramNovice/88640944">DreamHouse.zip</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/64da62ecf2554c0e70afe1a13a770919/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">用python编写用户登录界面,python编写登录窗口</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/12cc38318471516cc93b88fdbfd1167c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">智能手机操作系统全面解析：Android、iOS和HarmonyOS的特色及未来趋势</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>