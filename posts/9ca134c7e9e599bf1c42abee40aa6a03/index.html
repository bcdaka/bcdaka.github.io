<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>è®¡ç®—ä¸¤å¹…å›¾åƒçš„ç›¸ä¼¼åº¦ï¼ˆPSNRã€SSIMã€MSEã€ä½™å¼¦ç›¸ä¼¼åº¦ã€MD5ã€ç›´æ–¹å›¾ã€äº’ä¿¡æ¯ã€Hashï¼‰&amp; ä»£ç å®ç° ä¸ä¸¾ä¾‹ - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/9ca134c7e9e599bf1c42abee40aa6a03/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="è®¡ç®—ä¸¤å¹…å›¾åƒçš„ç›¸ä¼¼åº¦ï¼ˆPSNRã€SSIMã€MSEã€ä½™å¼¦ç›¸ä¼¼åº¦ã€MD5ã€ç›´æ–¹å›¾ã€äº’ä¿¡æ¯ã€Hashï¼‰& ä»£ç å®ç° ä¸ä¸¾ä¾‹">
  <meta property="og:description" content="MSEï¼ˆMean Squared Errorï¼‰å‡æ–¹è¯¯å·® MSEå…¬å¼Â MSE è®¡ç®—æ¨¡å‹çš„é¢„æµ‹ Å¶ ä¸çœŸå®æ ‡ç­¾ Y çš„æ¥è¿‘ç¨‹åº¦ã€‚å…¬å¼è¡¨ç¤ºä¸ºï¼š
å¯¹äºä¸¤ä¸ªmÃ—nçš„å•é€šé“å›¾åƒIå’ŒKï¼Œå®ƒä»¬çš„å‡æ–¹è¯¯å·®å¯å®šä¹‰ä¸ºï¼š
ä¼˜ç‚¹ï¼šMSEçš„å‡½æ•°æ›²çº¿å…‰æ»‘ã€è¿ç»­ï¼Œå¤„å¤„å¯å¯¼ï¼Œä¾¿äºä½¿ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„æŸå¤±å‡½æ•°ã€‚è€Œä¸”ï¼Œéšç€è¯¯å·®çš„å‡å°ï¼Œæ¢¯åº¦ä¹Ÿåœ¨å‡å°ï¼Œè¿™æœ‰åˆ©äºæ”¶æ•›ï¼Œå³ä½¿ä½¿ç”¨å›ºå®šçš„å­¦ä¹ é€Ÿç‡ï¼Œä¹Ÿèƒ½è¾ƒå¿«çš„æ”¶æ•›åˆ°æœ€å°å€¼ã€‚
ç¼ºç‚¹ï¼šå½“çœŸå®å€¼yå’Œé¢„æµ‹å€¼f(x)çš„å·®å€¼å¤§äº1æ—¶ï¼Œä¼šæ”¾å¤§è¯¯å·®ï¼›è€Œå½“å·®å€¼å°äº1æ—¶ï¼Œåˆ™ä¼šç¼©å°è¯¯å·®ï¼Œè¿™æ˜¯å¹³æ–¹è¿ç®—å†³å®šçš„ã€‚MSEå¯¹äºè¾ƒå¤§çš„è¯¯å·®(&gt;1)ç»™äºˆè¾ƒå¤§çš„æƒ©ç½šï¼Œè¾ƒå°çš„è¯¯å·®(&lt;1ï¼‰ç»™äºˆè¾ƒå°çš„æƒ©ç½šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹ç¦»ç¾¤ç‚¹æ¯”è¾ƒæ•æ„Ÿï¼Œå—å…¶å½±å“è¾ƒå¤§ã€‚
ä»£ç å®ç° # MSE # æ–¹æ³•ä¸€ï¼šè‡ªå®šä¹‰å‡½æ•° import numpy as np def MSE(img1,img2): mse = np.mean( (img1 - img2) ** 2 ) return mse # æ–¹æ³•äºŒï¼šè°ƒç”¨åº“å‡½æ•° # è€ç‰ˆæœ¬çš„scikit-imageï¼ŒåŠ è½½SSIMã€PSNRã€MSEçš„æ–¹å¼ï¼š from skimage.measure import compare_mse as mse # æ–°ç‰ˆæœ¬çš„scikit-imageï¼ŒåŠ è½½æ–¹å¼ï¼š from skimage.metrics import mean_squared_error as mse PSNRï¼ˆPeak Signal-to-Noise Ratioï¼‰å³°å€¼ä¿¡å™ªæ¯” PSNR(Peak Signal to Noise Ratio)ï¼Œå³°å€¼ä¿¡å™ªæ¯”ï¼Œæ˜¯ä¸€ç§è¯„ä»·å›¾åƒçš„å®¢è§‚æ ‡å‡†ã€‚ï¼Œåº”ç”¨åœºæ™¯æœ‰å¾ˆå¤šã€‚å®ƒå…·æœ‰å±€æ€§ï¼ŒPSNRæ˜¯â€œPeak Signal to Noise Ratioâ€çš„ç¼©å†™ã€‚peakçš„ä¸­æ–‡æ„æ€æ˜¯é¡¶ç‚¹ã€‚è€Œratioçš„æ„æ€æ˜¯æ¯”ç‡æˆ–æ¯”åˆ—çš„ã€‚æ•´ä¸ªæ„æ€å°±æ˜¯åˆ°è¾¾å™ªéŸ³æ¯”ç‡çš„é¡¶ç‚¹ä¿¡å·ï¼Œpsnrä¸€èˆ¬æ˜¯ç”¨äºæœ€å¤§å€¼ä¿¡å·å’ŒèƒŒæ™¯å™ªéŸ³ä¹‹é—´çš„ä¸€ä¸ªå·¥ç¨‹é¡¹ç›®ã€‚é€šå¸¸åœ¨ç»è¿‡å½±åƒå‹ç¼©ä¹‹åï¼Œé€šå¸¸è¾“å‡ºçš„å½±åƒéƒ½ä¼šåœ¨æŸç§ç¨‹åº¦ä¸åŸå§‹å½±åƒä¸åŒã€‚ä¸ºäº†è¡¡é‡ç»è¿‡å¤„ç†åçš„å½±åƒå“è´¨ï¼Œé€šå¸¸ä¼šå‚è€ƒPSNRå€¼æ¥è¡¡é‡æŸä¸ªå¤„ç†ç¨‹åºèƒ½å¦ä»¤äººæ»¡æ„ã€‚å®ƒæ˜¯åŸå›¾åƒä¸è¢«å¤„ç†å›¾ åƒä¹‹é—´çš„å‡æ–¹è¯¯å·®ç›¸å¯¹äº(2n-1)2çš„å¯¹æ•°å€¼(ä¿¡å·æœ€å¤§å€¼çš„å¹³æ–¹ï¼Œnæ˜¯æ¯ä¸ªé‡‡æ ·å€¼çš„æ¯”ç‰¹æ•°)ï¼Œå®ƒçš„å•ä½æ˜¯dBã€‚
PSNRæ˜¯æœ€æ™®éå’Œä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§å›¾åƒå®¢è§‚è¯„ä»·æŒ‡æ ‡ï¼Œç„¶è€Œå®ƒæ˜¯åŸºäºå¯¹åº”åƒç´ ç‚¹é—´çš„è¯¯å·®ï¼Œå³ åŸºäºè¯¯å·®æ•æ„Ÿçš„å›¾åƒè´¨é‡è¯„ä»·ã€‚ç”±äºå¹¶æœªè€ƒè™‘åˆ°äººçœ¼çš„è§†è§‰ç‰¹æ€§ï¼ˆäººçœ¼å¯¹ç©ºé—´é¢‘ç‡è¾ƒä½çš„å¯¹æ¯”å·®å¼‚æ•æ„Ÿåº¦è¾ƒé«˜ï¼Œäººçœ¼å¯¹äº®åº¦å¯¹æ¯”å·®å¼‚çš„æ•æ„Ÿåº¦è¾ƒè‰²åº¦é«˜ï¼Œäººçœ¼å¯¹ä¸€ä¸ª åŒºåŸŸçš„æ„ŸçŸ¥ç»“æœä¼šå—åˆ°å…¶å‘¨å›´é‚»è¿‘åŒºåŸŸçš„å½±å“ç­‰ï¼‰ï¼Œå› è€Œç»å¸¸å‡ºç°è¯„ä»·ç»“æœä¸äººçš„ä¸»è§‚æ„Ÿè§‰ä¸ä¸€è‡´çš„æƒ…å†µã€‚">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-06-21T18:43:53+08:00">
    <meta property="article:modified_time" content="2023-06-21T18:43:53+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">è®¡ç®—ä¸¤å¹…å›¾åƒçš„ç›¸ä¼¼åº¦ï¼ˆPSNRã€SSIMã€MSEã€ä½™å¼¦ç›¸ä¼¼åº¦ã€MD5ã€ç›´æ–¹å›¾ã€äº’ä¿¡æ¯ã€Hashï¼‰&amp; ä»£ç å®ç° ä¸ä¸¾ä¾‹</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"></p> 
<h2 id="MSE%EF%BC%88Mean%20Squared%20Error%EF%BC%89%E5%9D%87%E6%96%B9%E8%AF%AF%E5%B7%AE">MSEï¼ˆMean Squared Errorï¼‰å‡æ–¹è¯¯å·®</h2> 
<h3 id="MSE%E5%85%AC%E5%BC%8F%C2%A0">MSEå…¬å¼Â </h3> 
<p>MSE è®¡ç®—æ¨¡å‹çš„é¢„æµ‹ Å¶ ä¸çœŸå®æ ‡ç­¾ Y çš„æ¥è¿‘ç¨‹åº¦ã€‚å…¬å¼è¡¨ç¤ºä¸ºï¼š</p> 
<p><img alt="" height="104" src="https://images2.imgbox.com/da/28/6wuOVe59_o.png" width="400"></p> 
<p>Â <img alt="" height="239" src="https://images2.imgbox.com/1c/5e/JxbDFIhR_o.png" width="400"></p> 
<p>å¯¹äºä¸¤ä¸ªmÃ—nçš„å•é€šé“å›¾åƒIå’ŒKï¼Œå®ƒä»¬çš„å‡æ–¹è¯¯å·®å¯å®šä¹‰ä¸ºï¼š</p> 
<p><img alt="" height="95" src="https://images2.imgbox.com/44/f3/ceUQ7d9M_o.png" width="425"></p> 
<p>ä¼˜ç‚¹ï¼šMSEçš„å‡½æ•°æ›²çº¿å…‰æ»‘ã€è¿ç»­ï¼Œå¤„å¤„å¯å¯¼ï¼Œä¾¿äºä½¿ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œæ˜¯ä¸€ç§å¸¸ç”¨çš„æŸå¤±å‡½æ•°ã€‚è€Œä¸”ï¼Œéšç€è¯¯å·®çš„å‡å°ï¼Œæ¢¯åº¦ä¹Ÿåœ¨å‡å°ï¼Œè¿™æœ‰åˆ©äºæ”¶æ•›ï¼Œå³ä½¿ä½¿ç”¨å›ºå®šçš„å­¦ä¹ é€Ÿç‡ï¼Œä¹Ÿèƒ½è¾ƒå¿«çš„æ”¶æ•›åˆ°æœ€å°å€¼ã€‚</p> 
<p>ç¼ºç‚¹ï¼šå½“çœŸå®å€¼yå’Œé¢„æµ‹å€¼f(x)çš„å·®å€¼å¤§äº1æ—¶ï¼Œä¼šæ”¾å¤§è¯¯å·®ï¼›è€Œå½“å·®å€¼å°äº1æ—¶ï¼Œåˆ™ä¼šç¼©å°è¯¯å·®ï¼Œè¿™æ˜¯å¹³æ–¹è¿ç®—å†³å®šçš„ã€‚MSEå¯¹äºè¾ƒå¤§çš„è¯¯å·®(&gt;1)ç»™äºˆè¾ƒå¤§çš„æƒ©ç½šï¼Œè¾ƒå°çš„è¯¯å·®(&lt;1ï¼‰ç»™äºˆè¾ƒå°çš„æƒ©ç½šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹ç¦»ç¾¤ç‚¹æ¯”è¾ƒæ•æ„Ÿï¼Œå—å…¶å½±å“è¾ƒå¤§ã€‚</p> 
<h3 id="%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0">ä»£ç å®ç°</h3> 
<pre><code class="language-python"># MSE

# æ–¹æ³•ä¸€ï¼šè‡ªå®šä¹‰å‡½æ•°

import numpy as np
def MSE(img1,img2):
    mse = np.mean( (img1 - img2) ** 2 )
    return mse

# æ–¹æ³•äºŒï¼šè°ƒç”¨åº“å‡½æ•°
# è€ç‰ˆæœ¬çš„scikit-imageï¼ŒåŠ è½½SSIMã€PSNRã€MSEçš„æ–¹å¼ï¼š
from skimage.measure import compare_mse as mse

# æ–°ç‰ˆæœ¬çš„scikit-imageï¼ŒåŠ è½½æ–¹å¼ï¼š
from skimage.metrics import mean_squared_error as mse</code></pre> 
<p></p> 
<h2 id="PSNR%EF%BC%88Peak%20Signal-to-Noise%20Ratio%EF%BC%89%E5%B3%B0%E5%80%BC%E4%BF%A1%E5%99%AA%E6%AF%94">PSNRï¼ˆPeak Signal-to-Noise Ratioï¼‰å³°å€¼ä¿¡å™ªæ¯”</h2> 
<p>Â <strong>PSNR</strong>(Peak Signal to Noise Ratio)ï¼Œå³°å€¼ä¿¡å™ªæ¯”ï¼Œæ˜¯ä¸€ç§è¯„ä»·å›¾åƒçš„å®¢è§‚æ ‡å‡†ã€‚ï¼Œåº”ç”¨åœºæ™¯æœ‰å¾ˆå¤šã€‚å®ƒå…·æœ‰å±€æ€§ï¼ŒPSNRæ˜¯â€œPeak Signal to Noise Ratioâ€çš„ç¼©å†™ã€‚peakçš„ä¸­æ–‡æ„æ€æ˜¯é¡¶ç‚¹ã€‚è€Œratioçš„æ„æ€æ˜¯æ¯”ç‡æˆ–æ¯”åˆ—çš„ã€‚æ•´ä¸ªæ„æ€å°±æ˜¯åˆ°è¾¾å™ªéŸ³æ¯”ç‡çš„é¡¶ç‚¹ä¿¡å·ï¼Œpsnrä¸€èˆ¬æ˜¯ç”¨äºæœ€å¤§å€¼ä¿¡å·å’ŒèƒŒæ™¯å™ªéŸ³ä¹‹é—´çš„ä¸€ä¸ªå·¥ç¨‹é¡¹ç›®ã€‚é€šå¸¸åœ¨ç»è¿‡å½±åƒå‹ç¼©ä¹‹åï¼Œé€šå¸¸è¾“å‡ºçš„å½±åƒéƒ½ä¼šåœ¨æŸç§ç¨‹åº¦ä¸åŸå§‹å½±åƒä¸åŒã€‚ä¸ºäº†è¡¡é‡ç»è¿‡å¤„ç†åçš„å½±åƒå“è´¨ï¼Œé€šå¸¸ä¼šå‚è€ƒPSNRå€¼æ¥è¡¡é‡æŸä¸ªå¤„ç†ç¨‹åºèƒ½å¦ä»¤äººæ»¡æ„ã€‚å®ƒæ˜¯åŸå›¾åƒä¸è¢«å¤„ç†å›¾ åƒä¹‹é—´çš„å‡æ–¹è¯¯å·®ç›¸å¯¹äº(2n-1)2çš„å¯¹æ•°å€¼(ä¿¡å·æœ€å¤§å€¼çš„å¹³æ–¹ï¼Œnæ˜¯æ¯ä¸ªé‡‡æ ·å€¼çš„æ¯”ç‰¹æ•°)ï¼Œå®ƒçš„å•ä½æ˜¯dBã€‚</p> 
<p>PSNRæ˜¯æœ€æ™®éå’Œä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§å›¾åƒå®¢è§‚è¯„ä»·æŒ‡æ ‡ï¼Œç„¶è€Œå®ƒæ˜¯åŸºäºå¯¹åº”åƒç´ ç‚¹é—´çš„è¯¯å·®ï¼Œå³ åŸºäºè¯¯å·®æ•æ„Ÿçš„å›¾åƒè´¨é‡è¯„ä»·ã€‚ç”±äºå¹¶æœªè€ƒè™‘åˆ°äººçœ¼çš„è§†è§‰ç‰¹æ€§ï¼ˆäººçœ¼å¯¹ç©ºé—´é¢‘ç‡è¾ƒä½çš„å¯¹æ¯”å·®å¼‚æ•æ„Ÿåº¦è¾ƒé«˜ï¼Œäººçœ¼å¯¹äº®åº¦å¯¹æ¯”å·®å¼‚çš„æ•æ„Ÿåº¦è¾ƒè‰²åº¦é«˜ï¼Œäººçœ¼å¯¹ä¸€ä¸ª åŒºåŸŸçš„æ„ŸçŸ¥ç»“æœä¼šå—åˆ°å…¶å‘¨å›´é‚»è¿‘åŒºåŸŸçš„å½±å“ç­‰ï¼‰ï¼Œå› è€Œç»å¸¸å‡ºç°è¯„ä»·ç»“æœä¸äººçš„ä¸»è§‚æ„Ÿè§‰ä¸ä¸€è‡´çš„æƒ…å†µã€‚</p> 
<h3 id="PSNR%E5%85%AC%E5%BC%8F">PSNRå…¬å¼</h3> 
<p>PSNRæ˜¯é€šè¿‡MSEå¾—å‡ºæ¥çš„ï¼Œå…¬å¼å¦‚ä¸‹ï¼šÂ </p> 
<p><img alt="" height="85" src="https://images2.imgbox.com/99/60/4axjRILI_o.png" width="500"></p> 
<p>Â å…¶ä¸­ï¼ŒMAXIæ˜¯è¡¨ç¤ºå›¾åƒç‚¹é¢œè‰²çš„æœ€å¤§æ•°å€¼ï¼Œå¦‚æœæ¯ä¸ªé‡‡æ ·ç‚¹ç”¨ 8 ä½è¡¨ç¤ºï¼Œé‚£ä¹ˆå°±æ˜¯ 255ã€‚</p> 
<p>Â æ‰€ä»¥MSEè¶Šå°ï¼Œåˆ™PSNRè¶Šå¤§ï¼›æ‰€ä»¥PSNRè¶Šå¤§ï¼Œä»£è¡¨ç€å›¾åƒè´¨é‡è¶Šå¥½ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ</p> 
<ul><li>PSNRé«˜äº40dBè¯´æ˜å›¾åƒè´¨é‡æå¥½ï¼ˆå³éå¸¸æ¥è¿‘åŸå§‹å›¾åƒï¼‰ï¼›</li><li>åœ¨30â€”40dBé€šå¸¸è¡¨ç¤ºå›¾åƒè´¨é‡æ˜¯å¥½çš„ï¼ˆå³å¤±çœŸå¯ä»¥å¯Ÿè§‰ä½†å¯ä»¥æ¥å—ï¼‰ï¼›</li><li>åœ¨20â€”30dBè¯´æ˜å›¾åƒè´¨é‡å·®ï¼›</li><li>æœ€åï¼ŒPSNRä½äº20dBå›¾åƒä¸å¯æ¥å—ã€‚</li></ul> 
<h3>ä»£ç å®ç°</h3> 
<pre><code class="language-python"># PSNR

# æ–¹æ³•ä¸€ï¼šè‡ªå®šä¹‰å‡½æ•° 
 
import numpy
import math
def psnr(img1, img2):
    mse = numpy.mean( (img1 - img2) ** 2 )
    if mse == 0:
        return 100
    PIXEL_MAX = 255.0
    return 20 * math.log10(PIXEL_MAX / math.sqrt(mse))


# æ–¹æ³•äºŒï¼šè°ƒç”¨åº“å‡½æ•°

# è€ç‰ˆæœ¬çš„scikit-imageï¼ŒåŠ è½½SSIMã€PSNRã€MSEçš„æ–¹å¼ï¼š
from skimage.measure import compare_ssim as ssim
from skimage.measure import compare_psnr as psnr
from skimage.measure import compare_mse as mse

# æ–°ç‰ˆæœ¬çš„scikit-imageï¼ŒåŠ è½½æ–¹å¼ï¼š
from skimage.metrics import structural_similarity as ssim
from skimage.metrics import peak_signal_noise_ratio as psnr
from skimage.metrics import mean_squared_error as mse</code></pre> 
<p></p> 
<h2 id="SSIM%EF%BC%88structural%20similarity%EF%BC%89%E7%BB%93%E6%9E%84%E7%9B%B8%E4%BC%BC%E6%80%A7">SSIMï¼ˆstructural similarityï¼‰ç»“æ„ç›¸ä¼¼æ€§</h2> 
<p>SSIM(structural similarity)ï¼Œç»“æ„ç›¸ä¼¼æ€§ï¼Œæ˜¯ä¸€ç§è¡¡é‡ä¸¤å¹…å›¾åƒç›¸ä¼¼åº¦çš„æŒ‡æ ‡ã€‚</p> 
<p>SSIMç®—æ³•ä¸»è¦ç”¨äºæ£€æµ‹ä¸¤å¼ ç›¸åŒå°ºå¯¸çš„å›¾åƒçš„ç›¸ä¼¼åº¦ã€æˆ–è€…æ£€æµ‹å›¾åƒçš„å¤±çœŸç¨‹åº¦ã€‚</p> 
<p>SSIMå…¬å¼åŸºäºæ ·æœ¬xå’Œyä¹‹é—´çš„ä¸‰ä¸ªæ¯”è¾ƒè¡¡é‡ï¼šäº®åº¦ (luminance)ã€å¯¹æ¯”åº¦ (contrast) å’Œç»“æ„ (structure)ã€‚</p> 
<h3 id="SSIM%E5%85%AC%E5%BC%8F">SSIMå…¬å¼</h3> 
<p><img alt="" height="353" src="https://images2.imgbox.com/58/99/q7xiuDhU_o.png" width="700"></p> 
<p>Â å¸¸æ•°ğ‘ªğŸï¼Œ ğ‘ªğŸï¼Œ ğ‘ªğŸ‘æ˜¯ä¸ºäº†é¿å…å½“åˆ†æ¯ä¸º 0 æ—¶é€ æˆçš„ä¸ç¨³å®šé—®é¢˜ã€‚<br> ğğ’™ä¸ºå‡å€¼ï¼Œ ğˆğ’™ ä¸ºæ–¹å·®ï¼Œ ğˆğ’™ğ’š è¡¨ç¤ºåæ–¹å·®ã€‚</p> 
<p><img alt="" height="409" src="https://images2.imgbox.com/30/8c/LLx6Qq71_o.png" width="700"></p> 
<p>Â <img alt="" height="313" src="https://images2.imgbox.com/4c/cc/ZiZ1fWeA_o.png" width="700"></p> 
<p></p> 
<p><img alt="" height="89" src="https://images2.imgbox.com/02/4d/rDnl5Cw1_o.png" width="467"></p> 
<p>Â <img alt="" class="left" height="40" src="https://images2.imgbox.com/c3/07/kV2tBzXK_o.png" width="911"></p> 
<p>SSIMå–å€¼èŒƒå›´ä¸º[0,1]ï¼Œå€¼è¶Šå¤§è¡¨ç¤ºè¾“å‡ºå›¾åƒå’Œæ— å¤±çœŸå›¾åƒçš„å·®è·è¶Šå°ï¼Œå³å›¾åƒè´¨é‡è¶Šå¥½ã€‚</p> 
<p>ç¼ºç‚¹ï¼šç»“æ„ç›¸ä¼¼æ€§æŒ‡æ ‡æœ‰å…¶é™åˆ¶ï¼Œå¯¹äºå½±åƒå‡ºç°ä½ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ï¼ˆçš†å±äºéç»“æ„æ€§çš„å¤±çœŸï¼‰çš„æƒ…å†µæ— æ³•æœ‰æ•ˆçš„è¿ä½œã€‚</p> 
<h3>ä»£ç å®ç°</h3> 
<pre><code class="language-python"># SSIM
# https://github.com/scikit-image/scikit-image/blob/v0.21.0/skimage/metrics/_structural_similarity.py

# æ–¹æ³•ä¸€ï¼šè‡ªå®šä¹‰å‡½æ•°
import numpy as np
def ssim(y_true , y_pred):
    u_true = np.mean(y_true)
    u_pred = np.mean(y_pred)
    var_true = np.var(y_true)
    var_pred = np.var(y_pred)
    std_true = np.sqrt(var_true)
    std_pred = np.sqrt(var_pred)
    R = 255
    c1 = np.square(0.01*R)
    c2 = np.square(0.03*R)
    ssim = (2 * u_true * u_pred + c1) * (2 * std_pred * std_true + c2)
    denom = (u_true ** 2 + u_pred ** 2 + c1) * (var_pred + var_true + c2)
    return ssim / denom


# æ–¹æ³•äºŒï¼šè°ƒç”¨åº“å‡½æ•°

# è€ç‰ˆæœ¬çš„scikit-imageï¼ŒåŠ è½½SSIMã€PSNRã€MSEçš„æ–¹å¼ï¼š
from skimage.measure import compare_ssim as ssim
from skimage.measure import compare_psnr as psnr
from skimage.measure import compare_mse as mse

# æ–°ç‰ˆæœ¬çš„scikit-imageï¼ŒåŠ è½½æ–¹å¼ï¼š
from skimage.metrics import structural_similarity as ssim
from skimage.metrics import peak_signal_noise_ratio as psnr
from skimage.metrics import mean_squared_error as mse
</code></pre> 
<p></p> 
<h4 id="%E5%87%BD%E6%95%B0%20structural_similarity">å‡½æ•° structural_similarity</h4> 
<pre><code class="language-python">def structural_similarity(*, im1, im2,
                         win_size=None, gradient=False, data_range=None,
                         multichannel=False, gaussian_weights=False,
                         full=False, **kwargs)
</code></pre> 
<p><img alt="" height="388" src="https://images2.imgbox.com/54/19/kYKc8kOI_o.png" width="1000"></p> 
<p></p> 
<p></p> 
<h2 id="%E5%A4%84%E7%90%86RGB%E7%AD%89%E5%A4%9A%E9%80%9A%E9%81%93%E5%9B%BE%E5%83%8F%E6%88%96%E5%88%92%E5%88%86%E4%B8%BA%E5%A4%9A%E5%9D%97%E6%97%B6">å¤„ç†RGBç­‰å¤šé€šé“å›¾åƒæˆ–åˆ’åˆ†ä¸ºå¤šå—æ—¶</h2> 
<p>ä¸Šè¿°åŸå§‹è®¡ç®—æ–¹å¼ä»…æ³•é’ˆå¯¹å•é€šé“ç°åº¦å›¾ï¼Œ</p> 
<p>æ±‚RGBå›¾æˆ–å¤šé€šé“å›¾æ—¶ï¼ŒPSNRæœ‰ä¸‰ç§æ–¹å¼ï¼Œå…¶ä»–ç±»ä¼¼ï¼š</p> 
<ul><li>åˆ†åˆ«è®¡ç®— RGB ä¸‰ä¸ªé€šé“çš„ PSNRï¼Œç„¶åå–å¹³å‡å€¼ã€‚</li><li>è®¡ç®— RGB ä¸‰é€šé“çš„ MSE ï¼Œç„¶åå†é™¤ä»¥ 3 ã€‚</li><li>å°†å›¾ç‰‡è½¬åŒ–ä¸º YCbCr æ ¼å¼ï¼Œç„¶ååªè®¡ç®— Y åˆ†é‡ä¹Ÿå°±æ˜¯äº®åº¦åˆ†é‡çš„ PSNRã€‚</li></ul> 
<p>åˆ†ä¸ºå¤šå—æ—¶ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯ä»¥åˆ©ç”¨æ»‘åŠ¨çª—å°†å›¾åƒåˆ†å—ï¼Œä»¤åˆ†å—æ€»æ•°ä¸ºNï¼Œè€ƒè™‘åˆ°çª—å£å½¢çŠ¶å¯¹åˆ†å—çš„å½±å“ï¼Œé‡‡ç”¨é«˜æ–¯åŠ æƒè®¡ç®—æ¯ä¸€çª—å£çš„å‡å€¼ã€æ–¹å·®ä»¥åŠåæ–¹å·®ï¼Œç„¶åè®¡ç®—å¯¹åº”å—çš„ç»“æ„ç›¸ä¼¼åº¦SSIMï¼Œæœ€åå°†å¹³å‡å€¼ä½œä¸ºä¸¤å›¾åƒçš„ç»“æ„ç›¸ä¼¼æ€§åº¦é‡ï¼Œå³å¹³å‡ç»“æ„ç›¸ä¼¼æ€§SSIMã€‚Â Â </p> 
<p>ä¾‹ï¼šè®¡ç®—ä¸¤ä¸ªRGBå›¾åƒçš„MSEï¼ˆå‡æ–¹è¯¯å·®ï¼‰ï¼šÂ </p> 
<ol><li>â€ä»çº¢è‰²é€šé“å¼€å§‹â€ï¼›</li><li>â€è®¡ç®—ä¸¤ä¸ªå›¾åƒçš„çº¢è‰²é€šé“ä¸­æ¯ä¸ªåƒç´ çš„ç°åº¦å€¼ä¹‹é—´çš„å·®å¼‚ï¼ˆæ‰€æœ‰åƒç´ ä½ç½®çš„(redA(0,0)-redB(0,0)ç­‰ï¼‰ï¼›</li><li>â€å¯¹æ¯ä¸ªåƒç´ çš„å·®å¼‚è¿›è¡Œå¹³æ–¹Â  (redA(0,0)-redB(0,0)^2ï¼›</li><li>â€è®¡ç®—çº¢è‰²é€šé“ä¸­æ‰€æœ‰åƒç´ çš„å¹³æ–¹å·®ä¹‹å’Œâ€ï¼›</li><li>â€å¯¹ç»¿è‰²å’Œè“è‰²é€šé“é‡å¤ä¸Šè¿°æ“ä½œâ€ï¼›</li><li>â€å°† 3 ä¸ªé€šé“çš„æ€»å’Œç›¸åŠ å¹¶é™¤ä»¥ 3ï¼Œå³ ï¼ˆçº¢è‰²é€šé“å’Œ+ç»¿è‰²é€šé“å’Œ+è“è‰²é€šé“å’Œï¼‰/ 3â€ï¼›</li><li>â€é™¤ä»¥å›¾åƒé¢ç§¯ï¼ˆå®½åº¦é«˜åº¦ï¼‰â€â€ä»¥å½¢æˆå¹³å‡å€¼æˆ–å¹³å‡å€¼ï¼Œå³ï¼ˆçº¢å’Œ+ç»¿å’Œ+è“å’Œï¼‰/ï¼ˆ3* å®½åº¦*é«˜åº¦ï¼‰â€â€= MSEâ€ã€‚<br> Â </li></ol> 
<p></p> 
<h2 id="%E4%BD%99%E5%BC%A6%E7%9B%B8%E4%BC%BC%E5%BA%A6">ä½™å¼¦ç›¸ä¼¼åº¦</h2> 
<p><strong>æŠŠå›¾ç‰‡è¡¨ç¤ºæˆä¸€ä¸ªå‘é‡ï¼Œé€šè¿‡è®¡ç®—å‘é‡ä¹‹é—´çš„ä½™å¼¦è·ç¦»æ¥è¡¨å¾ä¸¤å¼ å›¾ç‰‡çš„ç›¸ä¼¼åº¦ã€‚</strong></p> 
<p><strong>ä½™å¼¦ç›¸ä¼¼åº¦ç®—æ³•ï¼š</strong>ä¸€ä¸ªå‘é‡ç©ºé—´ä¸­ä¸¤ä¸ªå‘é‡å¤¹è§’é—´çš„ä½™å¼¦å€¼ä½œä¸ºè¡¡é‡ä¸¤ä¸ªä¸ªä½“ä¹‹é—´å·®å¼‚çš„å¤§å°ï¼Œä½™å¼¦å€¼æ¥è¿‘1ï¼Œå¤¹è§’è¶‹äº0ï¼Œè¡¨æ˜ä¸¤ä¸ªå‘é‡è¶Šç›¸ä¼¼ï¼Œä½™å¼¦å€¼æ¥è¿‘äº0ï¼Œå¤¹è§’è¶‹äº90åº¦ï¼Œè¡¨æ˜ä¸¤ä¸ªå‘é‡è¶Šä¸ç›¸ä¼¼ã€‚Â </p> 
<h3 id="%E4%BD%99%E5%BC%A6%E5%85%AC%E5%BC%8F%C2%A0">ä½™å¼¦å…¬å¼Â </h3> 
<figure class="image"> 
 <img alt="" height="144" src="https://images2.imgbox.com/56/e0/gAu0ND2M_o.png" width="519"> 
 <figcaption>
   äºŒç»´ç©ºé—´ä½™å¼¦å‡½æ•° 
 </figcaption> 
</figure> 
<p></p> 
<figure class="image"> 
 <img alt="" height="227" src="https://images2.imgbox.com/57/5e/rZjV53Tk_o.png" width="390"> 
 <figcaption>
   å¤šç»´ç©ºé—´ä½™å¼¦å‡½æ•° 
 </figcaption> 
</figure> 
<p></p> 
<h3>ä»£ç å®ç°</h3> 
<p><a href="https://zhuanlan.zhihu.com/p/483401892" rel="nofollow" title="å›¾ç‰‡ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•æ€»ç»“ - çŸ¥ä¹ (zhihu.com)">å›¾ç‰‡ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•æ€»ç»“ - çŸ¥ä¹ (zhihu.com)</a></p> 
<pre><code class="language-python"># -*- coding: utf-8 -*-
# !/usr/bin/env python
# ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—
from PIL import Image
from numpy import average, dot, linalg
# å¯¹å›¾ç‰‡è¿›è¡Œç»Ÿä¸€åŒ–å¤„ç†
def get_thum(image, size=(64, 64), greyscale=False):
    # åˆ©ç”¨imageå¯¹å›¾åƒå¤§å°é‡æ–°è®¾ç½®, Image.ANTIALIASä¸ºé«˜è´¨é‡çš„
    image = image.resize(size, Image.ANTIALIAS)
    if greyscale:
        # å°†å›¾ç‰‡è½¬æ¢ä¸ºLæ¨¡å¼ï¼Œå…¶ä¸ºç°åº¦å›¾ï¼Œå…¶æ¯ä¸ªåƒç´ ç”¨8ä¸ªbitè¡¨ç¤º
        image = image.convert('L')
    return image
# è®¡ç®—å›¾ç‰‡çš„ä½™å¼¦è·ç¦»
def image_similarity_vectors_via_numpy(image1, image2):
    image1 = get_thum(image1)
    image2 = get_thum(image2)
    images = [image1, image2]
    vectors = []
    norms = []
    for image in images:
        vector = []
        for pixel_tuple in image.getdata():
            vector.append(average(pixel_tuple))
        vectors.append(vector)
        # linalg=linearï¼ˆçº¿æ€§ï¼‰+algebraï¼ˆä»£æ•°ï¼‰ï¼Œnormåˆ™è¡¨ç¤ºèŒƒæ•°
        # æ±‚å›¾ç‰‡çš„èŒƒæ•°
        norms.append(linalg.norm(vector, 2))
    a, b = vectors
    a_norm, b_norm = norms
    # dotè¿”å›çš„æ˜¯ç‚¹ç§¯ï¼Œå¯¹äºŒç»´æ•°ç»„ï¼ˆçŸ©é˜µï¼‰è¿›è¡Œè®¡ç®—
    res = dot(a / a_norm, b / b_norm)
    return res
image1 = Image.open('010.jpg')
image2 = Image.open('011.jpg')
cosin = image_similarity_vectors_via_numpy(image1, image2)
print('å›¾ç‰‡ä½™å¼¦ç›¸ä¼¼åº¦', cosin)</code></pre> 
<p></p> 
<h2 id="h_483401892_2">å“ˆå¸Œç›¸ä¼¼åº¦ Hash</h2> 
<p><a href="https://blog.csdn.net/qq_36559293/article/details/106350394" title="å›¾ç‰‡ç›¸ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆHashã€SSIMã€compareHistï¼‰_å—è‹æœˆçš„åšå®¢-CSDNåšå®¢_å›¾åƒç›¸ä¼¼åº¦è®¡ç®—å…¬å¼">å›¾ç‰‡ç›¸ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆHashã€SSIMã€compareHistï¼‰_å—è‹æœˆçš„åšå®¢-CSDNåšå®¢_å›¾åƒç›¸ä¼¼åº¦è®¡ç®—å…¬å¼</a></p> 
<p><a href="https://blog.csdn.net/chenghaoy/article/details/83271885" title="å“ˆå¸Œç®—æ³•-å›¾ç‰‡ç›¸ä¼¼åº¦è®¡ç®—_chenghaoyçš„åšå®¢-CSDNåšå®¢_å‡å€¼å“ˆå¸Œç®—æ³•ç›¸ä¼¼åº¦">å“ˆå¸Œç®—æ³•-å›¾ç‰‡ç›¸ä¼¼åº¦è®¡ç®—_chenghaoyçš„åšå®¢-CSDNåšå®¢_å‡å€¼å“ˆå¸Œç®—æ³•ç›¸ä¼¼åº¦</a></p> 
<p>å®ç°å›¾ç‰‡ç›¸ä¼¼åº¦æ¯”è¾ƒçš„hashç®—æ³•æœ‰ä¸‰ç§ï¼šå‡å€¼å“ˆå¸Œç®—æ³•ï¼ˆAHashï¼‰ï¼Œå·®å€¼å“ˆå¸Œç®—æ³•ï¼ˆDHashï¼‰ï¼Œæ„ŸçŸ¥å“ˆå¸Œç®—æ³• ï¼ˆPHashï¼‰ã€‚</p> 
<ul><li>aHashï¼šå¹³å‡å€¼å“ˆå¸Œã€‚é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œä½†æ˜¯å¸¸å¸¸ä¸å¤ªç²¾ç¡®ã€‚</li><li>pHashï¼šæ„ŸçŸ¥å“ˆå¸Œã€‚ç²¾ç¡®åº¦æ¯”è¾ƒé«˜ï¼Œä½†æ˜¯é€Ÿåº¦æ–¹é¢è¾ƒå·®ä¸€äº›ã€‚</li><li>dHashï¼šå·®å¼‚å€¼å“ˆå¸Œã€‚ç²¾ç¡®åº¦è¾ƒé«˜ï¼Œä¸”é€Ÿåº¦ä¹Ÿéå¸¸å¿«ã€‚</li></ul> 
<p>å“ˆå¸Œä¸æ˜¯ä»¥ä¸¥æ ¼çš„æ–¹å¼è®¡ç®—Hashå€¼ï¼Œè€Œæ˜¯ä»¥æ›´åŠ ç›¸å¯¹çš„æ–¹å¼è®¡ç®—å“ˆå¸Œå€¼ï¼Œå› ä¸ºâ€œç›¸ä¼¼â€ä¸å¦ï¼Œå°±æ˜¯ä¸€ç§ç›¸å¯¹çš„åˆ¤å®šã€‚<strong>å€¼å“ˆå¸Œç®—æ³•</strong>ã€<strong>å·®å€¼å“ˆå¸Œç®—æ³•</strong>å’Œ<strong>æ„ŸçŸ¥å“ˆå¸Œç®—æ³•</strong>éƒ½æ˜¯å€¼è¶Šå°ï¼Œç›¸ä¼¼åº¦è¶Šé«˜ï¼Œå–å€¼ä¸º0-64ï¼Œå³æ±‰æ˜è·ç¦»ä¸­ï¼Œ64ä½çš„hashå€¼æœ‰å¤šå°‘ä¸åŒã€‚<strong>ä¸‰ç›´æ–¹å›¾</strong>å’Œ<strong>å•é€šé“ç›´æ–¹å›¾</strong>çš„å€¼ä¸º0-1ï¼Œå€¼è¶Šå¤§ï¼Œç›¸ä¼¼åº¦è¶Šé«˜ã€‚</p> 
<h3 id="%E5%9D%87%E5%80%BC%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95%EF%BC%88AHash%EF%BC%89">å‡å€¼å“ˆå¸Œç®—æ³•ï¼ˆAHashï¼‰</h3> 
<p>ä¸€å¼ å›¾ç‰‡å°±æ˜¯ä¸€ä¸ªäºŒç»´ä¿¡å·ï¼Œå®ƒåŒ…å«äº†ä¸åŒé¢‘ç‡çš„æˆåˆ†ã€‚äº®åº¦å˜åŒ–å°çš„åŒºåŸŸæ˜¯ä½é¢‘æˆåˆ†ï¼Œå®ƒæè¿°å¤§èŒƒå›´çš„ä¿¡æ¯ã€‚è€Œäº®åº¦å˜åŒ–å‰§çƒˆçš„åŒºåŸŸï¼ˆæ¯”å¦‚ç‰©ä½“çš„è¾¹ç¼˜ï¼‰å°±æ˜¯é«˜é¢‘çš„æˆåˆ†ï¼Œå®ƒæè¿°å…·ä½“çš„ç»†èŠ‚ã€‚æˆ–è€…è¯´é«˜é¢‘å¯ä»¥æä¾›å›¾ç‰‡è¯¦ç»†çš„ä¿¡æ¯ï¼Œè€Œä½é¢‘å¯ä»¥æä¾›ä¸€ä¸ªæ¡†æ¶ã€‚ è€Œä¸€å¼ å¤§çš„ï¼Œè¯¦ç»†çš„å›¾ç‰‡æœ‰å¾ˆé«˜çš„é¢‘ç‡ï¼Œè€Œå°å›¾ç‰‡ç¼ºä¹å›¾åƒç»†èŠ‚ï¼Œæ‰€ä»¥éƒ½æ˜¯ä½é¢‘çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¹³æ—¶çš„ä¸‹é‡‡æ ·ï¼Œä¹Ÿå°±æ˜¯ç¼©å°å›¾ç‰‡çš„è¿‡ç¨‹ï¼Œå®é™…ä¸Šæ˜¯æŸå¤±é«˜é¢‘ä¿¡æ¯çš„è¿‡ç¨‹ã€‚å‡å€¼å“ˆå¸Œç®—æ³•å°±æ˜¯åˆ©ç”¨å›¾ç‰‡çš„ä½é¢‘ä¿¡æ¯ã€‚<br><strong>å…·ä½“æ­¥éª¤</strong>ï¼š</p> 
<ol><li>ç¼©å°å°ºå¯¸ï¼šå°†å›¾ç‰‡ç¼©å°åˆ°8x8çš„å°ºå¯¸ï¼Œæ€»å…±64ä¸ªåƒç´ ã€‚è¿™ä¸€æ­¥çš„ä½œç”¨æ˜¯å»é™¤å›¾ç‰‡çš„ç»†èŠ‚ï¼Œåªä¿ç•™ç»“æ„ã€æ˜æš—ç­‰åŸºæœ¬ä¿¡æ¯ï¼Œæ‘’å¼ƒä¸åŒå°ºå¯¸ã€æ¯”ä¾‹å¸¦æ¥çš„å›¾ç‰‡å·®å¼‚ã€‚</li><li>ç®€åŒ–è‰²å½©ï¼šå°†ç¼©å°åçš„å›¾ç‰‡ï¼Œè½¬ä¸º64çº§ç°åº¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰åƒç´ ç‚¹æ€»å…±åªæœ‰64ç§é¢œè‰²ã€‚</li><li>è®¡ç®—å¹³å‡å€¼ï¼šè®¡ç®—æ‰€æœ‰64ä¸ªåƒç´ çš„ç°åº¦å¹³å‡å€¼</li><li>æ¯”è¾ƒåƒç´ çš„ç°åº¦ï¼šå°†æ¯ä¸ªåƒç´ çš„ç°åº¦ï¼Œä¸å¹³å‡å€¼è¿›è¡Œæ¯”è¾ƒã€‚å¤§äºæˆ–ç­‰äºå¹³å‡å€¼ï¼Œè®°ä¸º1ï¼›å°äºå¹³å‡å€¼ï¼Œè®°ä¸º0ã€‚</li><li>è®¡ç®—å“ˆå¸Œå€¼ï¼šå°†ä¸Šä¸€æ­¥çš„æ¯”è¾ƒç»“æœï¼Œç»„åˆåœ¨ä¸€èµ·ï¼Œå°±æ„æˆäº†ä¸€ä¸ª64ä½çš„æ•´æ•°ï¼Œè¿™å°±æ˜¯è¿™å¼ å›¾ç‰‡çš„æŒ‡çº¹ã€‚ç»„åˆçš„æ¬¡åºå¹¶ä¸é‡è¦ï¼Œåªè¦ä¿è¯æ‰€æœ‰å›¾ç‰‡éƒ½é‡‡ç”¨åŒæ ·æ¬¡åºå°±è¡Œäº†ã€‚</li></ol> 
<p>æœ€åå¾—åˆ°ä¸¤å¼ å›¾ç‰‡çš„æŒ‡çº¹ä¿¡æ¯åï¼Œè®¡ç®—ä¸¤ç»„64ä½æ•°æ®çš„æ±‰æ˜è·ç¦»ï¼Œå³å¯¹æ¯”æ•°æ®ä¸åŒçš„ä½æ•°ï¼Œä¸åŒä½æ•°è¶Šå°‘ï¼Œè¡¨æ˜å›¾ç‰‡çš„ç›¸ä¼¼åº¦è¶Šå¤§ã€‚<br> åˆ†æï¼š å‡å€¼å“ˆå¸Œç®—æ³•è®¡ç®—é€Ÿåº¦å¿«ï¼Œä¸å—å›¾ç‰‡å°ºå¯¸å¤§å°çš„å½±å“ï¼Œä½†æ˜¯ç¼ºç‚¹å°±æ˜¯å¯¹å‡å€¼æ•æ„Ÿï¼Œä¾‹å¦‚å¯¹å›¾åƒè¿›è¡Œä¼½é©¬æ ¡æ­£æˆ–ç›´æ–¹å›¾å‡è¡¡å°±ä¼šå½±å“å‡å€¼ï¼Œä»è€Œå½±å“æœ€ç»ˆçš„hashå€¼ã€‚</p> 
<h3 id="%E6%84%9F%E7%9F%A5%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95%20%EF%BC%88PHash%EF%BC%89">æ„ŸçŸ¥å“ˆå¸Œç®—æ³• ï¼ˆPHashï¼‰</h3> 
<p>æ„ŸçŸ¥å“ˆå¸Œç®—æ³•æ˜¯ä¸€ä¸ªæ¯”å‡å€¼å“ˆå¸Œç®—æ³•æ›´ä¸ºå¥å£®çš„ä¸€ç§ç®—æ³•ï¼Œä¸å‡å€¼å“ˆå¸Œç®—æ³•çš„åŒºåˆ«åœ¨äºæ„ŸçŸ¥å“ˆå¸Œç®—æ³•æ˜¯é€šè¿‡DCTï¼ˆç¦»æ•£ä½™å¼¦å˜æ¢ï¼‰æ¥è·å–å›¾ç‰‡çš„ä½é¢‘ä¿¡æ¯ã€‚<br> ç¦»æ•£ä½™å¼¦å˜æ¢ï¼ˆDCTï¼‰æ˜¯ç§å›¾åƒå‹ç¼©ç®—æ³•ï¼Œå®ƒå°†å›¾åƒä»åƒç´ åŸŸå˜æ¢åˆ°é¢‘ç‡åŸŸã€‚ç„¶åä¸€èˆ¬å›¾åƒéƒ½å­˜åœ¨å¾ˆå¤šå†—ä½™å’Œç›¸å…³æ€§çš„ï¼Œæ‰€ä»¥è½¬æ¢åˆ°é¢‘ç‡åŸŸä¹‹åï¼Œåªæœ‰å¾ˆå°‘çš„ä¸€éƒ¨åˆ†é¢‘ç‡åˆ†é‡çš„ç³»æ•°æ‰ä¸ä¸º0ï¼Œå¤§éƒ¨åˆ†ç³»æ•°éƒ½ä¸º0ï¼ˆæˆ–è€…è¯´æ¥è¿‘äº0ï¼‰ã€‚ç»è¿‡DCTå˜æ¢åçš„ç³»æ•°çŸ©é˜µä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’é¢‘ç‡è¶Šæ¥è¶Šé«˜ï¼Œå› æ­¤å›¾ç‰‡çš„èƒ½é‡ä¸»è¦ä¿ç•™åœ¨å·¦ä¸Šè§’çš„ä½é¢‘ç³»æ•°ä¸Šäº†ã€‚<br><strong>å…·ä½“æ­¥éª¤</strong>ï¼š</p> 
<ol><li>ç¼©å°å°ºå¯¸ï¼špHashä»¥å°å›¾ç‰‡å¼€å§‹ï¼Œä½†å›¾ç‰‡å¤§äº8x8ï¼Œ32x32æ˜¯æœ€å¥½çš„ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ç®€åŒ–äº†DCTçš„è®¡ç®—ï¼Œè€Œä¸æ˜¯å‡å°é¢‘ç‡ã€‚</li><li>ç®€åŒ–è‰²å½©ï¼šå°†å›¾ç‰‡è½¬åŒ–æˆç°åº¦å›¾åƒï¼Œè¿›ä¸€æ­¥ç®€åŒ–è®¡ç®—é‡ã€‚</li><li>è®¡ç®—DCTï¼šè®¡ç®—å›¾ç‰‡çš„DCTå˜æ¢ï¼Œå¾—åˆ°32x32çš„DCTç³»æ•°çŸ©é˜µã€‚</li><li>ç¼©å°DCTï¼šè™½ç„¶DCTçš„ç»“æœæ˜¯32x32å¤§å°çš„çŸ©é˜µï¼Œä½†æˆ‘ä»¬åªè¦ä¿ç•™å·¦ä¸Šè§’çš„8x8çš„çŸ©é˜µï¼Œè¿™éƒ¨åˆ†å‘ˆç°äº†å›¾ç‰‡ä¸­çš„æœ€ä½é¢‘ç‡ã€‚</li><li>è®¡ç®—å¹³å‡å€¼ï¼šå¦‚åŒå‡å€¼å“ˆå¸Œä¸€æ ·ï¼Œè®¡ç®—DCTçš„å‡å€¼ã€‚</li><li>è®¡ç®—hashå€¼ï¼šè¿™æ˜¯æœ€ä¸»è¦çš„ä¸€æ­¥ï¼Œæ ¹æ®8x8çš„DCTçŸ©é˜µï¼Œè®¾ç½®0æˆ–1çš„64ä½çš„hashå€¼ï¼Œå¤§äºç­‰äºDCTå‡å€¼çš„è®¾ä¸ºâ€1â€ï¼Œå°äºDCTå‡å€¼çš„è®¾ä¸ºâ€œ0â€ã€‚ç»„åˆåœ¨ä¸€èµ·ï¼Œå°±æ„æˆäº†ä¸€ä¸ª64ä½çš„æ•´æ•°ï¼Œè¿™å°±æ˜¯è¿™å¼ å›¾ç‰‡çš„æŒ‡çº¹ã€‚</li></ol> 
<p>åˆ†æï¼š ç»“æœå¹¶ä¸èƒ½å‘Šè¯‰æˆ‘ä»¬çœŸå®æ€§çš„ä½é¢‘ç‡ï¼Œåªèƒ½ç²—ç•¥åœ°å‘Šè¯‰æˆ‘ä»¬ç›¸å¯¹äºå¹³å‡å€¼é¢‘ç‡çš„ç›¸å¯¹æ¯”ä¾‹ã€‚åªè¦å›¾ç‰‡çš„æ•´ä½“ç»“æ„ä¿æŒä¸å˜ï¼Œhashç»“æœå€¼å°±ä¸å˜ã€‚èƒ½å¤Ÿé¿å…ä¼½é©¬æ ¡æ­£æˆ–é¢œè‰²ç›´æ–¹å›¾è¢«è°ƒæ•´å¸¦æ¥çš„å½±å“ã€‚å¯¹äºå˜å½¢ç¨‹åº¦åœ¨25%ä»¥å†…çš„å›¾ç‰‡ä¹Ÿèƒ½ç²¾å‡†è¯†åˆ«ã€‚</p> 
<h3 id="%E5%B7%AE%E5%80%BC%E5%93%88%E5%B8%8C%E7%AE%97%E6%B3%95%EF%BC%88DHash%EF%BC%89">å·®å€¼å“ˆå¸Œç®—æ³•ï¼ˆDHashï¼‰</h3> 
<p>æ¯”pHashï¼ŒdHashçš„é€Ÿåº¦è¦å¿«çš„å¤šï¼Œç›¸æ¯”aHashï¼ŒdHashåœ¨æ•ˆç‡å‡ ä¹ç›¸åŒçš„æƒ…å†µä¸‹çš„æ•ˆæœè¦æ›´å¥½ï¼Œå®ƒæ˜¯åŸºäºæ¸å˜å®ç°çš„ã€‚<br><strong>ä¸»è¦æ­¥éª¤ï¼š</strong></p> 
<ol><li>ç¼©å°å°ºå¯¸ï¼šæ”¶ç¼©åˆ°8x9ï¼ˆé«˜xå®½ï¼‰çš„å¤§å°ï¼Œä¸€éå®ƒæœ‰72çš„åƒç´ ç‚¹</li><li>è½¬åŒ–ä¸ºç°åº¦å›¾ï¼šæŠŠç¼©æ”¾åçš„å›¾ç‰‡è½¬åŒ–ä¸º256é˜¶çš„ç°åº¦å›¾ã€‚</li><li>è®¡ç®—å·®å¼‚å€¼ï¼šdHashç®—æ³•å·¥ä½œåœ¨ç›¸é‚»åƒç´ ä¹‹é—´ï¼Œè¿™æ ·æ¯è¡Œ9ä¸ªåƒç´ ä¹‹é—´äº§ç”Ÿäº†8ä¸ªä¸åŒçš„å·®å¼‚ï¼Œä¸€å…±8è¡Œï¼Œåˆ™äº§ç”Ÿäº†64ä¸ªå·®å¼‚å€¼</li><li>è·å¾—æŒ‡çº¹ï¼šå¦‚æœå·¦è¾¹çš„åƒç´ æ¯”å³è¾¹çš„æ›´äº®ï¼Œåˆ™è®°å½•ä¸º1ï¼Œå¦åˆ™ä¸º0.</li></ol> 
<h3>ä»£ç å®ç°</h3> 
<pre><code class="language-python">import cv2
import numpy as np
#æ„ŸçŸ¥å“ˆå¸Œç®—æ³•
def pHash(image): 
    image = cv2.resize(image,(32,32), interpolation=cv2.INTER_CUBIC) 
    image = cv2.cvtColor(image,cv2.COLOR_BGR2GRAY) 
#     cv2.imshow('image', image)
#     cv2.waitKey(0)
#     cv2.destroyAllWindows()
    # å°†ç°åº¦å›¾è½¬ä¸ºæµ®ç‚¹å‹ï¼Œå†è¿›è¡Œdctå˜æ¢ 
    dct = cv2.dct(np.float32(image))
#     print(dct)
    # å–å·¦ä¸Šè§’çš„8*8ï¼Œè¿™äº›ä»£è¡¨å›¾ç‰‡çš„æœ€ä½é¢‘ç‡ 
    # è¿™ä¸ªæ“ä½œç­‰ä»·äºc++ä¸­åˆ©ç”¨opencvå®ç°çš„æ©ç æ“ä½œ 
    # åœ¨pythonä¸­è¿›è¡Œæ©ç æ“ä½œï¼Œå¯ä»¥ç›´æ¥è¿™æ ·å–å‡ºå›¾åƒçŸ©é˜µçš„æŸä¸€éƒ¨åˆ† 
    dct_roi = dct[0:8,0:8]  
    avreage = np.mean(dct_roi) 
    hash = [] 
    for i in range(dct_roi.shape[0]): 
        for j in range(dct_roi.shape[1]): 
            if dct_roi[i,j] &gt; avreage: 
                hash.append(1) 
            else: 
                hash.append(0) 
    return hash

#å‡å€¼å“ˆå¸Œç®—æ³•
def aHash(image):
    #ç¼©æ”¾ä¸º8*8
    image=cv2.resize(image,(8,8),interpolation=cv2.INTER_CUBIC)
    #è½¬æ¢ä¸ºç°åº¦å›¾
    image=cv2.cvtColor(image,cv2.COLOR_BGR2GRAY)
    avreage = np.mean(image) 
    hash = [] 
    for i in range(image.shape[0]): 
        for j in range(image.shape[1]): 
            if image[i,j] &gt; avreage: 
                hash.append(1) 
            else: 
                hash.append(0) 
    return hash

#å·®å€¼æ„ŸçŸ¥ç®—æ³•
def dHash(image):
    #ç¼©æ”¾9*8
    image=cv2.resize(image,(9,8),interpolation=cv2.INTER_CUBIC)
    #è½¬æ¢ç°åº¦å›¾
    image=cv2.cvtColor(image,cv2.COLOR_BGR2GRAY)
#     print(image.shape)
    hash=[]
    #æ¯è¡Œå‰ä¸€ä¸ªåƒç´ å¤§äºåä¸€ä¸ªåƒç´ ä¸º1ï¼Œç›¸åä¸º0ï¼Œç”Ÿæˆå“ˆå¸Œ
    for i in range(8):
        for j in range(8):
            if image[i,j]&gt;image[i,j+1]:
                hash.append(1)
            else:
                hash.append(0)
    return hash

#è®¡ç®—æ±‰æ˜è·ç¦»
def Hamming_distance(hash1,hash2): 
    num = 0
    for index in range(len(hash1)): 
        if hash1[index] != hash2[index]: 
            num += 1
    return num
if __name__ == "__main__":
    image_file1 = './data/cartoon1.jpg'
    image_file2 = './data/cartoon3.jpg'
    img1 = cv2.imread(image_file1)
    img2 = cv2.imread(image_file2)
    hash1 = pHash(img1)
    hash2 = pHash(img2)
    dist = Hamming_distance(hash1, hash2)
    #å°†è·ç¦»è½¬åŒ–ä¸ºç›¸ä¼¼åº¦
    similarity = 1 - dist * 1.0 / 64 
    print(dist)
    print(similarity)
</code></pre> 
<p></p> 
<h2 id="%E7%9B%B4%E6%96%B9%E5%9B%BE%E8%B7%9D%E7%A6%BB">ç›´æ–¹å›¾è·ç¦»</h2> 
<p><a href="https://zhuanlan.zhihu.com/p/274429582" rel="nofollow" title="å›¾ç‰‡çš„ç›¸ä¼¼åº¦--ç›´æ–¹å›¾è·ç¦» - çŸ¥ä¹ (zhihu.com)">å›¾ç‰‡çš„ç›¸ä¼¼åº¦--ç›´æ–¹å›¾è·ç¦» - çŸ¥ä¹ (zhihu.com)</a></p> 
<h3 id="%E7%9B%B4%E6%96%B9%E5%9B%BE%E8%B7%9D%E7%A6%BB%E6%8F%8F%E8%BF%B0">ç›´æ–¹å›¾è·ç¦»æè¿°</h3> 
<p>æ–¹æ³•æè¿°ï¼šæŒ‰ç…§æŸç§è·ç¦»åº¦é‡çš„æ ‡å‡†å¯¹ä¸¤å¹…å›¾åƒçš„ç›´æ–¹å›¾è¿›è¡Œç›¸ä¼¼åº¦çš„æµ‹é‡ã€‚</p> 
<p>å›¾åƒç›´æ–¹å›¾ä¸°å¯Œçš„å›¾åƒç»†èŠ‚ä¿¡æ¯ï¼Œåæ˜ äº†å›¾åƒåƒç´ ç‚¹çš„æ¦‚ç‡åˆ†å¸ƒæƒ…å†µï¼Œç»Ÿè®¡æ¯ä¸€ä¸ªåƒç´ ç‚¹å¼ºåº¦å€¼å…·æœ‰çš„åƒç´ ä¸ªæ•°ã€‚</p> 
<ul><li>ä¼˜ç‚¹ï¼šè®¡ç®—é‡æ¯”è¾ƒå°ã€‚</li><li>ç¼ºç‚¹ï¼š ç›´æ–¹å›¾ååº”çš„æ˜¯å›¾åƒç°åº¦å€¼å¾—æ¦‚ç‡åˆ†å¸ƒï¼Œå¹¶æ²¡æœ‰å›¾åƒçš„ç©ºé—´ä½ç½®ä¿¡æ¯åœ¨é‡Œé¢ï¼Œå› æ­¤ï¼Œä¼šå‡ºç°è¯¯åˆ¤ï¼›æ¯”å¦‚çº¹ç†ç»“æ„ç›¸åŒï¼Œä½†æ˜æš—ä¸åŒçš„å›¾åƒï¼Œåº”è¯¥ç›¸ä¼¼åº¦å¾ˆé«˜ï¼Œä½†å®é™…ç»“æœæ˜¯ç›¸ä¼¼åº¦å¾ˆä½ï¼Œè€Œçº¹ç†ç»“æ„ä¸åŒï¼Œä½†æ˜æš—ç›¸è¿‘çš„å›¾åƒï¼Œç›¸ä¼¼åº¦å´å¾ˆé«˜ã€‚</li></ul> 
<p><strong>è®¡ç®—æ­¥éª¤ï¼š</strong></p> 
<ol><li>å°†å›¾ç‰‡resizeï¼Œå¾—åˆ°ç›¸åŒå¤§å°çš„å›¾ç‰‡ï¼›</li><li>å°†å›¾ç‰‡ç°åº¦ï¼Œç°åº¦åå›¾ç‰‡çš„åƒç´ åœ¨[0-255]ä¹‹é—´ï¼›</li><li>è®¡ç®—å›¾ç‰‡çš„ç›´æ–¹å›¾æ•°æ®ï¼Œç»Ÿè®¡ç›¸åŒåƒç´ ç‚¹çš„æ¦‚ç‡åˆ†å¸ƒï¼›</li><li>æ ¹æ®ç›¸å…³æ€§è®¡ç®—å…¬å¼ï¼Œè®¡ç®—ä¸¤ä¸ªå›¾ç‰‡ç›´æ–¹å›¾çš„ç›¸å…³æ€§ã€‚</li></ol> 
<h3>ä»£ç å®ç°</h3> 
<pre><code class="language-python">import cv2
def calculate(image1, image2):
    # ç°åº¦ç›´æ–¹å›¾ç®—æ³•
    # è®¡ç®—å•é€šé“çš„ç›´æ–¹å›¾çš„ç›¸ä¼¼å€¼
    hist1 = cv2.calcHist([image1], [0], None, [256], [0.0, 255.0])
    hist2 = cv2.calcHist([image2], [0], None, [256], [0.0, 255.0])
    # è®¡ç®—ç›´æ–¹å›¾çš„é‡åˆåº¦
    degree = 0
    for i in range(len(hist1)):
        if hist1[i] != hist2[i]:
            degree = degree + (1 - abs(hist1[i] - hist2[i]) / max(hist1[i], hist2[i]))
        else:
            degree = degree + 1
    degree = degree / len(hist1)
    return degree
 
def classify_hist_with_split(image1, image2, size=(256, 256)):
    # RGBæ¯ä¸ªé€šé“çš„ç›´æ–¹å›¾ç›¸ä¼¼åº¦
    # å°†å›¾åƒresizeåï¼Œåˆ†ç¦»ä¸ºRGBä¸‰ä¸ªé€šé“ï¼Œå†è®¡ç®—æ¯ä¸ªé€šé“çš„ç›¸ä¼¼å€¼
    image1 = cv2.resize(image1, size)
    image2 = cv2.resize(image2, size)
    sub_image1 = cv2.split(image1)
    sub_image2 = cv2.split(image2)
    sub_data = 0
    for im1, im2 in zip(sub_image1, sub_image2):
        sub_data += calculate(im1, im2)
    sub_data = sub_data / 3
    return sub_data</code></pre> 
<p></p> 
<h2 id="h_483401892_5">äº’ä¿¡æ¯ï¼ˆMutual Informationï¼‰</h2> 
<p><a href="https://blog.csdn.net/hang916/article/details/88783931" title="å½’ä¸€åŒ–äº’ä¿¡æ¯(NMI)è¯„ä»·æŒ‡æ ‡_æ˜“_çš„åšå®¢-CSDNåšå®¢_nmiæŒ‡æ ‡">å½’ä¸€åŒ–äº’ä¿¡æ¯(NMI)è¯„ä»·æŒ‡æ ‡_æ˜“_çš„åšå®¢-CSDNåšå®¢_nmiæŒ‡æ ‡</a></p> 
<h3 id="%E4%BF%A1%E6%81%AF%E7%86%B5%E3%80%81%E7%9B%B8%E5%AF%B9%E7%86%B5%E3%80%81%E4%BA%92%E4%BF%A1%E6%81%AF%C2%A0">ä¿¡æ¯ç†µã€ç›¸å¯¹ç†µã€äº’ä¿¡æ¯Â </h3> 
<p>ä¿¡æ¯ç†µï¼šå¯¹ä¿¡æ¯è¿›è¡Œé‡åŒ–åº¦é‡ã€‚å¯ä»¥ç†è§£ä¸ºæŸç§ç‰¹å®šä¿¡æ¯çš„å‡ºç°æ¦‚ç‡ã€‚</p> 
<p><img alt="" height="77" src="https://images2.imgbox.com/77/17/BQ4tz7oh_o.png" width="345"></p> 
<p>ç›¸å¯¹ç†µï¼šï¼ˆrelative entropyï¼‰ï¼Œåˆè¢«ç§°ä¸ºKullback-Leibleræ•£åº¦ï¼ˆKullback-Leibler divergenceï¼ŒKLæ•£åº¦ï¼‰æˆ–ä¿¡æ¯æ•£åº¦ï¼ˆinformation divergenceï¼‰ï¼Œæ˜¯ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼ˆprobability distributionï¼‰é—´å·®å¼‚çš„éå¯¹ç§°æ€§åº¦é‡ ã€‚åœ¨åœ¨ä¿¡æ¯ç†è®ºä¸­ï¼Œç›¸å¯¹ç†µç­‰ä»·äºä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒçš„ä¿¡æ¯ç†µï¼ˆShannon entropyï¼‰çš„å·®å€¼ã€‚<br><img alt="" height="242" src="https://images2.imgbox.com/d7/8e/inyROnnG_o.png" width="800"></p> 
<p>äº’ä¿¡æ¯ï¼š(Mutual Information)æ˜¯<a href="https://baike.baidu.com/item/%E4%BF%A1%E6%81%AF%E8%AE%BA/302185" rel="nofollow" title="ä¿¡æ¯è®º">ä¿¡æ¯è®º</a>é‡Œä¸€ç§æœ‰ç”¨çš„ä¿¡æ¯åº¦é‡ï¼Œå®ƒå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ª<a href="https://baike.baidu.com/item/%E9%9A%8F%E6%9C%BA" rel="nofollow" title="éšæœº">éšæœº</a>å˜é‡ä¸­åŒ…å«çš„å…³äºå¦ä¸€ä¸ªéšæœºå˜é‡çš„ä¿¡æ¯é‡ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªéšæœºå˜é‡ç”±äºå·²çŸ¥å¦ä¸€ä¸ªéšæœºå˜é‡è€Œå‡å°‘çš„ä¸è‚¯å®šæ€§ã€‚</p> 
<p><img alt="" height="165" src="https://images2.imgbox.com/27/11/Iv6YzRkN_o.png" width="650"></p> 
<p>å½’ä¸€åŒ–äº’ä¿¡æ¯ï¼šå°†äº’ä¿¡æ¯æ”¾åœ¨[0,1]ä¹‹é—´ï¼Œå®¹æ˜“è¯„ä»·ç®—æ³•çš„å¥½åã€‚Â </p> 
<p><img alt="" height="76" src="https://images2.imgbox.com/2a/47/Nb5ATbq6_o.png" width="300"></p> 
<h3 id="%C2%A0%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0">Â ä»£ç å®ç°</h3> 
<pre><code class="language-python">from sklearn import metrics as mr

img1 = cv2.imread('1.png')
img2 = cv2.imread('2.png')
img2 = cv2.resize(img2, (img1.shape[1], img1.shape[0])
nmi = mr.normalized_mutual_info_score(img1.reshape(-1), img2.reshape(-1))</code></pre> 
<p></p> 
<h2 id="h_483401892_6">åƒç´ åŒ¹é… pixelmatch</h2> 
<p><a href="https://github.com/whtsky/pixelmatch-py" title="GitHub - whtsky/pixelmatch-py: A fast pixel-level image comparison library, originally created to compare screenshots in tests.">GitHub - whtsky/pixelmatch-py: A fast pixel-level image comparison library, originally created to compare screenshots in tests.</a></p> 
<p>åˆ©ç”¨åƒç´ ä¹‹é—´çš„åŒ¹é…æ¥è®¡ç®—ç›¸ä¼¼åº¦Â </p> 
<pre><code class="language-python"># https://github.com/whtsky/pixelmatch-py

# ç¬¬ä¸€æ­¥ï¼š

pip install pixelmatch


# ç¬¬äºŒæ­¥ï¼š

from PIL import Image
from pixelmatch.contrib.PIL import pixelmatch

img_a = Image.open("a.png")
img_b = Image.open("b.png")
img_diff = Image.new("RGBA", img_a.size)
# note how there is no need to specify dimensions
mismatch = pixelmatch(img_a, img_b, img_diff, includeAA=True)
img_diff.save("diff.png")</code></pre> 
<p></p> 
<p id=""></p> 
<h2 id="%E4%B8%BE%E4%BE%8B1%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8%E5%9B%9B%E7%A7%8D%E6%96%B9%E6%B3%95%E8%AE%A1%E7%AE%97%E5%9B%BE%E7%89%87%E7%9B%B8%E4%BC%BC%E5%BA%A6%EF%BC%9AMD5%E3%80%81%E7%9B%B4%E6%96%B9%E5%9B%BE%E3%80%81PSNR%E3%80%81SSIM">ä¸¾ä¾‹1â€”â€”ä½¿ç”¨å››ç§æ–¹æ³•è®¡ç®—å›¾ç‰‡ç›¸ä¼¼åº¦ï¼šMD5ã€ç›´æ–¹å›¾ã€PSNRã€SSIM</h2> 
<p><a href="https://blog.csdn.net/xian0710830114/article/details/118786385" title="æœ‰å²ä»¥æ¥æœ€å…¨çš„å›¾åƒç›¸ä¼¼åº¦ç®—æ³•_å°æ®Šå°æ®Šçš„åšå®¢-CSDNåšå®¢_å›¾ç‰‡ç›¸ä¼¼åº¦">æœ‰å²ä»¥æ¥æœ€å…¨çš„å›¾åƒç›¸ä¼¼åº¦ç®—æ³•_å°æ®Šå°æ®Šçš„åšå®¢-CSDNåšå®¢_å›¾ç‰‡ç›¸ä¼¼åº¦</a></p> 
<p>ä½¿ç”¨å››ç§æ–¹æ³•è®¡ç®—å›¾ç‰‡ç›¸ä¼¼åº¦ï¼šMD5ï¼ˆç²—æš´çš„md5æ¯”è¾ƒï¼Œåˆ¤æ–­æ˜¯å¦å®Œå…¨ç›¸åŒï¼‰ã€ç›´æ–¹å›¾ã€PSNRã€SSIMã€‚</p> 
<pre><code class="language-python">import numpy as np
from PIL import Image
from skimage.metrics import structural_similarity
import cv2
import os
import hashlib
import math
 
'''
    ç²—æš´çš„md5æ¯”è¾ƒ è¿”å›æ˜¯å¦å®Œå…¨ç›¸åŒ
'''
def md5_similarity(img1_path, img2_path):
    file1 = open(img1_path, "rb")
    file2 = open(img2_path, "rb")
    md = hashlib.md5()
    md.update(file1.read())
    res1 = md.hexdigest()
    md = hashlib.md5()
    md.update(file2.read())
    res2 = md.hexdigest()
    return res1 == res2
 
def normalize(data):
    return data / np.sum(data)
 
'''
    ç›´æ–¹å›¾ç›¸ä¼¼åº¦
    ç›¸å…³æ€§æ¯”è¾ƒ cv2.HISTCMP_CORRELï¼šå€¼è¶Šå¤§ï¼Œç›¸ä¼¼åº¦è¶Šé«˜
    ç›¸äº¤æ€§æ¯”è¾ƒ cv2.HISTCMP_INTERSECTï¼šå€¼è¶Šå¤§ï¼Œç›¸ä¼¼åº¦è¶Šé«˜
    å¡æ–¹æ¯”è¾ƒ cv2.HISTCMP_CHISQRï¼šå€¼è¶Šå°ï¼Œç›¸ä¼¼åº¦è¶Šé«˜
    å·´æ°è·ç¦»æ¯”è¾ƒ cv2.HISTCMP_BHATTACHARYYAï¼šå€¼è¶Šå°ï¼Œç›¸ä¼¼åº¦è¶Šé«˜
'''
def hist_similarity(img1, img2, hist_size=256):
    imghistb1 = cv2.calcHist([img1], [0], None, [hist_size], [0, 256])
    imghistg1 = cv2.calcHist([img1], [1], None, [hist_size], [0, 256])
    imghistr1 = cv2.calcHist([img1], [2], None, [hist_size], [0, 256])
 
    imghistb2 = cv2.calcHist([img2], [0], None, [hist_size], [0, 256])
    imghistg2 = cv2.calcHist([img2], [1], None, [hist_size], [0, 256])
    imghistr2 = cv2.calcHist([img2], [2], None, [hist_size], [0, 256])
 
    distanceb = cv2.compareHist(normalize(imghistb1), normalize(imghistb2), cv2.HISTCMP_CORREL)
    distanceg = cv2.compareHist(normalize(imghistg1), normalize(imghistg2), cv2.HISTCMP_CORREL)
    distancer = cv2.compareHist(normalize(imghistr1), normalize(imghistr2), cv2.HISTCMP_CORREL)
    meandistance = np.mean([distanceb, distanceg, distancer])
    return meandistance
 
def PSNR(img1, img2):
    mse = np.mean((img1/255. - img2/255.) ** 2)
    if mse == 0:
        return 100
    PIXEL_MAX = 1
    return 20 * math.log10(PIXEL_MAX / math.sqrt(mse))
 
def SSIM(img1, img2):
    gray1 = cv2.cvtColor(img1, cv2.COLOR_BGR2GRAY)
    gray2 = cv2.cvtColor(img2, cv2.COLOR_BGR2GRAY)
    # è®¡ç®—ä¸¤ä¸ªç°åº¦å›¾åƒä¹‹é—´çš„ç»“æ„ç›¸ä¼¼åº¦
    score, diff = structural_similarity(gray1, gray2, win_size=101, full=True)
    # diff = (diff * 255).astype("uint8")
    # print("SSIM:{}".format(score))
    return score, diff

def ssim(img1, img2):
    u_true = np.mean(img1)
    u_pred = np.mean(img2)
    var_true = np.var(img1)
    var_pred = np.var(img2)
    std_true = np.sqrt(var_true)
    std_pred = np.sqrt(var_pred)
    c1 = np.square(0.01*7)
    c2 = np.square(0.03*7)
    ssim = (2 * u_true * u_pred + c1) * (2 * std_pred * std_true + c2)
    denom = (u_true ** 2 + u_pred ** 2 + c1) * (var_pred + var_true + c2)
    return ssim/denom

def MSE(img1,img2):
    mse = np.mean( (img1 - img2) ** 2 )
    return mse


if __name__ == '__main__':
    img1_path = '1_08.jpg'
    img2_path = '2_08.jpg'
    img1 = cv2.imread(img1_path)
    img2 = cv2.imread(img2_path)
 
    # 1.ç²—æš´çš„md5æ¯”è¾ƒ è¿”å›æ˜¯å¦å®Œå…¨ç›¸åŒ
    print('md5_similarity:', md5_similarity(img1_path, img2_path))
    # 2.ç›´æ–¹å›¾ç›¸ä¼¼åº¦
    print('hist_similarity:', hist_similarity(img1, img2))
    # 3.PSNR
    print('PSNR:', PSNR(img1, img2))
    # 4.SSIM
    print('ç°åº¦å›¾SSIM:', SSIM(img1, img2)[0])
    print('RGBå›¾_ssim:', ssim(img1, img2))
    print('RGBå›¾_structural_similarity:', structural_similarity(img1,img2, multichannel=True))
    # 5.MSE
    print('MSE:', MSE(img1, img2))
</code></pre> 
<p>æ•ˆæœå±•ç¤ºï¼š</p> 
<figure class="image"> 
 <img alt="" height="371" src="https://images2.imgbox.com/0e/10/jgOf4Q14_o.png" width="1000"> 
 <figcaption>
   ä¸¤å›¾ 
 </figcaption> 
</figure> 
<pre><code class="language-python">md5_similarity: False
hist_similarity: 0.1344447074377748
PSNR: 12.980832701995697
ç°åº¦å›¾SSIM: 0.5966066785284522
RGBå›¾_ssim: 0.9917382398395064
RGBå›¾_structural_similarity: 0.525279441002218
MSE: 86.05895699395074</code></pre> 
<p></p> 
<h2 id="%E4%B8%BE%E4%BE%8B2%E2%80%94%E2%80%94%E6%89%B9%E9%87%8F%E8%AE%A1%E7%AE%97PSNR%E3%80%81SSIM%E3%80%81MSE">ä¸¾ä¾‹2â€”â€”æ‰¹é‡è®¡ç®—PSNRã€SSIMã€MSE</h2> 
<pre><code class="language-python">import os
import numpy as np
from glob import glob
import cv2
from skimage.measure import compare_mse,compare_ssim,compare_psnr

def read_img(path):
    return cv2.imread(path,cv2.IMREAD_GRAYSCALE)

def mse(tf_img1, tf_img2):
    return compare_mse(tf_img1,tf_img2)

def psnr(tf_img1, tf_img2):
    return compare_psnr(tf_img1,tf_img2)

def ssim(tf_img1, tf_img2):
    return compare_ssim(tf_img1,tf_img2)

def main():
    WSI_MASK_PATH1 = 'E:/test/A/'
    WSI_MASK_PATH2 = 'E:/test/B/'
    path_real = glob(os.path.join(WSI_MASK_PATH1, '*.jpg'))
    path_fake = glob(os.path.join(WSI_MASK_PATH2, '*.jpg'))
    list_psnr = []
    list_ssim = []
    list_mse = []

    for i in range(len(path_real)):
        t1 = read_img(path_real[i])
        t2 = read_img(path_fake[i])
        result1 = np.zeros(t1.shape,dtype=np.float32)
        result2 = np.zeros(t2.shape,dtype=np.float32)
        cv2.normalize(t1,result1,alpha=0,beta=1,norm_type=cv2.NORM_MINMAX,dtype=cv2.CV_32F)
        cv2.normalize(t2,result2,alpha=0,beta=1,norm_type=cv2.NORM_MINMAX,dtype=cv2.CV_32F)
        mse_num = mse(result1, result2)
        psnr_num = psnr(result1, result2)
        ssim_num = ssim(result1, result2)
        list_psnr.append(psnr_num)
        list_ssim.append(ssim_num)
        list_mse.append(mse_num)
       
        #è¾“å‡ºæ¯å¼ å›¾åƒçš„æŒ‡æ ‡ï¼š
        print("{}/".format(i+1)+"{}:".format(len(path_real)))
        str = "\\"
        print("image:"+path_real[i][(path_real[i].index(str)+1):])
        print("PSNR:", psnr_num)
        print("SSIM:", ssim_num)
        print("MSE:",mse_num)

	#è¾“å‡ºå¹³å‡æŒ‡æ ‡ï¼š
    print("å¹³å‡PSNR:", np.mean(list_psnr))  # ,list_psnr)
    print("å¹³å‡SSIM:", np.mean(list_ssim))  # ,list_ssim)
    print("å¹³å‡MSE:", np.mean(list_mse))  # ,list_mse)

if __name__ == '__main__':
    main()

</code></pre> 
<p></p> 
<h2 id="%E4%B8%BE%E4%BE%8B3%E2%80%94%E2%80%94%E8%AE%A1%E7%AE%97Y%E9%80%9A%E9%81%93%E6%88%96RGB%E9%80%9A%E9%81%93%E7%9A%84PSNR%E5%92%8CSSIM">ä¸¾ä¾‹3â€”â€”è®¡ç®—Yé€šé“æˆ–RGBé€šé“çš„PSNRå’ŒSSIM</h2> 
<p>Â <a href="https://blog.csdn.net/qq_45041702/article/details/120997743" title="Pythonè®¡ç®—Yé€šé“æˆ–è€…RGBé€šé“çš„PSNR_SSIM_æœªçŸ¥é‡0520çš„åšå®¢-CSDNåšå®¢_folder_gt">Pythonè®¡ç®—Yé€šé“æˆ–è€…RGBé€šé“çš„PSNR_SSIM_æœªçŸ¥é‡0520çš„åšå®¢-CSDNåšå®¢_folder_gt</a>Â </p> 
<ul><li>æ·»åŠ ï¼šPSNR/SSIMè®¡ç®—ç»“æœï¼Œä¿å­˜æ–‡ä»¶ï¼ˆtxtï¼‰ï¼Œä¾¿äºåæœŸå¯¼å…¥excelåˆ—è¡¨åˆ†æã€‚</li><li>ä»£ç ä»‹ç»ï¼šPSNR_SSIMæ•ˆæœå’Œmatlabè®¡ç®—çš„ç»“æœä¸€è‡´ï¼ˆæœ¬äººæ²¡æœ‰éªŒè¯ï¼‰ã€‚</li><li>ä»£ç åŠŸèƒ½ï¼Œèƒ½å¤Ÿè®¡ç®—å›¾åƒçš„Y_channel æˆ–è€…RGB_channelçŠ¶æ€ä¸‹çš„PSNR_SSIMç»“æœ</li><li>ç”¨æ³•ï¼šå°†çœŸå®å›¾ç‰‡ï¼Œç”Ÿæˆå›¾ç‰‡åˆ†åˆ«æ”¾å…¥ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œä»£ç ä¸­æœ‰é€‰æ‹©ä¸¤ç§æ–¹å¼ï¼ˆonly_Y, RGBï¼‰ï¼Œåˆ‡æ¢æ³¨é‡Šç›¸åº”çš„ä»£ç è¡Œå³å¯ã€‚</li><li>æ³¨æ„ï¼šå®‰è£…ç›¸åº”çš„ä»£ç åº“ã€‚</li></ul> 
<pre><code class="language-python">'''
calculate the PSNR and SSIM.
same as MATLAB's results
https://blog.csdn.net/qq_45041702/article/details/120997743

'''
import os
import math
import numpy as np
import cv2
import glob
import os

def main():
    # Configurations

    # GT - Ground-truth;
    # Gen: Generated / Restored / Recovered images
    folder_GT = '/content/drive/MyDrive/Experiment/codes/26_PSNR_SSIM/All/groud_truth_png'
    folder_Gen = '/content/drive/MyDrive/Experiment/codes/26_PSNR_SSIM/All/1_ESPCN_png'
   
    #save the psnr and ssim score by txt
    PS_path = '/content/drive/MyDrive/Experiment/codes/26_PSNR_SSIM/Score'
    if not os.path.exists(PS_path):
        print('NO_path to sava the NIQE_Score,Making....')
        os.makedirs(PS_path)
    else:
        print("The NIQE_Score_path has existed")
    PS_txt = open(PS_path +'/score1.txt', 'a' )

    crop_border = 4  # same with scale
    suffix = ''  # suffix for Gen images
    test_Y = False  # True: test Y channel only; False: test RGB channels

    PSNR_all = []
    SSIM_all = []
    img_list = sorted(glob.glob(folder_GT + '/*'))

    if test_Y:
        print('Testing Y channel.')
    else:
        print('Testing RGB channels.')

    for i, img_path in enumerate(img_list):
        base_name = os.path.splitext(os.path.basename(img_path))[0]
        print(base_name)
        im_GT = cv2.imread(img_path) / 255.
        #ä¸åŒæ ¼å¼å›¾åƒ
        # im_Gen = cv2.imread(os.path.join(folder_Gen, base_name + suffix + '.tif')) / 255.
        im_Gen = cv2.imread(os.path.join(folder_Gen, base_name + suffix + '.png')) / 255.

        if test_Y and im_GT.shape[2] == 3:  # evaluate on Y channel in YCbCr color space
            im_GT_in = bgr2ycbcr(im_GT)
            im_Gen_in = bgr2ycbcr(im_Gen)
        else:
            im_GT_in = im_GT
            im_Gen_in = im_Gen

        # crop borders
        if crop_border == 0:
            cropped_GT = im_GT_in
            cropped_Gen = im_Gen_in
        else:
            if im_GT_in.ndim == 3:
                cropped_GT = im_GT_in[crop_border:-crop_border, crop_border:-crop_border, :]
                cropped_Gen = im_Gen_in[crop_border:-crop_border, crop_border:-crop_border, :]
            elif im_GT_in.ndim == 2:
                cropped_GT = im_GT_in[crop_border:-crop_border, crop_border:-crop_border]
                cropped_Gen = im_Gen_in[crop_border:-crop_border, crop_border:-crop_border]
            else:
                raise ValueError('Wrong image dimension: {}. Should be 2 or 3.'.format(im_GT_in.ndim))

        #ä¸åŒé€šé“æ•°ï¼ˆYé€šé“å’ŒRGBä¸‰ä¸ªé€šé“ï¼‰ï¼Œéœ€è¦æ›´æ”¹
        # calculate PSNR and SSIM
        # PSNR = calculate_psnr(cropped_GT * 255, cropped_Gen * 255)
        PSNR = calculate_rgb_psnr(cropped_GT * 255, cropped_Gen * 255)

        SSIM = calculate_ssim(cropped_GT * 255, cropped_Gen * 255)
        print('{:3d} - {:25}. \tPSNR: {:.4f} dB, \tSSIM: {:.4f}'.format(
            i + 1, base_name, PSNR, SSIM))
        PSNR_all.append(PSNR)
        SSIM_all.append(SSIM)

        single_info = '[{}],PSNR(dB),{:.4f}, SSIM,{:.4f}'
        PS_txt.write(single_info.format(base_name,PSNR,SSIM))
        PS_txt.write("\n")

    Mean_format = 'Mean_PSNR: {:.4f}, Mean_SSIM: {:.4f}'
    Mean_PSNR =  sum(PSNR_all) / len(PSNR_all)
    Mean_SSIM =  sum(SSIM_all) / len(SSIM_all)
    print(Mean_format.format(Mean_PSNR,Mean_SSIM))
    
    PS_txt.write(Mean_format.format(Mean_PSNR,Mean_SSIM))
    PS_txt.write('\n')

def calculate_psnr(img1, img2):
    # img1 and img2 have range [0, 255]
    img1 = img1.astype(np.float64)
    img2 = img2.astype(np.float64)
    mse = np.mean((img1 - img2)**2)
    if mse == 0:
        return float('inf')
    return 20 * math.log10(255.0 / math.sqrt(mse))

def calculate_rgb_psnr(img1, img2):
    """calculate psnr among rgb channel, img1 and img2 have range [0, 255]
    """
    n_channels = np.ndim(img1)
    sum_psnr = 0
    for i in range(n_channels):
        this_psnr = calculate_psnr(img1[:,:,i], img2[:,:,i])
        sum_psnr += this_psnr
    return sum_psnr/n_channels

def ssim(img1, img2):
    C1 = (0.01 * 255)**2
    C2 = (0.03 * 255)**2

    img1 = img1.astype(np.float64)
    img2 = img2.astype(np.float64)
    kernel = cv2.getGaussianKernel(11, 1.5)
    window = np.outer(kernel, kernel.transpose())

    mu1 = cv2.filter2D(img1, -1, window)[5:-5, 5:-5]  # valid
    mu2 = cv2.filter2D(img2, -1, window)[5:-5, 5:-5]
    mu1_sq = mu1**2
    mu2_sq = mu2**2
    mu1_mu2 = mu1 * mu2
    sigma1_sq = cv2.filter2D(img1**2, -1, window)[5:-5, 5:-5] - mu1_sq
    sigma2_sq = cv2.filter2D(img2**2, -1, window)[5:-5, 5:-5] - mu2_sq
    sigma12 = cv2.filter2D(img1 * img2, -1, window)[5:-5, 5:-5] - mu1_mu2

    ssim_map = ((2 * mu1_mu2 + C1) * (2 * sigma12 + C2)) / ((mu1_sq + mu2_sq + C1) *
                                                            (sigma1_sq + sigma2_sq + C2))
    return ssim_map.mean()

def calculate_ssim(img1, img2):
    '''calculate SSIM
    the same outputs as MATLAB's
    img1, img2: [0, 255]
    '''
    if not img1.shape == img2.shape:
        raise ValueError('Input images must have the same dimensions.')
    if img1.ndim == 2:
        return ssim(img1, img2)
    elif img1.ndim == 3:
        if img1.shape[2] == 3:
            ssims = []
            for i in range(img1.shape[2]):
                ssims.append(ssim(img1[..., i], img2[..., i]))
            return np.array(ssims).mean()
        elif img1.shape[2] == 1:
            return ssim(np.squeeze(img1), np.squeeze(img2))
    else:
        raise ValueError('Wrong input image dimensions.')

def bgr2ycbcr(img, only_y=True):
    '''same as matlab rgb2ycbcr
    only_y: only return Y channel
    Input:
        uint8, [0, 255]
        float, [0, 1]
    '''
    in_img_type = img.dtype
    img.astype(np.float32)
    if in_img_type != np.uint8:
        img *= 255.
    # convert
    if only_y:
        rlt = np.dot(img, [24.966, 128.553, 65.481]) / 255.0 + 16.0
    else:
        rlt = np.matmul(img, [[24.966, 112.0, -18.214], [128.553, -74.203, -93.786],
                              [65.481, -37.797, 112.0]]) / 255.0 + [16, 128, 128]
    if in_img_type == np.uint8:
        rlt = rlt.round()
    else:
        rlt /= 255.
    return rlt.astype(in_img_type)


if __name__ == '__main__':
    main()
</code></pre> 
<p>ç»“æœå±•ç¤ºï¼šÂ </p> 
<p><img alt="" height="605" src="https://images2.imgbox.com/73/7b/sGlZ2p7T_o.png" width="800"></p> 
<p></p> 
<h2 id="%E4%B8%BE%E4%BE%8B4%E2%80%94%E2%80%94%E8%B0%83%E7%94%A8SSIM%E7%AE%97%E6%B3%95%EF%BC%8C%E7%BB%93%E5%90%88opencv%E9%98%88%E5%80%BC%E5%88%86%E5%89%B2%E5%92%8C%E8%BD%AE%E5%BB%93%E6%8F%90%E5%8F%96%EF%BC%8C%E6%89%BE%E4%B8%A4%E5%9B%BE%E5%B7%AE%E5%BC%82">ä¸¾ä¾‹4â€”â€”è°ƒç”¨SSIMç®—æ³•ï¼Œç»“åˆopencvé˜ˆå€¼åˆ†å‰²å’Œè½®å»“æå–ï¼Œæ‰¾ä¸¤å›¾å·®å¼‚</h2> 
<p><a href="https://blog.csdn.net/hedgehog__/article/details/107257755" title="SSIM---ç»“æ„ç›¸ä¼¼æ€§ç®—æ³•ï¼ˆOpenCV+Python)_hedgehog__çš„åšå®¢-CSDNåšå®¢_python ç»“æ„ç›¸ä¼¼æ€§">SSIM---ç»“æ„ç›¸ä¼¼æ€§ç®—æ³•ï¼ˆOpenCV+Python)_hedgehog__çš„åšå®¢-CSDNåšå®¢_python ç»“æ„ç›¸ä¼¼æ€§</a>Â é€šè¿‡è°ƒç”¨skimage.metricsåŒ…ä¸‹çš„SSIMç®—æ³•ï¼Œç»“åˆOpenCVçš„é˜ˆå€¼åˆ†å‰²åŠè½®å»“æå–ç®—æ³•ï¼Œæ‰¾å‡ºä¸¤å¹…å›¾åƒçš„å·®å¼‚ã€‚</p> 
<pre><code class="language-python"># https://blog.csdn.net/hedgehog__/article/details/107257755

import cv2
import imutils
from skimage.metrics import structural_similarity
import time
from skimage import filters, img_as_ubyte
import numpy as np

start = time.time()
# è¯»å…¥å›¾åƒï¼Œè½¬ä¸ºç°åº¦å›¾åƒ
src = cv2.imread('C:/Users/Hedgehog/Desktop/right.jpg')
img = cv2.imread('C:/Users/Hedgehog/Desktop/left.jpg')
grayA = cv2.cvtColor(src, cv2.COLOR_BGR2GRAY)
grayB = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

# è®¡ç®—ä¸¤ä¸ªç°åº¦å›¾åƒä¹‹é—´çš„ç»“æ„ç›¸ä¼¼åº¦
(score, diff) = structural_similarity(grayA, grayB, win_size=101, full=True)
diff = (diff * 255).astype("uint8")
cv2.namedWindow("diff", cv2.WINDOW_NORMAL)
cv2.imshow("diff", diff)
print("SSIM:{}".format(score))

# æ‰¾åˆ°ä¸åŒçš„è½®å»“ä»¥è‡´äºå¯ä»¥åœ¨è¡¨ç¤ºä¸º 'ä¸åŒ'çš„åŒºåŸŸæ”¾ç½®çŸ©å½¢
# å…¨å±€è‡ªé€‚åº”é˜ˆå€¼åˆ†å‰²ï¼ˆäºŒå€¼åŒ–ï¼‰ï¼Œè¿”å›å€¼æœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªæ˜¯é˜ˆå€¼ï¼Œç¬¬äºŒä¸ªæ˜¯äºŒå€¼å›¾åƒ
dst = cv2.threshold(diff, 0, 255, cv2.THRESH_BINARY_INV | cv2.THRESH_OTSU)[1]
cv2.namedWindow("threshold", cv2.WINDOW_NORMAL)
cv2.imshow('threshold', dst)
# findContoursæ‰¾è½®å»“ï¼Œè¿”å›å€¼æœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªæ˜¯è½®å»“ä¿¡æ¯ï¼Œç¬¬äºŒä¸ªæ˜¯è½®å»“çš„å±‚æ¬¡ä¿¡æ¯ï¼ˆâ€œæ ‘â€çŠ¶æ‹“æ‰‘ç»“æ„ï¼‰
# cv2.RETR_EXTERNALï¼šåªæ£€æµ‹æœ€å¤–å±‚è½®å»“
# cv2.CHAIN_APPROX_SIMPLEï¼šå‹ç¼©æ°´å¹³æ–¹å‘ã€å‚ç›´æ–¹å‘å’Œå¯¹è§’çº¿æ–¹å‘çš„å…ƒç´ ï¼Œä¿ç•™è¯¥æ–¹å‘çš„ç»ˆç‚¹åæ ‡ï¼Œå¦‚çŸ©å½¢çš„è½®å»“å¯ç”¨4ä¸ªè§’ç‚¹è¡¨ç¤º
contours, hierarchy = cv2.findContours(dst.copy(), cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
print(contours)
newimg = np.zeros(dst.shape, np.uint8)  # å®šä¹‰ä¸€ä¸ªå’Œå›¾åƒåˆ†å‰²å¤„ç†åç›¸åŒå¤§å°çš„é»‘è‰²å›¾
# drawContoursç”»è½®å»“ï¼Œå°†æ‰¾åˆ°çš„è½®å»“ä¿¡æ¯ç”»å‡ºæ¥
cv2.drawContours(newimg, contours, -1, (255, 255, 255), 1)
cv2.namedWindow("contours", cv2.WINDOW_NORMAL)
cv2.imshow('contours', newimg)
# cnts = cnts[0] if imutils.is_cv3() else cnts[0]    å–findContourså‡½æ•°çš„ç¬¬ä¸€ä¸ªè¿”å›å€¼ï¼Œå³å–è½®å»“ä¿¡æ¯

# æ‰¾åˆ°ä¸€ç³»åˆ—åŒºåŸŸï¼Œåœ¨åŒºåŸŸå‘¨å›´æ”¾ç½®çŸ©å½¢
for c in contours:
    (x, y, w, h) = cv2.boundingRect(c)  # boundingRectå‡½æ•°ï¼šè®¡ç®—è½®å»“çš„å‚ç›´è¾¹ç•Œæœ€å°çŸ©å½¢ï¼ŒçŸ©å½¢æ˜¯ä¸å›¾åƒä¸Šä¸‹è¾¹ç•Œå¹³è¡Œçš„
    cv2.rectangle(src, (x, y), (x + w, y + h), (0, 255, 0), 2)  # rectangleå‡½æ•°ï¼šä½¿ç”¨å¯¹è§’çº¿çš„ä¸¤ç‚¹pt1ï¼Œpt2ç”»ä¸€ä¸ªçŸ©å½¢è½®å»“
    cv2.rectangle(img, (x, y), (x + w, y + h), (0, 255, 0), 2)  # ç”»çŸ©å½¢çš„å›¾, pt1, pt2,(å¯¹è§’çº¿ä¸¤ç‚¹çš„åæ ‡), çŸ©å½¢è¾¹æ¡†çš„é¢œè‰²ï¼ŒçŸ©å½¢è¾¹æ¡†çš„ç²—ç»†

end = time.time()
print(end - start)
# ç”¨cv2.imshow å±•ç°æœ€ç»ˆå¯¹æ¯”ä¹‹åçš„å›¾ç‰‡
cv2.namedWindow("right", cv2.WINDOW_NORMAL)
cv2.imshow('right', src)
cv2.namedWindow("left", cv2.WINDOW_NORMAL)
cv2.imshow('left', img)
cv2.waitKey(0)
cv2.destroyAllWindows()
</code></pre> 
<p>æ•ˆæœå±•ç¤ºï¼š</p> 
<p><img alt="" height="456" src="https://images2.imgbox.com/1b/ba/KerJZpwF_o.png" width="800"></p> 
<p><img alt="" height="457" src="https://images2.imgbox.com/f3/7c/3kMlExqq_o.png" width="800"></p> 
<p><img alt="" height="436" src="https://images2.imgbox.com/33/cc/LjyVmYn2_o.png" width="800"></p> 
<p><img alt="" height="433" src="https://images2.imgbox.com/db/1c/0D8x6oAR_o.png" width="800"></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<h2 id="%E5%8F%82%E8%80%83%E5%8D%9A%E5%AE%A2">å‚è€ƒåšå®¢</h2> 
<p><a href="https://blog.csdn.net/u010977034/article/details/82733137" title="è®¡ç®—ä¸¤å¹…å›¾åƒçš„ç›¸ä¼¼åº¦æ€»ç»“_JerrySingçš„åšå®¢-CSDNåšå®¢_compare_ssim">è®¡ç®—ä¸¤å¹…å›¾åƒçš„ç›¸ä¼¼åº¦æ€»ç»“_JerrySingçš„åšå®¢-CSDNåšå®¢_compare_ssim</a></p> 
<p><a href="https://blog.csdn.net/weixin_39121325/article/details/84187453" title="Pythonè®¡ç®—å›¾ç‰‡ä¹‹é—´çš„ç›¸ä¼¼åº¦_ï½å°ç–¯å­ï½çš„åšå®¢-CSDNåšå®¢_python è¯†åˆ«å›¾ç‰‡ç›¸ä¼¼åº¦">Pythonè®¡ç®—å›¾ç‰‡ä¹‹é—´çš„ç›¸ä¼¼åº¦_ï½å°ç–¯å­ï½çš„åšå®¢-CSDNåšå®¢_python è¯†åˆ«å›¾ç‰‡ç›¸ä¼¼åº¦</a></p> 
<p><a href="https://blog.csdn.net/xian0710830114/article/details/118786385" title="æœ‰å²ä»¥æ¥æœ€å…¨çš„å›¾åƒç›¸ä¼¼åº¦ç®—æ³•_å°æ®Šå°æ®Šçš„åšå®¢-CSDNåšå®¢_å›¾ç‰‡ç›¸ä¼¼åº¦">æœ‰å²ä»¥æ¥æœ€å…¨çš„å›¾åƒç›¸ä¼¼åº¦ç®—æ³•_å°æ®Šå°æ®Šçš„åšå®¢-CSDNåšå®¢_å›¾ç‰‡ç›¸ä¼¼åº¦</a></p> 
<p><a href="https://blog.csdn.net/Natukiaaa/article/details/117470395" title="ï¼ˆè¶…è¯¦ç»†ï¼‰å®ç°è®¡ç®—å›¾ç‰‡ç›¸ä¼¼åº¦MSEå’ŒPSNR_Natukiä¸¶çš„åšå®¢-CSDNåšå®¢_è®¡ç®—psnrå’Œmse">ï¼ˆè¶…è¯¦ç»†ï¼‰å®ç°è®¡ç®—å›¾ç‰‡ç›¸ä¼¼åº¦MSEå’ŒPSNR_Natukiä¸¶çš„åšå®¢-CSDNåšå®¢_è®¡ç®—psnrå’Œmse</a></p> 
<p><a href="https://blog.csdn.net/qq_44537267/article/details/124501626" title="Pythonæ‰¹é‡è®¡ç®—PSNRã€SSIMã€MSE_æ¨æ¨æ¨Garrickçš„åšå®¢-CSDNåšå®¢">Pythonæ‰¹é‡è®¡ç®—PSNRã€SSIMã€MSE_æ¨æ¨æ¨Garrickçš„åšå®¢-CSDNåšå®¢</a></p> 
<p><a href="https://blog.csdn.net/baidu_33216040/article/details/97373480" title="å›¾åƒè´¨é‡è¯„ä»·æŒ‡æ ‡MSE/PSNR/SSIM_ç§‹å¤©çš„ä»ä»çš„åšå®¢-CSDNåšå®¢_å›¾åƒmse">å›¾åƒè´¨é‡è¯„ä»·æŒ‡æ ‡MSE/PSNR/SSIM_ç§‹å¤©çš„ä»ä»çš„åšå®¢-CSDNåšå®¢_å›¾åƒmse</a></p> 
<p><a href="https://blog.csdn.net/qq_36559293/article/details/106350394" title="å›¾ç‰‡ç›¸ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆHashã€SSIMã€compareHistï¼‰_å—è‹æœˆçš„åšå®¢-CSDNåšå®¢_å›¾åƒç›¸ä¼¼åº¦è®¡ç®—å…¬å¼">å›¾ç‰‡ç›¸ç›¸ä¼¼åº¦è®¡ç®—ï¼ˆHashã€SSIMã€compareHistï¼‰_å—è‹æœˆçš„åšå®¢-CSDNåšå®¢_å›¾åƒç›¸ä¼¼åº¦è®¡ç®—å…¬å¼</a></p> 
<p><a href="https://blog.csdn.net/qq_42856191/article/details/118445380" title="ã€OpenCV-Pythonã€‘ï¼šå›¾åƒPSNRã€SSIMã€MSEè®¡ç®—_ç±³å¼€æœ—çªç½—~çš„åšå®¢-CSDNåšå®¢_å›¾åƒçš„mseè®¡ç®—">ã€OpenCV-Pythonã€‘ï¼šå›¾åƒPSNRã€SSIMã€MSEè®¡ç®—_ç±³å¼€æœ—çªç½—~çš„åšå®¢-CSDNåšå®¢_å›¾åƒçš„mseè®¡ç®—</a></p> 
<p><a href="https://blog.csdn.net/qq_45041702/article/details/120997743" title="Pythonè®¡ç®—Yé€šé“æˆ–è€…RGBé€šé“çš„PSNR_SSIM_æœªçŸ¥é‡0520çš„åšå®¢-CSDNåšå®¢_folder_gt">Pythonè®¡ç®—Yé€šé“æˆ–è€…RGBé€šé“çš„PSNR_SSIM_æœªçŸ¥é‡0520çš„åšå®¢-CSDNåšå®¢_folder_gt</a></p> 
<p><a href="https://blog.csdn.net/yizhiboshanshan/article/details/121038487" title="scikit-image 0.18.0ç‰ˆæœ¬è®¡ç®—PSNRã€SSIMã€MSE(Pythonä»£ç )_YZBshanshançš„åšå®¢-CSDNåšå®¢_scikit-imageç‰ˆæœ¬">scikit-image 0.18.0ç‰ˆæœ¬è®¡ç®—PSNRã€SSIMã€MSE(Pythonä»£ç )_YZBshanshançš„åšå®¢-CSDNåšå®¢_scikit-imageç‰ˆæœ¬</a></p> 
<p><a href="https://blog.csdn.net/weixin_43478836/article/details/104159648" title="å›¾åƒè´¨é‡è¯„ä¼°ä¸­çš„PSNRå’ŒSSIMçš„å®šä¹‰ï¼Œå…¬å¼å’Œå«ä¹‰_Â·å¦‚çƒŸÂ·çš„åšå®¢-CSDNåšå®¢_psnrå®šä¹‰">å›¾åƒè´¨é‡è¯„ä¼°ä¸­çš„PSNRå’ŒSSIMçš„å®šä¹‰ï¼Œå…¬å¼å’Œå«ä¹‰_Â·å¦‚çƒŸÂ·çš„åšå®¢-CSDNåšå®¢_psnrå®šä¹‰</a></p> 
<p><a href="https://www.cnblogs.com/lwp-nicol/p/14330034.html" rel="nofollow" title="ã€åŸºç¡€çŸ¥è¯†ã€‘å›¾åƒå»å™ªè¯„ä¼°â€”PSNRå’ŒSSIM - æ¢å›ç‰§ - åšå®¢å›­ (cnblogs.com)">ã€åŸºç¡€çŸ¥è¯†ã€‘å›¾åƒå»å™ªè¯„ä¼°â€”PSNRå’ŒSSIM - æ¢å›ç‰§ - åšå®¢å›­ (cnblogs.com)</a></p> 
<p><a href="https://blog.csdn.net/hedgehog__/article/details/107257755" title="SSIM---ç»“æ„ç›¸ä¼¼æ€§ç®—æ³•ï¼ˆOpenCV+Python)_hedgehog__çš„åšå®¢-CSDNåšå®¢_python ç»“æ„ç›¸ä¼¼æ€§">SSIM---ç»“æ„ç›¸ä¼¼æ€§ç®—æ³•ï¼ˆOpenCV+Python)_hedgehog__çš„åšå®¢-CSDNåšå®¢_python ç»“æ„ç›¸ä¼¼æ€§</a></p> 
<p><a href="https://zhuanlan.zhihu.com/p/483401892" rel="nofollow" title="å›¾ç‰‡ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•æ€»ç»“ - çŸ¥ä¹ (zhihu.com)">å›¾ç‰‡ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•æ€»ç»“ - çŸ¥ä¹ (zhihu.com)</a></p> 
<p><a href="https://blog.csdn.net/u014539465/article/details/105353638" title="ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•(ä¸‰) ä½™å¼¦ç›¸ä¼¼åº¦_æ½˜æ°¸é’çš„åšå®¢-CSDNåšå®¢_ä½™å¼¦ç›¸ä¼¼åº¦">ç›¸ä¼¼åº¦è®¡ç®—æ–¹æ³•(ä¸‰) ä½™å¼¦ç›¸ä¼¼åº¦_æ½˜æ°¸é’çš„åšå®¢-CSDNåšå®¢_ä½™å¼¦ç›¸ä¼¼åº¦</a></p> 
<p><a href="https://zhuanlan.zhihu.com/p/274429582" rel="nofollow" title="å›¾ç‰‡çš„ç›¸ä¼¼åº¦--ç›´æ–¹å›¾è·ç¦» - çŸ¥ä¹ (zhihu.com)">å›¾ç‰‡çš„ç›¸ä¼¼åº¦--ç›´æ–¹å›¾è·ç¦» - çŸ¥ä¹ (zhihu.com)</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/baa419a1f056bd754b422a840834e5d4/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ã€ç®—æ³•è®¾è®¡ä¸åˆ†æã€‘æœŸæœ«å¤ä¹ </p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d8172645d9ca3257873a93ece8255101/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Android ä¹‹MPAndroidChartå›¾è¡¨æ¡ˆä¾‹</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>