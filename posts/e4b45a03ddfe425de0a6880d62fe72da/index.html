<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ã€MySQLã€‘mysqlè®¿é—® - ç¼–ç¨‹å¤§å’–</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/e4b45a03ddfe425de0a6880d62fe72da/">
  <meta property="og:site_name" content="ç¼–ç¨‹å¤§å’–">
  <meta property="og:title" content="ã€MySQLã€‘mysqlè®¿é—®">
  <meta property="og:description" content="mysqlè®¿é—® 1.å¼•å…¥MySQL å®¢æˆ·ç«¯åº“2.C/C&#43;&#43; è¿›è¡Œå¢åˆ æ”¹3.æŸ¥è¯¢çš„å¤„ç†ç»†èŠ‚4.å›¾å½¢åŒ–ç•Œé¢è®¿é—®æ•°æ®åº“4.1ä¸‹è½½MYSQL Workbench4.2MYSQL Workbenchè¿œç¨‹è¿æ¥æ•°æ®åº“ ç‚¹èµğŸ‘ğŸ‘æ”¶è—ğŸŒŸğŸŒŸå…³æ³¨ğŸ’–ğŸ’–
ä½ çš„æ”¯æŒæ˜¯å¯¹æˆ‘æœ€å¤§çš„é¼“åŠ±ï¼Œæˆ‘ä»¬ä¸€èµ·åŠªåŠ›å§!ğŸ˜ƒğŸ˜ƒ
1.å¼•å…¥MySQL å®¢æˆ·ç«¯åº“ ä»å¼€å§‹åˆ°é€‰æ‹©æˆ‘ä»¬ç”¨çš„éƒ½æ˜¯å‘½ä»¤è¡Œå¼çš„mysqlè®¿é—®mysqldï¼Œå‘mysqldä¸‹è¾¾æˆ‘ä»¬çš„æŒ‡ä»¤ï¼Œå…¶å®åœ¨æ•°æ®åº“å±‚é¢ä¸Šï¼Œè¿æ¥æ•°æ®åº“çš„å®¢æˆ·ç«¯é™¤äº†ç°åœ¨å‘½ä»¤è¡Œå¼çš„å®¢æˆ·ç«¯ï¼Œè¿˜æœ‰å›¾å½¢åŒ–ç•Œé¢ã€ç½‘é¡µç‰ˆçš„ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬è¯­è¨€çº§åˆ«çš„åº“æˆ–è€…åŒ…å¸®æˆ‘ä»¬å»è®¿é—®æ•°æ®åº“ã€‚
ä¸‹é¢æˆ‘ä»¬å°±ç”¨C/C&#43;&#43;è®¿é—®æ•°æ®åº“ã€‚å…³äºè®¿é—®æ•°æ®åº“æˆ‘ä»¬è¦åšä¸¤ä¸ªå‡†å¤‡å·¥ä½œï¼Œä¸€æ˜¯åˆ›å»ºä¸€ä¸ªè¿œç«¯æˆ–è€…æœ¬åœ°è®¿é—®çš„è¯·æ±‚ä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨æ¥è¿›è¡Œç”¨C/C&#43;&#43;è®¿é—®å®¢æˆ·ç«¯çš„è´¦å·ã€‚
reate user &#39;connector&#39;@&#39;localhost&#39; identified by &#39;xxx&#39;; ç„¶ååˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œèµ‹äºˆè¿™ä¸ªè´¦å·å¯¹æ•°æ®åº“ä¸­è¡¨çš„æ‰€æœ‰æƒé™ã€‚
äºŒæ˜¯å®‰è£…C/C&#43;&#43;è¦èƒ½è®¿é—®çš„åº“ï¼Œè¿™ä¸ªåº“æœ‰ä¸¤ç§å‡†å¤‡ï¼Œç¬¬ä¸€ç§æ˜¯ä»å®˜ç½‘ä¸‹è½½åº“ï¼Œ
ä¸‹é¢è¿™ä¸ªæ˜¯ç”¨ä¸åŒè¯­è¨€è¿æ¥MYSQLï¼Œå®˜æ–¹æä¾›çš„åº“ã€‚
ä¸‹è½½æ¨èçš„8.0
æˆ‘ä»¬ç”¨çš„æ˜¯linuxï¼Œæ‰€ä»¥é€‰æ‹©linuxç³»ç»Ÿx86 64ä½
ä¸‹è½½å¥½ï¼Œä¸Šä¼ åˆ°linuxï¼Œç„¶åè§£å‹ä¸€ä¸‹ï¼Œmysql-connectoræ˜¯è§£å‹åé‡å‘½åçš„
è¿™æ˜¯è§£å‹åçš„æ–‡ä»¶ï¼Œæœ€é‡è¦çš„å°±æ˜¯include å¤´æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªlib64 åº“
æœªæ¥å¤´æ–‡ä»¶ç»™æˆ‘ä»¬æä¾›è¿æ¥mysqlçš„æ–¹æ³•ï¼Œåº“ æä¾›è¿æ¥mysqlçš„åº“å‡½æ•°
æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®å¤´æ–‡ä»¶ï¼Œç›´æ¥è°ƒç”¨å¤´æ–‡ä»¶çš„çš„æ–¹æ³•ï¼Œåœ¨ç¼–è¯‘è¿æ¥çš„æ—¶å€™æŠŠåº“è¿å…¥è¿›æ¥ã€‚å¦‚æœå¿˜è®°æ€ä¹ˆå¼•å…¥ï¼Œåœ¨Linuxå“ªé‡ŒåŸºç¡€IOåŠ¨é™æ€åº“å°±æœ‰å¯¹åº”çš„æ–¹æ³•ï¼
ä½†æ˜¯è¿™ç§æ–¹å¼ä¸æ¨èäº†ï¼ä¹‹é—´ä¸æ˜¯ä¸‹è½½mysqlï¼Œç”¨yumæºä¸‹è½½å—ã€‚yumæºå®ƒä¼šç»™æˆ‘ä»¬æ‰¾åˆ°åˆé€‚çš„æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯ï¼Œç”šè‡³æ˜¯å¼€å‘åŒ…ã€‚æ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨yumå“ªé‡Œå»æ‰¾è¿›è¡Œäº†ã€‚
æ²¡ä¸‹è½½è¿‡mysql å¯ä»¥ä¸‹ä¸€ä¸‹å¦‚æœä½ å®‰è£…è¿‡yumå¯¹åº”msyqlæºçš„è¯ï¼Œå¦‚æœä¸ä¼šä¸‹è¯·ç§»æ­¥äº
ã€MySQLã€‘MySQLåœ¨ Linuxä¸‹ç¯å¢ƒå®‰è£…
yum install -y mysql-community-server å¦‚æœä½ ä¸‹è½½è¿‡ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°è¿™é‡Œæœ‰å¯¹åº”çš„å¤´æ–‡ä»¶ï¼Œæœªæ¥æˆ‘ä»¬ä¸»è¦ç”¨çš„å°±æ˜¯mysql.h
å¦‚æœä½ ä¸‹è½½è¿‡ä½†æ˜¯æ‰¾ä¸åˆ°å¤´æ–‡ä»¶ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå°±å¯ä»¥çœ‹åˆ°äº†
install -y mysql-devel mysqlåº“åœ¨ç³»ç»Ÿé»˜è®¤å®‰è£…è·¯å¾„ä¸‹
å¼€å‘ç¯å¢ƒæˆ‘ä»¬æœ‰å·²ç»å‡†å¤‡å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ å…·ä½“çš„æ¥å£ã€‚ä¸è¿‡æˆ‘ä»¬é€šè¿‡ mysql_get_client_info() å‡½æ•°ï¼Œæ¥éªŒè¯æˆ‘ä»¬çš„å¼•å…¥æ˜¯å¦æˆåŠŸã€‚
#include &lt;iostream&gt; #include &lt;mysql/mysql.h&gt; using namespace std; int main() { //è·å–å½“å‰å®¢æˆ·ç«¯ç‰ˆæœ¬ä¿¡æ¯ cout&lt;&lt;&#34;mysql client Version: &#34;&lt;&lt;mysql_get_client_info()&lt;&lt;endl; return 0; } å¦‚æœç›´æ¥ç¼–è¯‘è‚¯å®šä¼šæŠ¥é”™ï¼Œè¯´çš„æ˜¯æœªå®šä¹‰çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªmysql_get_client_info()æ‰¾ä¸åˆ°ã€‚
ä¹‹å‰åŸºç¡€IOå°±è¯´è¿‡ï¼Œä½ è¦ä¿è¯è¿™ä¸ªå¤–æ¥åº“èƒ½è¢«æ­£ç¡®è¿æ¥ï¼Œgcc/g&#43;&#43;é»˜è®¤ä¼šé€‰æ‹©Cå’ŒC&#43;&#43;çš„åº“ï¼Œè™½ç„¶ä½ çš„mysqlåœ¨ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿä¹Ÿä¼šé»˜è®¤ä¼šå»/lib64è·¯å¾„ä¸‹å»æ‰¾ï¼Œ">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-02T18:27:30+08:00">
    <meta property="article:modified_time" content="2024-07-02T18:27:30+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="ç¼–ç¨‹å¤§å’–" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">ç¼–ç¨‹å¤§å’–</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ã€MySQLã€‘mysqlè®¿é—®</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>mysqlè®¿é—®</h4> 
 <ul><li><a href="#1MySQL__6" rel="nofollow">1.å¼•å…¥MySQL å®¢æˆ·ç«¯åº“</a></li><li><a href="#2CC__112" rel="nofollow">2.C/C++ è¿›è¡Œå¢åˆ æ”¹</a></li><li><a href="#3_526" rel="nofollow">3.æŸ¥è¯¢çš„å¤„ç†ç»†èŠ‚</a></li><li><a href="#4_1059" rel="nofollow">4.å›¾å½¢åŒ–ç•Œé¢è®¿é—®æ•°æ®åº“</a></li><li><ul><li><a href="#41MYSQL_Workbench_1069" rel="nofollow">4.1ä¸‹è½½MYSQL Workbench</a></li><li><a href="#42MYSQL_Workbench_1091" rel="nofollow">4.2MYSQL Workbenchè¿œç¨‹è¿æ¥æ•°æ®åº“</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p><img src="https://images2.imgbox.com/ac/53/TPlHfJ6V_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<blockquote> 
 <p><strong>ç‚¹èµ</strong>ğŸ‘ğŸ‘<strong>æ”¶è—</strong>ğŸŒŸğŸŒŸ<strong>å…³æ³¨</strong>ğŸ’–ğŸ’–<br> <font color="red"><strong>ä½ çš„æ”¯æŒæ˜¯å¯¹æˆ‘æœ€å¤§çš„é¼“åŠ±ï¼Œæˆ‘ä»¬ä¸€èµ·åŠªåŠ›å§!ğŸ˜ƒğŸ˜ƒ</strong></font></p> 
</blockquote> 
<h2><a id="1MySQL__6"></a>1.å¼•å…¥MySQL å®¢æˆ·ç«¯åº“</h2> 
<p>ä»å¼€å§‹åˆ°é€‰æ‹©æˆ‘ä»¬ç”¨çš„éƒ½æ˜¯å‘½ä»¤è¡Œå¼çš„mysqlè®¿é—®mysqldï¼Œå‘mysqldä¸‹è¾¾æˆ‘ä»¬çš„æŒ‡ä»¤ï¼Œå…¶å®åœ¨æ•°æ®åº“å±‚é¢ä¸Šï¼Œè¿æ¥æ•°æ®åº“çš„å®¢æˆ·ç«¯é™¤äº†ç°åœ¨å‘½ä»¤è¡Œå¼çš„å®¢æˆ·ç«¯ï¼Œè¿˜æœ‰å›¾å½¢åŒ–ç•Œé¢ã€ç½‘é¡µç‰ˆçš„ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬è¯­è¨€çº§åˆ«çš„åº“æˆ–è€…åŒ…å¸®æˆ‘ä»¬å»è®¿é—®æ•°æ®åº“ã€‚</p> 
<p>ä¸‹é¢æˆ‘ä»¬å°±ç”¨C/C++è®¿é—®æ•°æ®åº“ã€‚å…³äºè®¿é—®æ•°æ®åº“æˆ‘ä»¬è¦åšä¸¤ä¸ªå‡†å¤‡å·¥ä½œï¼Œä¸€æ˜¯åˆ›å»ºä¸€ä¸ªè¿œç«¯æˆ–è€…æœ¬åœ°è®¿é—®çš„è¯·æ±‚ä¹Ÿå°±æ˜¯åˆ›å»ºä¸€ä¸ªä¸“é—¨ç”¨æ¥è¿›è¡Œç”¨C/C++è®¿é—®å®¢æˆ·ç«¯çš„è´¦å·ã€‚</p> 
<pre><code class="prism language-powershell">reate user <span class="token string">'connector'</span>@<span class="token string">'localhost'</span> identified by <span class="token string">'xxx'</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/91/5a/LcFmhOZM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç„¶ååˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œèµ‹äºˆè¿™ä¸ªè´¦å·å¯¹æ•°æ®åº“ä¸­è¡¨çš„æ‰€æœ‰æƒé™ã€‚</p> 
<p><img src="https://images2.imgbox.com/88/03/DA3qchSP_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>äºŒæ˜¯å®‰è£…C/C++è¦èƒ½è®¿é—®çš„åº“ï¼Œè¿™ä¸ªåº“æœ‰ä¸¤ç§å‡†å¤‡ï¼Œç¬¬ä¸€ç§æ˜¯ä»<a href="https://dev.mysql.com/downloads/" rel="nofollow">å®˜ç½‘</a>ä¸‹è½½åº“ï¼Œ</p> 
<p>ä¸‹é¢è¿™ä¸ªæ˜¯ç”¨ä¸åŒè¯­è¨€è¿æ¥MYSQLï¼Œå®˜æ–¹æä¾›çš„åº“ã€‚<br> <img src="https://images2.imgbox.com/12/95/LIruEhWb_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> ä¸‹è½½æ¨èçš„8.0<br> <img src="https://images2.imgbox.com/dd/ea/YVA2MmiD_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æˆ‘ä»¬ç”¨çš„æ˜¯linuxï¼Œæ‰€ä»¥é€‰æ‹©linuxç³»ç»Ÿx86 64ä½</p> 
<p><img src="https://images2.imgbox.com/f8/c4/awshYoDb_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¸‹è½½å¥½ï¼Œä¸Šä¼ åˆ°linuxï¼Œç„¶åè§£å‹ä¸€ä¸‹ï¼Œmysql-connectoræ˜¯è§£å‹åé‡å‘½åçš„</p> 
<p><img src="https://images2.imgbox.com/3f/b2/hSoD6nV5_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>è¿™æ˜¯è§£å‹åçš„æ–‡ä»¶ï¼Œæœ€é‡è¦çš„å°±æ˜¯include å¤´æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€ä¸ªlib64 åº“</p> 
<p><img src="https://images2.imgbox.com/40/0a/iXJKEKX6_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æœªæ¥å¤´æ–‡ä»¶ç»™æˆ‘ä»¬æä¾›è¿æ¥mysqlçš„æ–¹æ³•ï¼Œåº“ æä¾›è¿æ¥mysqlçš„åº“å‡½æ•°</p> 
<p><img src="https://images2.imgbox.com/d8/54/YAAd0QB4_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®å¤´æ–‡ä»¶ï¼Œç›´æ¥è°ƒç”¨å¤´æ–‡ä»¶çš„çš„æ–¹æ³•ï¼Œåœ¨ç¼–è¯‘è¿æ¥çš„æ—¶å€™æŠŠåº“è¿å…¥è¿›æ¥ã€‚å¦‚æœå¿˜è®°æ€ä¹ˆå¼•å…¥ï¼Œåœ¨Linuxå“ªé‡ŒåŸºç¡€IOåŠ¨é™æ€åº“å°±æœ‰å¯¹åº”çš„æ–¹æ³•ï¼</p> 
<p>ä½†æ˜¯è¿™ç§æ–¹å¼ä¸æ¨èäº†ï¼ä¹‹é—´ä¸æ˜¯ä¸‹è½½mysqlï¼Œç”¨yumæºä¸‹è½½å—ã€‚yumæºå®ƒä¼šç»™æˆ‘ä»¬æ‰¾åˆ°åˆé€‚çš„æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯ï¼Œç”šè‡³æ˜¯å¼€å‘åŒ…ã€‚æ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨yumå“ªé‡Œå»æ‰¾è¿›è¡Œäº†ã€‚</p> 
<p>æ²¡ä¸‹è½½è¿‡mysql å¯ä»¥ä¸‹ä¸€ä¸‹å¦‚æœä½ å®‰è£…è¿‡yumå¯¹åº”msyqlæºçš„è¯ï¼Œå¦‚æœä¸ä¼šä¸‹è¯·ç§»æ­¥äº<br> <a href="https://blog.csdn.net/fight_p/article/details/138613422">ã€MySQLã€‘MySQLåœ¨ Linuxä¸‹ç¯å¢ƒå®‰è£…</a></p> 
<pre><code class="prism language-powershell">yum install <span class="token operator">-</span>y mysql-community-server  
</code></pre> 
<p>å¦‚æœä½ ä¸‹è½½è¿‡ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°è¿™é‡Œæœ‰å¯¹åº”çš„å¤´æ–‡ä»¶ï¼Œæœªæ¥æˆ‘ä»¬ä¸»è¦ç”¨çš„å°±æ˜¯mysql.h</p> 
<p><img src="https://images2.imgbox.com/4c/cc/NOJEzmie_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å¦‚æœä½ ä¸‹è½½è¿‡ä½†æ˜¯æ‰¾ä¸åˆ°å¤´æ–‡ä»¶ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå°±å¯ä»¥çœ‹åˆ°äº†</p> 
<pre><code class="prism language-powershell">install <span class="token operator">-</span>y mysql-devel
</code></pre> 
<p>mysqlåº“åœ¨ç³»ç»Ÿé»˜è®¤å®‰è£…è·¯å¾„ä¸‹</p> 
<p><img src="https://images2.imgbox.com/ce/db/9kzzyyVT_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å¼€å‘ç¯å¢ƒæˆ‘ä»¬æœ‰å·²ç»å‡†å¤‡å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å­¦ä¹ å…·ä½“çš„æ¥å£ã€‚ä¸è¿‡æˆ‘ä»¬é€šè¿‡ mysql_get_client_info() å‡½æ•°ï¼Œæ¥éªŒè¯æˆ‘ä»¬çš„å¼•å…¥æ˜¯å¦æˆåŠŸã€‚</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mysql/mysql.h&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//è·å–å½“å‰å®¢æˆ·ç«¯ç‰ˆæœ¬ä¿¡æ¯</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token string">"mysql client Version: "</span><span class="token operator">&lt;&lt;</span><span class="token function">mysql_get_client_info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>å¦‚æœç›´æ¥ç¼–è¯‘è‚¯å®šä¼šæŠ¥é”™ï¼Œè¯´çš„æ˜¯æœªå®šä¹‰çš„å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªmysql_get_client_info()æ‰¾ä¸åˆ°ã€‚<br> <img src="https://images2.imgbox.com/15/7c/d2m9zegZ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¹‹å‰åŸºç¡€IOå°±è¯´è¿‡ï¼Œä½ è¦ä¿è¯è¿™ä¸ªå¤–æ¥åº“èƒ½è¢«æ­£ç¡®è¿æ¥ï¼Œgcc/g++é»˜è®¤ä¼šé€‰æ‹©Cå’ŒC++çš„åº“ï¼Œè™½ç„¶ä½ çš„mysqlåœ¨ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿä¹Ÿä¼šé»˜è®¤ä¼šå»/lib64è·¯å¾„ä¸‹å»æ‰¾ï¼Œ</p> 
<p><img src="https://images2.imgbox.com/41/00/TasiwIFR_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä½†æ˜¯ç°åœ¨çš„é—®é¢˜æ˜¯æˆ‘æ€ä¹ˆçŸ¥é“æˆ‘éœ€è¦è¿æ¥é‚£ä¸ªåº“ï¼Œå°½ç®¡èƒ½æ‰¾åˆ°è¿™ä¸ªåº“ï¼Œä½†æ˜¯æˆ‘æ€ä¹ˆçŸ¥é“æˆ‘ä»¬è¯¥è¿é‚£ä¸ªåº“å‘¢ï¼Ÿæ‰€ä»¥æˆ‘ä»¬éœ€è¦éœ€è¦åœ¨ç¼–è¯‘çš„æ—¶å€™å°±æŒ‡æ˜éœ€è¦è¿é‚£ä¸ªåº“ï¼Œ</p> 
<pre><code class="prism language-cpp">g<span class="token operator">++</span> <span class="token operator">-</span>o mytest test<span class="token punctuation">.</span>cc <span class="token operator">-</span>L<span class="token operator">/</span>lib64<span class="token operator">/</span>mysql <span class="token operator">-</span>lmysqlclient
</code></pre> 
<p>ç„¶åå°±å¯ä»¥æ‰“å‡ºæ¥æ‰€æœ‰mysqlå®¢æˆ·ç«¯çš„ç‰ˆæœ¬ï¼Œè¯´æ˜è¿™ä¸ªåº“å°±è¢«é‡æ–°å¼•å…¥äº†</p> 
<p><img src="https://images2.imgbox.com/56/bf/A3FJSVnL_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä»¥å‰å¼•å…¥å¤–æ¥åº“ä¸æ˜¯è¿˜å¸¦ä¸Šé¢-Ié€‰é¡¹ï¼Œä»Šå¤©è¿™é‡Œå’‹æ²¡æœ‰å¸¦ã€‚è¿™æ˜¯å› ä¸ºg++é»˜è®¤ä¼šå»includeé‡Œå»æ‰¾ã€‚ç„¶åæ‹¿ç€ä»£ç é‡Œçš„</p> 
<p><img src="https://images2.imgbox.com/08/e4/Yyfj82AO_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å»æ‰¾ï¼Œæ‰€æœ‰ä¸ä¼šæŠ¥å¤´æ–‡ä»¶æ‰¾ä¸åˆ°çš„é—®é¢˜ã€‚å¦‚æœä½ éå¾—å¸¦-Iï¼Œå°±æŠŠå‰é¢å»æ‰</p> 
<p><img src="https://images2.imgbox.com/40/3d/G1Yv4yRl_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<pre><code class="prism language-cpp">g<span class="token operator">++</span> <span class="token operator">-</span>o mytest test<span class="token punctuation">.</span>cc <span class="token operator">-</span>I<span class="token operator">/</span>usr<span class="token operator">/</span>include<span class="token operator">/</span>mysql <span class="token operator">-</span>L<span class="token operator">/</span>lib64<span class="token operator">/</span>mysql <span class="token operator">-</span>lmysqlclient
</code></pre> 
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æˆ‘ä»¬é€šè¿‡è¿™ä¸ªåº“å®ƒå†…éƒ¨ç»™æˆ‘æä¾›å¯¹åº”çš„æ–¹æ³•æ¥è®©æˆ‘ä»¬è¿æ¥mysqldæœåŠ¡ç«¯ï¼Œç„¶åè¿›è¡Œè®¿é—®ã€‚</p> 
<h2><a id="2CC__112"></a>2.C/C++ è¿›è¡Œå¢åˆ æ”¹</h2> 
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆè®¤è¯†mysqlå¸¸ç”¨æ¥å£ã€‚<a href="https://dev.mysql.com/doc/c-api/5.7/en/c-api-function-reference.html" rel="nofollow">msyqlæ¥å£ä»‹ç»</a></p> 
<p><img src="https://images2.imgbox.com/9b/cf/aLd4W11M_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>è¿™é‡Œè¿˜æœ‰mysqlåº“ä¸ºäº†æ–¹ä¾¿æ“ä½œmysqlï¼Œç„¶åæå‰åœ¨åº“ä¸­ç»™æˆ‘åˆ›å»ºå¾ˆå¤šçš„æ•°æ®ç»“æ„</p> 
<p><img src="https://images2.imgbox.com/85/09/MbQV1hWu_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>msyqlçš„æ˜¯ä¸€å¥—ç½‘ç»œæœåŠ¡ï¼Œå°±æ³¨å®šäº†å®é™…åœ¨è¿›è¡Œmysqlæ“ä½œä¹‹å‰æ¯”å¦‚ä¸‹è¾¾sqlï¼Œä¸€å®šåœ¨ä¹‹å‰è¦è¿æ¥mysqlï¼Œè€Œåœ¨è¿æ¥mysqlä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜è¦å…ˆæ¥åˆ›å»ºä¸€ä¸‹mysqlåŸºç¡€æ•°æ®ç»“æ„ã€‚<strong>è¦ä½¿ç”¨åº“ï¼Œå¿…é¡»å…ˆè¿›è¡Œåˆå§‹åŒ–</strong>ã€‚mysql_init()å¸®æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªMYSQLå¯¹è±¡</p> 
<pre><code class="prism language-cpp">MYSQL <span class="token operator">*</span><span class="token function">mysql_init</span><span class="token punctuation">(</span>MYSQL <span class="token operator">*</span>mysql<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>æˆåŠŸè¿”å›MYSQLå¯¹è±¡ï¼Œå¤±è´¥è¿”å›nullptrï¼Œç”¨çš„æ—¶å€™å¿…é¡»è¦è°ƒç”¨mysql_close()å¯¹åº”çš„é“¾æ¥ã€‚</p> 
<p><img src="https://images2.imgbox.com/01/14/2d6i8MCX_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>MYSQLæ˜¯ C apiä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„å˜é‡ï¼ˆmysql_initçš„è¿”å›å€¼ï¼‰ï¼Œé‡Œé¢å†…å­˜éå¸¸ä¸°å¯Œï¼Œæœ‰port,dbname,charsetç­‰è¿æ¥åŸºæœ¬å‚æ•°ã€‚å®ƒä¹ŸåŒ…å«äº†ä¸€ä¸ªå« st_mysql_methodsçš„ç»“æ„ä½“å˜é‡ï¼Œè¯¥å˜é‡é‡Œé¢ä¿å­˜ç€å¾ˆå¤šå‡½æ•°æŒ‡é’ˆï¼Œè¿™äº›å‡½æ•°æŒ‡é’ˆå°†ä¼šåœ¨æ•°æ®åº“è¿æ¥æˆåŠŸä»¥åçš„å„ç§æ•°æ®æ“ä½œä¸­è¢«è°ƒç”¨ã€‚</p> 
<p>MYSQLå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç»“æ„ä½“é‡Œé¢åŒ…å«è¿æ¥mysqlç›¸å…³ä¿å­˜å¥½çš„ä¸€äº›å±æ€§ã€‚è¿™ç›¸å½“äºFILE*ï¼Œç”¨æ¥æ ‡è¯†mysqlå®¢æˆ·ç«¯ä¸€äº›èµ„æºï¼Œæˆ‘ä»¬æŠŠè¿™äº›ä¸œè¥¿å¯ä»¥ç§°ä¹‹ä¸ºå¥æŸ„ã€‚</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mysql/mysql.h&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL<span class="token operator">*</span> my<span class="token operator">=</span><span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æŠŠæ•°æ®åº“å¯¹åº”çš„MYSQLç»“æ„ä½“å¯¹è±¡åˆ›å»ºåˆå§‹åŒ–å¥½ï¼Œæœ€ç»ˆä¸ç”¨å®ƒäº†æŠŠå®ƒé‡Šæ”¾ã€‚å¯æ˜¯è¦è®¿é—®mysqlä¹‹å‰è¦å…ˆè¿æ¥æ•°æ®åº“ï¼Œè¿æ¥æ•°æ®åº“çš„å‡½æ•°ã€‚</p> 
<pre><code class="prism language-cpp">MYSQL <span class="token operator">*</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>MYSQL <span class="token operator">*</span>mysql<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>host<span class="token punctuation">,</span>
	<span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>user<span class="token punctuation">,</span>
	<span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>passwd<span class="token punctuation">,</span>
	<span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>db<span class="token punctuation">,</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> port<span class="token punctuation">,</span>
	<span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>unix_socket<span class="token punctuation">,</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">long</span> clientflag<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯åˆšæ‰åˆ›å»ºçš„MYSQLå¯¹è±¡ã€‚è¿æ¥æˆåŠŸåæŠŠè¿æ¥æˆåŠŸå¥—æ¥å­—ä¿¡æ¯ä¿å­˜åˆ°MYSQLå¯¹è±¡ä¸­ã€‚ç„¶åè¦è¿æ¥çš„mysqlçš„ä¸»æœºåœ¨å“ªé‡Œï¼Œç”¨æˆ·æ˜¯è°ï¼Œå¯†ç æ˜¯å¤šå°‘ï¼Œè¿æ¥é‚£ä¸ªæ•°æ®åº“ï¼Œæ•°æ®åº“çš„ç«¯å£å·æ˜¯å¤šå°‘ï¼Œå‰©ä¸‹è®¾ç½®ä¸ºnullptrï¼Œ0å°±å¯ä»¥äº†ã€‚</p> 
<p>æˆåŠŸæ—¶æŠŠæˆ‘ä»¬ä¼ å…¥çš„MYSQLç»™æˆ‘ä»¬è¿”å›ï¼Œå¤±è´¥è¿”å›nullptrã€‚</p> 
<p><img src="https://images2.imgbox.com/bd/30/otWVDQsf_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æœ€å¼€å§‹åˆ›å»ºçš„åªå…è®¸åœ¨æœ¬åœ°ä¸»æœºè¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å°±ç”¨ä¸Šäº†ã€‚</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;mysql/mysql.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">const</span> string host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">;</span> <span class="token comment">//host="127.0.0.1" ä¹Ÿæ˜¯å¯ä»¥çš„</span>
<span class="token keyword">const</span> string user<span class="token operator">=</span><span class="token string">"connector"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> string passwd<span class="token operator">=</span><span class="token string">"xxx"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> string db<span class="token operator">=</span><span class="token string">"conn"</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">int</span> port<span class="token operator">=</span>xxx<span class="token punctuation">;</span> <span class="token comment">//è‡ªå·±çš„ç«¯å£å·ä¸è¦æš´éœ²</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL<span class="token operator">*</span> my<span class="token operator">=</span><span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span>host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>port<span class="token punctuation">,</span><span class="token keyword">nullptr</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	cout<span class="token operator">&lt;&lt;</span><span class="token string">"connect success"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

    <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è‡ªæ­¤æˆ‘ä»¬å®Œæˆäº†è¿æ¥mysqlçš„ç¬¬å·¥ä½œ</p> 
<ol><li><strong>åˆå§‹åŒ–mysqlï¼Œæ„å»ºmysqlå¯¹è±¡ï¼Œå¾—åˆ°mysqlè®¿é—®å¥æŸ„</strong></li><li><strong>è¿›è¡Œmysql çš„connectè¿æ¥</strong></li><li><strong>ç”¨å®Œmysqlä¹‹åclose</strong></li></ol> 
<p>ç„¶åå°±å¯ä»¥<strong>å¯¹mysqlä¸‹è¾¾sqlæŒ‡ä»¤</strong>äº†ã€‚è¿™ä¸ªä¸‹è¾¾sqlæŒ‡ä»¤çš„å‡½æ•°æ˜¯mysql_queryå¯¹æ•°æ®åº“ä¸‹è¾¾æŒ‡ä»¤ã€‚ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯åˆšæ‰çš„MYSQLå¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¸‹è¾¾çš„sqlæŒ‡ä»¤ã€‚ä»¥å‰æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œå†™å•sqlåé¢ä¼šå¸¦ï¼›ï¼Œä½†æ˜¯åœ¨è¿™é‡Œå¹¶ä¸éœ€è¦å¸¦ï¼›or \gï¼ŒæˆåŠŸæ—¶è¿”å›0ï¼Œå¤±è´¥æ—¶è¿”å›é0ã€‚</p> 
<p><img src="https://images2.imgbox.com/3a/01/Xp6Jlh0d_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åœ¨æ­¤ä¹‹å‰å¯ä»¥è‡ªå·±å…ˆåˆ›å»ºä¸€ä¸ªè¡¨</p> 
<pre><code class="prism language-powershell">create table user<span class="token punctuation">(</span>
     id bigint primary key auto_increment<span class="token punctuation">,</span>
     name varchar<span class="token punctuation">(</span>32<span class="token punctuation">)</span> not null<span class="token punctuation">,</span>
     age int not null<span class="token punctuation">,</span>
     telphone varchar<span class="token punctuation">(</span>32<span class="token punctuation">)</span> unique
     <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ä¹‹å‰æˆ‘ä»¬å­¦è¿‡ä¸€ä¸ªsqlæŒ‡ä»¤ï¼ŒæŸ¥çœ‹æ­£åœ¨è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·</p> 
<pre><code class="prism language-powershell">show processlist<span class="token punctuation">;</span>
</code></pre> 
<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬C/C++åº“ç¡®å®è¿æ¥åˆ°æ•°æ®åº“äº†</p> 
<p><img src="https://images2.imgbox.com/ff/4a/o7TTEg2b_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// cout&lt;&lt;"connect success"&lt;&lt;endl;</span>

    string sql<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">" mysql&gt; "</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">getline</span><span class="token punctuation">(</span>cin<span class="token punctuation">,</span> sql<span class="token punctuation">)</span> <span class="token operator">||</span> sql <span class="token operator">==</span> <span class="token string">"quit"</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Bye"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            cout <span class="token operator">&lt;&lt;</span> sql <span class="token operator">&lt;&lt;</span> <span class="token string">" success"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{<!-- --></span>
            cerr <span class="token operator">&lt;&lt;</span> sql <span class="token operator">&lt;&lt;</span> <span class="token string">" error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿™é‡Œåå­—æˆ‘ä»¬å…ˆè¾“å…¥è‹±æ–‡ï¼Œå…·ä½“åŸå› ç­‰ä¼šè¯´ã€‚ä¸‹è¾¾çš„è¿™ä¸ªsqlæ‰§è¡Œå¯å¸¦ï¼›æˆ–è€…ä¸å¸¦ï¼›ã€‚ç„¶åçœ‹åˆ°æˆ‘ä»¬ç¡®å®æŠŠä¿¡æ¯æ’å…¥åˆ°æ•°æ®åº“äº†ã€‚æˆ‘ä»¬å…¶å®ä¹Ÿå¯ä»¥è‡ªå·±æä¸€ä¸ªmysqlçš„å®¢æˆ·ç«¯ã€‚ä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬ä¹Ÿä¸ä¼šè¿™æ ·åšï¼Œåˆ«äººè‡ªå·±æœ‰å®¢æˆ·ç«¯ã€‚æˆ‘ä»¬ç›´æ¥å‘æ•°æ®åº“ä¸‹è¾¾sqlæŒ‡ä»¤å°±è¡Œäº†ã€‚</p> 
<p><img src="https://images2.imgbox.com/3f/95/Sv6KUBFs_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<blockquote> 
 <p><strong>æ›´æ–°</strong></p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    string sql<span class="token operator">=</span><span class="token string">"update user set name='jim' where id=2"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n<span class="token operator">=</span><span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span>sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" success"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">else</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" error"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

    <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æ‰§è¡Œä¸€ä¸‹ï¼Œçœ‹åˆ°id=2çš„åå­—ç¡®å®æ›´æ–°ä¸ºjimäº†ã€‚</p> 
<p><img src="https://images2.imgbox.com/69/61/yc8Q2yBR_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ‰€ä»¥æœªæ¥æˆ‘ä»¬æ‰€å†™çš„ä»»ä½•çš„å…³äºæ•°æ®åº“æ–¹é¢çš„ç¨‹åºï¼Œä½ æƒ³ä½¿ç”¨æ•°æ®åº“ï¼Œä½ å¯ä»¥æå‰å»ºå¥½æ•°æ®åº“è´¦å·ç„¶åèµ‹æƒï¼Œå¹¶ä¸”å»ºè¡¨ã€‚ç„¶åç¼–å†™å¯¹åº”C/C++ä»£ç ã€‚ç„¶åå°±å¯ä»¥ä¸ºä½ çš„ä¸Šå±‚è¿›è¡Œæ•°æ®å±‚é¢ä¸Šçš„æ”¯æ’‘äº†ã€‚</p> 
<blockquote> 
 <p><strong>æ’å…¥</strong></p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//string sql="update user set name='jim' where id=2";</span>
    string sql<span class="token operator">=</span><span class="token string">"insert into user (name,age,telphone) values ('peter',19,19187654321)"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n<span class="token operator">=</span><span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span>sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" success"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">else</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" error"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

    <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cd/c4/HmaW6Fpi_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<blockquote> 
 <p><strong>åˆ é™¤</strong></p> 
</blockquote> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//string sql="update user set name='jim' where id=2";</span>
    <span class="token comment">//string sql="insert into user (name,age,telphone) values ('peter',19,19187654321)";</span>
    string sql<span class="token operator">=</span><span class="token string">"delete from user where id=1"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n<span class="token operator">=</span><span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span>sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" success"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">else</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" error"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

    <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8b/8b/IaO9Vvg9_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å•sqlæœ¬èº«å°±æ˜¯äº‹åŠ¡ï¼Œmysqlé»˜è®¤äº‹åŠ¡æäº¤æ˜¯è‡ªåŠ¨çš„ï¼Œæ‰€ä»¥ä»Šå¤©ä½ å¯ä»¥ç”¨ä¸€ä¸ªè¿æ¥è®¿é—®æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºåä¸ªè¿æ¥è®¿é—®æ•°æ®åº“ï¼Œä½ å¯ä»¥ç”¨å‘½ä»¤è¡Œæ–¹å¼è®¿é—®æ•°æ®åº“ï¼Œä¹Ÿå¯ä»¥ç”¨C/C++è®¿é—®æ•°æ®åº“ã€‚æ‰€ä»¥æ•°æ®åº“å¯ä»¥å­˜åœ¨å¤šä¸ªè®¿é—®ï¼Œå› ä¸ºæœ‰äº‹åŠ¡ï¼Œäº‹åŠ¡æœ‰ACIDèƒ½ä¿è¯åŸå­æ€§ç­‰ç­‰ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨åº”ç”¨å±‚å°±ä¸ç”¨æ‹…å¿ƒä¸šåŠ¡ä»£ç æ‰§è¡Œæ—¶å‡ºç°é—®é¢˜ã€‚</p> 
<p>mysql_queryè¿™ä¸ªå‡½æ•°ç°åœ¨å¯ä»¥å¢åˆ æ”¹ï¼Œé‚£æŸ¥è¡Œä¸è¡Œå‘¢ï¼Ÿ</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//string sql="update user set name='jim' where id=2";</span>
    <span class="token comment">//string sql="insert into user (name,age,telphone) values ('peter',19,19187654321)";</span>
    <span class="token comment">//string sql="delete from user where id=1";</span>
    string sql<span class="token operator">=</span><span class="token string">"select * from user"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n<span class="token operator">=</span><span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span>sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" success"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">else</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" error"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

    <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>åˆ«äººå‘Šè¯‰æˆ‘æˆåŠŸäº†å•Šï¼Œç„¶åå‘¢ï¼Ÿ</p> 
<p><img src="https://images2.imgbox.com/f0/e5/5svSME3S_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åœ¨æˆ‘ä»¬æ•°æ®åº“è¯­å¥ä¸­ï¼Œå¢åˆ æ”¹æ˜¯æœ€ç®€å•çš„ï¼Œå› ä¸ºå¢åˆ æ”¹åªéœ€è¦ä¿è¯æˆåŠŸå³å¯ï¼Œé‚£ä¹ˆå¢åˆ æ”¹æ“ä½œä¸€å®šèƒ½å®Œæˆã€‚è€Œselectæ˜¯æœ€ä¸å¥½å¤„ç†çš„ï¼Œå› ä¸ºå½“æˆåŠŸæ‰§è¡Œselectè¯­å¥ï¼Œåªæ˜¯æ‰§è¡Œå®Œsqlç¬¬ä¸€æ­¥ï¼Œé‚£selectåçš„æ•°æ®åœ¨é‚£å‘¢ï¼Ÿä½ æ˜¯ä¸æ˜¯è¦æŠŠæ•°æ®ç»™æ˜¾ç¤ºå¤„ç†æˆ–è€…è¯´è®©ç”¨æˆ·è·å–åˆ°ï¼Œæ‰€ä»¥è¿˜éœ€è¦åœ¨åšåé¢çš„å·¥ä½œã€‚æ‰€ä»¥selectè¿˜æœ‰ååºè·å–æ•°æ®åŒ…æ‹¬æŠŠæ•°æ®åœ¨äº¤ç»™å®ƒçš„è°ƒç”¨å±‚ã€‚è€Œä¸åƒå¢åˆ æ”¹æ‰§è¡Œå®Œå°±å®Œäº†ã€‚</p> 
<p>è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œåˆšåˆšåœ¨æ’å…¥çš„æ—¶å€™ï¼Œnameæ’å…¥éƒ½æ˜¯è‹±æ–‡ï¼Œé‚£æˆ‘ä»¬æ’å…¥ä¸­æ–‡ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//string sql="update user set name='jim' where id=2";</span>
    <span class="token comment">//string sql="insert into user (name,age,telphone) values ('peter',19,19187654321)";</span>
    string sql<span class="token operator">=</span><span class="token string">"insert into user (name,age,telphone) values ('å¼ ä¸‰',18,11187654321)"</span><span class="token punctuation">;</span>
    <span class="token comment">//string sql="delete from user where id=1";</span>
    <span class="token comment">//string sql="select * from user";</span>
    <span class="token keyword">int</span> n<span class="token operator">=</span><span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span>sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" success"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">else</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" error"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

    <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æˆ‘ä»¬<strong>æ’å…¥ä¸­æ–‡æ—¶ä¹±ç äº†</strong>ï¼</p> 
<p><img src="https://images2.imgbox.com/1e/5d/qrX93ZDe_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¹±ç é—®é¢˜æ€ä¹ˆè§£å†³ï¼Ÿæˆ‘ä»¬çš„æ•°æ®åº“ç¼–ç æ ¼å¼éƒ½é…è¿‡æ˜¯utf8çš„ã€‚å‡ºç°ä¹±ç é—®é¢˜ï¼Œä¸€å®šæ˜¯å› ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¯¹ç¼–ç é—®é¢˜æ²¡æœ‰å½¢æˆä¸€è‡´ã€‚æ¯”å¦‚è¯´æœåŠ¡ç«¯ç”¨çš„æ˜¯utf8ï¼Œå®¢æˆ·ç«¯ç”¨çš„æ˜¯latin1ã€‚å› ä¸ºæˆ‘ä»¬æ•°æ®åº“ç¼–ç éƒ½æ˜¯utf8çš„ï¼Œæ‰€ä»¥ä¸€å®šæ˜¯å®¢æˆ·ç«¯å‡ºç°äº†é—®é¢˜ã€‚</p> 
<p><strong>å»ºç«‹å¥½é“¾æ¥ä¹‹åï¼Œè·å–è‹±æ–‡æ²¡æœ‰é—®é¢˜ï¼Œå¦‚æœè·å–ä¸­æ–‡æ˜¯ä¹±ç ï¼šè®¾ç½®é“¾æ¥çš„é»˜è®¤å­—ç¬¦é›†æ˜¯utf8ï¼ŒåŸå§‹é»˜è®¤æ˜¯latin1</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// è®¾ç½®ç¼–ç æ ¼å¼</span>
    <span class="token function">mysql_set_character_set</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//string sql="update user set name='jim' where id=2";</span>
    <span class="token comment">//string sql="insert into user (name,age,telphone) values ('peter',19,19187654321)";</span>
    string sql<span class="token operator">=</span><span class="token string">"insert into user (name,age,telphone) values ('æå››',18,12187654321)"</span><span class="token punctuation">;</span>
    <span class="token comment">//string sql="delete from user where id=1";</span>
    <span class="token comment">//string sql="select * from user";</span>
    <span class="token keyword">int</span> n<span class="token operator">=</span><span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span>sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" success"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">else</span> cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" error"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

    <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è®¾ç½®å¥½ç¼–ç ï¼Œåœ¨æ’å…¥ä¸­æ–‡å°±æ²¡é—®é¢˜äº†ã€‚</p> 
<p><img src="https://images2.imgbox.com/fa/96/iWMLwPsc_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>è‡ªæ­¤æˆ‘ä»¬å°±å·²ç»èƒ½å¤Ÿè¿›è¡Œmysqlå¯¹è±¡åˆå§‹åŒ–ï¼Œmysqlçš„è¿æ¥ï¼Œmysqlçš„å…³é—­ï¼Œä»¥åŠé€šè¿‡mysql_queryå‘æ•°æ®åº“ä¸‹è¾¾å¯¹åº”çš„æŒ‡ä»¤äº†ã€‚ä¸‹é¢æˆ‘ä»¬å°±è§£å†³æ‹¿åˆ°selectçš„æ•°æ®é—®é¢˜ã€‚</p> 
<h2><a id="3_526"></a>3.æŸ¥è¯¢çš„å¤„ç†ç»†èŠ‚</h2> 
<p>æŸ¥sqlæœ¬èº«èƒ½å¤Ÿè¢«æ­£ç¡®æ‰§è¡Œï¼Œä½†æ˜¯æ‰§è¡Œä¹‹åæ€ä¹ˆæŠŠæŸ¥çš„æ•°æ®äº¤ç»™ä¸Šå±‚è¿”å›ç»™å®¢æˆ·æˆ–è€…æŠŠå®ƒçš„æ•°æ®æ˜¾ç¤ºå¤„ç†å‘¢ï¼Ÿé‚£åœ¨æ‰§è¡Œselectçš„æ—¶å€™è¦æŠŠselectçš„ç»“æœé€šè¿‡mysql_queryæŸ¥å®Œä¹‹åæŠŠç»“æœåº”è¯¥è®©æˆ‘ä»¬æ€ä¹ˆè·å–åˆ°å‘¢ï¼Ÿ<strong>å®é™…ä¸Šmysql_queryåœ¨æ‰§è¡Œselectçš„æ—¶å€™ä¼šæŠŠç»“æœä¿å­˜åˆ°MYSQLè¿™ä¸ªå¥æŸ„ä¸­</strong>ã€‚è¿™ä¸ªå¥æŸ„æ˜¯ä¸€ä¸ªç»“æ„ä½“å®ƒæœ¬èº«é‡Œé¢ä¼šåŒ…å«å¯¹åº”çš„ä¿å­˜æ•°æ®çš„ç¼“å­˜åŒºåŒºåŸŸã€‚ä½†æ˜¯è¿™éƒ¨åˆ†æ•°æ®ä¾æ—§è¦è¢«æˆ‘ä»¬æå–å‡ºæ¥çš„ã€‚æˆ‘ä»¬<strong>é€šè¿‡mysql_store_resultè¿™ä¸ªå‡½æ•°æ¥å°†ç»“æœè¿›è¡Œè½¬å‚¨</strong>ã€‚è¿™ä¸ªå‡½æ•°æå–å¹¶ä¸”è½¬å‚¨åˆ°ç»“æœé›†ä¸­ã€‚ä¼šæŠŠç»“æœæŒ‰ç…§æ¡ç›®æ”¾ç½®å¥½ã€‚</p> 
<p><img src="https://images2.imgbox.com/da/05/WBWR4aB7_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ˜¯ä»MYSQLè¿™ä¸ªå¥æŸ„ä¸­æŠŠç»“æœè½¬å‚¨åˆ°MYSQL_RESè¿™ä¸ªç»“æ„ä¸­ã€‚</p> 
<p><img src="https://images2.imgbox.com/34/20/5NWmyd7N_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æŠŠæŸ¥è¯¢ç»“æœæŒ‰ç…§è¡Œä¸ºå•ä½ï¼Œå…¨éƒ¨éƒ½æ”¾è¿›ç»“æœé›†ä¸­ã€‚</p> 
<p><img src="https://images2.imgbox.com/0f/4d/4T1wQM4U_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æˆåŠŸè¿”å›MYSQL_RESå¯¹è±¡ï¼Œå¤±è´¥è¿”å›nullptrã€‚ä¹Ÿå¯ä»¥é‡‡ç”¨mysql_errnoå’Œmysql_erroræ¥è¿›è¡Œåˆ¤æ–­å‡ºé”™åŸå› ã€‚</p> 
<p><img src="https://images2.imgbox.com/f0/ff/rIoDtKx0_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¸‹é¢æˆ‘ä»¬çœ‹çœ‹æ€ä¹ˆç”¨è¿™ä¸ªå‡½æ•°</p> 
<p>é¦–å…ˆå…ˆå°†ç»“æœè½¬å‚¨åˆ°MYSQL_RESç»“æ„ä½“ä¸­ã€‚</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// cout&lt;&lt;"connect success"&lt;&lt;endl;</span>

    <span class="token comment">// è®¾ç½®ç¼–ç æ ¼å¼</span>
    <span class="token function">mysql_set_character_set</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    string sql<span class="token operator">=</span><span class="token string">"select * from user"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n<span class="token operator">=</span><span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span>sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" success"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" error"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

	<span class="token comment">//è½¬å‚¨</span>
    MYSQL_RES<span class="token operator">*</span> res<span class="token operator">=</span><span class="token function">mysql_store_result</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr<span class="token operator">&lt;&lt;</span><span class="token string">"mysql_store_result error"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>é‚£MYSQL_RESè¿™ä¸ªç»“æ„ä½“åº”è¯¥å¦‚ä½•ç†è§£å‘¢ï¼Ÿ</p> 
<p>é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“æˆ‘ä»¬æŸ¥å‡ºæ¥çš„æ˜¯ä¸€ç§è¡¨ç»“æ„ï¼Œè¡¨ç»“æ„ä¸­è¡Œåˆ—å…³ç³»æ˜¯æˆ‘ä»¬æ‰“å°å‡ºæ¥çš„ï¼Œå°¤å…¶æ˜¯è¿™äº›åˆ†å‰²ç¬¦ï¼Œè¿™äº›ä¸œè¥¿æˆ‘ä»¬è‡ªå·±æ‰“å°å‡ºæ¥çš„ï¼Œå¹¶ä¸æ˜¯åœ¨mysqlåœ¨è¡¨ä¸­çœŸå®å­˜åœ¨çš„ã€‚<br> <img src="https://images2.imgbox.com/3b/3a/RpzWZ20D_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åœ¨mysqlè¡¨ä¸­å…¶å®å­˜åœ¨ä¸¤ç±»ä¿¡æ¯ï¼Œä¸€ç±»æ˜¯å­˜å‚¨è¡¨ç»“æ„ä¸­çš„åˆ—å±æ€§æˆ–è€…åˆ—åç§°ï¼Œè¿˜æœ‰ä¸€ç±»æ˜¯å­˜å‚¨è¡¨ä¸­çš„å†…å®¹ã€‚</p> 
<p><img src="https://images2.imgbox.com/02/df/MtZjkMwT_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> æˆ‘ä»¬å…ˆçœ‹å†…å®¹ï¼Œè¿™äº›å†…å®¹ä»¥ä¸€å®šæ ¼å¼å…ˆæ”¾åˆ°MYSQLç»“æ„ä½“å¯¹è±¡å†…éƒ¨ï¼Œç„¶ååœ¨è½¬å‚¨åˆ°MYSQL_RESç»“æ„ä¸­ã€‚è½¬å‚¨æ˜¯ä¸ºäº†æ›´å¥½çš„ä¾¿äºåšäºŒæ¬¡å¤„ç†ã€‚</p> 
<p>åœ¨è¡¨ä¸­æŸ¥å‡ºæ¥çš„æ•°æ®ï¼Œå°±ä¸€å®šæ˜¯åœ¨MYSQLå†…éƒ¨åœ¨å†…å­˜ä¸­ä¿å­˜è¿™éƒ¨åˆ†å†…å®¹çš„ã€‚<strong>mysqlå°†æ‰€æœ‰æ•°æ®ï¼Œè¯»å–å‡ºæ¥çš„æ—¶å€™ï¼Œå…¨éƒ¨éƒ½å½“ä½œå­—ç¬¦ä¸²ã€‚</strong> è™½ç„¶ä»¥å‰å®ƒä»¬ä»€ä¹ˆintï¼Œcharç­‰ï¼Œä½†æ˜¯ä¸€æ—¦æŠŠæ•°æ®è¯»åˆ°è‡ªå®šä¹‰ç¼“å­˜åŒºä¸­çš„æ—¶å€™ï¼Œé‚£ä¹ˆå®ƒä¸€å®šæ˜¯æŠŠæ‰€æœ‰æ•°æ®éƒ½å½“ä½œå­—ç¬¦ä¸²æ¥çœ‹å¾…ã€‚ä»¥å‰çº¦æŸç±»å‹åªæ˜¯åœ¨æ’å…¥çš„æ—¶å€™è¦å¤„ç†ï¼Œè¯»å–å‡ºæ¥å½“å½“ä½œå­—ç¬¦ä¸²å¤„ç†ã€‚</p> 
<p>ç„¶åMYSQL_RESè¦æŠŠç»“æœå½’ç½®ä¸€ä¸‹ï¼Œæˆ‘å¯ä»¥æŠŠMYSQL_RESæƒ³è±¡æˆä¸€ä¸ªå­˜ç€char**çš„æŒ‡é’ˆæ•°ç»„ã€‚æ•°ç»„å¤§å°ä»£è¡¨ç­›é€‰å‡ºæ¥çš„æ•°æ®è®°å½•æœ‰å¤šå°‘è¡Œã€‚ä¸€æ¡è®°å½•é‡Œé¢æœ‰å¤šåˆ—ï¼Œæ¯ä¸€åˆ—éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</p> 
<p><img src="https://images2.imgbox.com/b7/77/0jLOku5N_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç„¶åè¿™ä¸ªæ•°ç»„ä¸­æ¯ä¸€ä¸ªchar** æŒ‡é’ˆéƒ½æŒ‡å‘ä¸€ä¸ªå­˜è®¿char<em>ç±»å‹çš„æŒ‡é’ˆæ•°ç»„ï¼ŒæŒ‡å‘çš„æ˜¯è¿™ä¸ªæ•°ç»„ä¸­é¦–ä¸ªå…ƒç´ çš„åœ°å€ã€‚char** çš„æŒ‡é’ˆæ•°ç»„å¤§å°ä»£è¡¨çš„æ˜¯æ•°æ®è®°å½•æœ‰å¤šå°‘è¡Œï¼Œè€Œæ¯ä¸€è¡Œchar</em> çš„æŒ‡é’ˆæ•°ç»„é‡Œçš„char* ä¾æ¬¡æŒ‡å‘ä¸€æ¡è®°å½•çš„æ¯ä¸€åˆ—ã€‚</p> 
<p><img src="https://images2.imgbox.com/7c/ad/uaXdOQFF_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ‰€ä»¥æœªæ¥æƒ³æå–ä¸€æ•´è¡Œï¼Œæƒ³æå–ä¸€æ•´è¡Œä¸­çš„åˆ—ï¼Œæˆ‘å¯ä»¥æŒ‰ç…§è¡Œåˆ—å»æå–ï¼</p> 
<p>æˆ‘ä»¬å¯ä»¥æŠŠMYSQL_RESå½“ä½œä¸€ä¸ªchar**xx[]æ•°ç»„å»ç†è§£ï¼Œæˆ–è€…å½“ä½œä¸€ä¸ªchar*[][]æ•°ç»„å»ç†è§£éƒ½å¯ä»¥ï¼Œæ€ä¹ˆæ–¹ä¾¿æ€ä¹ˆæ¥ã€‚çºµå‘å»éå†æ¯ä¸€è¡Œï¼Œæ¨ªå‘å»éå†ä¸€è¡Œä¸­æ¯ä¸€åˆ—ã€‚å°±å¯ä»¥æ‰¾æ‰€æœ‰æŸ¥è¯¢ç»“æœéƒ½æ‰¾åˆ°ã€‚</p> 
<p><img src="https://images2.imgbox.com/d4/68/YUkl3dxC_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æœªæ¥MYSQL_RESå°±ä»¥è¿™æ ·çš„æ–¹å¼æŠŠæŸ¥è¯¢çš„ç»“æœä¿å­˜èµ·æ¥ã€‚</p> 
<p>é‚£ç»“æœæœ€ç»ˆæ€ä¹ˆéå†å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“è¿™ä¸ªè½¬å‚¨çš„ç»“æœæœ‰å¤šå°‘è¡Œï¼Œæœ‰å¤šå°‘åˆ—ï¼ç„¶åæŒ‰ç…§è¡Œåˆ—å»éå†ã€‚</p> 
<p><strong>è·å–ç»“æœè¡Œæ•°mysql_num_rows</strong><br> å‚æ•°æ˜¯MYSQL_RESï¼Œä»MYSQL_RESç»“æœé›†ä¸­æ‹¿ç»“æœæœ‰å¤šå°‘è¡Œã€‚</p> 
<pre><code class="prism language-cpp">my_ulonglong <span class="token function">mysql_num_rows</span><span class="token punctuation">(</span>MYSQL_RES <span class="token operator">*</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>è·å–ç»“æœåˆ—æ•°mysql_num_fields</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">unsigned</span> <span class="token keyword">int</span> <span class="token function">mysql_num_fields</span><span class="token punctuation">(</span>MYSQL_RES <span class="token operator">*</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// cout&lt;&lt;"connect success"&lt;&lt;endl;</span>

    <span class="token comment">// è®¾ç½®ç¼–ç æ ¼å¼</span>
    <span class="token function">mysql_set_character_set</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    string sql<span class="token operator">=</span><span class="token string">"select * from user"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n<span class="token operator">=</span><span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span>sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" success"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span>sql<span class="token operator">&lt;&lt;</span><span class="token string">" error"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 

    MYSQL_RES<span class="token operator">*</span> res<span class="token operator">=</span><span class="token function">mysql_store_result</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr<span class="token operator">&lt;&lt;</span><span class="token string">"mysql_store_result error"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    my_ulonglong row<span class="token operator">=</span><span class="token function">mysql_num_rows</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    my_ulonglong col<span class="token operator">=</span><span class="token function">mysql_num_fields</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¡Œ: "</span> <span class="token operator">&lt;&lt;</span> rows <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"åˆ—: "</span> <span class="token operator">&lt;&lt;</span> cols <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
    <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ç›®å‰è¿™ä¸ªè¡¨ä¸å°±æ˜¯3è¡Œ4åˆ—å—</p> 
<p><img src="https://images2.imgbox.com/18/c7/i0EzBC4e_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>é‚£ç»“æœæ€ä¹ˆæ‹¿ï¼Ÿéå†æ¯ä¸€è¡Œæ¯ä¸€åˆ—ã€‚ä¸€è¡Œä¸€åˆ—çš„æŠŠç»“æœéƒ½æ‹¿åˆ°ã€‚<br> mysqlä¸ºäº†å¾ˆå¥½çš„æ”¯æŒéå†ï¼Œå®ƒå†…éƒ¨è¿˜æä¾›ä¸€ç§æ•°æ®ç»“æ„å«åšMYSQL_ROWï¼Œæ¯æ¬¡æ‹¿åˆ°ä¸€è¡Œã€‚</p> 
<p><strong>è·å–ç»“æœå†…å®¹mysql_fetch_row</strong></p> 
<pre><code class="prism language-cpp">MYSQL_ROW <span class="token function">mysql_fetch_row</span><span class="token punctuation">(</span>MYSQL_RES <span class="token operator">*</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>è¿™ä¸ªå‡½æ•°å°±å‘ä»¥å‰å­¦è¿‡çš„è¿­ä»£å™¨ï¼Œå½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨mysql_fetch_rowå®ƒå†…éƒ¨ä¼šä¸ºæˆ‘ä»¬ç»´æŠ¤å½“å‰éå†çš„ç¬¬ä¸€è¡Œï¼ŒæŠŠç¬¬ä¸€è¡Œçš„ç»“æœé›†ä»¥MYSQL_ROWå½¢å¼è¿”å›ã€‚å½“éå†ç¬¬äºŒè¡Œçš„æ—¶å€™ï¼Œåªéœ€è¦åœ¨è°ƒç”¨ä¸€æ¬¡mysql_fetch_rowï¼Œä¸ç”¨è‡ªå·±ç»´æŠ¤è¡Œä¸‹æ ‡ï¼Œå®ƒä¼šè‡ªåŠ¨æŒ‡å‘ä¸‹ä¸€è¡Œã€‚å°±å¦‚è¿­ä»£å™¨ä¸€æ ·ï¼Œåªéœ€è¦æŒ‰ç…§ç‰¹å®šçš„æ¬¡æ•°è¿›è¡Œéå†è°ƒç”¨å°±ä¼šä¾æ¬¡æŠŠå…ƒç´ éå†ä¸€éï¼Œç‰¹åˆ«åƒè¿­ä»£å™¨ã€‚</p> 
<p>å¯ä»¥çœ‹åˆ°MYSQL_ROWå…¶å®å°±æ˜¯ä¸€ä¸ªchar<strong>æŒ‡é’ˆï¼Œå› ä¸ºåªæœ‰char</strong>æ‰èƒ½æŒ‡å‘ç¬¬ä¸€è¡Œç¬¬äºŒè¡Œç­‰ç­‰ã€‚<br> <img src="https://images2.imgbox.com/a1/12/kAS2Toe4_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// cout&lt;&lt;"connect success"&lt;&lt;endl;</span>

    <span class="token comment">// è®¾ç½®ç¼–ç æ ¼å¼</span>
    <span class="token function">mysql_set_character_set</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    string sql <span class="token operator">=</span> <span class="token string">"select * from user"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> sql <span class="token operator">&lt;&lt;</span> <span class="token string">" success"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> sql <span class="token operator">&lt;&lt;</span> <span class="token string">" error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    MYSQL_RES <span class="token operator">*</span>res <span class="token operator">=</span> <span class="token function">mysql_store_result</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"mysql_store_result error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ä¸‹é¢éƒ½æ˜¯å’Œç»“æœé›†æœ‰å…³çš„, MYSQL_RES</span>
    my_ulonglong rows <span class="token operator">=</span> <span class="token function">mysql_num_rows</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    my_ulonglong cols <span class="token operator">=</span> <span class="token function">mysql_num_fields</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¡Œ: "</span> <span class="token operator">&lt;&lt;</span> rows <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"åˆ—: "</span> <span class="token operator">&lt;&lt;</span> cols <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token comment">//æ‹¿ç»“æœ  </span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>rows<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        MYSQL_ROW line<span class="token operator">=</span><span class="token function">mysql_fetch_row</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>cols<span class="token punctuation">;</span><span class="token operator">++</span>j<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span>line<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">"\t"</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>
        cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

        <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
        <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥æŠŠselectçš„ç»“æœéƒ½æ‹¿åˆ°äº†ï¼</p> 
<p><img src="https://images2.imgbox.com/21/af/EKXyzK2r_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åˆšæ‰è¯´äº†åœ¨è·å–msyqlè¡¨å†…å®¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬é™¤äº†è·å–è¡¨æ ¼ä¸­å†…å®¹ï¼Œå®ƒçš„åˆ—å±æ€§æˆ‘ä»¬ä¹Ÿæƒ³è·å–ã€‚æƒ³çŸ¥é“å®ƒæ˜¯é‚£ä¸€åˆ—çš„ï¼Œæˆ–è€…æƒ³çŸ¥é“å½“å‰æŸ¥çš„æ˜¯é‚£å¼ è¡¨ï¼Œé‚£ä¸ªæ•°æ®åº“ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬æœ‰å¦ä¸€ä¸ªæ¥å£ã€‚</p> 
<p><strong>è·å–åˆ—åmysql_fetch_fields</strong></p> 
<pre><code class="prism language-cpp">MYSQL_FIELD <span class="token operator">*</span><span class="token function">mysql_fetch_fields</span><span class="token punctuation">(</span>MYSQL_RES <span class="token operator">*</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ä¸mysql_fetch_fieldsç›¸å¯¹çš„è¿˜æœ‰ä¸€ä¸ªmysql_fetch_fieldæ¥å£ï¼Œmysql_fetch_fieldsä»¥æ•°ç»„å½¢å¼è¿”å›çš„æ˜¯æ‰€æœ‰çš„åˆ—å±æ€§å¯¹åº”çš„ç»“æ„ä½“ã€‚æ¯ä¸€åˆ—å±æ€§éƒ½æ˜¯ä¸€ä¸ªç»“æ„ä½“ã€‚<br> mysql_fetch_fieldå¯ä»¥è®©ä½ ä¾æ¬¡éå†æ‰€æœ‰åˆ—ï¼Œä»¥åˆ—ä¸ºå•ä½ï¼Œç¬¬ä¸€æ¬¡æ˜¯ç¬¬ä¸€åˆ—ï¼Œç¬¬äºŒæ¬¡æ˜¯ç¬¬äºŒåˆ—ï¼Œä¹Ÿå°±åƒè¿­ä»£å™¨ã€‚</p> 
<p><img src="https://images2.imgbox.com/32/eb/LP00qDB4_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>è¿™é‡Œæˆ‘ä»¬å°±ä¸éº»çƒ¦äº†ï¼Œç›´æ¥ä¸€æ¬¡è·å¾—æ‰€æœ‰åˆ—å±æ€§ã€‚ç„¶åå¯ä»¥éå†æ‰€æœ‰åˆ—æŠŠåˆ—åç§°æ‰“å°å‡ºæ¥ã€‚</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// cout&lt;&lt;"connect success"&lt;&lt;endl;</span>

    <span class="token comment">// è®¾ç½®ç¼–ç æ ¼å¼</span>
    <span class="token function">mysql_set_character_set</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    string sql <span class="token operator">=</span> <span class="token string">"select * from user"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> sql <span class="token operator">&lt;&lt;</span> <span class="token string">" success"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> sql <span class="token operator">&lt;&lt;</span> <span class="token string">" error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    MYSQL_RES <span class="token operator">*</span>res <span class="token operator">=</span> <span class="token function">mysql_store_result</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"mysql_store_result error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ä¸‹é¢éƒ½æ˜¯å’Œç»“æœé›†æœ‰å…³çš„, MYSQL_RES</span>
    my_ulonglong rows <span class="token operator">=</span> <span class="token function">mysql_num_rows</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    my_ulonglong cols <span class="token operator">=</span> <span class="token function">mysql_num_fields</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¡Œ: "</span> <span class="token operator">&lt;&lt;</span> rows <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"åˆ—: "</span> <span class="token operator">&lt;&lt;</span> cols <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token comment">//å±æ€§</span>
    MYSQL_FIELD<span class="token operator">*</span> fields<span class="token operator">=</span><span class="token function">mysql_fetch_fields</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>cols<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span>fields<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token operator">&lt;&lt;</span><span class="token string">"\t"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>


    <span class="token comment">//å†…å®¹</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>rows<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        MYSQL_ROW line<span class="token operator">=</span><span class="token function">mysql_fetch_row</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>cols<span class="token punctuation">;</span><span class="token operator">++</span>j<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span>line<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">"\t"</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>
        cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
    
        <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
        <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è‡ªæ­¤åˆ—åç§°æˆ‘ä»¬å°±æ‹¿åˆ°äº†ã€‚</p> 
<p><img src="https://images2.imgbox.com/1a/92/MhbGIkj7_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> å¦‚æœä½ å°†æ¥æƒ³è·å–ä»€ä¹ˆå±æ€§å°±ç›´æ¥å»è·å–ã€‚</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// cout&lt;&lt;"connect success"&lt;&lt;endl;</span>

    <span class="token comment">// è®¾ç½®ç¼–ç æ ¼å¼</span>
    <span class="token function">mysql_set_character_set</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    string sql <span class="token operator">=</span> <span class="token string">"select * from user"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> sql <span class="token operator">&lt;&lt;</span> <span class="token string">" success"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> sql <span class="token operator">&lt;&lt;</span> <span class="token string">" error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    MYSQL_RES <span class="token operator">*</span>res <span class="token operator">=</span> <span class="token function">mysql_store_result</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"mysql_store_result error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ä¸‹é¢éƒ½æ˜¯å’Œç»“æœé›†æœ‰å…³çš„, MYSQL_RES</span>
    my_ulonglong rows <span class="token operator">=</span> <span class="token function">mysql_num_rows</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    my_ulonglong cols <span class="token operator">=</span> <span class="token function">mysql_num_fields</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¡Œ: "</span> <span class="token operator">&lt;&lt;</span> rows <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"åˆ—: "</span> <span class="token operator">&lt;&lt;</span> cols <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token comment">//å±æ€§</span>
    MYSQL_FIELD<span class="token operator">*</span> fields<span class="token operator">=</span><span class="token function">mysql_fetch_fields</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>cols<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span>fields<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token operator">&lt;&lt;</span><span class="token string">"\t"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>


    <span class="token comment">//å†…å®¹</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>rows<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        MYSQL_ROW line<span class="token operator">=</span><span class="token function">mysql_fetch_row</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>cols<span class="token punctuation">;</span><span class="token operator">++</span>j<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span>line<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">"\t"</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>
        cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    cout<span class="token operator">&lt;&lt;</span>fields<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>db<span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token operator">&lt;&lt;</span>fields<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>table<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

    
     <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
      <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/8e/60/Q79URrpB_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æœ€ç»ˆæˆ‘ä»¬å°±æŠŠmysqlçš„æŸ¥è¯¢ç»“æœè·å–åˆ°ï¼Œç„¶åè½¬å‚¨åˆ°ç»“æœé›†ï¼Œç„¶åä»ç»“æœé›†ä¸­æå–è¡Œåˆ—ï¼Œè¿˜æœ‰å…¶ä»–å±æ€§å’Œå†…å®¹ã€‚ç°åœ¨æˆ‘ä»¬å¯¹å¢åˆ æŸ¥æ”¹å°±æœ‰ä¸€ä¸ªå®Œæ•´çš„è®¤è¯†äº†ã€‚</p> 
<p>ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚mysql_store_resultä¼šæŠŠæŸ¥è¯¢ç»“æœç”±MYSQLè½¬å‚¨åˆ°MYSQL_RESé‡Œï¼ŒMYSQL_RESä¸€å®šè¦ä¸ºæˆ‘ä»¬mallocä¸€å¤§å †ç©ºé—´ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€å®šè¦è®°çš„ free(result),ä¸ç„¶æ˜¯è‚¯å®šä¼šé€ æˆå†…å­˜æ³„æ¼çš„ã€‚æˆ‘ä»¬ä¸èƒ½ç›´æ¥ç”¨Cçš„freeæˆ–è€…C++çš„deleteï¼Œè€Œç”¨çš„æ˜¯mysqlåº“æä¾›çš„è¿™ä¸ªå‡½æ•°ï¼ŒæŠŠç»“æœé›†ä¸­ç©ºé—´é‡Šæ”¾æ‰ã€‚</p> 
<p><img src="https://images2.imgbox.com/91/20/USwytpIO_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <img src="https://images2.imgbox.com/b3/8c/3nk22jrt_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åˆå§‹åŒ–mysql,æ„å»ºmysqlå¯¹è±¡,å¾—åˆ°mysqlè®¿é—®å¥æŸ„</span>
    MYSQL <span class="token operator">*</span>my <span class="token operator">=</span> <span class="token function">mysql_init</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>my <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"init MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2.è¿æ¥æ•°æ®åº“</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">mysql_real_connect</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> host<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> user<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> passwd<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> db<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> port<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"connect MySQL error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// cout&lt;&lt;"connect success"&lt;&lt;endl;</span>

    <span class="token comment">// è®¾ç½®ç¼–ç æ ¼å¼</span>
    <span class="token function">mysql_set_character_set</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> <span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    string sql <span class="token operator">=</span> <span class="token string">"select * from user"</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">mysql_query</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span> sql<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> sql <span class="token operator">&lt;&lt;</span> <span class="token string">" success"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> sql <span class="token operator">&lt;&lt;</span> <span class="token string">" error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    MYSQL_RES <span class="token operator">*</span>res <span class="token operator">=</span> <span class="token function">mysql_store_result</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"mysql_store_result error"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ä¸‹é¢éƒ½æ˜¯å’Œç»“æœé›†æœ‰å…³çš„, MYSQL_RES</span>
    my_ulonglong rows <span class="token operator">=</span> <span class="token function">mysql_num_rows</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    my_ulonglong cols <span class="token operator">=</span> <span class="token function">mysql_num_fields</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¡Œ: "</span> <span class="token operator">&lt;&lt;</span> rows <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"åˆ—: "</span> <span class="token operator">&lt;&lt;</span> cols <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token comment">//å±æ€§</span>
    MYSQL_FIELD<span class="token operator">*</span> fields<span class="token operator">=</span><span class="token function">mysql_fetch_fields</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>cols<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span>fields<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token operator">&lt;&lt;</span><span class="token string">"\t"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>


    <span class="token comment">//å†…å®¹</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>rows<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        MYSQL_ROW line<span class="token operator">=</span><span class="token function">mysql_fetch_row</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span>cols<span class="token punctuation">;</span><span class="token operator">++</span>j<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            cout<span class="token operator">&lt;&lt;</span>line<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">&lt;&lt;</span><span class="token string">"\t"</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span>
        cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    cout<span class="token operator">&lt;&lt;</span>fields<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>db<span class="token operator">&lt;&lt;</span><span class="token string">" "</span><span class="token operator">&lt;&lt;</span>fields<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>table<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

     <span class="token comment">//é‡Šæ”¾ç»“æœé›†</span>
     <span class="token function">mysql_free_result</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token comment">// 3.ç”¨å®Œä¹‹åcloseï¼Œé‡Šæ”¾èµ„æº</span>
      <span class="token function">mysql_close</span><span class="token punctuation">(</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>å¯ä»¥çœ‹åˆ°å¯¹äºè¯»å–çš„å¤„ç†å…¶å®æ˜¯æŒºéº»çƒ¦çš„ã€‚</p> 
<p>æˆ‘ä»¬å¸¸ç”¨çš„æ¥å£å°±è¿™äº›ï¼Œå¯¹äºä¸€èˆ¬æ•°æ®åº“è¯»å–æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚</p> 
<p>æœ€åï¼Œmysql C apiè¿˜æ”¯æŒäº‹åŠ¡ç­‰å¸¸ç”¨æ“ä½œï¼Œå¤§å®¶ä¸‹æ¥è‡ªè¡Œäº†è§£:</p> 
<pre><code class="prism language-cpp">my_bool STDCALL <span class="token function">mysql_autocommit</span><span class="token punctuation">(</span>MYSQL <span class="token operator">*</span> mysql<span class="token punctuation">,</span> my_bool auto_mode<span class="token punctuation">)</span><span class="token punctuation">;</span>
my_bool STDCALL <span class="token function">mysql_commit</span><span class="token punctuation">(</span>MYSQL <span class="token operator">*</span> mysql<span class="token punctuation">)</span><span class="token punctuation">;</span>
my_bool STDCALL <span class="token function">mysql_rollback</span><span class="token punctuation">(</span>MYSQL <span class="token operator">*</span> mysql<span class="token punctuation">)</span>
</code></pre> 
<p>ç›®å‰ä¸ºæ­¢æ‰€æœ‰è¿æ¥æ•°æ®åº“çš„æ“ä½œï¼Œæˆ‘ä»¬å·²ç»æœ‰ç¬¬äºŒç§æ–¹æ¡ˆã€‚ä»¥å‰å°±æ˜¯mysqlå‘½ä»¤è¡Œå¼çš„ã€åˆšåˆšå°±æ˜¯mysqlçš„C/C++çš„è¿æ¥æ–¹æ¡ˆï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å›¾å½¢åŒ–ç•Œé¢è¿æ¥æ•°æ®åº“ã€‚</p> 
<h2><a id="4_1059"></a>4.å›¾å½¢åŒ–ç•Œé¢è®¿é—®æ•°æ®åº“</h2> 
<p>è¿™é‡Œæ¨èå‡ ä¸ªå¥½ç”¨çš„å›¾å½¢åŒ–ç•Œé¢ã€‚</p> 
<p><strong>Nacicat</strong>æ˜¯ä¸€ä¸ªæ¡Œé¢ç‰ˆçš„mysqlæ•°æ®åº“ç®¡ç†å’Œå¼€å‘å·¥å…·ï¼Œä»¥å›¾å½¢åŒ–ç•Œé¢æ˜¾ç¤ºæ•°æ®åº“çš„æ“ä½œã€‚è™½ç„¶è¿™ä¸ªå·¥å…·éå¸¸å¥½ç”¨ï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œè¿™ä¸ªè½¯ä»¶æ˜¯æ”¶è´¹çš„ã€‚å¯ä»¥è‡ªå·±åœ¨ç½‘ä¸Šæ‰¾æ‰¾å®ƒçš„ç ´è§£ç‰ˆã€‚</p> 
<p><img src="https://images2.imgbox.com/97/b1/UM4WjOYx_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <strong>SQLyog</strong> ä¹Ÿæ˜¯ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ã€å¿«é€Ÿè€Œç®€æ´çš„å›¾å½¢åŒ–ç®¡ç†MYSQLæ•°æ®åº“çš„å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿåœ¨ä»»ä½•åœ°ç‚¹æœ‰æ•ˆåœ°ç®¡ç†ä½ çš„æ•°æ®åº“ã€‚ä½†åŒæ ·çš„ï¼Œè™½ç„¶å®ƒç”¨èµ·æ¥å¾ˆèˆ’æœï¼Œä½†å®ƒä¹Ÿæ˜¯æ”¶è´¹çš„<br> <img src="https://images2.imgbox.com/9f/f4/a4EJBKb8_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> <strong>MYSQL Workbench</strong>æ˜¯mysqlå®˜æ–¹æä¾›çš„æ•°æ®åº“ç®¡ç†å’Œå¼€å‘å·¥å…·ï¼Œæ”¯æŒå›¾å½¢åŒ–ç•Œé¢ã€‚è™½ç„¶å®ƒåœ¨ä½¿ç”¨ä¸Šå¹¶æ²¡æœ‰ä¸Šé¢çš„Navicatå’ŒSQLyogå¥½ç”¨ï¼Œä½†ä¼˜ç‚¹å°±æ˜¯å®ƒæ˜¯å…è´¹çš„ã€‚è¿™é‡Œæˆ‘ä»¬é‡ç‚¹å°±ç”¨å®ƒã€‚</p> 
<h3><a id="41MYSQL_Workbench_1069"></a>4.1ä¸‹è½½MYSQL Workbench</h3> 
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥å»mysqlå®˜ç½‘ä¸Šå»æ‰¾åˆ°å®ƒï¼Œç„¶åä¸‹è½½ã€‚</p> 
<p><img src="https://images2.imgbox.com/ab/80/PO6aDyXf_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å¾€ä¸‹ç¿»æ‰¾åˆ°è¿™ä¸ªç„¶åè¿›å»</p> 
<p><img src="https://images2.imgbox.com/38/56/RctfwoHm_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ‰¾åˆ°MySQL Workbenchç„¶åè¿›å»</p> 
<p><img src="https://images2.imgbox.com/76/ba/EojWReur_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>é€‰æ‹©å¯¹åº”çš„æ“ä½œç³»ç»Ÿï¼Œç›´æ¥ä¸‹è½½å°±è¡Œäº†</p> 
<p><img src="https://images2.imgbox.com/fb/67/gXQnzeQp_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¸‹å¥½ä¹‹åè¿è¡Œå°±æ˜¯è¿™ä¸ªæ ·å­</p> 
<p><img src="https://images2.imgbox.com/10/11/X24VB2ro_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="42MYSQL_Workbench_1091"></a>4.2MYSQL Workbenchè¿œç¨‹è¿æ¥æ•°æ®åº“</h3> 
<p>MYSQL Workbenchä¹Ÿæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œè¯´ç™½äº†å®ƒå’Œæˆ‘ä»¬è‡ªå·±å†™çš„C/C++å®¢æˆ·ç«¯å’Œæ›¾ç»mysqlå¯¹åº”çš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯æ˜¯æ²¡æœ‰ä»»ä½•å·®åˆ«çš„ï¼Œå®ƒä¹Ÿè¦è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œä¹Ÿè¦è¿›è¡Œç™»å½•ã€‚æ‰€ä»¥mysqlä¸€å®šè¦å…è®¸è¿™ä¸ªç”¨æˆ·è¿›è¡Œè¿œç¨‹ç™»å½•ã€‚</p> 
<p>å› æ­¤æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªå…è®¸è¿œç¨‹ç™»å½•çš„è´¦å·ã€‚<br> åˆ›å»ºä¸€ä¸ªå…è®¸ç”¨æˆ·ä»ä»»æ„åœ°ç‚¹ç™»å½•ã€‚è¿™ä¸ªä»»æ„ç™»å½•è¿™ä»¶äº‹æƒ…ï¼Œè™½ç„¶æˆ‘ä»¬è¿™æ ·å†™äº†ï¼Œä¸€èˆ¬åœ¨å…¬å¸å†…å…è®¸é‚£ä¸€å°æœºå™¨è®¿é—®æ•°æ®åº“å¯ä»¥æŠŠè¿™ä¸ªIPåœ°å€ç¡®å®šä¸‹æ¥ä¸ç”¨å¡«%ï¼Œä»Šå¤©æˆ‘ä»¬ç”¨çš„äº‘æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å†…ç½‘ç»è¿‡NATè·¯ç”±å™¨è½¬å‘IPåœ°å€ä¼šå‘ç”Ÿæ”¹å˜ã€‚æœ¬åœ°IPé…ä¸Šå»æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œæ‰€ä»¥è¿™é‡Œåªèƒ½ç”¨%ã€‚</p> 
<pre><code class="prism language-powershell">create user <span class="token string">'workbench'</span>@<span class="token string">'%'</span> identified by <span class="token string">'xxx'</span><span class="token punctuation">;</span>
</code></pre> 
<p>ç„¶ååœ¨ç»™æ–°ç”¨æˆ·èµ‹æƒã€‚æŠŠconnæ•°æ®åº“æ‰€æœ‰è¡¨çš„æƒé™éƒ½ç»™è¿™ä¸ªç”¨æˆ·ã€‚</p> 
<pre><code class="prism language-powershell">grant all on conn<span class="token punctuation">.</span><span class="token operator">*</span> to <span class="token string">'workbench'</span>@<span class="token string">'%'</span><span class="token punctuation">;</span>
</code></pre> 
<p>ç„¶åæ‰èƒ½è¿œç¨‹è¿æ¥ï¼Œç‚¹å‡»è¿™é‡Œ+ï¼Œé…ç½®ä¸€ä¸‹ç›¸å…³ä¿¡æ¯</p> 
<p><img src="https://images2.imgbox.com/bf/cb/9XbCuQjp_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æˆ‘ä»¬ä¸»è¦å¡«çš„å°±æ˜¯IPåœ°å€ï¼Œç«¯å£å·ï¼Œå’Œç”¨æˆ·ã€‚è¿˜å¯ä»¥ç»™è¿™ä¸ªè¿æ¥èµ·ä¸ªåå­—ã€‚</p> 
<p><img src="https://images2.imgbox.com/8a/12/Q0Neqo0d_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>é…ç½®å¥½ï¼Œç„¶åç‚¹å‡»ä¸‹é¢çš„ï¼Œä»£è¡¨æµ‹è¯•ä¸€ä¸‹è¿æ¥ï¼Œå®ƒä¼šè¦æ±‚è¾“å…¥å¯¹åº”çš„å¯†ç ï¼Œç›´æ¥æŠŠè¿™ä¸ªç”¨æˆ·çš„å¯†ç è¾“å…¥å°±è¡Œäº†ã€‚</p> 
<p><img src="https://images2.imgbox.com/78/6b/qzpopzNj_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å¦‚æœæˆåŠŸè¿æ¥åœ¨ç‚¹å‡»okå°±æ˜¯ä¸‹é¢è¿™æ ·ï¼Œå¦‚æœè¿æ¥ä¸ä¸Šå¯èƒ½æ˜¯ä½ ç«¯å£å·æ²¡æœ‰æ”¾å‡ºæ¥ã€‚è‡ªå·±æ”¾ä¸€ä¸‹ã€‚å¦‚æœæƒ³ç™»å½•çš„è¯ï¼Œç‚¹å‡»ä¸€ä¸‹è¿™ä¸ªå‡ºæ¥çš„ä¸œè¥¿ï¼Œç„¶åå°±ç™»å½•è¿›å»äº†ã€‚</p> 
<p><img src="https://images2.imgbox.com/ad/45/6FUgOHjX_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>è¿›å»ä¹‹åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯¹åº”è¡¨ç»“æ„ã€è§†å›¾ï¼Œå­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°è¿™äº›ã€‚æˆ‘ä»¬ç°åœ¨åªç”¨å…³ç³»è¡¨ç»“æ„å°±å¯ä»¥äº†ã€‚è¡¨ç»“æ„é‡Œé¢å¯¹åº”çš„åˆ—ã€ç´¢å¼•ã€å¤–é”®ã€è§¦å‘å™¨è¿™äº›ã€‚</p> 
<p><img src="https://images2.imgbox.com/2d/5b/dxGtP8td_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>åˆ—é‡Œé¢å¯ä»¥çœ‹åˆ°å¯¹åº”åˆ—çš„å±æ€§ï¼Œå¦‚idåˆ—çš„ä¸»æœºå’Œè‡ªå¢é•¿</p> 
<p><img src="https://images2.imgbox.com/03/46/EnLo1uZS_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¸‹é¢æˆ‘ä»¬å¯ä»¥åœ¨æ¡†é‡Œå†™ä¸€äº›sqlæŒ‡ä»¤äº†ã€‚å†™å®Œä¹‹åé€‰ä¸­æˆ–è€…å…‰æ ‡æ”¾åœ¨ä½ å†™çš„sqlè¿™é‡Œç„¶åç‚¹å‡»è¿™ä¸ªé—ªç”µæ‰§è¡Œå®ƒã€‚ç„¶åä¸‹é¢å°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä¿¡æ¯ã€‚</p> 
<p><img src="https://images2.imgbox.com/96/67/4WAnkpao_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>è™½ç„¶å…‰æ ‡æ”¾åœ¨åé¢ç‚¹å‡»é—ªç”µä¹Ÿå¯ä»¥æ‰§è¡Œï¼Œä½†æ˜¯å®ƒæ˜¯ä»ä¸Šåˆ°ä¸‹å¼€å§‹æ‰§è¡Œçš„ï¼Œå¦‚æœåªéœ€è¦æ‰§è¡ŒæŸä¸€ä¸ªsqlæŒ‡ä»¤ï¼Œè¿˜æ˜¯è¦é€‰æ‹©å®ƒç„¶ååœ¨å»æ‰§è¡Œã€‚</p> 
<p><img src="https://images2.imgbox.com/06/e5/bGBEhPoW_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥<strong>æŸ¥</strong>ä¸€ä¸‹è¿™ä¸ªè¡¨ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œæ‹…å¿ƒæ•°æ®å¤ªå¤šï¼Œé»˜è®¤åªæŠŠ0-1000è¡Œç­›é€‰å‡ºæ¥ã€‚</p> 
<p><img src="https://images2.imgbox.com/14/df/QJSZmYBj_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç„¶åå¯ä»¥ç›´æ¥åœ¨è¿™é‡Œå¯¹æ•°æ®è¿›è¡Œ<strong>æ’å…¥</strong>ï¼Œç„¶åå†ç‚¹å‡»Applyæ‰§è¡Œä¸€ä¸‹</p> 
<p><img src="https://images2.imgbox.com/31/59/mEPUOSBj_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>Applyä¼šæŠŠåˆšåˆšåœ¨å›¾å½¢åŒ–ç•Œé¢è¿™é‡Œåšçš„åŠ¨ä½œå˜æˆsqlçš„è¯­å¥ï¼Œç„¶ååœ¨ç‚¹Applyæ‰§è¡Œã€‚</p> 
<p><img src="https://images2.imgbox.com/07/10/qnvkIroE_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç„¶ååœ¨ç‚¹Finshï¼Œè¿™ä¸ªæ’å…¥å°±ç®—çœŸæ­£æ‰§è¡Œå®Œæˆäº†</p> 
<p><img src="https://images2.imgbox.com/c5/6f/2TjHA97G_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç„¶åæˆ‘ä»¬æŸ¥ä¸€ä¸‹ï¼Œç¡®å®çœ‹åˆ°æ˜¯æ’å…¥äº†</p> 
<p><img src="https://images2.imgbox.com/5c/29/KT9wHAUS_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ¥ä¸‹é‡Œæˆ‘ä»¬æƒ³æŠŠå¼ ä¸‰è¿™æ¡è®°å½•<strong>åˆ é™¤</strong>ä¸€ä¸‹ï¼Œå¯ä»¥ç›´æ¥åœ¨å›¾å½¢åŒ–ç•Œé¢åˆ é™¤ï¼Œç„¶åè¿˜æ˜¯å’Œä¸Šé¢ä¸€æ ·çš„æµç¨‹Applyã€‚</p> 
<p><img src="https://images2.imgbox.com/f9/47/8lAxjefM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç„¶åè¿™çœ‹åˆ°ç¡®å®å¯ä»¥åˆ é™¤ã€‚</p> 
<p><img src="https://images2.imgbox.com/28/8f/lc8545co_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><strong>æ›´æ–°</strong>ä¹Ÿæ˜¯ä¸€æ ·åœ¨å›¾å½¢åŒ–ç•Œé¢æ”¹ï¼Œç„¶åApplyæ‰§è¡Œä¸€ä¸‹ã€‚æˆ‘ä»¬æŠŠæå››å¹´é¾„æ”¹æˆ90å²ã€‚</p> 
<p><img src="https://images2.imgbox.com/4d/95/aFNIy74V_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>çœ‹åˆ°ç¡®å®ä¹Ÿæ˜¯æ”¹äº†</p> 
<p><img src="https://images2.imgbox.com/a4/63/h0hBd7gp_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ¢è¨€ä¹‹ï¼Œæˆ‘ä»¬å°±ä¸ç”¨è‡ªå·±å†™sqläº†ï¼Œæ‹¿åˆ°è¡¨ç»“æ„å¯¹å®ƒè¿›è¡Œå¢åˆ æŸ¥æ”¹ï¼Œç›´æ¥åœ¨é‡Œé¢æ‰‹æ”¹å°±è¡Œäº†ã€‚è¿™å°±æ˜¯å›¾å½¢åŒ–ç•Œé¢çš„å¥½å¤„ã€‚</p> 
<p>å¦‚æœæƒ³æŠŠè‡ªå·±å†™çš„ä¸€å¤§å †sqlæŒ‡ä»¤ä¿å­˜ä¸€ä¸‹ï¼Œå¯ä»¥ctrl+sä¿å­˜ã€‚å½¢æˆä¸€ä¸ª.sqlæ–‡ä»¶ã€‚</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/16cba50c38daacedfa8e315e05066ced/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ã€Spring Bootã€‘Spring AOPä¸­çš„ç¯ç»•é€šçŸ¥</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/48837ff3c3e9293079a7942e34caa15c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">åŠ›æ‰£æ¯æ—¥ä¸€é¢˜ 7/2 æ•°å­¦ã€æ•°è®ºã€æ•°ç»„/åŒæŒ‡é’ˆ</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 ç¼–ç¨‹å¤§å’–.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>