<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Stable Diffusion如何生成高质量的图-prompt写法介绍 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/626efaaa208c3140ad6058e5c59b54f9/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Stable Diffusion如何生成高质量的图-prompt写法介绍">
  <meta property="og:description" content="文章目录 Stable Diffusion使用尝试下效果prompt的编写技巧prompt 和 negative promptPrompt格式Prompt规则细节优化Guidance Scale 总结 Stable Diffusion Stable Diffusion是一个开源的图像生成AI系统,由Anthropic公司开发。它基于 Transformer模型架构,可以通过文字描述生成高质量的图像。
Stable Diffusion的主要特点包括:
强大的图像生成能力。它可以根据文本描述生成非常逼真的图像,包括人物、风景、动物等各种主题。对文本的理解能力强。它可以捕捉文本描述的关键信息,转换为视觉上的表现。生成图像分辨率高。它可以生成512x512甚至1024x1024像素的高分辨率图像。开源且易于使用。它建立在开源框架PyTorch等基础上,可以轻松地在GPU及普通电脑上运行。训练数据量大。它的训练数据集包含大量高质量图像,这是它强大能力的重要基础。结果多样化。每次输入相同提示,它都可以生成略有不同的结果,增加了结果的多样性。控制能力强。用户可以通过调整文字提示、超参数等方式控制生成结果。 Stable Diffusion是一种潜在扩散模型（Latent Diffusion Model），能够从文本描述中生成详细的图像。它还可以用于图像修复、图像绘制、文本到图像和图像到图像等任务。简单地说，我们只要给出想要的图片的文字描述在提Stable Diffusion就能生成符合你要求的逼真的图像。Stable Diffusion作为新兴的AI生成模型,拥有强大的图像生成能力,是目前最先进的开源生成模型之一,值得关注。它的出现将推动创作界发生革命性的变化。
使用 尝试下效果 prompt：beautiful girl,bikini,sea,beach,sunshine 生成的效果如下：
效果不太好，我们来学习下prompt如何编写，再看看改善效果。
prompt的编写技巧 prompt 和 negative prompt 描述语分为正向/负向描述，它们也叫tag(标签）或prompt(提示词）
正面提示词：相比Midjourney，SD需要写得更精准和细致，描述少就给AI更多自由发挥空间。
负面提示词：不想让SD生成的内容。
正向：masterpiece, best quality, 画质词，画面描述。
反向：根据画面产出加不想出现的画面。
Prompt格式 第一段：画质tag，画风tag
第二段：画面主体，主体强调，主体细节概括（主体可以是人、事、物、景）画面核心内容
第三段：画面场景细节，或人物细节，embedding tag。画面细节内容
第二段一般提供人数，人物主要特征，主要动作（一般置于人物之前），物体主要特征，主景或景色框架等
Prompt规则细节 提示词的顺序决定了权重的大小,越靠前的词汇权重越大,会对图像生成产生更直接的影响。生成图片分辨率越大,需要的提示词量也越多,否则不同的提示词会产生不一致的效果,相互干扰。使用括号可以精确调整单个词的权重值,提高或降低其对图像生成的影响程度。常用的权重调整范围建议控制在0.25到1.5之间,避免超出这个范围带来负面效果。
方法如下：
(word) - 将权重提高 1.1 倍
((word)) - 将权重提高 1.21 倍（= 1.1 * 1.1）
[word] - 将权重降低至原先的 90.91%
(word:1.5) - 将权重提高 1.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-07-18T10:00:14+08:00">
    <meta property="article:modified_time" content="2023-07-18T10:00:14+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Stable Diffusion如何生成高质量的图-prompt写法介绍</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Stable_Diffusion_1" rel="nofollow">Stable Diffusion</a></li><li><a href="#_15" rel="nofollow">使用</a></li><li><ul><li><a href="#_16" rel="nofollow">尝试下效果</a></li><li><a href="#prompt_27" rel="nofollow">prompt的编写技巧</a></li><li><ul><li><a href="#prompt__negative_prompt_28" rel="nofollow">prompt 和 negative prompt</a></li><li><a href="#Prompt_38" rel="nofollow">Prompt格式</a></li><li><a href="#Prompt_45" rel="nofollow">Prompt规则细节</a></li><li><a href="#_57" rel="nofollow">优化</a></li><li><a href="#Guidance_Scale_90" rel="nofollow">Guidance Scale</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_115" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="Stable_Diffusion_1"></a>Stable Diffusion</h2> 
<p>Stable Diffusion是一个开源的图像生成AI系统,由Anthropic公司开发。它基于 Transformer模型架构,可以通过文字描述生成高质量的图像。<br> Stable Diffusion的主要特点包括:</p> 
<ul><li>强大的图像生成能力。它可以根据文本描述生成非常逼真的图像,包括人物、风景、动物等各种主题。</li><li>对文本的理解能力强。它可以捕捉文本描述的关键信息,转换为视觉上的表现。</li><li>生成图像分辨率高。它可以生成512x512甚至1024x1024像素的高分辨率图像。</li><li>开源且易于使用。它建立在开源框架PyTorch等基础上,可以轻松地在GPU及普通电脑上运行。</li><li>训练数据量大。它的训练数据集包含大量高质量图像,这是它强大能力的重要基础。</li><li>结果多样化。每次输入相同提示,它都可以生成略有不同的结果,增加了结果的多样性。</li><li>控制能力强。用户可以通过调整文字提示、超参数等方式控制生成结果。</li></ul> 
<p>Stable Diffusion是一种潜在扩散模型（Latent Diffusion Model），能够从文本描述中生成详细的图像。它还可以用于图像修复、图像绘制、文本到图像和图像到图像等任务。简单地说，我们只要给出想要的图片的文字描述在提Stable Diffusion就能生成符合你要求的逼真的图像。Stable Diffusion作为新兴的AI生成模型,拥有强大的图像生成能力,是目前最先进的开源生成模型之一,值得关注。它的出现将推动创作界发生革命性的变化。</p> 
<h2><a id="_15"></a>使用</h2> 
<h3><a id="_16"></a>尝试下效果</h3> 
<pre><code>prompt：beautiful girl,bikini,sea,beach,sunshine
</code></pre> 
<p>生成的效果如下：<br> <img src="https://images2.imgbox.com/1e/26/spj1GN4J_o.png" alt="在这里插入图片描述"></p> 
<p>效果不太好，我们来学习下prompt如何编写，再看看改善效果。</p> 
<h3><a id="prompt_27"></a>prompt的编写技巧</h3> 
<h4><a id="prompt__negative_prompt_28"></a>prompt 和 negative prompt</h4> 
<p><img src="https://images2.imgbox.com/65/57/803HOF6K_o.png" alt="在这里插入图片描述"></p> 
<p>描述语分为正向/负向描述，它们也叫tag(标签）或prompt(提示词）<br> 正面提示词：相比Midjourney，SD需要写得更精准和细致，描述少就给AI更多自由发挥空间。<br> 负面提示词：不想让SD生成的内容。<br> 正向：masterpiece, best quality, 画质词，画面描述。<br> 反向：根据画面产出加不想出现的画面。</p> 
<h4><a id="Prompt_38"></a>Prompt格式</h4> 
<p>第一段：画质tag，画风tag<br> 第二段：画面主体，主体强调，主体细节概括（主体可以是人、事、物、景）画面核心内容<br> 第三段：画面场景细节，或人物细节，embedding tag。画面细节内容<br> 第二段一般提供人数，人物主要特征，主要动作（一般置于人物之前），物体主要特征，主景或景色框架等</p> 
<h4><a id="Prompt_45"></a>Prompt规则细节</h4> 
<ol><li>提示词的顺序决定了权重的大小,越靠前的词汇权重越大,会对图像生成产生更直接的影响。</li><li>生成图片分辨率越大,需要的提示词量也越多,否则不同的提示词会产生不一致的效果,相互干扰。</li><li>使用括号可以精确调整单个词的权重值,提高或降低其对图像生成的影响程度。常用的权重调整范围建议控制在0.25到1.5之间,避免超出这个范围带来负面效果。<br> 方法如下：<br> (word) - 将权重提高 1.1 倍<br> ((word)) - 将权重提高 1.21 倍（= 1.1 * 1.1）<br> [word] - 将权重降低至原先的 90.91%<br> (word:1.5) - 将权重提高 1.5 倍<br> (word:0.25) - 将权重减少为原先的 25%<br> 请注意，权重值最好不要超过 1.5</li></ol> 
<h4><a id="_57"></a>优化</h4> 
<p>根据上面的规则我们来改下下prompt</p> 
<pre><code class="prism language-bash">A beautiful young girl standing <span class="token keyword">in</span> the shallow seawater on a sunny tropical beach. She has long wavy blonde hair flowing <span class="token keyword">in</span> the ocean breeze. She<span class="token string">'s wearing a red floral bikini which compliments her tanned skin tone. Her fit athletic body is perfectly framed in this scene. She has a bright, energetic smile on her face as she'</span>s enjoying the warm ocean water washing over her feet. The background is a picturesque tropical beach scene with white sand, palm trees, and turquoise blue water sparkling <span class="token keyword">in</span> the bright sunlight stretching out to the horizon. This is a perfect summer beach day. The overall color tone is vibrant and cheerful. The girl looks natural, elegant, and carefree. This is a high quality, photorealistic image.
</code></pre> 
<p>报错</p> 
<pre><code class="prism language-bash">“Unsafe content found”
</code></pre> 
<p>继续优化</p> 
<pre><code class="prism language-bash"><span class="token string">"A cheerful young woman smiling and having fun at the beach. She has long, dark brown hair blowing casually in the tropical breeze. She's dressed appropriately in a blue floral one-piece swimsuit. Posing happily on the shore, with one hand up to her forehead to shade her eyes. Behind her is a beautiful scenic view of bright turquoise waves gently lapping against the sandy shore. In the background, the wide open clear blue sky meets the ocean horizon. Palm trees and green vegetation dot the landscape. The sunlight is bright and warm. This is a high quality, idyllic summer beach scene."</span>
</code></pre> 
<p>主要修改的点包括:</p> 
<ol><li>使用积极正面词语 como “cheerful”,“having fun”,“happily”,移除可能引起歧义的词汇。</li><li>将比基尼改为更保守的连体泳衣。</li><li>去掉只描写女孩的语句,加上与海滩景色的衔接。</li><li>增加阳光、植被等宁静自然的元素。</li><li>使用专业的视觉描述词语如“idyllic”,“scenic”等。</li><li>强调图像质量要高,内容要正面积极。</li><li>避免可能引起歧义或联想的表达。</li></ol> 
<p>看效果<br> <img src="https://images2.imgbox.com/63/1c/gmLL3yJb_o.png" alt="在这里插入图片描述"><br> 很明显，改善很明显…… 哈哈哈哈哈哈哈 （如果被吓到实在不好意思，我也有点看恐怖片的感觉）</p> 
<p>上面这些图是因为我Guidance Scale的参数设置太低了。</p> 
<h4><a id="Guidance_Scale_90"></a>Guidance Scale</h4> 
<p>Stable Diffusion 模型中的 Guidance Scale 参数是调整文本提示(Text Prompt)对图像生成影响力的一个重要超参数。<br> Guidance Scale 参数的主要作用是:</p> 
<ol><li>控制文本提示的重要性:</li></ol> 
<ul><li>参数值越高,文本提示的影响就越大,生成图片会越关注文本提示的要求。</li><li>参数值越低,文本提示影响减弱,生成图片会更具原创性和多样性。</li></ul> 
<ol start="2"><li>平衡文本提示和训练数据:</li></ol> 
<ul><li>参数值越高,依赖文本提示的信息更多,训练数据的影响被压制。</li><li>参数值越低,训练数据的信息起主导作用,文本提示只起辅助影响。</li></ul> 
<ol start="3"><li>调节生成图片质量:</li></ol> 
<ul><li>适当的Guidance Scale可以帮助生成更高质量的图片。</li><li>参数过大或过小,都可能导致生成图片质量下降。<br> 通常Guidance Scale的取值范围在1-20之间。默认值是7,这是一个比较平衡的设置。使用时可以通过调整这个参数,来实现对生成图片的精细控制。<br> Guidance Scale直接影响文本提示的作用强度,是Stable Diffusion中非常重要的一个生成控制超参数。</li></ul> 
<p>我们来调整下Guidance Scale参数<br> <img src="https://images2.imgbox.com/aa/20/iU22rbpK_o.png" alt="在这里插入图片描述"></p> 
<p>改后的效果如图（我实在不知道怎么修改CSDN才不违规了，一个连体泳衣都违规，其他平台都正常显示，只能马赛克了）：</p> 
<p><img src="https://images2.imgbox.com/d0/ce/deFSCG5W_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/e8/c5/uD5MNkpq_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_115"></a>总结</h2> 
<p>想要用Stable Diffusion生成高质量的图片,避免生成低质量的“烂图片”,可以注意以下几点:</p> 
<ol><li>使用合理的提示词(Prompt)</li></ol> 
<ul><li>提示词要简洁明确,避免歧义。important信息前置。</li><li>添加合适的描述词帮助生成细节。如大小,颜色,质感等。</li><li>使用正确的英文语法和拼写。</li><li>避免使用负面和敏感词汇。</li></ul> 
<ol start="2"><li>调整超参数</li></ol> 
<ul><li>适当调高 Guidance Scale,加强提示词影响力。</li><li>调整 Steps(迭代次数)不要过少,一般100-200。</li><li>调试不同的 Sampler,如DDIM较平滑。</li></ul> 
<ol start="3"><li>使用高质量训练数据</li></ol> 
<ul><li>大型模型效果更好,如Stable Diffusion v2。</li><li>尝试不同主题的训练数据,匹配生成目标。</li></ul> 
<ol start="4"><li>生成分辨率不要过低</li></ol> 
<ul><li>分辨率过低会造成图片质量下降。</li><li>一般选择512x512 或更高分辨率。</li></ul> 
<ol start="5"><li>复核和选择图片</li></ol> 
<ul><li>生成多张样本图片,挑选效果最佳的。</li><li>检查合理性,删除离题图像。<br> 通过以上方法,可以最大程度地避免Stable Diffusion生成不理想的低质量图片。但过程中也需要一定的试错尝试,以找到最佳设置。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0e55995eb82ec73c9745bcc0a224c520/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【数据结构之树】初阶数据结构之树的实现及其各种方式(上)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d8557968e6bf802ce8574167712dd1ac/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【文末送书】AIGC时代的数据分析与可视化</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>