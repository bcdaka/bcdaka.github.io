<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C# Web控件与数据感应之 填充 HtmlTable - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/840aeb1a9b0c5baa33c785df5a479c2d/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="C# Web控件与数据感应之 填充 HtmlTable">
  <meta property="og:description" content="目录
关于 HtmlTable
HtmlTable与BaseDataList的区别
准备数据源
​范例运行环境
FillTable 方法
设计与实现
模板样例输出
Automatic 模式填充
​ DynamicRows 模式填充
StaticRows 模式填充
​
小结
关于 HtmlTable 数据感应也即数据捆绑，是一种动态的，Web控件与数据源之间的交互，HtmlTable 控件表示为一个服务器控件，隶属于 System.Web.UI.HtmlControls 集合，对于客户端输出即 table 标签元素，table 表格的主要作用就是数据输出 ，本文将介绍 C# 实现操作 HtmlTable 服务器控件实现数据集表数据的轻量化输出与显示。
HtmlTable与BaseDataList的区别 HtmlTable 与诸如 DataGrid、GridView 都可用于数据输出 ，主要区别在于：
（1）前者以属于System.Web.UI.HtmlControls 集合，后者 Microsoft.Web.UI.WebControls 集合
（2）HtmlTable 可实现 table 元素的一些操作，如行、列、单元格及样式设置，而 BaseDataList 除可实现 HtmlTable 的基本控制外，还可以绑定数据源、绑定事件、绑定列控件等更加强大的功能。
（3）对于数据集合访问 HtmlTable 通过 Rows ，列集合为 Cells；而 BaseDataList 通过 Items ，列集合为 Colums。
准备数据源 我们在 MS SQL Server 创建 pub_ChinaPay（支付状态代码表），其结构如下表：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-06T12:32:57+08:00">
    <meta property="article:modified_time" content="2024-06-06T12:32:57+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C# Web控件与数据感应之 填充 HtmlTable</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%85%B3%E4%BA%8E%C2%A0HtmlTable-toc" style="margin-left:40px;"><a href="#%E5%85%B3%E4%BA%8E%C2%A0HtmlTable" rel="nofollow">关于 HtmlTable</a></p> 
<p id="%E4%B8%80%E4%BA%9B%E5%8C%BA%E5%88%AB-toc" style="margin-left:80px;"><a href="#%E4%B8%80%E4%BA%9B%E5%8C%BA%E5%88%AB" rel="nofollow">HtmlTable与BaseDataList的区别</a></p> 
<p id="%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E6%BA%90-toc" style="margin-left:40px;"><a href="#%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E6%BA%90" rel="nofollow">准备数据源</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:40px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">​</a><a href="#%E8%8C%83%E4%BE%8B%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83" rel="nofollow">范例运行环境</a></p> 
<p id="%E6%96%B9%E6%B3%95%E8%AE%BE%E8%AE%A1-toc" style="margin-left:40px;"><a href="#%E6%96%B9%E6%B3%95%E8%AE%BE%E8%AE%A1" rel="nofollow">FillTable 方法</a></p> 
<p id="%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E5%91%88%E7%8E%B0-toc" style="margin-left:80px;"><a href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E5%91%88%E7%8E%B0" rel="nofollow">设计与实现</a></p> 
<p id="%E6%A8%A1%E6%9D%BF%E6%A0%B7%E4%BE%8B%E8%BE%93%E5%87%BA-toc" style="margin-left:80px;"><a href="#%E6%A8%A1%E6%9D%BF%E6%A0%B7%E4%BE%8B%E8%BE%93%E5%87%BA" rel="nofollow">模板样例输出</a></p> 
<p id="Automatic%20%E6%A8%A1%E5%BC%8F%E5%A1%AB%E5%85%85-toc" style="margin-left:120px;"><a href="#Automatic%20%E6%A8%A1%E5%BC%8F%E5%A1%AB%E5%85%85" rel="nofollow">Automatic 模式填充</a></p> 
<p id="%E2%80%8B-toc" style="margin-left:80px;"><a href="#%E2%80%8B" rel="nofollow">​</a><a href="#%E2%80%8B" rel="nofollow">        </a> <a href="#DynamicRows%20%E6%A8%A1%E5%BC%8F%E5%A1%AB%E5%85%85" rel="nofollow">DynamicRows 模式填充</a></p> 
<p id="StaticRows%20%E6%A8%A1%E5%BC%8F%E5%A1%AB%E5%85%85-toc" style="margin-left:120px;"><a href="#StaticRows%20%E6%A8%A1%E5%BC%8F%E5%A1%AB%E5%85%85" rel="nofollow">StaticRows 模式填充</a></p> 
<p id="%E2%80%8B-toc" style="margin-left:80px;"><a href="#%E2%80%8B" rel="nofollow">​</a></p> 
<p id="%E5%B0%8F%E7%BB%93-toc" style="margin-left:40px;"><a href="#%E5%B0%8F%E7%BB%93" rel="nofollow">小结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E5%85%B3%E4%BA%8E%C2%A0HtmlTable">关于 HtmlTable</h3> 
<p>数据感应也即数据捆绑，是一种动态的，Web控件与数据源之间的交互，HtmlTable 控件表示为一个服务器控件，隶属于 System.Web.UI.HtmlControls 集合，对于客户端输出即 table 标签元素，table 表格的主要作用就是数据输出 ，本文将介绍 C# 实现操作 HtmlTable 服务器控件实现数据集表数据的轻量化输出与显示。</p> 
<h4 id="%E4%B8%80%E4%BA%9B%E5%8C%BA%E5%88%AB">HtmlTable与BaseDataList的区别</h4> 
<p>HtmlTable 与诸如 DataGrid、GridView 都可用于数据输出 ，主要区别在于：</p> 
<p>（1）前者以属于System.Web.UI.HtmlControls 集合，后者 Microsoft.Web.UI.WebControls 集合</p> 
<p>（2）HtmlTable 可实现 table 元素的一些操作，如行、列、单元格及样式设置，而 BaseDataList 除可实现 HtmlTable 的基本控制外，还可以绑定数据源、绑定事件、绑定列控件等更加强大的功能。</p> 
<p>（3）对于数据集合访问 HtmlTable 通过 Rows ，列集合为 Cells；而 BaseDataList  通过 Items ，列集合为 Colums。</p> 
<h3 id="%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E6%BA%90">准备数据源</h3> 
<p>我们在 MS SQL Server 创建 pub_ChinaPay（支付状态代码表），其结构如下表：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th>序号</th><th>字段名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><th>1</th><td>value</td><td>char(4)</td><td>支付状态代码，唯一键</td></tr><tr><th>2</th><td>text</td><td>nvarchar(14)</td><td>状态名称</td></tr><tr><th>3</th><td>sortid</td><td>smallint</td><td>排序号</td></tr></tbody></table> 
<p>执行如下 创建表的 SQL 语句：</p> 
<pre><code class="language-sql">CREATE TABLE [dbo].[pub_ChinaPay](
	[value] [char](4) NOT NULL,
	[text] [nvarchar](14) NOT NULL,
	[sortid] [smallint] NULL,
 CONSTRAINT [PK_pub_ChinaPay] PRIMARY KEY CLUSTERED 
(
	[value] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO</code></pre> 
<p>执行如下SQL语句，创建一些数据：</p> 
<pre><code class="language-sql">insert into pub_ChinaPay(value,text,sortid) values('****','默认状态',1)
insert into pub_ChinaPay(value,text,sortid) values('    ','待支付',2)
insert into pub_ChinaPay(value,text,sortid) values('1001','消费交易成功',3)
insert into pub_ChinaPay(value,text,sortid) values('1003','退款提交成功',4)
insert into pub_ChinaPay(value,text,sortid) values('1005','退款撤销成功',5)
insert into pub_ChinaPay(value,text,sortid) values('0003','交易失败',6)
insert into pub_ChinaPay(value,text,sortid) values('6666','微信退款申请成功',7)</code></pre> 
<p>通过查询分析器，执行查询SQL语句，显示如下图：</p> 
<h3 id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" height="655" src="https://images2.imgbox.com/f5/fb/rBTpxGCg_o.png" width="1037">​</h3> 
<p>最后我们将数据填充到 DataReader ,并生成对应的二维数组。</p> 
<h3></h3> 
<h3 id="%E8%8C%83%E4%BE%8B%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83">范例运行环境</h3> 
<p>操作系统： Windows Server 2019 DataCenter</p> 
<p>数据库：Microsoft SQL Server 2016</p> 
<p>.net版本： .netFramework4.0 或以上</p> 
<p>开发工具：VS2019  C#</p> 
<h3 id="%E6%96%B9%E6%B3%95%E8%AE%BE%E8%AE%A1">FillTable 方法</h3> 
<h4 id="%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E5%91%88%E7%8E%B0">设计与实现</h4> 
<p>FillTable 方法主要是通过 object[,] 二维对象数组数据源进行提取并呈现在 HtmlTable 表格控件上，其参数设置见下表：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th style="text-align:center;width:47px;">序号</th><th style="text-align:center;width:144px;">参数名</th><th style="text-align:center;">类型</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><th style="text-align:center;width:47px;">1</th><td style="width:144px;">tb</td><td>System.Web.UI.HtmlControls.HtmlTable</td><td>要输出的 HtmlTable 对象</td></tr><tr><th style="text-align:center;width:47px;">2</th><td style="width:144px;">ft</td><td>FillType</td><td> <p>填充模式枚举：</p> <p>public enum FillType<br>  { Automatic,DynamicRows,</p> <p>StaticRows<br> }</p> <p>后续将讲解这些模式的区别</p> </td></tr><tr><th style="text-align:center;width:47px;">3</th><td style="width:144px;">SpaceInEmptyCell</td><td>bool</td><td>对于空字符串输出，是否替换为&amp;nbsp 输出以达到更好的显示效果</td></tr><tr><th style="text-align:center;width:47px;">4</th><td style="width:144px;">MinClearRowsCount</td><td>int</td><td>当输出数据行为空时，清除模板表格行的阀值，设为0，则表示全部清空，不显示输出表格的任何元素</td></tr><tr><th style="text-align:center;width:47px;">5</th><td style="width:144px;">refStartRowId</td><td>int</td><td>指定数据输出的起始行</td></tr><tr><th style="text-align:center;width:47px;">6</th><td style="width:144px;">refCopyRowId</td><td>int</td><td>指定要复制哪一行的格式进行输出</td></tr><tr><th style="text-align:center;width:47px;">7</th><td style="width:144px;">allowToHTML</td><td>bool</td><td>是否允许将数据解析为HTML样式输出，默认为 false</td></tr></tbody></table> 
<p>GetReaderData 方法可以访问数据库数据表进行查询结果的提取，并转化为 object[,] 二维数组，其参数设置见下表：</p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th>序号</th><th>参数名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><th>1</th><td>DbServerType</td><td>string</td><td>目前支持 "oracle"、 "dm8"，其它字符串均视为 MS SQL Server</td></tr><tr><th></th><td>strConn</td><td>string</td><td>对应数据库的连接字符串</td></tr><tr><th>2</th><td>_sql</td><td>string</td><td>要执行的SQL语句命令行</td></tr><tr><th>3</th><td>paras</td><td>ArrayList</td><td> <p>要赋值的参数对象，逐个添加到ArrayList里，请注意参数为实体数据参数对象，如 MS SQL Server ，请传递如下代码：</p> <p>ArrayList.Add(new SqlParameter("参数名",参数值)); </p> </td></tr><tr><th>4</th><td>hastitle</td><td>bool</td><td>输出是否包含字段列标题</td></tr><tr><th>5</th><td>ct</td><td>CommandType</td><td> <p>System.Data.CommandType 枚举，可包括：</p> <p>StoredProcedure（存储过程）<br> TableDirect（直接表查询）<br> Text（文本查询）该值为默认值</p> </td></tr></tbody></table> 
<p>GetReaderData 方法实现代码如下：</p> 
<pre><code class="language-cs">int RowsCount = 0;
int ErrorNum = 0;
string ErrorMessage = "";

public object[,] GetReaderData(string DbServerType,string strConn,string _sql,ArrayList paras,bool hastitle,CommandType ct)
{


			if((DbServerType.ToLower()=="")||(DbServerType.ToLower()=="sqlserver"))
			{

				SqlConnection Conn = new SqlConnection(strConn );
				SqlCommand Cmd = new SqlCommand();
				Cmd.CommandType=ct;
				Cmd.Connection = Conn;

				SqlDataReader myDr;
				Cmd.CommandText =_sql;
				if(paras!=null)
				{
					for(int i=0;i&lt;paras.Count;i++)
					{
						Cmd.Parameters.Add((SqlParameter)paras[i]);
					}
				}


				try
				{
					Conn.Open();

					myDr = Cmd.ExecuteReader();
					
					ArrayList rowdata = new ArrayList();
					int _fieldcount=myDr.FieldCount;
					Object[] colvalues = new Object[_fieldcount];
					for(int i=0;i&lt;_fieldcount;i++)
					{
						colvalues[i]=myDr.GetName(i);
					}
					if(hastitle)
					rowdata.Add(colvalues);
					while(myDr.Read())
					{
						Object[] values = new Object[_fieldcount];
						myDr.GetValues(values);
						rowdata.Add(values);
						RowsCount++;
					}
					myDr.Close();
					object[,] rv=new object[rowdata.Count,_fieldcount];
					for(int i=0;i&lt;rowdata.Count;i++)
					{
						for(int j=0;j&lt;_fieldcount;j++)
						{
							rv[i,j]=((object[])rowdata[i])[j];
						}
					}
					return rv;

				}

				catch (SqlException e)
				{
					ErrorMessage=e.Message;
					return null;
				}

				finally
				{
					Conn.Close();
					Conn.Dispose();
				}
			}//sqlserver
			if(DbServerType.ToLower()=="oracle")
			{

				OracleConnection Conn = new OracleConnection(strConn );
				OracleCommand Cmd = new OracleCommand();

				Cmd.Connection = Conn;

				OracleDataReader myDr;
				Cmd.CommandText =_sql;
				if(paras!=null)
				{
					for(int i=0;i&lt;paras.Count;i++)
					{
						Cmd.Parameters.Add((OracleParameter)paras[i]);
					}
				}


				try
				{
					Conn.Open();

					myDr = Cmd.ExecuteReader();
					ArrayList rowdata = new ArrayList();
					int _fieldcount=myDr.FieldCount;
					Object[] colvalues = new Object[_fieldcount];
					for(int i=0;i&lt;_fieldcount;i++)
					{
						colvalues[i]=myDr.GetName(i);
					}
					if(hastitle)
						rowdata.Add(colvalues);
					while(myDr.Read())
					{
						Object[] values = new Object[_fieldcount];
						myDr.GetValues(values);
						rowdata.Add(values);
						RowsCount++;
					}
					myDr.Close();
					object[,] rv=new object[rowdata.Count,_fieldcount];
					for(int i=0;i&lt;rowdata.Count;i++)
					{
						for(int j=0;j&lt;_fieldcount;j++)
						{
							rv[i,j]=((object[])rowdata[i])[j];
						}
					}
					return rv;

				}

				catch (OracleException e)
				{
					ErrorMessage=e.Message;
					return null;
				}

				finally
				{
					Conn.Close();
					Conn.Dispose();
				}
			}//oracle
            if (DbServerType.ToLower() == "dm8")
            {

                DmConnection Conn = new DmConnection(strConn);
                DmCommand Cmd = new DmCommand();
                Cmd.CommandType = ct;
                Cmd.Connection = Conn;

                DmDataReader myDr;
                Cmd.CommandText = _sql;
                if (paras != null)
                {
                    for (int i = 0; i &lt; paras.Count; i++)
                    {
                        Cmd.Parameters.Add((DmParameter)paras[i]);
                    }
                }


                try
                {
                    Conn.Open();

                    myDr = Cmd.ExecuteReader() as DmDataReader;

                    ArrayList rowdata = new ArrayList();
                    int _fieldcount = myDr.FieldCount;
                    Object[] colvalues = new Object[_fieldcount];
                    for (int i = 0; i &lt; _fieldcount; i++)
                    {
                        colvalues[i] = myDr.GetName(i);
                    }
                    if (hastitle)
                        rowdata.Add(colvalues);
                    while (myDr.Read())
                    {
                        Object[] values = new Object[_fieldcount];
                        myDr.GetValues(values);
                        rowdata.Add(values);
                        RowsCount++;
                    }
                    myDr.Close();
                    object[,] rv = new object[rowdata.Count, _fieldcount];
                    for (int i = 0; i &lt; rowdata.Count; i++)
                    {
                        for (int j = 0; j &lt; _fieldcount; j++)
                        {
                            rv[i, j] = ((object[])rowdata[i])[j];
                        }
                    }
                    return rv;

                }

                catch (DmException e)
                {
                    ErrorMessage = e.Message;
                    return null;
                }

                finally
                {
                    Conn.Close();
                    Conn.Dispose();
                }
            }//dm8
            return null;
}//getreaddata
</code></pre> 
<p></p> 
<p>FillTable 方法实现代码如下：</p> 
<pre><code class="language-cs">ArrayList paras=new ArrayList();
string refSql="";
bool hastitle=false;
System.Data.CommandType ct=System.Data.CommandType.Text;
public void FillTable(HtmlTable tb, FillType ft, bool SpaceInEmptyCell, int MinClearRowsCount, int refStartRowId,int refCopyRowId,bool allowToHTML)
 {
      object[,] ReaderData = GetReaderData("SqlServer","您的连接串","",paras,hastitle,ct);

                if (ReaderData == null &amp;&amp; RowsCount==0)
                {
                    while (tb.Rows.Count &gt; MinClearRowsCount)
                    {
                        tb.Rows.RemoveAt(tb.Rows.Count - 1);
                    }

                    return;
                }
                if (ft == FillType.Automatic || ft==FillType.DynamicRows || ft==FillType.StaticRows)
                {
                    if (ft == FillType.Automatic)
                    {
                        int addcells = ReaderData.GetLength(1) - tb.Rows[0].Cells.Count;
                        for (int i = 0; i &lt; tb.Rows.Count; i++)
                        {
                            for (int j = 0; j &lt; addcells; j++)
                            {
                                HtmlTableCell tc = new HtmlTableCell();
                                if (allowToHTML == true)
                                {
                                    tc.Attributes.Add("ByHTML", "true");
                                }
                                tb.Rows[i].Cells.Add(tc);
                            }
                        }
                        if (tb.Rows.Count == 2)
                        {
                            for (int j = 0; j &lt; ReaderData.GetLength(1); j++)
                            {
                                string _fieldname = ReaderData[0, j].ToString();
                                tb.Rows[0].Cells[j].InnerText = _fieldname;
                            }
                        }
                    }
                    int startRowID = tb.Rows.Count - 1;
                    int copyRowID = 0;
                    if (ft == FillType.StaticRows)
                    {
                        if (HasTitle == true)
                        {
                            startRowID = tb.Rows.Count &gt; 1 ? 1 : 0;
                        }
                        else
                        {
                            startRowID = 0;
                        }
                    }
                    if (refStartRowId != -1) startRowID = refStartRowId;
                    if (refCopyRowId != -1) copyRowID = refCopyRowId;
                    for (int i = (HasTitle == true ? 1 : 0); i &lt; ReaderData.GetLength(0); i++)
                    {
                        if (startRowID&gt;tb.Rows.Count-1) break;
                        for (int j = 0; j &lt; ReaderData.GetLength(1); j++)
                        {
                            if (j &gt; tb.Rows[copyRowID].Cells.Count - 1) break;
                            HtmlTableCell td = tb.Rows[startRowID].Cells[j];
                            if (td.Attributes["ByHTML"] == null)
                            {
                                td.InnerText = ReaderData[i, j].ToString();
                            }
                            else
                            {
                                td.InnerHtml = allowToHTML == true ? (ReaderData[i, j].ToString()) : ReaderData[i, j].ToString();;
                            }
                            

                            if (td.InnerText == "" &amp;&amp; SpaceInEmptyCell == true) td.InnerHtml="&amp;nbsp;";
                        }
                        if (i == ReaderData.GetLength(0)-1) break;
                        if (ft == FillType.Automatic || ft == FillType.DynamicRows)
                        {
                            HtmlTableRow tr = new HtmlTableRow();
                            tb.Rows.Add(tr);
                            for (int k = 0; k &lt; tb.Rows[copyRowID].Cells.Count; k++)
                            {
                                HtmlTableCell prv_tc = tb.Rows[startRowID].Cells[k];
                                HtmlTableCell tc = new HtmlTableCell();
                                tr.Cells.Add(tc);
                                CloneStyles(prv_tc, tc);
                            }
                        }
                        startRowID ++;
                    }
                }
}//fill table
void CloneStyles(HtmlControl obj, HtmlControl newobj)
{
                IEnumerator keys = obj.Style.Keys.GetEnumerator();
                while (keys.MoveNext())
                {
                    String key = (String)keys.Current; newobj.Style[key] = obj.Style[key];
                }
                IEnumerator keys2 = obj.Attributes.Keys.GetEnumerator();
                while (keys2.MoveNext())
                {
                    String key = (String)keys2.Current; newobj.Attributes[key] = obj.Attributes[key];
                }

}</code></pre> 
<h4 id="%E6%A8%A1%E6%9D%BF%E6%A0%B7%E4%BE%8B%E8%BE%93%E5%87%BA">模板样例输出</h4> 
<p>在方法设计的章节里介绍了 FillType （即填充类型的枚举）</p> 
<h5 id="Automatic%20%E6%A8%A1%E5%BC%8F%E5%A1%AB%E5%85%85">Automatic 模式填充</h5> 
<p>全自动填充，表示行、列均不固定，全由SQL查询结果动态输出，仅设置首行首列的样式即可，如下图：</p> 
<p><img alt="" height="239" src="https://images2.imgbox.com/67/ec/M6FTD5ux_o.png" width="1200"></p> 
<p> 前端代码示例 ：</p> 
<pre><code class="language-html">&lt;table id="tjTable" runat="server" align="center" border="1" style="width: 700px; border:1px solid #000000;border-collapse:collapse"&gt;
        &lt;tr&gt;&lt;td&gt;标题&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
         &lt;/tr&gt;
&lt;/table&gt;</code></pre> 
<p>调用示例如下代码：</p> 
<pre><code class="language-cs">string refSQL = "select value,text,sortid from pub_chinaPay order by sortid";
FillTable(tjTable, FillType.Automatic, true, 0, 1, 1);</code></pre> 
<p>输出结果如下图 </p> 
<p><img alt="" height="435" src="https://images2.imgbox.com/21/d5/UmdBEfrd_o.png" width="1200"></p> 
<p>可以看到行列完全由SQL语句决定进行原始输出，行与列均为动态输出 。 </p> 
<h4 id="%E2%80%8B">​</h4> 
<h5 id="DynamicRows%20%E6%A8%A1%E5%BC%8F%E5%A1%AB%E5%85%85">DynamicRows 模式填充</h5> 
<p>动态行填充，表示行输出不固定，已预知列的输出，仅需要设置首行标题列和数据行的样式即可，如下图：</p> 
<p><img alt="" height="231" src="https://images2.imgbox.com/e7/c2/ypiXTgtu_o.png" width="1200"></p> 
<p> 前端代码示例 ：</p> 
<pre><code class="language-html">&lt;table id="tjTable" runat="server" align="center" border="1" style="width: 700px; border:1px solid #000000;border-collapse:collapse"&gt;
        &lt;tr&gt;
            &lt;td&gt;
               状态代码&lt;/td&gt;
            &lt;td&gt;
               状态名称&lt;/td&gt;
            &lt;td&gt;
               排序号&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;</code></pre> 
<p>调用示例如下代码：</p> 
<pre><code class="language-cs">string refSQL = "select value,text,sortid from pub_chinaPay order by sortid";
FillTable(tjTable, FillType.DynamicRows, true, 0, 1, 1);</code></pre> 
<p>输出结果如下图 </p> 
<p><img alt="" height="395" src="https://images2.imgbox.com/c2/6b/bb03MVsQ_o.png" width="1200"></p> 
<p>可以看到行为动态输出，标题列为预期的设置 。 </p> 
<h5 id="StaticRows%20%E6%A8%A1%E5%BC%8F%E5%A1%AB%E5%85%85">StaticRows 模式填充</h5> 
<p>静态填充，表示行、列均固定，由SQL查询结果根据预设输出，可设置每行每列的样式，如下图：</p> 
<p><img alt="" height="433" src="https://images2.imgbox.com/31/95/Afra2bmG_o.png" width="1200"></p> 
<p> 前端代码示例 ：</p> 
<pre><code class="language-html">&lt;table id="tjTable" runat="server" align="center" border="1" style="width: 700px; border:1px solid #000000;border-collapse:collapse"&gt;
        &lt;tr&gt;
            &lt;td&gt;
               状态代码&lt;/td&gt;
            &lt;td&gt;
               状态名称&lt;/td&gt;
            &lt;td&gt;
               排序号&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
            &lt;td&gt;
                &amp;nbsp;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;</code></pre> 
<p>调用示例如下代码：</p> 
<pre><code class="language-cs">string refSQL = "select value,text,sortid from pub_chinaPay order by sortid";
FillTable(tjTable,FillType.StaticRows, true, 0, 1, 1);
</code></pre> 
<p>输出结果如下图 </p> 
<p><img alt="" height="449" src="https://images2.imgbox.com/4a/bf/kYJR2nyY_o.png" width="1200"></p> 
<p>可以看到行有冗余，因此静态行模式仅输出列和行的可见区域，即溢出和不足均不显示 。 </p> 
<h4>​</h4> 
<h3 id="%E5%B0%8F%E7%BB%93">小结</h3> 
<p>关于 HtmlTable 的其它详细操作和介绍，可参照如下链接：</p> 
<p><a class="link-info" href="https://learn.microsoft.com/zh-cn/dotnet/api/system.web.ui.htmlcontrols.htmltable?view=netframework-4.8.1&amp;redirectedfrom=MSDN" rel="nofollow" title="https://learn.microsoft.com/zh-cn/dotnet/api/system.web.ui.htmlcontrols.htmltable?view=netframework-4.8.1&amp;redirectedfrom=MSDN">https://learn.microsoft.com/zh-cn/dotnet/api/system.web.ui.htmlcontrols.htmltable?view=netframework-4.8.1&amp;redirectedfrom=MSDN</a></p> 
<p>关于填充模式，是在实际的应用场景里进行输出 ，比如全动态适合于依赖SQL语句控制度较高的场景，而动态行则是比较常见的一种输出方式，静态行输出则比如我们提供一种填写表格，已经预设好最大行数，为体现整体统一的输出风格而应用。所以，我们可以根据自己的实际需要改造输出 的模式，本示例代码仅供您参考。 </p> 
<p>感谢您的阅读，希望本文能够对您有所帮助。</p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a00d4aab6cdefef04ff2299da7064863/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言中的#和##操作符用法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/39412dc618f90b8311623de0f6333c64/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">华为如何造车？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>