<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[Android]修改应用包名、名称、版本号、Icon、启动页以及环境判断和打包 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/a3deb4237c0098cf5117863c9ff8a84e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="[Android]修改应用包名、名称、版本号、Icon、启动页以及环境判断和打包">
  <meta property="og:description" content="1.修改包名 在Android Studio中更改项目的包名涉及几个步骤：
打开项目结构:
在Android Studio中，确保您处于Android视图模式（在左侧面板顶部有一个下拉菜单可以选择）。
重命名包名:
在项目视图中，找到您的包名（例如com.gamin.learndemo），右键点击它。
选择Refactor &gt; Rename。
在弹出的对话框中，点击Rename Package而不是Rename Directory。
输入新的包名（例如com.gamin.new），然后点击Refactor。
Android Studio会显示一个预览窗口，展示所有更改，确认无误后点击Do Refactor。
更新build.gradle文件:
找到app模块下的build.gradle文件。
修改applicationId为新的包名（com.gamin.new）。
点击Sync Now提示来同步您的项目。
更新清单文件:
打开AndroidManifest.xml文件。
如果有，确保package属性反映了新的包名。
检查代码中的任何硬编码引用:
使用全局搜索（Ctrl &#43; Shift &#43; F）来查找项目中任何硬编码的旧包名引用，并将其更新为新的包名。
清理和重建项目:
在Build菜单中选择Clean Project。
然后选择Rebuild Project。
请注意，如果您的应用程序已经发布到了Google Play，更改包名将意味着您将无法上传更新到现有的应用列表，因为包名是应用在Google Play上的唯一标识符。如果这是您的情况，您需要以新包名发布一个新的应用，并可能需要通知您的用户进行迁移。
2.修改应用名称 在 Android Studio 中，你可以通过修改 `AndroidManifest.xml` 文件或 `res/values/strings.xml` 文件来更改 Android 项目的应用程序名称（APP名称）。
通过修改 `AndroidManifest.xml` 在 `AndroidManifest.xml` 文件中，你可以找到 `&lt;application&gt;` 元素的 `android:label` 属性，该属性定义了应用程序的显示名称。
&lt;application android:icon=&#34;@mipmap/ic_launcher&#34; android:label=&#34;@string/app_name&#34; android:theme=&#34;@style/AppTheme&#34;&gt; &lt;!-- ... --&gt; &lt;/application&gt; 在上面的例子中，`@string/app_name` 引用了 `res/values/strings.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-17T10:36:28+08:00">
    <meta property="article:modified_time" content="2024-04-17T10:36:28+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[Android]修改应用包名、名称、版本号、Icon、启动页以及环境判断和打包</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>1.修改包名</h3> 
<p>在Android Studio中更改项目的包名涉及几个步骤：</p> 
<p><strong>打开项目结构:</strong></p> 
<ul><li> <p>在Android Studio中，确保您处于Android视图模式（在左侧面板顶部有一个下拉菜单可以选择）。</p> </li></ul> 
<p><strong>重命名包名:</strong></p> 
<ul><li> <p>在项目视图中，找到您的包名（例如com.gamin.learndemo），右键点击它。</p> </li><li> <p>选择Refactor &gt; Rename。</p> </li><li> <p>在弹出的对话框中，点击Rename Package而不是Rename Directory。</p> </li><li> <p>输入新的包名（例如com.gamin.new），然后点击Refactor。</p> </li><li> <p>Android Studio会显示一个预览窗口，展示所有更改，确认无误后点击Do Refactor。</p> </li></ul> 
<p><strong>更新build.gradle文件:</strong></p> 
<ul><li> <p>找到app模块下的build.gradle文件。</p> </li><li> <p>修改applicationId为新的包名（com.gamin.new）。</p> </li><li> <p>点击Sync Now提示来同步您的项目。</p> </li></ul> 
<p><strong>更新清单文件:</strong></p> 
<ul><li> <p>打开AndroidManifest.xml文件。</p> </li><li> <p>如果有，确保package属性反映了新的包名。</p> </li></ul> 
<p><strong>检查代码中的任何硬编码引用:</strong></p> 
<ul><li> <p>使用全局搜索（Ctrl + Shift + F）来查找项目中任何硬编码的旧包名引用，并将其更新为新的包名。</p> </li></ul> 
<p><strong>清理和重建项目:</strong></p> 
<ul><li> <p>在Build菜单中选择Clean Project。</p> </li><li> <p>然后选择Rebuild Project。</p> </li></ul> 
<p>请注意，如果您的应用程序已经发布到了Google Play，更改包名将意味着您将无法上传更新到现有的应用列表，因为包名是应用在Google Play上的唯一标识符。如果这是您的情况，您需要以新包名发布一个新的应用，并可能需要通知您的用户进行迁移。</p> 
<p style="text-align:center;"><img alt="" class="left" height="501" src="https://images2.imgbox.com/2e/1e/VoPfg4oI_o.png" width="600"></p> 
<p></p> 
<h3>2.修改应用名称</h3> 
<p>在 Android Studio 中，你可以通过修改 `<strong>AndroidManifest.xml</strong>` 文件或 `<strong>res/values/strings.xml</strong>` 文件来更改 Android 项目的应用程序名称（APP名称）。</p> 
<h4><strong>通过修改 `AndroidManifest.xml`</strong></h4> 
<p>在 `<strong>AndroidManifest.xml</strong>` 文件中，你可以找到 `<strong>&lt;application&gt;</strong>` 元素的 `<strong>android:label</strong>` 属性，该属性定义了应用程序的显示名称。</p> 
<pre><code class="language-Kotlin">&lt;application
    android:icon="@mipmap/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"&gt;
    &lt;!-- ... --&gt;
&lt;/application&gt;</code></pre> 
<p>在上面的例子中，`<strong>@string/app_name</strong>` 引用了 `<strong>res/values/strings.xml</strong>` 文件中的字符串资源。你可以直接修改 `<strong>android:label</strong>` 的值为你想要的应用程序名称。</p> 
<h4><strong>通过修改 `res/values/strings.xml`</strong></h4> 
<p>在 `<strong>res/values/strings.xml</strong>` 文件中，你可以找到应用程序名称的字符串资源.</p> 
<pre><code class="language-Kotlin">&lt;resources&gt;
    &lt;!-- 应用程序名称 --&gt;
    &lt;string name="app_name"&gt;MyApp&lt;/string&gt;
    &lt;!-- ... 其他字符串资源 ... --&gt;
&lt;/resources&gt;</code></pre> 
<p>直接修改 `<strong>&lt;string name="app_name"&gt;MyApp&lt;/string&gt;</strong>` 中的文本为你想要的应用程序名称即可。</p> 
<p>在修改完之后，记得同步项目（点击工具栏上的 "Sync Now" 按钮）以确保修改生效。这样你的 Android 应用程序的名称就会改变了。</p> 
<p></p> 
<h3>3.修改应用版本号</h3> 
<h4>版本号的规则</h4> 
<p>`versionCode` 是一个整数，用于在 Android 设备上标识应用程序的版本。</p> 
<p>`versionName` 是一个字符串，用于显示给用户。</p> 
<p>通常，`versionCode` 应该是递增的，而 `versionName` 可以包含更具描述性的信息。</p> 
<h4>修改 `versionCode` 和 `versionName`</h4> 
<p>1). 打开你的项目，在 Android Studio 中找到 `app` 模块下的 `build.gradle` 文件。</p> 
<p>2). 在 `defaultConfig` 部分，你可以找到 `versionCode` 和 `versionName` 这两个属性。修改这两个属性的值即可更改版本号。</p> 
<pre><code class="language-Kotlin">   android {
       // 其他配置...
       defaultConfig {
           applicationId "com.example.myapp"
           minSdkVersion 16
           targetSdkVersion 30
           versionCode 2  // 修改为你想要的版本号
           versionName "1.1"  // 修改为你想要的版本名
       }
       // 其他配置...
   }</code></pre> 
<p>3). 修改完之后，同步项目（点击工具栏上的 "Sync Now" 按钮）以确保修改生效。</p> 
<p></p> 
<h3 style="background-color:transparent;">4.修改Icon</h3> 
<p>首先，你需要为应用准备一组图标资源。应用图标通常需要多个尺寸以适应不同的设备和屏幕密度。以下是常见的尺寸规格（以像素为单位）：</p> 
<ul><li>mdpi: 48x48</li><li>hdpi: 72x72</li><li>xhdpi: 96x96</li><li>xxhdpi: 144x144</li><li>xxxhdpi: 192x192</li></ul> 
<p>打开应用程序的清单文件AndroidManifest.xml，找到 &lt;application&gt;元素，更新android:icon和android:roundIcon属性，将其指定为新的图标资源。</p> 
<p><img alt="" class="left" height="338" src="https://images2.imgbox.com/1f/9c/kxUNAimM_o.png" width="600"></p> 
<p> </p> 
<h3 style="background-color:transparent;"> 5.设置启动页</h3> 
<h4>(1).资源管理</h4> 
<p>首先，你需要为应用准备一组启动图标资源。启动图标通常需要多个尺寸以适应不同的设备和屏幕密度。</p> 
<h5 style="background-color:transparent;">创建不同屏幕密度的资源目录</h5> 
<p>在 Android 项目中，你应该在 <code>res</code>（资源）目录下创建这些专门用于不同屏幕密度的资源目录。这些目录包括：</p> 
<ul><li><code>drawable-ldpi: </code>低密度, 约 0.75x 基线</li><li><code>drawable-mdpi</code>: 中密度, 基线 1.0x</li><li><code>drawable-hdpi: </code>高密度, 约 1.5x 基线</li><li><code>drawable-xhdpi: </code>超高密度, 约 2.0x 基线</li><li><code>drawable-xxhdpi: </code>超超高密度, 约 3.0x 基线</li><li><code>drawable-xxxhdpi</code>: 超超超高密度, 约 4.0x 基线</li></ul> 
<p>每个目录名后缀代表了目标屏幕密度，这样 Android 系统就可以根据设备的屏幕密度自动选择使用相应目录中的资源。这种方式可以确保图像在不同设备上显示的尺寸正确，且视觉效果最佳。</p> 
<h5 style="background-color:transparent;">通用 drawable 目录</h5> 
<p>你完全可以选择不创建特定于密度的 drawable-ldpi, drawable-mdpi, drawable-hdpi, drawable-xhdpi, drawable-xxhdpi, drawable-xxxhdpi 等目录，而是直接将图像资源放入通用的 drawable 目录中。这种做法在技术上是可行的，但是有一些潜在的问题和权衡，需要你考虑：</p> 
<p><strong>优点：</strong></p> 
<ul><li>简化资源管理：不需要管理多个密度版本的图像，减少资源文件的数量。</li><li>开发效率：减少为不同密度准备和测试图像的工作量。</li></ul> 
<p><strong>缺点：</strong></p> 
<ul><li>性能问题：Android 系统将在运行时对放在 drawable 目录中的图像进行缩放，以适应不同密度的屏幕。这个缩放过程可能会消耗额外的处理时间，特别是在低性能设备上。</li><li>图像质量：自动缩放可能会导致图像在某些设备上显示模糊或失真。</li><li>应用大小和内存使用：使用较大的图像文件可能会使应用的整体大小增加，而且在运行时占用更多的内存，这在资源受限的设备上可能导致性能下降。</li></ul> 
<h5 style="background-color:transparent;">替代方案</h5> 
<ul><li>使用矢量图形（Vector Drawable）：对于可以用矢量图表示的图形，使用矢量图形是一个很好的选择。矢量图形可以在任何屏幕密度上无损缩放，而且文件大小通常比位图小很多。</li><li>限制位图的使用场景：如果你确实需要使用位图，考虑仅对于那些不常变化或对质量要求不高的图像使用通用 drawable 目录，同时为关键的用户界面元素提供适配多种密度的图像。</li></ul> 
<p></p> 
<h4 style="background-color:transparent;">(2).设置启动页</h4> 
<p>在 Android 应用开发中，启动图片通常指的是启动画面（Splash Screen），它是应用启动时展示的第一个屏幕。自 Android 12（API 级别 31）起，Android 推荐使用新的启动画面 API 来创建启动画面，以提供更一致和可定制的用户体验。以下是如何在使用 Kotlin 开发的 Android 应用中设置启动画面的步骤：</p> 
<p>虽然 SplashScreen API 是 Android 12（API 31）引入的，你可以使用兼容库来在低版本上实现类似效果。</p> 
<h5><strong>添加依赖</strong></h5> 
<p>在 build.gradle (Module: app)文件中添加 SplashScreen 兼容库的依赖：</p> 
<pre><code class="language-Kotlin">dependencies {
    implementation 'androidx.core:core-splashscreen:1.0.0'
    // 确保添加其他必要的依赖
}</code></pre> 
<h5>更新主题</h5> 
<p>首先，你需要在你的应用的主题中配置启动画面样式。在 res/values/styles.xml 文件中，你可以添加一个新的主题样式用于启动画面：</p> 
<pre><code class="language-Kotlin">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;resources&gt;
    &lt;style name="Theme.MyApp.Splash" parent="Theme.SplashScreen"&gt;
        &lt;item name="windowSplashScreenBackground"&gt;@color/white&lt;/item&gt;
        &lt;item name="windowSplashScreenAnimatedIcon"&gt;@drawable/splash_icon&lt;/item&gt;
        &lt;item name="windowSplashScreenAnimationDuration"&gt;500&lt;/item&gt;
        &lt;item name="postSplashScreenTheme"&gt;@style/Theme.MyApp&lt;/item&gt;
    &lt;/style&gt;
&lt;/resources&gt;</code></pre> 
<p>在这个样式中：</p> 
<ul><li> <p>windowSplashScreenBackground 设置启动画面的背景颜色。</p> </li><li> <p>windowSplashScreenAnimatedIcon 设置启动画面中的图标。</p> </li><li> <p>windowSplashScreenAnimationDuration 设置动画持续的时间（毫秒）。</p> </li><li> <p>postSplashScreenTheme 指定启动画面之后应用的主题。</p> </li></ul> 
<h5>更新 AndroidManifest.xml</h5> 
<p>接着，需要在 AndroidManifest.xml 中的 &lt;activity&gt; 标签内指定这个主题。通常这是你的启动（主）活动：</p> 
<pre><code class="language-Kotlin">&lt;activity
    android:name=".MainActivity"
    android:exported="true"
    android:theme="@style/Theme.MyApp.Splash"
    &lt;intent-filter&gt;
        &lt;action android:name="android.intent.action.MAIN" /&gt;
        &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;</code></pre> 
<h5>配置启动活动</h5> 
<p>在你的主活动（如 MainActivity）中，使用新的 API 来设置启动画面。在 Kotlin 中，你可以这么做：</p> 
<pre><code class="language-Kotlin">import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
import androidx.core.splashscreen.SplashScreen.Companion.installSplashScreen

class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        // 在 super.onCreate(savedInstanceState) 之前安装启动画面
        installSplashScreen()
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
    }
}</code></pre> 
<p>这里 installSplashScreen() 方法会自动处理启动画面的逻辑。</p> 
<h5>添加资源</h5> 
<p>确保你已经在 res/drawable 目录下放置了启动图标 splash_icon.png，并且在 res/values/colors.xml 中设置了相应的颜色。</p> 
<pre><code class="language-Kotlin">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;resources&gt;

    &lt;color name="white"&gt;#FFFFFF&lt;/color&gt;

&lt;/resources&gt;</code></pre> 
<p></p> 
<h3>6.判断是Debug还是Release环境？</h3> 
<p>类中声明了一个伴生对象 companion object，将checkDebuggable方法声明为静态方法。</p> 
<pre><code class="language-Kotlin">package com.example.testdemo
import android.content.Context
import android.content.pm.ApplicationInfo

class CheckTools() {

    companion object {
        fun checkDebuggable(context: Context): Boolean {

          return 0 != (context.applicationInfo.flags and ApplicationInfo.FLAG_DEBUGGABLE)
        }
    }

}</code></pre> 
<p>如果你在Kotlin类或者函数中遇到Unresolved reference: applicationContext这个错误，那可能是因为你正在尝试在一个非Android组件（如Activity、Service、BroadcastReceiver等）中直接访问applicationContext。在非Android组件中，是不能直接访问applicationContext的。</p> 
<p style="text-align:center;"><img alt="" class="left" height="512" src="https://images2.imgbox.com/99/fc/gB4FrpLT_o.png" width="600"></p> 
<p></p> 
<h3 style="background-color:transparent;">7.打包apk</h3> 
<p>进入目录Build-&gt;Generate Signed Bundle / APK</p> 
<p>官方文档：<a href="https://developer.android.com/studio/publish/app-signing" rel="nofollow" title="https://developer.android.com/studio/publish/app-signing">https://developer.android.com/studio/publish/app-signing</a></p> 
<p style="text-align:center;"><img alt="" class="left" height="307" src="https://images2.imgbox.com/66/75/hCMqMqnU_o.png" width="300"></p> 
<p>选择APK</p> 
<p style="text-align:center;"><img alt="" class="left" height="309" src="https://images2.imgbox.com/49/af/w8wHKL2M_o.png" width="400"></p> 
<p>新建密钥</p> 
<p style="text-align:center;"><img alt="" class="left" height="315" src="https://images2.imgbox.com/75/2a/Ycrqm5vw_o.png" width="400"></p> 
<p style="text-align:center;"><img alt="" class="left" height="407" src="https://images2.imgbox.com/62/51/SESYr2xd_o.png" width="400"></p> 
<p>填写信息完成密钥创建</p> 
<p style="text-align:center;"><img alt="" class="left" height="509" src="https://images2.imgbox.com/4e/6a/41IMq2jf_o.png" width="500"></p> 
<p>选择密钥，进入下一步。</p> 
<p style="text-align:center;"><img alt="" class="left" height="387" src="https://images2.imgbox.com/35/15/7EtzU83A_o.png" width="500"></p> 
<p>选择构建release环境的包</p> 
<p style="text-align:center;"><img alt="" class="left" height="308" src="https://images2.imgbox.com/7f/09/IhifD2OK_o.png" width="400"></p> 
<p>等待打包完成，去项目的release目录拿到apk文件，发给其他用户安装。</p> 
<p style="text-align:center;"><img alt="" class="left" height="206" src="https://images2.imgbox.com/38/59/NdKRaIzI_o.png" width="400"></p> 
<p>我们自己安装APK到真机，直接用Android Studio就行了。</p> 
<p>先将apk拖入目录/storage/sdcard0/Download/upgrade/app-release.apk</p> 
<p style="text-align:center;"><img alt="" class="left" height="510" src="https://images2.imgbox.com/7f/25/t41aCOor_o.png" width="400"></p> 
<p>然后到手机的“文件管理”中搜索apk的名称，选择安装。</p> 
<p style="text-align:center;"><img alt="" class="left" height="400" src="https://images2.imgbox.com/f4/ec/WxXJANVg_o.png" width="200"></p> 
<p>安装成功后，打开APP我可以看到此时为release环境。</p> 
<p style="text-align:center;"><img alt="" class="left" height="400" src="https://images2.imgbox.com/65/01/QT1sET0d_o.png" width="200"></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9a3a60cb19b28c8fa5b4520d6bbbec40/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">推荐几个精致的web UI框架及常用前端UI框架</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cc75ea9312f2d7a9aaafd202ae09e664/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Stable Diffusion教程|图生图局部重绘实战详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>