<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>jenkins 发布服务到linux服务器 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/7ccab28421970a18e8d574dae3ce44e0/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="jenkins 发布服务到linux服务器">
  <meta property="og:description" content="1.环境准备
1.1 需要一台已经部署了jenkins的服务器，上面已经集成好了，jdk、maven、nodejs、git等基础的服务。
1.2 需要安装插件 pusblish over ssh
1.3 准备一台额外的linux服务器，安装好jdk
2.流程描述
2.1 配置jenkins，包括pushlish over ssh，这里就不过多介绍maven、git、jdk等的配置了，这些全部在全局工具配置里面配置就行了。
2.2 创建jenkins任务，配置相关脚本。
2.3 部署服务到另一台服务器。
3.jenkins配置
3.1 配置publish over ssh
打开系统配置，找到 publish over ssh配置项
这里的参数重点说下：
name：ssh的名称。
hostname：主机ip。
username：用户名。
remote directory：这个主要是指你远程主机的目标目录，说白了就是你要把你打好的包，放到哪个目录下，这里你可以配根目录，也可以直接配到最终目录，可以在创建任务时与其进行组装。
点击高级进行密码配置
至此，pushlish over ssh 配置完成。
3.2 创建jenkins任务
3.2.1创建一个自由风格的软件项目
git配置就不过多描述了，创建凭证，配置git地址，就行了
在构建环境中的项目里，选择图中勾选的这个，这个通过英文大概意思就行，在执行构建之前，可以通过ssh执行命令，我这里配置了一个执行脚本停掉java项目的命令。
在name中选择在上一步创建的publish over ssh。
在exec command 配置命令。
name下的高级 verbose output in console，可以勾上，用来查看脚本的执行日志。
3.2.2 配置打包等的执行命令
在build steps 中配置相关脚本
3.2.2 配置打包后要执行的相关命令
点击增加构建步骤
选择send files or execite commands over ssh.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-06-30T20:47:12+08:00">
    <meta property="article:modified_time" content="2024-06-30T20:47:12+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">jenkins 发布服务到linux服务器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1.环境准备</p> 
<p>        1.1 需要一台已经部署了jenkins的服务器，上面已经集成好了，jdk、maven、nodejs、git等基础的服务。</p> 
<p>        1.2 需要安装插件 pusblish over ssh</p> 
<p><img alt="" height="220" src="https://images2.imgbox.com/20/23/tbdrP7V3_o.png" width="1200"></p> 
<p>        1.3 准备一台额外的linux服务器，安装好jdk</p> 
<p>2.流程描述</p> 
<p>        2.1 配置jenkins，包括pushlish over ssh，这里就不过多介绍maven、git、jdk等的配置了，这些全部在全局工具配置里面配置就行了。</p> 
<p>        2.2 创建jenkins任务，配置相关脚本。</p> 
<p>        2.3 部署服务到另一台服务器。</p> 
<p>3.jenkins配置</p> 
<p>        3.1 配置publish over ssh</p> 
<p>        打开系统配置，找到 publish over ssh配置项</p> 
<p>        <img alt="" height="1078" src="https://images2.imgbox.com/7e/7b/VMuVGeW7_o.png" width="1200"></p> 
<p>        这里的参数重点说下：</p> 
<p>        name：ssh的名称。</p> 
<p>        hostname：主机ip。</p> 
<p>        username：用户名。</p> 
<p>        remote directory：这个主要是指你远程主机的目标目录，说白了就是你要把你打好的包，放到哪个目录下，这里你可以配根目录，也可以直接配到最终目录，可以在创建任务时与其进行组装。</p> 
<p>        点击高级进行密码配置</p> 
<p>        <img alt="" height="1186" src="https://images2.imgbox.com/57/b7/DBX8r31i_o.png" width="1200"></p> 
<p>        至此，pushlish over ssh 配置完成。</p> 
<p>        3.2 创建jenkins任务</p> 
<p>        3.2.1创建一个自由风格的软件项目</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/97/85/mmGWLl7f_o.png" width="1200"></p> 
<p>        git配置就不过多描述了，创建凭证，配置git地址，就行了</p> 
<p>        在构建环境中的项目里，选择图中勾选的这个，这个通过英文大概意思就行，在执行构建之前，可以通过ssh执行命令，我这里配置了一个执行脚本停掉java项目的命令。</p> 
<p>        在name中选择在上一步创建的publish over ssh。</p> 
<p>        在exec command 配置命令。</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/36/a1/FHS3KwOq_o.png" width="1200"></p> 
<p><img alt="" height="794" src="https://images2.imgbox.com/80/83/lUXCmaCn_o.png" width="1200"></p> 
<p>        name下的高级 verbose output in console，可以勾上，用来查看脚本的执行日志。</p> 
<p><img alt="" height="1188" src="https://images2.imgbox.com/73/90/sWWJIv6z_o.png" width="1200"></p> 
<p>        3.2.2 配置打包等的执行命令</p> 
<p>        在build steps 中配置相关脚本</p> 
<p><img alt="" height="822" src="https://images2.imgbox.com/80/52/KBA1yRiL_o.png" width="1200"></p> 
<p>        3.2.2 配置打包后要执行的相关命令</p> 
<p>        点击增加构建步骤</p> 
<p>        <img alt="" height="262" src="https://images2.imgbox.com/78/ec/f5pddb6E_o.png" width="1200"></p> 
<p>        选择send files or execite commands over ssh.</p> 
<p>        name: 3.1中创建的 publish over ssh</p> 
<p>        source files：源文件，即你打包的文件，点击边上的问好，有英文解释，大概意思就是从jenkins的workspace种开始查找，根据你配置的通配符找到目标文件。</p> 
<p>        remove prefix：这个看不天没理解啥意思，但是大概知道怎么用，比如java你就配置到target，前端的这块就不用配置了，注意这块别弄错了，弄错了，会导致后续的传包啥的不执行。</p> 
<p>        remote directory：这个就简单了就是远程主机的目录，也就是你要把包放哪里，如果你在创建publish over ssh的时候直接配好了，这里也不需要填，如果你就配置了一级目录，你也可以在这里接着配置。</p> 
<p>        exec command：在远程主机要执行的命令，可以在这个地方直接配置启动等命令，也可以在后面的配置中增加。</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/47/89/swjmXvSD_o.png" width="1200"></p> 
<p><img alt="" height="998" src="https://images2.imgbox.com/bb/ad/qeGKRlFN_o.png" width="1200"></p> 
<p>        3.2.3 传完包之后，在执行启动脚本。</p> 
<p>        在构建后操作中，选择send build artifacts over ssh</p> 
<p><img alt="" height="444" src="https://images2.imgbox.com/4b/21/qvYRjs5M_o.png" width="1200"></p> 
<p>        选择创建好的publish over ssh。</p> 
<p>        在exec command 中配置要执行的脚本。</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/d2/3a/4qguAXk6_o.png" width="1200"></p> 
<p>        至此，远程部署的所有步骤就配置好了。</p> 
<p>        </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0be27158e3c5fda961c080fed1aecc87/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">完美世界|单机版合集（共22个版本）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/56bdb6672c46741005a2c17ae7a8e181/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">百亿级存储架构： ElasticSearch&#43;HBase 海量存储架构与实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>