<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python-can库的使用（1）——简介与安装 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c82903d7f520f2e85c947ab0349a680e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python-can库的使用（1）——简介与安装">
  <meta property="og:description" content="🙆‍♂️我是纯良思安，爱技术、爱分享，更爱生活🙆‍♂️
💖喜欢的朋友可以关注一下，下次更新不迷路💖
文章目录
1、简介
1.1 主要功能
1.2 官方库文档描述
2、安装
2.1、GNU/Linux 依赖项
2.2、Windows 依赖项
Kvaser
PCAN
IXXAT
NI-CAN
neoVI
Vector
CANtact
CanViewer
在开发模式下安装Python-can
前言 python-can是一个Python库，用于提供Controller Area Network (CAN)接口的支持，允许Python脚本与CAN网络进行交互。它是一个开源库，旨在使得与CAN设备和网络通信变得简单易行。CAN是一种广泛使用的、低成本、高可靠性的网络协议，常见于汽车电子、工业自动化以及其他需要电子设备之间进行可靠通信的领域。
1、简介 1.1 主要功能 发送和接收CAN消息：最基本的功能是能够在CAN网络上发送和接收数据包。python-can提供了简单的API来执行这些操作，无论是简单的消息传递还是更复杂的基于事件的消息处理。
多种硬件支持：python-can支持多种CAN接口硬件，包括但不限于SocketCAN（Linux上的原生CAN驱动）、PCAN、Vector CAN设备等。这意味着你可以使用相同的库代码与不同的硬件通信。
记录和回放CAN消息：python-can可以记录CAN总线上的通信，并将其保存到日志文件中（例如BLF、ASC、CSV格式）。这对于调试、分析通信问题或者测试非常有用。同样，它也支持从这些文件中回放消息到CAN网络。
高级消息过滤：python-can允许对传入的消息进行过滤，这样应用程序只需要处理感兴趣的消息。这对于减少不必要的处理和提高效率非常有帮助。
网络抽象和模拟：除了真实的硬件通信外，python-can还提供了网络抽象层，允许创建虚拟的CAN网络，以便于开发和测试，而不需要实际的硬件设备。
跨平台：尽管某些特定的硬件接口或功能可能依赖于操作系统，但python-can本身旨在跨平台运行，支持Linux、Windows、macOS等。
丰富的文档和社区支持：作为一个活跃的开源项目，python-can拥有详细的文档和一个活跃的社区，这对于解决问题和学习如何有效使用库非常有帮助。
1.2 官方库文档描述 官方python-can库文档链接如下：
python-can 4.3.1 documentation
根据文档描述：
python can库为python提供控制器局域网支持，为不同的硬件设备提供通用抽象，以及一套用于在can总线上发送和接收消息的实用程序。
python可以在任何python运行的地方运行；从具有商用CAN的高功率计算机到USB设备，再到运行linux的低功率设备，如BeagleBone或RaspberryPi。
被动记录 CAN 总线上发生的情况。 例如，使用 OBD-II 端口监控商用车辆。测试通过 CAN 交互的硬件。 在现代汽车、摩托车、船只甚至轮椅中发现的模块已经使用这个库从 Python 中测试了组件。在回路中对新的硬件模块或软件算法进行原型设计。 轻松与现有总线交互。创建虚拟模块以原型 CAN 总线通信。 下面是一个简单的示例，用于使用python-can发送单帧报文到总线：
#!/usr/bin/env python &#34;&#34;&#34; This example shows how sending a single message works.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-19T14:59:57+08:00">
    <meta property="article:modified_time" content="2024-04-19T14:59:57+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python-can库的使用（1）——简介与安装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>🙆‍♂️我是纯良思安，爱技术、爱分享，更爱生活🙆‍♂️</p> 
 <p>💖喜欢的朋友可以关注一下，下次更新不迷路💖</p> 
</blockquote> 
<hr> 
<p id="main-toc"><strong>文章目录</strong></p> 
<p id="1%E3%80%81%E7%AE%80%E4%BB%8B-toc" style="margin-left:0px;"><a href="#1%E3%80%81%E7%AE%80%E4%BB%8B" rel="nofollow">1、简介</a></p> 
<p id="1.1%20%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD-toc" style="margin-left:40px;"><a href="#1.1%20%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD" rel="nofollow">1.1 主要功能</a></p> 
<p id="1.2%20%E5%AE%98%E6%96%B9%E5%BA%93%E6%96%87%E6%A1%A3%E6%8F%8F%E8%BF%B0-toc" style="margin-left:40px;"><a href="#1.2%20%E5%AE%98%E6%96%B9%E5%BA%93%E6%96%87%E6%A1%A3%E6%8F%8F%E8%BF%B0" rel="nofollow">1.2 官方库文档描述</a></p> 
<p id="2%E3%80%81%E5%AE%89%E8%A3%85-toc" style="margin-left:0px;"><a href="#2%E3%80%81%E5%AE%89%E8%A3%85" rel="nofollow">2、安装</a></p> 
<p id="2.1%E3%80%81GNU%2FLinux%20%E4%BE%9D%E8%B5%96%E9%A1%B9-toc" style="margin-left:40px;"><a href="#2.1%E3%80%81GNU%2FLinux%20%E4%BE%9D%E8%B5%96%E9%A1%B9" rel="nofollow">2.1、GNU/Linux 依赖项</a></p> 
<p id="2.2%E3%80%81Windows%20%E4%BE%9D%E8%B5%96%E9%A1%B9-toc" style="margin-left:40px;"><a href="#2.2%E3%80%81Windows%20%E4%BE%9D%E8%B5%96%E9%A1%B9" rel="nofollow">2.2、Windows 依赖项</a></p> 
<p id="Kvaser-toc" style="margin-left:80px;"><a href="#Kvaser" rel="nofollow">Kvaser</a></p> 
<p id="PCAN-toc" style="margin-left:80px;"><a href="#PCAN" rel="nofollow">PCAN</a></p> 
<p id="IXXAT-toc" style="margin-left:80px;"><a href="#IXXAT" rel="nofollow">IXXAT</a></p> 
<p id="NI-CAN-toc" style="margin-left:80px;"><a href="#NI-CAN" rel="nofollow">NI-CAN</a></p> 
<p id="neoVI-toc" style="margin-left:80px;"><a href="#neoVI" rel="nofollow">neoVI</a></p> 
<p id="Vector-toc" style="margin-left:80px;"><a href="#Vector" rel="nofollow">Vector</a></p> 
<p id="CANtact-toc" style="margin-left:80px;"><a href="#CANtact" rel="nofollow">CANtact</a></p> 
<p id="CanViewer-toc" style="margin-left:80px;"><a href="#CanViewer" rel="nofollow">CanViewer</a></p> 
<p id="%E5%9C%A8%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8B%E5%AE%89%E8%A3%85Python-can-toc" style="margin-left:80px;"><a href="#%E5%9C%A8%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8B%E5%AE%89%E8%A3%85Python-can" rel="nofollow">在开发模式下安装Python-can</a></p> 
<hr id="hr-toc"> 
<h2>前言</h2> 
<p><img alt="" height="137" src="https://images2.imgbox.com/1f/f2/nZL2aT2B_o.png" width="367"></p> 
<p><code>  python-can</code>是一个Python库，用于提供Controller Area Network (CAN)接口的支持，允许Python脚本与CAN网络进行交互。它是一个开源库，旨在使得与CAN设备和网络通信变得简单易行。CAN是一种广泛使用的、低成本、高可靠性的网络协议，常见于汽车电子、工业自动化以及其他需要电子设备之间进行可靠通信的领域。</p> 
<h2>1、简介</h2> 
<h3 id="1.1%20%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD">1.1 主要功能</h3> 
<ol><li> <p><strong>发送和接收CAN消息</strong>：最基本的功能是能够在CAN网络上发送和接收数据包。<code>python-can</code>提供了简单的API来执行这些操作，无论是简单的消息传递还是更复杂的基于事件的消息处理。</p> </li><li> <p><strong>多种硬件支持</strong>：<code>python-can</code>支持多种CAN接口硬件，包括但不限于SocketCAN（Linux上的原生CAN驱动）、PCAN、Vector CAN设备等。这意味着你可以使用相同的库代码与不同的硬件通信。</p> </li><li> <p><strong>记录和回放CAN消息</strong>：<code>python-can</code>可以记录CAN总线上的通信，并将其保存到日志文件中（例如BLF、ASC、CSV格式）。这对于调试、分析通信问题或者测试非常有用。同样，它也支持从这些文件中回放消息到CAN网络。</p> </li><li> <p><strong>高级消息过滤</strong>：<code>python-can</code>允许对传入的消息进行过滤，这样应用程序只需要处理感兴趣的消息。这对于减少不必要的处理和提高效率非常有帮助。</p> </li><li> <p><strong>网络抽象和模拟</strong>：除了真实的硬件通信外，<code>python-can</code>还提供了网络抽象层，允许创建虚拟的CAN网络，以便于开发和测试，而不需要实际的硬件设备。</p> </li><li> <p><strong>跨平台</strong>：尽管某些特定的硬件接口或功能可能依赖于操作系统，但<code>python-can</code>本身旨在跨平台运行，支持Linux、Windows、macOS等。</p> </li><li> <p><strong>丰富的文档和社区支持</strong>：作为一个活跃的开源项目，<code>python-can</code>拥有详细的文档和一个活跃的社区，这对于解决问题和学习如何有效使用库非常有帮助。</p> </li></ol> 
<h3 id="1.2%20%E5%AE%98%E6%96%B9%E5%BA%93%E6%96%87%E6%A1%A3%E6%8F%8F%E8%BF%B0">1.2 官方库文档描述</h3> 
<p>官方python-can库文档链接如下：</p> 
<p><a href="https://python-can.readthedocs.io/" rel="nofollow" title="python-can 4.3.1 documentation">python-can 4.3.1 documentation</a></p> 
<p>根据文档描述：</p> 
<p>python can库为python提供控制器局域网支持，为不同的硬件设备提供通用抽象，以及一套用于在can总线上发送和接收消息的实用程序。</p> 
<p>python可以在任何python运行的地方运行；从具有商用CAN的高功率计算机到USB设备，再到运行linux的低功率设备，如BeagleBone或RaspberryPi。</p> 
<ul><li>被动记录 CAN 总线上发生的情况。 例如，使用 OBD-II 端口监控商用车辆。</li><li>测试通过 CAN 交互的硬件。 在现代汽车、摩托车、船只甚至轮椅中发现的模块已经使用这个库从 Python 中测试了组件。</li><li>在回路中对新的硬件模块或软件算法进行原型设计。 轻松与现有总线交互。</li><li>创建虚拟模块以原型 CAN 总线通信。</li></ul> 
<p>下面是一个简单的示例，用于使用python-can发送单帧报文到总线：</p> 
<pre><code>#!/usr/bin/env python

"""
This example shows how sending a single message works.
"""

import can


def send_one():
    """Sends a single message."""

    # this uses the default configuration (for example from the config file)
    # see https://python-can.readthedocs.io/en/stable/configuration.html
    with can.Bus() as bus:
        # Using specific buses works similar:
        # bus = can.Bus(interface='socketcan', channel='vcan0', bitrate=250000)
        # bus = can.Bus(interface='pcan', channel='PCAN_USBBUS1', bitrate=250000)
        # bus = can.Bus(interface='ixxat', channel=0, bitrate=250000)
        # bus = can.Bus(interface='vector', app_name='CANalyzer', channel=0, bitrate=250000)
        # ...

        msg = can.Message(
            arbitration_id=0xC0FFEE, data=[0, 25, 0, 1, 3, 1, 4, 1], is_extended_id=True
        )

        try:
            bus.send(msg)
            print(f"Message sent on {bus.channel_info}")
        except can.CanError:
            print("Message NOT sent")


if __name__ == "__main__":
    send_one()</code></pre> 
<h2 id="2%E3%80%81%E5%AE%89%E8%A3%85">2、安装</h2> 
<p>可以直接使用pip install进行安装：</p> 
<pre><code>$ pip install python-can</code></pre> 
<p>如果你希望与某些硬件连接，可能还必须安装平台依赖项。许多接口可以与python同时安装它们的依赖项，例如接口serial包括pyserial依赖项，该依赖项可以与serial extra一起安装：</p> 
<pre><code>$ pip install python-can[serial]</code></pre> 
<h3 id="2.1%E3%80%81GNU%2FLinux%20%E4%BE%9D%E8%B5%96%E9%A1%B9">2.1、GNU/Linux 依赖项</h3> 
<p>合理地说，目前的Linux内核（2.6.25或更新版本）具有socketcan的实现。如果使用python 3.3或更高版本调用此版本的python can，将直接使用socketcan，否则该接口将通过ctypes使用。</p> 
<h3 id="2.2%E3%80%81Windows%20%E4%BE%9D%E8%B5%96%E9%A1%B9">2.2、Windows 依赖项</h3> 
<h4 id="Kvaser"><strong><span style="color:#000000;"><span style="background-color:#ffffff;">Kvaser</span></span></strong></h4> 
<ul><li>使用Kvaser CANLib SDK作为后端进行安装 python-can</li><li>安装Kvaser最新的Windows CANLib驱动程序：<a href="https://www.kvaser.com/download/" rel="nofollow" title="Kvaser’s latest Windows CANLib drivers">Kvaser’s latest Windows CANLib drivers</a>.</li><li>测试Kvaser自己的工具是否正常工作，以确保驱动程序安装正确，硬件是否正常工作。</li></ul> 
<h4 id="PCAN"><strong><span style="color:#000000;"><span style="background-color:#ffffff;">PCAN</span></span></strong></h4> 
<p>下载并安装最新驱动程序： </p> 
<ul><li><a class="reference external" href="https://www.peak-system.com/Downloads.76.0.html?&amp;L=1" rel="nofollow" title="Windows">Windows</a> (also supported on <em>Cygwin</em>)</li><li><a class="reference external" href="https://www.peak-system.com/Downloads.76.0.html?&amp;L=1" rel="nofollow" title="Linux">Linux</a> (<a class="reference external" href="https://www.peak-system.com/fileadmin/media/linux/index.htm" rel="nofollow" title="also works without">also works without</a>, see also <a class="reference internal" href="https://python-can.readthedocs.io/en/stable/interfaces/pcan.html#pcandoc-linux-installation" rel="nofollow" title="Linux installation">Linux installation</a>)</li><li><a class="reference external" href="https://www.mac-can.com/" rel="nofollow" title="macOS">macOS</a></li></ul> 
<p>请注意，PCANBasic API时间戳从系统启动开始计算秒数。要将这些时间转换为epoch时间，将使用正常运行时间库。如果不可用，则以系统启动后的秒数返回时间。要安装正常运行时间库，请运行.<span style="background-color:#fbd4d0;">pip install python-can[pcan]</span></p> 
<p>如果安装了 <a href="https://github.com/mhammond/pywin32" title="Python for Windows Extensions">Python for Windows Extensions</a>库，则此库可以利用该库。它将用于获得新消息的通知，而不是使用CPU密集型轮询。</p> 
<h4 id="IXXAT"><strong><span style="color:#000000;"><span style="background-color:#ffffff;">IXXAT</span></span></strong></h4> 
<ul><li>要使用IXXAT VCI V3或V4 SDK作为后端进行安装：python可以</li><li>安装<a href="https://www.ixxat.com/technical-support/resources/downloads-and-documentation?ordercode=1.01.0281.12001" rel="nofollow" title="IXXAT’s latest Windows VCI V3 SDK or VCI V4 SDK (Win10) drivers ">IXXAT’s latest Windows VCI V3 SDK or VCI V4 SDK (Win10) drivers </a>驱动程序。</li><li>测试IXXAT自己的工具（即MiniMon）是否正常工作，以确保驱动程序安装正确，硬件是否正常工作。</li></ul> 
<h4 id="NI-CAN"><strong><span style="color:#000000;"><span style="background-color:#ffffff;">NI-CAN</span></span></strong></h4> 
<ul><li> 下载并安装<a href="https://www.ni.com/de-de/support/downloads/drivers" rel="nofollow" title="National Instruments">National Instruments</a></li><li>需要注意的是，目前该驱动程序仅支持Windows上的32位Python</li></ul> 
<h4 id="neoVI"><strong><span style="color:#000000;"><span style="background-color:#ffffff;">neoVI</span></span></strong></h4> 
<ul><li>查看<a href="https://python-can.readthedocs.io/en/stable/interfaces/neovi.html" rel="nofollow" title="Intrepid Control Systems neoVI">Intrepid Control Systems neoVI</a>. </li></ul> 
<h4 id="Vector"><strong><span style="color:#000000;"><span style="background-color:#ffffff;">Vector</span></span></strong></h4> 
<p>要使用XL驱动程序库作为后端安装python-can </p> 
<ol><li>安装Vector硬件接口的<a href="https://www.vector.com/latest_driver" rel="nofollow" title="最新驱动">最新驱动</a> </li><li>安装XL驱动程序库<a href="https://www.vector.com/xl-lib/11/" rel="nofollow" title="XL Driver Library">XL Driver Library</a> ，或复制<code><span style="background-color:#fbd4d0;">vxlapi.dll</span>和</code><code><span style="background-color:#fbd4d0;">vxlapi64.dll</span></code>到您的工作目录中</li><li>使用Vector Hardware Configuration给你的应用程序分配通道</li></ol> 
<h4 id="CANtact"><strong><span style="color:#000000;"><span style="background-color:#ffffff;">CANtact</span></span></strong></h4> 
<p>CANtact支持Linux、Windows和macOS。要使用CANtact驱动程序作为后端安装python可-can:</p> 
<pre><code>python3 -m pip install "python-can[cantact]"</code></pre> 
<p>如果已经安装，则可以单独安装CANtact后端</p> 
<pre><code>pip install cantact</code></pre> 
<p>更多CANtact相关文档，可以查看 <a href="https://cantact.io/" rel="nofollow" title="cantact.io">cantact.io</a></p> 
<h4 id="CanViewer"><strong><span style="color:#000000;"><span style="background-color:#ffffff;">CanViewer</span></span></strong></h4> 
<p>python-can支持运行<span style="background-color:#fbd4d0;">python -m can.viewer</span>显示一个简单的CAN viewer 终端应用程序。在Windows上，这取决于Windows curses库，该库可以通过以下方式安装：</p> 
<pre><code>python -m pip install "python-can[viewer]"</code></pre> 
<h4 id="%E5%9C%A8%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%B8%8B%E5%AE%89%E8%A3%85Python-can"><strong><span style="color:#000000;"><span style="background-color:#ffffff;">在开发模式下安装Python-can</span></span></strong></h4> 
<p>此软件包的“开发”安装允许你在本地进行更改或从Git存储库中拉取更新并使用它们，而无需重新安装。下载或克隆源存储库，然后：<a class="has-card" href="https://github.com/hardbyte/python-can" title="GitHub - hardbyte/python-can: The can package provides controller area network support for Python developers"><span class="link-card-box"><span class="link-title">GitHub - hardbyte/python-can: The can package provides controller area network support for Python developers</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/7a/97/FYOU1Rhh_o.png" alt="icon-default.png?t=N7T8">https://github.com/hardbyte/python-can</span></span></a></p> 
<pre><code>python setup.py develop</code></pre> 
<h2></h2> 
<p></p> 
<hr> 
<blockquote> 
 <p>🎈如果文章对您有帮助，您可以“点赞、收藏、关注”，这也是我创作动力的源泉🎈<br> 💘感谢支持💘</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8a7d3bd5dffbeed9b7210d3ec3de6d31/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python请求模块requests如何添加代理ip</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c58761cdc0ebb446dcea064e62e1161c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">孟德尔随机化（三）—— 再也不用担心网络或其他各种报错啦 | 从数据库下载数据到本地的数据处理方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>