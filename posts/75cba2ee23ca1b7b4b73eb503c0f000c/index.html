<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>1.Flink1.19、Flink1.18源码编译及本地运行 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/75cba2ee23ca1b7b4b73eb503c0f000c/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="1.Flink1.19、Flink1.18源码编译及本地运行">
  <meta property="og:description" content="本节课核心：教会大家如何编译flink以及本地运行Standalone 1.环境准备 本地需要安装
idea(intelliJ IDEA 2023.3.4)
git(Git-2.34.1-64-bit.exe)
maven(3.8.8)
jdk(1.8)
scala(2.12.7)
2.下载源码 2.1.1 命令行方式
下载代码请复制以下命令到终端执行(本地需要安装git)
git clone https://gitee.com/apache/flink.git
2.1.2 idea方式 1.点击idea File—&gt;New—&gt;Project from Version……
2.url：https://gitee.com/apache/flink.git
Directory:选择要存放的目录
点击clone
4.打开项目的时候勾选Trust projects
2.1.3修改jar下载路径
1.idea打开项目修改一下Maven下载路径，默认下载到C盘
注意：只需要修改maven 中的 Local repository，默认会在C盘，其他不用修改
2.1.4.修改分支地址为flink1.19 1.切换分支，首次需要Fetch一下
2.选择release-1.19分支
3.Checkout检出
2.1.5.设置jdk版本 1.点击File—&gt; Project Structure—&gt;Project设置Jdk版本（如下图）
注意：设置JDK版本1.8或者1.8以后
2.1.6.设置scala版本 1.点击File—&gt; Project Structure—&gt;Platfrom Settings —&gt; Global Libraries—&gt;ScalaSdk 设置scala版本（如下图）
2.Choose Modules中Ctrl&#43;A选择所有的模块。
3.源码编译 1.跳过测试、勾选fast
2.clean 先清除一下
3.install 开始打包
4.如果每个模块都是Success,那就代表打包成功
4.启动StandaloneSession模式 4.1.环境配置 1.创建两个文件夹a_lib、a_conf，方便后面使用
2.源码编译完毕后在flink-dist下会有配置文件以及编译后的jar包
3.将F:\new\flink\flink-dist\target\flink-1.19-SNAPSHOT-bin\flink-1.19-SNAPSHOT\lib，lib下的jar拷贝到我们创建的a_lib下
将F:\new\flink\flink-dist\target\flink-1.19-SNAPSHOT-bin\flink-1.19-SNAPSHOT\conf下的配置文件拷贝到我们创建的a_conf下
4.修改config.yaml
操作步骤如下图">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-04-11T10:30:06+08:00">
    <meta property="article:modified_time" content="2024-04-11T10:30:06+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">1.Flink1.19、Flink1.18源码编译及本地运行</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="text-align:center;"><img alt="" src="https://images2.imgbox.com/fc/e4/uemaDJFL_o.png"></h2> 
<h2><strong>本节课核心：教会大家如何编译flink</strong><strong>以及本地运行Standalone</strong></h2> 
<h2><strong>1.环境准备</strong></h2> 
<p>本地需要安装</p> 
<p>idea(intelliJ IDEA 2023.3.4)</p> 
<p>git(Git-2.34.1-64-bit.exe)</p> 
<p>maven(3.8.8)</p> 
<p>jdk(1.8)</p> 
<p>scala(2.12.7)</p> 
<h2><strong>2.下载</strong><strong>源码</strong></h2> 
<p><strong>2.1.1 命令行方式</strong></p> 
<p>下载代码请复制以下命令到终端执行(本地需要安装git)</p> 
<pre></pre> 
<p><code>git clone https://gitee.com/apache/flink.git</code></p> 
<p><img alt="" height="187" src="https://images2.imgbox.com/88/37/VFksNhID_o.png" width="746"></p> 
<h2><img alt="" height="190" src="https://images2.imgbox.com/a2/ac/CRi6iQAg_o.png" width="642"></h2> 
<h2></h2> 
<h2><strong>2.1.2 idea方式</strong></h2> 
<p>1.点击idea File—&gt;New—&gt;Project from Version……<img alt="" height="185" src="https://images2.imgbox.com/79/d4/8oIJFZ91_o.png" width="852"></p> 
<p>2.url：https://gitee.com/apache/flink.git</p> 
<p>Directory:选择要存放的目录</p> 
<p>点击clone</p> 
<p><img alt="" height="804" src="https://images2.imgbox.com/aa/71/JafQvZWt_o.png" width="1011"></p> 
<p>4.打开项目的时候勾选Trust projects</p> 
<p><img alt="" height="327" src="https://images2.imgbox.com/9a/58/jMqMyaZC_o.png" width="711"></p> 
<p><strong>2.1.3修改jar下载路径</strong></p> 
<p>1.idea打开项目修改一下Maven下载路径，默认下载到C盘</p> 
<p><img alt="" height="397" src="https://images2.imgbox.com/a7/7d/pvSR0fQK_o.png" width="1166"></p> 
<p><img alt="" height="892" src="https://images2.imgbox.com/5b/0b/393d80iq_o.png" width="1200"></p> 
<p>注意：只需要修改maven 中的 Local repository，默认会在C盘，其他不用修改</p> 
<h2><strong>2.1.4.修改分支地址为flink1.19</strong></h2> 
<p>1.切换分支，首次需要Fetch一下<img alt="" height="510" src="https://images2.imgbox.com/a1/65/dUNIjlG0_o.png" width="726"></p> 
<p>2.选择release-1.19分支</p> 
<p>3.Checkout检出<img alt="" height="597" src="https://images2.imgbox.com/41/01/o7KDlQse_o.png" width="1121"></p> 
<p></p> 
<h2><strong>2.1.5.设置jdk版本</strong></h2> 
<p>1.点击File—&gt; Project Structure—&gt;Project设置Jdk版本（如下图）</p> 
<p><img alt="" height="447" src="https://images2.imgbox.com/fe/e4/TdNEzrIb_o.png" width="1105"></p> 
<p>注意：设置JDK版本1.8或者1.8以后</p> 
<p></p> 
<h2><strong>2.1.6.设置scala版本</strong></h2> 
<p>1.点击File—&gt; Project Structure—&gt;Platfrom Settings —&gt; Global Libraries—&gt;ScalaSdk 设置scala版本（如下图）<img alt="" height="390" src="https://images2.imgbox.com/2c/13/1Yw1YUp8_o.png" width="641"><img alt="" height="916" src="https://images2.imgbox.com/0a/2a/3YZAIeUf_o.png" width="1200"></p> 
<p>2.Choose Modules中Ctrl+A选择所有的模块。<img alt="" height="430" src="https://images2.imgbox.com/4e/3d/MH8HrziV_o.png" width="755"></p> 
<h2><strong>3.源码编译</strong></h2> 
<p>1.跳过测试、勾选fast<img alt="" height="321" src="https://images2.imgbox.com/13/60/5f1dO7ua_o.png" width="625"></p> 
<p>2.clean 先清除一下</p> 
<p><img alt="" height="361" src="https://images2.imgbox.com/25/a7/8sSX9Jpx_o.png" width="1200"><img alt="" height="544" src="https://images2.imgbox.com/d4/1b/4vMe24dj_o.png" width="1200"></p> 
<p>3.install 开始打包<img alt="" height="544" src="https://images2.imgbox.com/04/12/SInmRl8Q_o.png" width="1200"></p> 
<p>4.如果每个模块都是Success,那就代表打包成功<img alt="" height="560" src="https://images2.imgbox.com/96/c6/msOTHuZW_o.png" width="1200"></p> 
<h2><strong>4.启动StandaloneSession模式</strong></h2> 
<h3>4.1.环境配置</h3> 
<p>1.创建两个文件夹a_lib、a_conf，方便后面使用</p> 
<p>2.源码编译完毕后在flink-dist下会有配置文件以及编译后的jar包</p> 
<p>3.将F:\new\flink\flink-dist\target\flink-1.19-SNAPSHOT-bin\flink-1.19-SNAPSHOT\lib，lib下的jar拷贝到我们创建的a_lib下</p> 
<p>将F:\new\flink\flink-dist\target\flink-1.19-SNAPSHOT-bin\flink-1.19-SNAPSHOT\conf下的配置文件拷贝到我们创建的a_conf下</p> 
<p>4.修改config.yaml</p> 
<p><strong>操作步骤如下图</strong></p> 
<p><img alt="" height="167" src="https://images2.imgbox.com/f3/d0/mDUnpPK9_o.png" width="360"><img alt="" height="336" src="https://images2.imgbox.com/ca/ee/zq2mIDje_o.png" width="945"></p> 
<p><img alt="" height="486" src="https://images2.imgbox.com/f8/9e/50CI2vhI_o.png" width="810"></p> 
<p>修改config.yaml</p> 
<pre></pre> 
<p><code><em>################################################################################</em> env.java.opts.all: --add-exports=java.base/sun.net.util=ALL-UNNAMED --add-exports=java.rmi/sun.rmi.registry=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED --add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED --add-exports=java.security.jgss/sun.security.krb5=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.text=ALL-UNNAMED --add-opens=java.base/java.time=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.locks=ALL-UNNAMED jobmanager.resource-id: q1 jobmanager.rpc.address: localhost <em># The RPC port where the JobManager is reachable.</em> jobmanager.rpc.port: 6123 jobmanager.bind-host: localhost jobmanager.memory.process.size: 1600m taskmanager.bind-host: localhost taskmanager.resource-id: q2 <em>#唯一标识 window下必须配置</em> taskmanager.cpu.cores: 1 <em>#任务的堆内存</em> taskmanager.memory.task.heap.size: 512m <em>#托管内存</em> taskmanager.memory.managed.size: 512m <em>#网络内存（Network Memory）</em> taskmanager.memory.network.min: 128m taskmanager.memory.network.max: 128m <em>#任务堆外内存</em> taskmanager.memory.task.off-heap.size: 0m <em>#框架内存</em> taskmanager.memory.framework.heap.size: 256m <em>#框架堆外内存</em> taskmanager.memory.framework.off-heap.size: 128m <em>#JVM Metaspace</em> taskmanager.memory.jvm-metaspace.size: 128m <em>#JVM 开销</em> taskmanager.memory.jvm-overhead.min: 128m taskmanager.memory.jvm-overhead.max: 128m <em>#心跳参数</em> heartbeat.timeout: 50000 heartbeat.interval: 10000 taskmanager.host: localhost taskmanager.memory.process.size: 1728m taskmanager.numberOfTaskSlots: 1 <em># The parallelism used for programs that did not specify and other parallelism.</em> parallelism.default: 1 jobmanager.execution.failover-strategy: region rest.address: localhost rest.bind-address: localhost</code></p> 
<h3>4.2.启动JobManager</h3> 
<p>1.ctrl+n 搜索 StandaloneSessionClusterEntrypoint类</p> 
<p><img alt="" height="370" src="https://images2.imgbox.com/1d/a2/xq7l5X1G_o.png" width="1200"></p> 
<p>2.设置参数 右键选择 Modify Run Configuration<img alt="" height="369" src="https://images2.imgbox.com/b4/9a/6BqheSFP_o.png" width="787"></p> 
<p>3.配置启动参数</p> 
<pre></pre> 
<p><code>-c a_conf</code><img alt="" height="843" src="https://images2.imgbox.com/c6/e7/vwGHnOQ6_o.png" width="1200"></p> 
<p>4.Add VM Options 添加jvm参数</p> 
<pre></pre> 
<p><code>-Dlog.file=./log/flink-jobmanager-1.local.log -Dlog4j.configuration=./a_conf/log4j.properties -Dlog4j.configurationFile=./a_conf/log4j.properties -Dlogback.configurationFile=./a_conf/logback.xml</code></p> 
<p><img alt="" height="729" src="https://images2.imgbox.com/72/04/F67IFfjP_o.png" width="1200"></p> 
<p>5.Modify classpath 添加需要用到的包<img alt="" height="707" src="https://images2.imgbox.com/c4/78/JafP0fda_o.png" width="1200"></p> 
<p>6.启动JobManager<img alt="" height="466" src="https://images2.imgbox.com/6d/51/HMnZOPZX_o.png" width="1200"></p> 
<h3><strong>4.3.启动TaskManager</strong></h3> 
<p>1.ctrl+n 搜索 TaskManagerRunner类<img alt="" height="252" src="https://images2.imgbox.com/fd/a8/3YGLJJX7_o.png" width="685"></p> 
<p>2.设置参数 右键选择 Modify Run Configuration<img alt="" height="430" src="https://images2.imgbox.com/7a/5f/Ae605fWT_o.png" width="972"></p> 
<p>3.配置启动参数</p> 
<pre></pre> 
<p><code>-c a_conf</code><img alt="" height="933" src="https://images2.imgbox.com/3b/35/M7N56p3J_o.png" width="1200"></p> 
<p>4.Add VM Options 添加jvm参数</p> 
<pre></pre> 
<p><code>-Dlog.file=./log/flink-taskmanager-1.local.log -Dlog4j.configuration=./a_conf/log4j.properties -Dlog4j.configurationFile=./a_conf/log4j.properties -Dlogback.configurationFile=./a_conf/logback.xml</code><img alt="" height="704" src="https://images2.imgbox.com/75/f1/FNEojhGs_o.png" width="1200"></p> 
<p>5.Modify classpath 添加需要用到的包<img alt="" height="786" src="https://images2.imgbox.com/b2/1b/4dA7xwp5_o.png" width="1200"></p> 
<p>6.启动TaskManager<img alt="" height="489" src="https://images2.imgbox.com/c3/00/6gbbwdHU_o.png" width="1200"></p> 
<h2><strong>6.验证是否启动成功</strong></h2> 
<p><a href="http://localhost:8081/" rel="nofollow" title="http://localhost:8081/">http://localhost:8081/</a><img alt="" height="438" src="https://images2.imgbox.com/88/39/ocYBSA8H_o.png" width="1200"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c4b5a767e6018ce3459c154b9b9797de/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java 实现自定义注解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/837c4961bf762ecf19887ea1fcb86297/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">sd软件下载安装教程（Stable Diffusion绘画软件配置要求）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>