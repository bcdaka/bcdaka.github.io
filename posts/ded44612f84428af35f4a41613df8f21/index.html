<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring Cloud系列—Spring Cloud Gateway服务网关的部署与使用指南 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/ded44612f84428af35f4a41613df8f21/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Spring Cloud系列—Spring Cloud Gateway服务网关的部署与使用指南">
  <meta property="og:description" content="Gateway网关 文章目录 Gateway网关1. 网关基本简介1.1 什么是网关1.2 为什么需要网关？ 2. 快速搭建gateway网关2.1 创建新模块2.2 引入依赖2.3 编写启动类2.4 配置路由规则2.5 测试 3. 路由过滤4. 过滤器4.1 简介4.2 网关过滤器4.2.2 种类 4.3 自定义过滤器4.3.1 自定义GatewayFilter4.3.2 自定义GlobalFilter 4.4 跨域问题4.4.1 什么是跨域问题4.4.2 解决跨域问题 5. 总结 1. 网关基本简介 1.1 什么是网关 网关，简而言之，是一个系统的单一入口点，它接收所有外部请求，并根据请求的特性（如路径、HTTP方法等）将其转发给内部的各个微服务。
比如说，你想要向一个小区内的一个朋友送信，必须要经过看门大爷的同意，大爷如果认为好人，就会把信带给你要送的人；如果大爷认为你是坏人，就会拦截你。
1.2 为什么需要网关？ 路由：微服务架构通常由多个服务组成，每个服务可能部署在不同的地址和端口上。网关可以根据请求的URL或其他条件，将外部请求路由到正确的服务实例上，从而隐藏了服务实例的具体位置。负载均衡：当服务有多个实例时，网关可以根据不同的负载均衡策略（如轮询、随机、最少连接等）将请求分发到不同的实例，确保系统资源的有效利用和服务的稳定性。统一鉴权和认证：在微服务架构中，每个服务都可能有自己的安全要求。网关可以作为统一的鉴权和认证点，处理所有服务的安全验证，简化了服务之间的安全通信。跨域处理：由于浏览器的同源策略，前端应用在访问不同域名或端口的后端服务时可能会遇到跨域问题。网关可以配置CORS（跨源资源共享）策略，允许前端应用安全地访问后端服务。熔断和限流：网关可以集成熔断和限流机制，当后端服务出现问题时，网关可以快速失败，防止级联故障。同时，限流可以控制对后端服务的请求速率，防止服务过载。监控和日志：网关是所有外部请求的入口点，可以在这一层收集和记录重要的监控数据和日志信息，帮助开发者和运维人员快速定位问题和性能瓶颈。 2. 快速搭建gateway网关 基本步骤：
创建新模块引入网关依赖编写启动类配置路由规则 2.1 创建新模块 创建一个新模块gatewawy：
2.2 引入依赖 &lt;!--网关--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--nacos 服务发现--&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!--负载均衡--&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt; &lt;artifactId&gt;spring-cloud-starter-loadbalancer&lt;/artifactId&gt; &lt;/dependency&gt; 2.3 编写启动类 @SpringBootApplication public class GatewayApplication { public static void main(String[] args) { SpringApplication.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-17T15:03:28+08:00">
    <meta property="article:modified_time" content="2024-05-17T15:03:28+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring Cloud系列—Spring Cloud Gateway服务网关的部署与使用指南</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Gateway_3"></a>Gateway网关</h2> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Gateway_3" rel="nofollow">Gateway网关</a></li><li><ul><li><ul><li><a href="#1__6" rel="nofollow">1. 网关基本简介</a></li><li><ul><li><a href="#11__8" rel="nofollow">1.1 什么是网关</a></li><li><a href="#12__16" rel="nofollow">1.2 为什么需要网关？</a></li></ul> 
    </li><li><a href="#2_gateway_25" rel="nofollow">2. 快速搭建gateway网关</a></li><li><ul><li><a href="#21__34" rel="nofollow">2.1 创建新模块</a></li><li><a href="#22__40" rel="nofollow">2.2 引入依赖</a></li><li><a href="#23__60" rel="nofollow">2.3 编写启动类</a></li><li><a href="#24__72" rel="nofollow">2.4 配置路由规则</a></li><li><a href="#25__112" rel="nofollow">2.5 测试</a></li></ul> 
    </li><li><a href="#3__132" rel="nofollow">3. 路由过滤</a></li><li><a href="#4__157" rel="nofollow">4. 过滤器</a></li><li><ul><li><a href="#41__159" rel="nofollow">4.1 简介</a></li><li><a href="#42__163" rel="nofollow">4.2 网关过滤器</a></li><li><ul><li><a href="#422__182" rel="nofollow">4.2.2 种类</a></li></ul> 
     </li><li><a href="#43__238" rel="nofollow">4.3 自定义过滤器</a></li><li><ul><li><a href="#431_GatewayFilter_240" rel="nofollow">4.3.1 自定义GatewayFilter</a></li><li><a href="#432_GlobalFilter_349" rel="nofollow">4.3.2 自定义GlobalFilter</a></li></ul> 
     </li><li><a href="#44__377" rel="nofollow">4.4 跨域问题</a></li><li><ul><li><a href="#441__379" rel="nofollow">4.4.1 什么是跨域问题</a></li><li><a href="#442__396" rel="nofollow">4.4.2 解决跨域问题</a></li></ul> 
    </li></ul> 
    </li><li><a href="#5__423" rel="nofollow">5. 总结</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="1__6"></a>1. 网关基本简介</h4> 
<h5><a id="11__8"></a>1.1 什么是网关</h5> 
<blockquote> 
 <p>网关，简而言之，是一个系统的单一入口点，它接收所有外部请求，并根据请求的特性（如路径、HTTP方法等）将其转发给内部的各个微服务。</p> 
 <p>比如说，你想要向一个小区内的一个朋友送信，必须要经过看门大爷的同意，大爷如果认为好人，就会把信带给你要送的人；如果大爷认为你是坏人，就会拦截你。</p> 
 <p><img src="https://images2.imgbox.com/af/6a/7YxTXPBc_o.png" alt="image-20240514143346013"></p> 
</blockquote> 
<h5><a id="12__16"></a>1.2 为什么需要网关？</h5> 
<ol><li><strong>路由</strong>：微服务架构通常由多个服务组成，每个服务可能部署在不同的地址和端口上。网关可以根据请求的URL或其他条件，将外部请求路由到正确的服务实例上，从而隐藏了服务实例的具体位置。</li><li><strong>负载均衡</strong>：当服务有多个实例时，网关可以根据不同的负载均衡策略（如轮询、随机、最少连接等）将请求分发到不同的实例，确保系统资源的有效利用和服务的稳定性。</li><li><strong>统一鉴权和认证</strong>：在微服务架构中，每个服务都可能有自己的安全要求。网关可以作为统一的鉴权和认证点，处理所有服务的安全验证，简化了服务之间的安全通信。</li><li><strong>跨域处理</strong>：由于浏览器的同源策略，前端应用在访问不同域名或端口的后端服务时可能会遇到跨域问题。网关可以配置CORS（跨源资源共享）策略，允许前端应用安全地访问后端服务。</li><li><strong>熔断和限流</strong>：网关可以集成熔断和限流机制，当后端服务出现问题时，网关可以快速失败，防止级联故障。同时，限流可以控制对后端服务的请求速率，防止服务过载。</li><li><strong>监控和日志</strong>：网关是所有外部请求的入口点，可以在这一层收集和记录重要的监控数据和日志信息，帮助开发者和运维人员快速定位问题和性能瓶颈。</li></ol> 
<h4><a id="2_gateway_25"></a>2. 快速搭建gateway网关</h4> 
<p><strong>基本步骤：</strong></p> 
<ol><li>创建新模块</li><li>引入网关依赖</li><li>编写启动类</li><li>配置路由规则</li></ol> 
<h5><a id="21__34"></a>2.1 创建新模块</h5> 
<p>创建一个新模块<code>gatewawy</code>：</p> 
<p><img src="https://images2.imgbox.com/49/7a/ivP3NTS5_o.png" alt="image-20240514150510201"></p> 
<h5><a id="22__40"></a>2.2 引入依赖</h5> 
<pre><code class="prism language-xml">        <span class="token comment">&lt;!--网关--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-gateway<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--nacos 服务发现--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--负载均衡--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-loadbalancer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h5><a id="23__60"></a>2.3 编写启动类</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GatewayApplication</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">GatewayApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h5><a id="24__72"></a>2.4 配置路由规则</h5> 
<p><strong><code>gateway</code>模块：</strong></p> 
<pre><code class="prism language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span> 
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> gateway<span class="token punctuation">-</span>service <span class="token comment"># 服务名称</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.56.101<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment"># Nacos服务注册中心的地址和端口</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> user <span class="token comment"># 路由的唯一标识符，自定义，需要保证唯一性</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//user<span class="token punctuation">-</span>service <span class="token comment"># 路由的目标服务地址，lb表示使用负载均衡，user-service是注册中心中的服务名</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span> <span class="token comment"># 路由断言，用来判断请求是否符合路由规则</span>
            <span class="token punctuation">-</span> Path=/users/<span class="token important">**</span><span class="token punctuation">,</span>/addresses/<span class="token important">**</span> <span class="token comment"># 路由断言的路径模式，匹配以/users/或/addresses/开头的请求路径</span>

</code></pre> 
<p><strong>解析：</strong><br> 在<code>routes</code>部分，定义了一条路由规则，该规则将所有符合指定路径模式的请求路由到<code>user-service</code>服务。这条规则使用了路径断言<code>Path</code>，匹配所有以<code>/users/</code>或<code>/addresses/</code>开头的请求。通过使用负载均衡<code>lb://</code>前缀，网关能够根据注册中心中的服务实例信息进行负载均衡。</p> 
<p><strong><code>user-service</code>模块：</strong></p> 
<pre><code class="prism language-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8084</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> user<span class="token punctuation">-</span>service
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.56.101<span class="token punctuation">:</span><span class="token number">8848</span>
</code></pre> 
<h5><a id="25__112"></a>2.5 测试</h5> 
<p><strong>测试接口：</strong></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">"网关测试接口"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/gateway-test"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testGateway</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"网关测试成功"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>nacos：</strong></p> 
<p><img src="https://images2.imgbox.com/33/02/VwNJZx8d_o.png" alt="image-20240514160742494"></p> 
<p><strong>测试：</strong></p> 
<p><img src="https://images2.imgbox.com/9a/b3/guy5osOQ_o.png" alt="image-20240514160300872"></p> 
<h4><a id="3__132"></a>3. 路由过滤</h4> 
<p>在前面的<code>gateway</code>的<code>routes</code>部分有四个属性可以配置：</p> 
<ul><li><code>id</code>：路由的唯一标示</li><li><code>predicates</code>：路由断言，其实就是匹配条件</li><li><code>filters</code>：路由过滤条件</li><li><code>uri</code>：路由目标地址，<code>lb://</code>代表负载均衡，从注册中心获取目标微服务的实例列表，并且负载均衡选择一个访问。</li></ul> 
<p>我们在配置文件中写的断言规则只是字符串，这些字符串会被 <code>Predicate Factory</code>（断言工厂） 读取并处理，转变为路由判断的条件。例如 <code>Path=/user/**</code> 是按照路径匹配，这个规则是由<code>org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory </code>类来处理的，这里重点关注路由断言<code>predicates</code>：</p> 
<table><thead><tr><th align="left"><strong>名称</strong></th><th align="left"><strong>说明</strong></th><th align="left"><strong>示例</strong></th></tr></thead><tbody><tr><td align="left">After</td><td align="left">是某个时间点后的请求</td><td align="left">- After=2037-01-20T17:42:47.789-07:00[America/Denver]</td></tr><tr><td align="left">Before</td><td align="left">是某个时间点之前的请求</td><td align="left">- Before=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]</td></tr><tr><td align="left">Between</td><td align="left">是某两个时间点之前的请求</td><td align="left">- Between=2037-01-20T17:42:47.789-07:00[America/Denver], 2037-01-21T17:42:47.789-07:00[America/Denver]</td></tr><tr><td align="left">Cookie</td><td align="left">请求必须包含某些cookie</td><td align="left">- Cookie=chocolate, ch.p</td></tr><tr><td align="left">Header</td><td align="left">请求必须包含某些header</td><td align="left">- Header=X-Request-Id, \d+</td></tr><tr><td align="left">Host</td><td align="left">请求必须是访问某个host（域名）</td><td align="left">- Host=**.somehost.org,**.anotherhost.org</td></tr><tr><td align="left">Method</td><td align="left">请求方式必须是指定方式</td><td align="left">- Method=GET,POST</td></tr><tr><td align="left">Path</td><td align="left">请求路径必须符合指定规则</td><td align="left">- Path=/red/{segment},/blue/**</td></tr><tr><td align="left">Query</td><td align="left">请求参数必须包含指定参数</td><td align="left">- Query=name, Jack或者- Query=name</td></tr><tr><td align="left">RemoteAddr</td><td align="left">请求者的ip必须是指定范围</td><td align="left">- RemoteAddr=192.168.1.1/24</td></tr><tr><td align="left">weight</td><td align="left">权重处理</td><td align="left"></td></tr></tbody></table> 
<h4><a id="4__157"></a>4. 过滤器</h4> 
<h5><a id="41__159"></a>4.1 简介</h5> 
<blockquote> 
 <p><strong>过滤器</strong>是用于修改进入网关的请求和发出网关的响应的组件。过滤器的作用范围可以是特定的路由，也可以是全局的。过滤器可以用来添加或修改请求头和响应头，修改请求体，进行权限校验，限流，熔断等。</p> 
</blockquote> 
<h5><a id="42__163"></a>4.2 网关过滤器</h5> 
<blockquote> 
 <p>单体架构时我们只需要完成一次用户登录、身份校验，就可以在所有业务中获取到用户信息。而微服务拆分后，每个微服务都独立部署，不再共享数据。也就意味着每个微服务都需要做登录校验，这显然不可取。</p> 
 <p>而登录校验必须在请求转发到微服务之前做，否则就失去了意义。网关的请求转发是<code>Gateway</code>内部代码实现的，要想在请求转发之前做登录校验，就必须了解<code>Gateway</code>内部工作的基本原理。</p> 
</blockquote> 
<img src="https://images2.imgbox.com/f4/c0/oS4jz7Nx_o.png" alt="image-20240514161937208"> 
<p>如图所示：</p> 
<ol><li>客户端请求进入网关后由<code>HandlerMapping</code>对请求做判断，找到与当前请求匹配的路由规则（<strong><code>Route</code></strong>），然后将请求交给<code>WebHandler</code>去处理。</li><li><code>WebHandler</code>则会加载当前路由下需要执行的过滤器链（<strong><code>Filter chain</code></strong>），然后按照顺序逐一执行过滤器（后面称为**<code>Filter</code>**）。</li><li>图中<code>Filter</code>被虚线分为左右两部分，是因为<code>Filter</code>内部的逻辑分为<code>pre</code>和<code>post</code>两部分，分别会在请求路由到微服务<strong>之前</strong>和<strong>之后</strong>被执行。</li><li>只有所有<code>Filter</code>的<code>pre</code>逻辑都依次顺序执行通过后，请求才会被路由到微服务。</li><li>微服务返回结果后，再倒序执行<code>Filter</code>的<code>post</code>逻辑。</li><li>最终把响应结果返回。</li></ol> 
<p>观察得知：<strong>如果我们能够定义一个过滤器，在其中实现登录校验逻辑，并且将过滤器执行顺序定义到<code>NettyRoutingFilter</code>之前，就能解决前面的问题。</strong></p> 
<h6><a id="422__182"></a>4.2.2 种类</h6> 
<p>网关过滤器链中的过滤器有两种：</p> 
<ul><li><strong><code>GatewayFilter</code></strong>：路由过滤器，作用范围比较灵活，可以是任意指定的路由<code>Route</code>.</li><li><strong><code>GlobalFilter</code></strong>：全局过滤器，作用范围是所有路由，不可配置。</li></ul> 
<p>下面是一些常用的<code>Gateway Filter</code>和<code>Global Filter</code>：</p> 
<ul><li><strong>AddRequestHeader</strong>：添加请求头。</li><li><strong>AddResponseHeader</strong>：添加响应头。</li><li><strong>RewritePath</strong>：重写请求路径。</li><li><strong>PrefixPath</strong>：为请求路径添加前缀。</li><li><strong>SetPath</strong>：设置请求路径。</li><li><strong>Retry</strong>：设置重试逻辑。</li><li><strong>CircuitBreaker</strong>：集成熔断器。</li><li><strong>RequestRateLimiter</strong>：限流过滤器。</li><li><strong>SecureHeaders</strong>：添加安全相关的响应头。</li><li><strong>TokenRelay</strong>：用于将认证信息传递给下游服务。</li></ul> 
<blockquote> 
 <p><code>Gateway</code>中内置了很多的<code>GatewayFilter</code>，详情使用可以参考官方文档：</p> 
 <p><a href="https://docs.spring.io/spring-cloud-gateway/docs/3.1.7/reference/html/#gatewayfilter-factories" rel="nofollow">Spring Cloud Gateway</a></p> 
</blockquote> 
<p>例如<code>AddRequestHeaderGatewayFilterFacotry</code>，顾明思议，就是添加请求头的过滤器，可以给请求添加一个请求头并传递到下游微服务。</p> 
<p>使用的使用只需要在<code>application.yaml</code>中这样配置：</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> user
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//user<span class="token punctuation">-</span>service
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span>Path=/users/<span class="token important">**</span>
        <span class="token key atrule">filters</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> AddRequestHeader=key<span class="token punctuation">,</span> value <span class="token comment"># 逗号之前是请求头的key，逗号之后是value</span>
</code></pre> 
<p>如果想要让过滤器作用于所有的路由，则可以这样配置：</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">default-filters</span><span class="token punctuation">:</span> <span class="token comment"># default-filters下的过滤器可以作用于所有路由</span>
        <span class="token punctuation">-</span> AddRequestHeader=key<span class="token punctuation">,</span> value
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> user
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//user<span class="token punctuation">-</span>service
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span>Path=/users/<span class="token important">**</span>
</code></pre> 
<h5><a id="43__238"></a>4.3 自定义过滤器</h5> 
<h6><a id="431_GatewayFilter_240"></a>4.3.1 自定义GatewayFilter</h6> 
<ol><li>编写过滤器工厂<code>GatewayFilterFactory</code>类</li></ol> 
<p>自定义<code>GatewayFilter</code>不是直接实现<code>GatewayFilter</code>，而是实现<code>AbstractGatewayFilterFactory</code>。最简单的方式是这样的：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintAnyGatewayFilterFactory</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractGatewayFilterFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">GatewayFilter</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">Object</span> config<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">GatewayFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 获取请求</span>
                <span class="token class-name">ServerHttpRequest</span> request <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 编写过滤器逻辑</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"过滤器执行了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 放行</span>
                <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><b>注意：该类的名称一定要以<code>GatewayFilterFactory</code>为后缀！！！</b></p> 
<blockquote> 
 <p>因为在Spring框架中，很多自动配置功能都是基于约定大于配置的原则，比如命名约定。在这里，如果你实现AbstractGatewayFilterFactory来编写类并以GatewayFilterFactory为后缀命名类的话，Spring Cloud Gateway会自动扫描并识别出那些以GatewayFilterFactory为后缀的Bean然后自动注册加载，不再需要手动配置和加载，大大简化了开发者的配置工作。如果不按照命名约定命名的话多了一步手动配置和加载。</p> 
</blockquote> 
<ol start="2"><li>配置路由规则</li></ol> 
<pre><code class="prism language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">default-filters</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> PrintAny <span class="token comment"># 此处直接以自定义的GatewayFilterFactory类名称前缀类声明过滤器</span>
</code></pre> 
<p>另外，这种过滤器还可以支持动态配置参数，不过实现起来比较复杂，示例：</p> 
<ol><li>编写过滤器工厂<code>GatewayFilterFactory</code>类</li></ol> 
<pre><code class="prism language-java">
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintAnyGatewayFilterFactory</span> <span class="token comment">// 父类泛型是内部类的Config类型</span>
                <span class="token keyword">extends</span> <span class="token class-name">AbstractGatewayFilterFactory</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PrintAnyGatewayFilterFactory<span class="token punctuation">.</span>Config</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">GatewayFilter</span> <span class="token function">apply</span><span class="token punctuation">(</span><span class="token class-name">Config</span> config<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// OrderedGatewayFilter是GatewayFilter的子类，包含两个参数：</span>
        <span class="token comment">// - GatewayFilter：过滤器</span>
        <span class="token comment">// - int order值：值越小，过滤器执行优先级越高</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OrderedGatewayFilter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GatewayFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 获取config值</span>
                <span class="token class-name">String</span> a <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> b <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> c <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 编写过滤器逻辑</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"a = "</span> <span class="token operator">+</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"b = "</span> <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"c = "</span> <span class="token operator">+</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 放行</span>
                <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 自定义配置属性，成员变量名称很重要，下面会用到</span>
    <span class="token annotation punctuation">@Data</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Config</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> a<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> b<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> c<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将变量名称依次返回，顺序很重要，将来读取参数时需要按顺序获取</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">shortcutFieldOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        <span class="token comment">// 返回当前配置类的类型，也就是内部的Config</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Config</span><span class="token punctuation">&gt;</span></span> <span class="token function">getConfigClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token class-name">Config</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>配置路由规则</li></ol> 
<pre><code class="prism language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">default-filters</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> PrintAny <span class="token comment"># 自定义过滤器的名称</span>
              <span class="token key atrule">args</span><span class="token punctuation">:</span> <span class="token comment"># 过滤器传递的参数,手动指定参数名，无需按照参数顺序</span>
                <span class="token key atrule">a</span><span class="token punctuation">:</span> <span class="token number">1</span>
                <span class="token key atrule">b</span><span class="token punctuation">:</span> <span class="token number">2</span>
                <span class="token key atrule">c</span><span class="token punctuation">:</span> <span class="token number">3</span>
</code></pre> 
<h6><a id="432_GlobalFilter_349"></a>4.3.2 自定义GlobalFilter</h6> 
<p>自定义GlobalFilter则简单很多，直接实现GlobalFilter即可，而且也无法设置动态参数：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrintAnyGlobalFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 编写过滤器逻辑</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"未登录，无法访问"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 放行</span>
        <span class="token comment">// return chain.filter(exchange);</span>

        <span class="token comment">// 拦截</span>
        <span class="token class-name">ServerHttpResponse</span> response <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">setRawStatusCode</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 过滤器执行顺序，值越小，优先级越高</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="44__377"></a>4.4 跨域问题</h5> 
<h6><a id="441__379"></a>4.4.1 什么是跨域问题</h6> 
<blockquote> 
 <p><strong>跨域问题</strong>（Cross-Origin Resource Sharing, CORS）是指由于浏览器的同源策略（Same-Origin Policy）限制，一个源（域名、协议和端口）的网页无法向另一个源发送HTTP请求的问题。同源策略是一种安全机制，旨在防止恶意网站访问敏感数据。</p> 
</blockquote> 
<p>同源的定义是：如果两个页面的协议、域名（或IP地址）和端口都相同，则它们具有相同的源。例如，以下两个URL具有相同的源：</p> 
<ul><li><code>http://example.com:80/index.html</code></li><li><code>http://example.com:80/page.html</code></li></ul> 
<p>而以下URL与上面的URL不同源：</p> 
<ul><li><code>https://example.com:80/index.html</code> （协议不同）</li><li><code>http://www.example.com:80/index.html</code> （域名不同）</li><li><code>http://example.com:81/index.html</code> （端口不同）</li></ul> 
<p>当尝试从不同源的客户端发送请求到服务器时，浏览器会阻止这些请求，除非服务器明确允许跨源请求。这就是所谓的跨域问题。</p> 
<h6><a id="442__396"></a>4.4.2 解决跨域问题</h6> 
<p><strong>全局CORS配置</strong>：在网关的配置文件中，可以定义全局的CORS配置，这些配置会应用到所有的路由上。</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> gateway
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> 192.168.56.101<span class="token punctuation">:</span><span class="token number">8848</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">globalcors</span><span class="token punctuation">:</span>
        <span class="token key atrule">add-to-simple-url-handler-mapping</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 因为ajax发起者会通过options请求来向服务器询问是否允许跨域，所以需要设置为true来解决options请求被拦截问题</span>
        <span class="token key atrule">corsConfigurations</span><span class="token punctuation">:</span>
          <span class="token key atrule">'[/**]'</span><span class="token punctuation">:</span>
            <span class="token key atrule">allowedOrigins</span><span class="token punctuation">:</span> <span class="token string">"http://www.xxx.com"</span> <span class="token comment"># 允许那些网站跨域访问</span>
            <span class="token key atrule">allowedMethods</span><span class="token punctuation">:</span> <span class="token comment"># 允许的HTTP方法</span>
              <span class="token punctuation">-</span> GET
              <span class="token punctuation">-</span> POST
              <span class="token punctuation">-</span> PUT
              <span class="token punctuation">-</span> DELETE
            <span class="token key atrule">allowedHeaders</span><span class="token punctuation">:</span> <span class="token string">"*"</span> <span class="token comment"># 允许的请求头</span>
            <span class="token key atrule">allowCredentials</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 是否允许发送Cookie</span>
            <span class="token key atrule">maxAge</span><span class="token punctuation">:</span> <span class="token number">3600</span> <span class="token comment"># 预检请求的缓存时间（秒）</span>
</code></pre> 
<h4><a id="5__423"></a>5. 总结</h4> 
<p>本文深入探讨了Spring Cloud Gateway网关的核心概念及其在微服务架构中的快速部署方法，除此之外着重讲解了Gateway过滤器（Filters）的重要性以及相关使用，包括过滤器的种类、自定义过滤器的实现以及过滤器在解决跨域问题中的作用。</p> 
<p>至于具体的应用要根据实际开发要求编写，这里就不过多展示了，希望对大家有所帮助。</p> 
<hr> 
<p>参考资料：</p> 
<p><a href="https://www.cnblogs.com/wenxuehai/p/16262799.html#autoid-h2-1-2-0" rel="nofollow">Gateway网关 - wenxuehai - 博客园 (cnblogs.com)</a></p> 
<p><a href="https://www.whatled.com/post-9190.html" rel="nofollow">gateway Strict-origin-when-cross-origin跨域问题解决 | 少将全栈 (whatled.com)</a></p> 
<p><a href="https://b11et3un53m.feishu.cn/wiki/UMgpwmmQKisWBIkaABbcwAPonVf" rel="nofollow">微服务02</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d2b7b74879fd64d8cb75a1917aa4fb22/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C&#43;&#43;要哮着学】初识C&#43;&#43;，函数重载、引用和内联函数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5f5b48aeb1c5fcfe7d47102d7aada5dc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue前端实现导出页面为word(两种方法)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>