<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>tinyxml2的入门教程 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/cde6a9b670fc0b660b2a408ad89a17d5/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="tinyxml2的入门教程">
  <meta property="og:description" content="tinyxml2的入门教程 前言一、tinyxml2 创建xml 文件二、tinyxml2 添加数据三、tinyxml2 更改数据四、tinyxml2 删除数据五、tinyxml2 打印总结 前言 xml 是一种标记型文档，有两种基本解析方式：DOM(Document Object Model，文档对象模型)和SAX(Simple APIs for XML，简单应用程序接口)。
DOM 将 xml 文档全部内容解析成一个对象模型树，通过对这个对象模型进行操作来实现对数据的操作。
优点：
– 解析成树的结构对象，可以实现增删改操作
缺点：
– 当 xml 文件过大时，比较占用内存
SAX 以事务为驱动，对 xml 文档从上之下，一行一行解析，当解析到事务对象则返回。
优点：
– 一行一行解析，内存占用小
缺点：
– 无能进行增删改操作
目前，有很多库封装了对 xml 文档的操作，例如 mini-xml 、libxml2、Xerces和 tinyxml等。tinyxml2 是其中一个比较简单且高效的 C &#43;&#43; xml 解析器，只有一个.h 的头文件和一个 . pp 的源文件，可以轻松集成进自己的程序中。
tinyxml2采用DOM解析方式，
在 tinyxml2 中，节点是解析的基本单元，包括 文档节点(XMLDocument)、元素节点(XMLElement)、属性节点(XMLAttribute)和文本节点(XMLText)。对于 xml 文档中数据的增删改查都是基于这些节点进行操作的。
一、tinyxml2 创建xml 文件 首先，最好把 tinyxml2 的头文件和源文件放项目下：
然后就是引入 tinyxml2 的头文件并链接源文件。这里，用的是 cmake 来构建，将 tinyxml2 文件夹的路径包含进来，然后将源文件链接到 可执行文件上就行。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-24T16:17:43+08:00">
    <meta property="article:modified_time" content="2024-07-24T16:17:43+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">tinyxml2的入门教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>tinyxml2的入门教程</h4> 
 <ul><li><a href="#_7" rel="nofollow">前言</a></li><li><a href="#tinyxml2_xml__40" rel="nofollow">一、tinyxml2 创建xml 文件</a></li><li><a href="#tinyxml2__121" rel="nofollow">二、tinyxml2 添加数据</a></li><li><a href="#tinyxml2__155" rel="nofollow">三、tinyxml2 更改数据</a></li><li><a href="#tinyxml2__209" rel="nofollow">四、tinyxml2 删除数据</a></li><li><a href="#tinyxml2__246" rel="nofollow">五、tinyxml2 打印</a></li><li><a href="#_263" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_7"></a>前言</h2> 
<p>xml 是一种标记型文档，有两种基本解析方式：DOM(Document Object Model，文档对象模型)和SAX(Simple APIs for XML，简单应用程序接口)。</p> 
<p><img src="https://images2.imgbox.com/6a/db/tYihmuNq_o.jpg" alt="在这里插入图片描述"></p> 
<p>DOM 将 xml 文档全部内容解析成一个对象模型树，通过对这个对象模型进行操作来实现对数据的操作。</p> 
<ul><li> <p>优点：<br> – 解析成树的结构对象，可以实现增删改操作</p> </li><li> <p>缺点：<br> – 当 xml 文件过大时，比较占用内存</p> </li></ul> 
<p>SAX 以事务为驱动，对 xml 文档从上之下，一行一行解析，当解析到事务对象则返回。</p> 
<ul><li> <p>优点：<br> – 一行一行解析，内存占用小</p> </li><li> <p>缺点：<br> – 无能进行增删改操作</p> </li></ul> 
<p>目前，有很多库封装了对 xml 文档的操作，例如 mini-xml 、libxml2、Xerces和 tinyxml等。tinyxml2 是其中一个比较简单且高效的 C ++ xml 解析器，只有一个.h 的头文件和一个 . pp 的源文件，可以轻松集成进自己的程序中。</p> 
<blockquote> 
 <p><code>tinyxml2采用DOM解析方式，</code></p> 
</blockquote> 
<p>在 tinyxml2 中，节点是解析的基本单元，包括 <code>文档节点(XMLDocument)、元素节点(XMLElement)、属性节点(XMLAttribute)和文本节点(XMLText)</code>。对于 xml 文档中数据的增删改查都是基于这些节点进行操作的。</p> 
<h2><a id="tinyxml2_xml__40"></a>一、tinyxml2 创建xml 文件</h2> 
<p>首先，最好把 tinyxml2 的头文件和源文件放项目下：</p> 
<p><img src="https://images2.imgbox.com/b9/0c/IlxdDfPn_o.png" alt="在这里插入图片描述"><br> 然后就是引入 tinyxml2 的头文件并链接源文件。这里，用的是 cmake 来构建，将 tinyxml2 文件夹的路径包含进来，然后将源文件链接到 可执行文件上就行。</p> 
<p><img src="https://images2.imgbox.com/0a/07/z7XbmGGm_o.png" alt="在这里插入图片描述"><br> 最后，假设现在创建一个关于 地图的 xml 数据文件</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"tinyxml2/tinyxml2.h"</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> tinyxml2<span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">point</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">double</span> x<span class="token punctuation">;</span>
    <span class="token keyword">double</span> y<span class="token punctuation">;</span>
    <span class="token function">point</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">y</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个XML文件</span>
<span class="token keyword">int</span> <span class="token function">createXML</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>xmlPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 定义文档节点</span>
    XMLDocument xmlDoc<span class="token punctuation">;</span>
    <span class="token comment">// 如果文件存在，则返回-1</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlDoc<span class="token punctuation">.</span><span class="token function">LoadFile</span><span class="token punctuation">(</span>xmlPath<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_ERROR_FILE_NOT_FOUND<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The xml file is exits"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 创建根节点 &lt;MAP&gt;</span>
    XMLElement <span class="token operator">*</span>root <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"MAP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xmlDoc<span class="token punctuation">.</span><span class="token function">InsertFirstChild</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 创建根节点下的 header 元素节点</span>
    XMLElement <span class="token operator">*</span>header <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"header"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    root<span class="token operator">-&gt;</span><span class="token function">InsertFirstChild</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置 header 元素节点的属性</span>
    header<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    header<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"两驱MRL1300-无反识别"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 创建并设置 header 节点下的 min_pos 和 max_pos 元素节点</span>
    XMLElement <span class="token operator">*</span>min_pos <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"min_pos"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    min_pos<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token string">"-46.00000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    min_pos<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token string">"-57.000000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    header<span class="token operator">-&gt;</span><span class="token function">InsertFirstChild</span><span class="token punctuation">(</span>min_pos<span class="token punctuation">)</span><span class="token punctuation">;</span>

    XMLElement <span class="token operator">*</span>max_pos <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"max_pos"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    max_pos<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token string">"91.00000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    max_pos<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token string">"43.000000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    header<span class="token operator">-&gt;</span><span class="token function">InsertFirstChild</span><span class="token punctuation">(</span>max_pos<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 在根节点下 加个注释</span>
    root<span class="token operator">-&gt;</span><span class="token function">InsertNewComment</span><span class="token punctuation">(</span><span class="token string">"This is a comment"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 在根节点下 加入 footer 元素节点，并设置文本内容</span>
    XMLElement <span class="token operator">*</span>footer <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"footer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    footer<span class="token operator">-&gt;</span><span class="token function">InsertNewText</span><span class="token punctuation">(</span><span class="token string">"This is a footer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    root<span class="token operator">-&gt;</span><span class="token function">InsertEndChild</span><span class="token punctuation">(</span>footer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 保存 xml 文件</span>
    <span class="token keyword">return</span> xmlDoc<span class="token punctuation">.</span><span class="token function">SaveFile</span><span class="token punctuation">(</span>xmlPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">srand</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">(</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>filename <span class="token operator">=</span> <span class="token string">"MAP.xml"</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">createXML</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span><span class="token string">"Create xml file failed"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>没指定决定路径的话，可以在编译文件夹中看到已经创建了一个 MAP.xml 文件</p> 
<p><img src="https://images2.imgbox.com/9c/60/aAWXdZ2x_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="tinyxml2__121"></a>二、tinyxml2 添加数据</h2> 
<p>现在，为刚创建的 MAP.xml 文件，添加一些点云坐标</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">addXML</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>XMLPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 文档节点 xmlDoc</span>
    XMLDocument xmlDoc<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlDoc<span class="token punctuation">.</span><span class="token function">LoadFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The xml file is not exits"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 获取文档节点的 根节点 root</span>
    XMLElement <span class="token operator">*</span>root <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">RootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 添加一些随机坐标点</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        point <span class="token function">p</span><span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.001</span><span class="token punctuation">,</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.002</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 定义坐标元素节点 point</span>
        XMLElement <span class="token operator">*</span>point <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置元素节点 point 的属性和值</span>
        point<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        point<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 将元素节点 point 添加到根节点 root下</span>
        root<span class="token operator">-&gt;</span><span class="token function">InsertEndChild</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 保存 xml 文件</span>
    <span class="token keyword">return</span> xmlDoc<span class="token punctuation">.</span><span class="token function">SaveFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>可以看到，已经在root节点中加入了 坐标元素了</p> 
<p><img src="https://images2.imgbox.com/6e/7b/lg7V2zFM_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="tinyxml2__155"></a>三、tinyxml2 更改数据</h2> 
<p>更改操作里面就用到了 查询 操作（判断）：将 x 属性值为0 的所有点元素的 y 属性值都改为2，在改之前，先添加一些x为0的点元素，在addXML()中加入：</p> 
<pre><code class="prism language-cpp"><span class="token comment">// 添加一些指定点</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        point <span class="token function">p</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>  <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 定义坐标元素节点 point</span>
        XMLElement <span class="token operator">*</span>point <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置元素节点 point 的属性和值</span>
        point<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        point<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 将元素节点 point 添加到根节点 root下</span>
        root<span class="token operator">-&gt;</span><span class="token function">InsertEndChild</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>在随机坐标点下就有了指定坐标点了</p> 
<p><img src="https://images2.imgbox.com/1e/9e/xsSMouat_o.png" alt="在这里插入图片描述"></p> 
<p>然后再进行查询并修改这些点</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">modifyXML</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>XMLPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 文档节点</span>
    XMLDocument xmlDoc<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlDoc<span class="token punctuation">.</span><span class="token function">LoadFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The xml file is not exits"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 获取 文档节点中的 root 根节点</span>
    XMLElement <span class="token operator">*</span>root <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">RootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 定义要修改的元素节点</span>
    XMLElement <span class="token operator">*</span>point <span class="token operator">=</span> root<span class="token operator">-&gt;</span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 将所有 x 属性为 0 的 point 的 y 属性值都改为 2</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>point <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>x <span class="token operator">=</span> point<span class="token operator">-&gt;</span><span class="token function">Attribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&amp;&amp;</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            point<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">"modify done"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        point <span class="token operator">=</span> point<span class="token operator">-&gt;</span><span class="token function">NextSiblingElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 保存</span>
    <span class="token keyword">return</span> xmlDoc<span class="token punctuation">.</span><span class="token function">SaveFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这样，就将 x 属性值为 0 点的 y 属性值改为2了</p> 
<p><img src="https://images2.imgbox.com/f0/ed/zS4nqmBc_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="tinyxml2__209"></a>四、tinyxml2 删除数据</h2> 
<p>这里，删除 x 属性值为 0 的 point 元素。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">deleteXML</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>XMLPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 文档节点</span>
    XMLDocument xmlDoc<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlDoc<span class="token punctuation">.</span><span class="token function">LoadFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The xml file is not exits"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 获取 根节点 root</span>
    XMLElement <span class="token operator">*</span>root <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">RootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 准备要被删除的元素</span>
    XMLElement <span class="token operator">*</span>point <span class="token operator">=</span> root<span class="token operator">-&gt;</span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>point <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>x <span class="token operator">=</span> point<span class="token operator">-&gt;</span><span class="token function">Attribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 删除 x 属性值 为 0 的 point 元素</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&amp;&amp;</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            point <span class="token operator">=</span> point<span class="token operator">-&gt;</span><span class="token function">NextSiblingElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            XMLElement <span class="token operator">*</span>delete_point <span class="token operator">=</span> point<span class="token punctuation">;</span>
            point <span class="token operator">=</span> point<span class="token operator">-&gt;</span><span class="token function">NextSiblingElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            root<span class="token operator">-&gt;</span><span class="token function">DeleteChild</span><span class="token punctuation">(</span>delete_point<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">"delete done"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 保存</span>
    <span class="token keyword">return</span> xmlDoc<span class="token punctuation">.</span><span class="token function">SaveFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这样， x 属性值为 0 的 point 元素就被全部删除了</p> 
<p><img src="https://images2.imgbox.com/76/1e/2DRWyOlS_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="tinyxml2__246"></a>五、tinyxml2 打印</h2> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">printXML</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>XMLPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 文档节点</span>
    XMLDocument xmlDoc<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlDoc<span class="token punctuation">.</span><span class="token function">LoadFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The xml file is not exits"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    XMLPrinter printer<span class="token punctuation">;</span>
    xmlDoc<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>printer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> printer<span class="token punctuation">.</span><span class="token function">CStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/13/9a/SdacqWWz_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_263"></a>总结</h2> 
<p>tinyxml2 解析 xml 文件的过程操作还是比较简单易上手的。最后，完整代码如下：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"tinyxml2/tinyxml2.h"</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> tinyxml2<span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token class-name">point</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">double</span> x<span class="token punctuation">;</span>
    <span class="token keyword">double</span> y<span class="token punctuation">;</span>
    <span class="token function">point</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">x</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">y</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个XML文件</span>
<span class="token keyword">int</span> <span class="token function">createXML</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>xmlPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 定义文档节点</span>
    XMLDocument xmlDoc<span class="token punctuation">;</span>
    <span class="token comment">// 如果文件存在，则返回-1</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlDoc<span class="token punctuation">.</span><span class="token function">LoadFile</span><span class="token punctuation">(</span>xmlPath<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_ERROR_FILE_NOT_FOUND<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The xml file is exits"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 创建根节点 &lt;MAP&gt;</span>
    XMLElement <span class="token operator">*</span>root <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"MAP"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xmlDoc<span class="token punctuation">.</span><span class="token function">InsertFirstChild</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 创建根节点下的 header 元素节点</span>
    XMLElement <span class="token operator">*</span>header <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"header"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    root<span class="token operator">-&gt;</span><span class="token function">InsertFirstChild</span><span class="token punctuation">(</span>header<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置 header 元素节点的属性</span>
    header<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    header<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"激光点云地图"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 创建并设置 header 节点下的 min_pos 和 max_pos 元素节点</span>
    XMLElement <span class="token operator">*</span>min_pos <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"min_pos"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    min_pos<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token string">"-46.00000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    min_pos<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token string">"-57.000000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    header<span class="token operator">-&gt;</span><span class="token function">InsertFirstChild</span><span class="token punctuation">(</span>min_pos<span class="token punctuation">)</span><span class="token punctuation">;</span>

    XMLElement <span class="token operator">*</span>max_pos <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"max_pos"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    max_pos<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token string">"91.00000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    max_pos<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token string">"43.000000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    header<span class="token operator">-&gt;</span><span class="token function">InsertFirstChild</span><span class="token punctuation">(</span>max_pos<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 在根节点下 加个注释</span>
    root<span class="token operator">-&gt;</span><span class="token function">InsertNewComment</span><span class="token punctuation">(</span><span class="token string">"This is a comment"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 在根节点下 加入 footer 元素节点，并设置文本内容</span>
    XMLElement <span class="token operator">*</span>footer <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"footer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    footer<span class="token operator">-&gt;</span><span class="token function">InsertNewText</span><span class="token punctuation">(</span><span class="token string">"This is a footer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    root<span class="token operator">-&gt;</span><span class="token function">InsertEndChild</span><span class="token punctuation">(</span>footer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 保存 xml 文件</span>
    <span class="token keyword">return</span> xmlDoc<span class="token punctuation">.</span><span class="token function">SaveFile</span><span class="token punctuation">(</span>xmlPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">addXML</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>XMLPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 文档节点 xmlDoc</span>
    XMLDocument xmlDoc<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlDoc<span class="token punctuation">.</span><span class="token function">LoadFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The xml file is not exits"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 获取文档节点的 根节点 root</span>
    XMLElement <span class="token operator">*</span>root <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">RootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 添加一些指定点</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        point <span class="token function">p</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>  <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 定义坐标元素节点 point</span>
        XMLElement <span class="token operator">*</span>point <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置元素节点 point 的属性和值</span>
        point<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        point<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 将元素节点 point 添加到根节点 root下</span>
        root<span class="token operator">-&gt;</span><span class="token function">InsertEndChild</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 添加一些随机坐标点</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        point <span class="token function">p</span><span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.001</span><span class="token punctuation">,</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.002</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 定义坐标元素节点 point</span>
        XMLElement <span class="token operator">*</span>point <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">NewElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 设置元素节点 point 的属性和值</span>
        point<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        point<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 将元素节点 point 添加到根节点 root下</span>
        root<span class="token operator">-&gt;</span><span class="token function">InsertEndChild</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 保存 xml 文件</span>
    <span class="token keyword">return</span> xmlDoc<span class="token punctuation">.</span><span class="token function">SaveFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">modifyXML</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>XMLPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 文档节点</span>
    XMLDocument xmlDoc<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlDoc<span class="token punctuation">.</span><span class="token function">LoadFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The xml file is not exits"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 获取 文档节点中的 root 根节点</span>
    XMLElement <span class="token operator">*</span>root <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">RootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 定义要修改的元素节点</span>
    XMLElement <span class="token operator">*</span>point <span class="token operator">=</span> root<span class="token operator">-&gt;</span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 将所有 x 属性为 0 的 point 的 y 属性值都改为 2</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>point <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>x <span class="token operator">=</span> point<span class="token operator">-&gt;</span><span class="token function">Attribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&amp;&amp;</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            point<span class="token operator">-&gt;</span><span class="token function">SetAttribute</span><span class="token punctuation">(</span><span class="token string">"y"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">"modify done"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        point <span class="token operator">=</span> point<span class="token operator">-&gt;</span><span class="token function">NextSiblingElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 保存</span>
    <span class="token keyword">return</span> xmlDoc<span class="token punctuation">.</span><span class="token function">SaveFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">deleteXML</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>XMLPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 文档节点</span>
    XMLDocument xmlDoc<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlDoc<span class="token punctuation">.</span><span class="token function">LoadFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The xml file is not exits"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 获取 根节点 root</span>
    XMLElement <span class="token operator">*</span>root <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">RootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 准备要被删除的元素</span>
    XMLElement <span class="token operator">*</span>point <span class="token operator">=</span> root<span class="token operator">-&gt;</span><span class="token function">FirstChildElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>point <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>x <span class="token operator">=</span> point<span class="token operator">-&gt;</span><span class="token function">Attribute</span><span class="token punctuation">(</span><span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 删除 x 属性值 为 0 的 point 元素</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&amp;&amp;</span> <span class="token function">strcmp</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            point <span class="token operator">=</span> point<span class="token operator">-&gt;</span><span class="token function">NextSiblingElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            XMLElement <span class="token operator">*</span>delete_point <span class="token operator">=</span> point<span class="token punctuation">;</span>
            point <span class="token operator">=</span> point<span class="token operator">-&gt;</span><span class="token function">NextSiblingElement</span><span class="token punctuation">(</span><span class="token string">"point"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            root<span class="token operator">-&gt;</span><span class="token function">DeleteChild</span><span class="token punctuation">(</span>delete_point<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">"delete done"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 保存</span>
    <span class="token keyword">return</span> xmlDoc<span class="token punctuation">.</span><span class="token function">SaveFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">printXML</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>XMLPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 文档节点</span>
    XMLDocument xmlDoc<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlDoc<span class="token punctuation">.</span><span class="token function">LoadFile</span><span class="token punctuation">(</span>XMLPath<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"The xml file is not exits"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    XMLPrinter printer<span class="token punctuation">;</span>
    xmlDoc<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>printer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> printer<span class="token punctuation">.</span><span class="token function">CStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">srand</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span><span class="token punctuation">(</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>filename <span class="token operator">=</span> <span class="token string">"MAP.xml"</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">createXML</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span><span class="token string">"Create xml file failed"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">addXML</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Add xml file failed"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">modifyXML</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Modify xml file failed"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">deleteXML</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token operator">!=</span> XML_SUCCESS<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Delete xml file failed"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">printXML</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/847e0bfba863ccef2002649f46514c94/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux中Mysql5.7主从架构(一主多从)配置教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a0a4e80d1073eadef04ae0436dff00f4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python研究生毕业设计，数据挖掘、情感分析、机器学习</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>