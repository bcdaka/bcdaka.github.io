<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43;】list介绍以及模拟实现（超级详细） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/587d620693b67341dec99d2ceae2a9a8/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C&#43;&#43;】list介绍以及模拟实现（超级详细）">
  <meta property="og:description" content="欢迎来到我的Blog，点击关注哦💕
list的介绍和模拟实现 前言`list`介绍标准库容器` std::list` 与 `std::vector` 的优缺点缺点 `list`的基本操作构造函数`list iterator``list capcacity``list modify` `list`模拟实现存贮结构（双向带头循环）`iterator``iterator`结构`operator!=` `operator ==``operator&#43;&#43;``operator--` `list`数据结构构造函数list的初始化节点初始化迭代器 `list modify`inserterase头插、头删、尾插、尾删 `list operator`交换clear 源码 前言 string vector的是存储是基于物理空间上连续的，而list是作为线性的链式结构，是值得学习的。
list介绍 std::list是C&#43;&#43;标准模板库（STL）中的一个容器适配器，它内部实现为双向链表结构。这种设计使得std::list能够在常数时间内进行任意位置的插入和删除操作，这是其相对于其他序列容器如std::vector的显著优点。std::list不支持随机访问，即无法直接通过索引来访问容器中的元素，这通常需要从头部或尾部开始迭代到目标位置. 标准库容器 std::list 与 std::vector 的优缺点 std::list: 作为一个双向链表，std::list 在插入和删除操作上具有优势，因为这些操作只涉及到改变相邻节点的指针，而不需要移动其他元素。此外，std::list 不需要预分配额外的内存，可以更好地处理动态内存分配，减少内存碎片.std::vector: 作为一个动态数组，std::vector 提供了高效的随机访问能力，可以通过下标直接访问任意位置的元素，其访问效率为 O(1). 此外，std::vector 通常具有较高的空间利用率和缓存友好性，因为其元素在内存中是连续存储的. 缺点 std::list: 由于非连续的内存存储，std::list 在访问元素时效率较低，因为可能需要从头开始遍历链表。此外，每个节点都需要存储额外的指针信息，这增加了内存开销.std::vector: 在 std::vector 的中间位置插入或删除元素可能会引起大量元素的移动，以维持内存的连续性，这会导致较差的性能。当 std::vector 的容量不足以容纳新增元素时，还需要进行动态扩容，这是一个成本较高的操作 vectorlist底层 结构动态顺序表，一段连续空间带头结点的双向循环链表随 机 访 问支持随机访问，访问某个元素效率O(1)不支持随机访问，访问某个元素 效率O(N)插 入 删 除任意位置插入和删除效率低，需要搬移元素，
时间复杂度为O(N)，插入时有可能需要增容，
增容：开辟新空 间，拷贝元素，释放旧空间，导致效率更低任意位置插入和删除效率高，不 需要搬移元
素，时间复杂度为 O(1)插 入 删 除底层为连续空间，不容易造成内存碎片，空间利用率 高，缓存利用率高底层节点动态开辟，小节点容易 造成内存碎片，空间利用率低， 缓存利用率低迭 代 器原生态指针对原生态指针(节点指针)进行封装迭 代 器 失 效在插入元素时，要给所有的迭代器重新赋值，因为插入 元素有可能会导致重新扩容，致使原来迭代器失效，删 除时，当前迭代器需要重新赋值否则会失效插入元素不会导致迭代器失效， 删除元素时，只会导致当前迭代 器失效，其他迭代器不受影响使 用 场 景需要高效存储，支持随机访问，不关心插入删除效率大量插入和删除操作，不关心随 机访问 list的基本操作 构造函数 【C&#43;&#43;】vector介绍以及模拟实现接口说明list (size_type n, const value_type&amp; val = value_type())构造的list中包含n个值为val的元素list()构造空的listlist (const list&amp; x)拷贝构造函数list (InputIterator ﬁrst, InputIterator last)用[ﬁrst, last)区间中的元素构造list list iterator 此处，大家可暂时将迭代器理解成一个指针，该指针指向list中的某个节点。">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-05T10:59:37+08:00">
    <meta property="article:modified_time" content="2024-08-05T10:59:37+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43;】list介绍以及模拟实现（超级详细）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><a href="https://blog.csdn.net/Cayyyy?spm=1011.2415.3001.5343">欢迎来到我的Blog，点击关注哦💕</a></p> 
<p></p> 
<div class="toc"> 
 <h4>list的介绍和模拟实现</h4> 
 <ul><li><a href="#_4" rel="nofollow">前言</a></li><li><ul><li><a href="#list_8" rel="nofollow">`list`介绍</a></li><li><a href="#_stdlist__stdvector__14" rel="nofollow">标准库容器` std::list` 与 `std::vector` 的优缺点</a></li><li><ul><li><ul><li><a href="#_19" rel="nofollow">缺点</a></li></ul> 
   </li></ul> 
  </li></ul> 
  </li><li><a href="#list_36" rel="nofollow">`list`的基本操作</a></li><li><ul><li><a href="#_38" rel="nofollow">构造函数</a></li><li><a href="#list_iterator_47" rel="nofollow">`list iterator`</a></li><li><a href="#list_capcacity_56" rel="nofollow">`list capcacity`</a></li><li><a href="#list_modify_63" rel="nofollow">`list modify`</a></li></ul> 
  </li><li><a href="#list_76" rel="nofollow">`list`模拟实现</a></li><li><ul><li><a href="#_78" rel="nofollow">存贮结构（双向带头循环）</a></li><li><a href="#iterator_102" rel="nofollow">`iterator`</a></li><li><ul><li><a href="#iterator_112" rel="nofollow">`iterator`结构</a></li><li><a href="#operator__operator__131" rel="nofollow">`operator!=` `operator ==`</a></li><li><a href="#operator_146" rel="nofollow">`operator++`</a></li><li><a href="#operator_167" rel="nofollow">`operator--`</a></li></ul> 
   </li><li><a href="#list_203" rel="nofollow">`list`数据结构</a></li><li><ul><li><a href="#_205" rel="nofollow">构造函数</a></li><li><a href="#list_207" rel="nofollow">list的初始化</a></li><li><a href="#_229" rel="nofollow">节点初始化</a></li><li><a href="#_293" rel="nofollow">迭代器</a></li></ul> 
   </li><li><a href="#list_modify_314" rel="nofollow">`list modify`</a></li><li><ul><li><a href="#insert_316" rel="nofollow">insert</a></li><li><a href="#erase_339" rel="nofollow">erase</a></li><li><a href="#_364" rel="nofollow">头插、头删、尾插、尾删</a></li></ul> 
   </li><li><a href="#list_operator_391" rel="nofollow">`list operator`</a></li><li><ul><li><a href="#_393" rel="nofollow">交换</a></li><li><a href="#clear_404" rel="nofollow">clear</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_423" rel="nofollow">源码</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_4"></a>前言</h2> 
<blockquote> 
 <p><code>string</code> <code>vector</code>的是存储是基于物理空间上连续的，而<code>list</code>是作为线性的链式结构，是值得学习的。</p> 
</blockquote> 
<h3><a id="list_8"></a><code>list</code>介绍</h3> 
<ul><li><code>std::list</code>是C++标准模板库（<code>STL</code>）中的一个容器适配器，它内部实现为双向链表结构。</li><li>这种设计使得<code>std::list</code>能够在常数时间内进行任意位置的插入和删除操作，这是其相对于其他序列容器如<code>std::vector</code>的显著优点。</li><li><code>std::list</code>不支持随机访问，即无法直接通过索引来访问容器中的元素，这通常需要从头部或尾部开始迭代到目标位置.</li></ul> 
<h3><a id="_stdlist__stdvector__14"></a>标准库容器<code> std::list</code> 与 <code>std::vector</code> 的优缺点</h3> 
<ul><li><strong>std::list</strong>: 作为一个双向链表，std::list 在插入和删除操作上具有优势，因为这些操作只涉及到改变相邻节点的指针，而不需要移动其他元素。此外，std::list 不需要预分配额外的内存，可以更好地处理动态内存分配，减少内存碎片.</li><li><strong>std::vector</strong>: 作为一个动态数组，std::vector 提供了高效的随机访问能力，可以通过下标直接访问任意位置的元素，其访问效率为 O(1). 此外，std::vector 通常具有较高的空间利用率和缓存友好性，因为其元素在内存中是连续存储的.</li></ul> 
<h5><a id="_19"></a>缺点</h5> 
<ul><li><strong>std::list</strong>: 由于非连续的内存存储，std::list 在访问元素时效率较低，因为可能需要从头开始遍历链表。此外，每个节点都需要存储额外的指针信息，这增加了内存开销.</li><li><strong>std::vector</strong>: 在 std::vector 的中间位置插入或删除元素可能会引起大量元素的移动，以维持内存的连续性，这会导致较差的性能。当 std::vector 的容量不足以容纳新增元素时，还需要进行动态扩容，这是一个成本较高的操作</li></ul> 
<table><thead><tr><th></th><th>vector</th><th>list</th></tr></thead><tbody><tr><td>底层 <br>结构</td><td>动态顺序表，一段连续空间</td><td>带头结点的双向循环链表</td></tr><tr><td>随 机 <br>访 问</td><td>支持随机访问，访问某个元素效率O(1)</td><td>不支持随机访问，访问某个元素 效率O(N)</td></tr><tr><td>插 入 <br>删 除</td><td>任意位置插入和删除效率低，需要搬移元素，<br>时间复杂度为O(N)，插入时有可能需要增容，<br>增容：开辟新空 间，拷贝元素，释放旧空间，导致效率更低</td><td>任意位置插入和删除效率高，不 需要搬移元<br>素，时间复杂度为 O(1)</td></tr><tr><td>插 入 <br>删 除</td><td>底层为连续空间，不容易造成内存碎片，空间利用率 高，缓存利用率高</td><td>底层节点动态开辟，小节点容易 造成内存碎片，空间利用率低， 缓存利用率低</td></tr><tr><td>迭 代 器</td><td>原生态指针</td><td>对原生态指针(节点指针)进行封装</td></tr><tr><td>迭 代 器 <br>失 效</td><td>在插入元素时，要给所有的迭代器重新赋值，因为插入 元素有可能会导致重新扩容，致使原来迭代器失效，删 除时，当前迭代器需要重新赋值否则会失效</td><td>插入元素不会导致迭代器失效， 删除元素时，只会导致当前迭代 器失效，其他迭代器不受影响</td></tr><tr><td>使 用 <br>场 景</td><td>需要高效存储，支持随机访问，不关心插入删除效率</td><td>大量插入和删除操作，不关心随 机访问</td></tr></tbody></table> 
<h2><a id="list_36"></a><code>list</code>的基本操作</h2> 
<h3><a id="_38"></a>构造函数</h3> 
<table><thead><tr><th>【C++】vector介绍以及模拟实现</th><th>接口说明</th></tr></thead><tbody><tr><td>list (size_type n, const value_type&amp; val = value_type())</td><td>构造的list中包含n个值为val的元素</td></tr><tr><td>list()</td><td>构造空的list</td></tr><tr><td>list (const list&amp; x)</td><td>拷贝构造函数</td></tr><tr><td>list (InputIterator ﬁrst, InputIterator last)</td><td>用[ﬁrst, last)区间中的元素构造list</td></tr></tbody></table> 
<h3><a id="list_iterator_47"></a><code>list iterator</code></h3> 
<p>此处，大家可暂时将迭代器理解成一个指针，该指针指向list中的某个节点。</p> 
<table><thead><tr><th>函数声明</th><th>接口说明</th></tr></thead><tbody><tr><td>begin + end</td><td>返回第一个元素的迭代器+返回最后一个元素下一个位置的迭代器</td></tr><tr><td>rbegin + rend</td><td>返回第一个元素的reverse_iterator,即end位置，返回最后一个元素下一个位置的 reverse_iterator,即begin位置</td></tr></tbody></table> 
<h3><a id="list_capcacity_56"></a><code>list capcacity</code></h3> 
<table><thead><tr><th>函数声明</th><th>接口说明</th></tr></thead><tbody><tr><td>empty</td><td>检测list是否为空，是返回true，否则返回false</td></tr><tr><td>size</td><td>返回list中有效节点的个数</td></tr></tbody></table> 
<h3><a id="list_modify_63"></a><code>list modify</code></h3> 
<table><thead><tr><th>函数声明</th><th>接口说明</th></tr></thead><tbody><tr><td>push_front</td><td>在list首元素前插入值为val的元素</td></tr><tr><td>pop_front</td><td>删除list中第一个元素</td></tr><tr><td>push_back</td><td>在list尾部插入值为val的元素</td></tr><tr><td>pop_back</td><td>删除list中最后一个元素</td></tr><tr><td>insert</td><td>在list position 位置中插入值为val的元素</td></tr><tr><td>erase</td><td>删除list position位置的元素</td></tr><tr><td>swap</td><td>交换两个list中的元素</td></tr><tr><td>clear</td><td>清空list中的有效元素</td></tr></tbody></table> 
<h2><a id="list_76"></a><code>list</code>模拟实现</h2> 
<h3><a id="_78"></a>存贮结构（双向带头循环）</h3> 
<ul><li>定义一个类（C语言：结构体）存储数据，作为指向下一个上一个的节点</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">namespace</span> MyList
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//LIst节点</span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">_list_node</span>
	<span class="token punctuation">{<!-- --></span>
		_list_node<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> _next<span class="token punctuation">;</span>
		_list_node<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> _prev<span class="token punctuation">;</span>
		T _val<span class="token punctuation">;</span>

		<span class="token function">_list_node</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> val <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token operator">:</span> <span class="token function">_next</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_prev</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_val</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="iterator_102"></a><code>iterator</code></h3> 
<p>迭代器有两种实现方式，具体应根据容器底层数据结构实现：</p> 
<ul><li>原生态指针，比如：<code>vector</code> <code>string</code></li><li>将原生态指针进行封装，因迭代器使用形式与指针完全相同，因此在自定义的类中必须实现以下方法：<br> 1. 指针可以解引用，迭代器的类中必须重载operator*()<br> 2. 指针可以通过-&gt;访问其所指空间成员，迭代器类中必须重载 oprator-&gt;()<br> 3. 指针可以++向后移动，迭代器类中必须重载operator++()与operator++(int)<br> 4. 迭代器需要进行是否相等的比较，因此还需要重载operator==()与operator!=()</li></ul> 
<h4><a id="iterator_112"></a><code>iterator</code>结构</h4> 
<ul><li>三个模板参数 
  <ol><li>第一个模板参数控制类型</li><li>第二个模板参数控制返回值类型<code>const</code> <code>非const</code></li><li>第三个模板参数控制返回的<code>list</code>类的类型<code>const</code> <code>非const</code></li></ol> </li><li><code>Node* _node;</code>需要定义一个指针，指向<code>list</code>节点</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">Ref</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">ptr</span><span class="token operator">&gt;</span>
    <span class="token keyword">struct</span> <span class="token class-name">_list_iterator</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">typedef</span> _list_node<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
        <span class="token keyword">typedef</span> _list_iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span>ptr<span class="token operator">&gt;</span> self<span class="token punctuation">;</span>

        Node<span class="token operator">*</span> _node<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="operator__operator__131"></a><code>operator!=</code> <code>operator ==</code></h4> 
<pre><code class="prism language-cpp"><span class="token comment">//重载operator!=</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> it<span class="token punctuation">)</span><span class="token keyword">const</span> 
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _node <span class="token operator">!=</span> it<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//重载operator==</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> it<span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _node <span class="token operator">==</span> it<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="operator_146"></a><code>operator++</code></h4> 
<pre><code class="prism language-cpp"><span class="token comment">//重载operator++(前置)</span>
self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    _node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//重载operator++(后置)</span>
self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    self <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    _node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>

    <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="operator_167"></a><code>operator--</code></h4> 
<pre><code class="prism language-cpp"><span class="token comment">//重载operator--(前置)</span>
self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    _node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//重载operator--(后置)</span>
self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    self <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    _node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>

    <span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>operator*</code> <code>operator-&gt;</code></p> 
<pre><code class="prism language-cpp"><span class="token comment">//重载operator*</span>
Ref<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _node<span class="token operator">-&gt;</span>_val<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//重载operator-&gt;</span>
ptr <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _node<span class="token operator">-&gt;</span>_val<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="list_203"></a><code>list</code>数据结构</h3> 
<h4><a id="_205"></a>构造函数</h4> 
<h4><a id="list_207"></a>list的初始化</h4> 
<ul><li>双向带带头循环</li></ul> 
<div class="mermaid"> 
 <svg id="mermaid-svg-1LAJp6yJtxQBCAfN" width="79.1875" xmlns="http://www.w3.org/2000/svg" height="95.05555725097656" viewbox="0 0 79.1875 95.05555725097656" class="mermaid-svg"> 
  <style>#mermaid-svg-1LAJp6yJtxQBCAfN {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-1LAJp6yJtxQBCAfN .error-icon{fill:#552222;}#mermaid-svg-1LAJp6yJtxQBCAfN .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-1LAJp6yJtxQBCAfN .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-1LAJp6yJtxQBCAfN .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-1LAJp6yJtxQBCAfN .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-1LAJp6yJtxQBCAfN .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-1LAJp6yJtxQBCAfN .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-1LAJp6yJtxQBCAfN .marker{fill:#333333;stroke:#333333;}#mermaid-svg-1LAJp6yJtxQBCAfN .marker.cross{stroke:#333333;}#mermaid-svg-1LAJp6yJtxQBCAfN svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-1LAJp6yJtxQBCAfN .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-1LAJp6yJtxQBCAfN .cluster-label text{fill:#333;}#mermaid-svg-1LAJp6yJtxQBCAfN .cluster-label span{color:#333;}#mermaid-svg-1LAJp6yJtxQBCAfN .label text,#mermaid-svg-1LAJp6yJtxQBCAfN span{fill:#333;color:#333;}#mermaid-svg-1LAJp6yJtxQBCAfN .node rect,#mermaid-svg-1LAJp6yJtxQBCAfN .node circle,#mermaid-svg-1LAJp6yJtxQBCAfN .node ellipse,#mermaid-svg-1LAJp6yJtxQBCAfN .node polygon,#mermaid-svg-1LAJp6yJtxQBCAfN .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-1LAJp6yJtxQBCAfN .node .label{text-align:center;}#mermaid-svg-1LAJp6yJtxQBCAfN .node.clickable{cursor:pointer;}#mermaid-svg-1LAJp6yJtxQBCAfN .arrowheadPath{fill:#333333;}#mermaid-svg-1LAJp6yJtxQBCAfN .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-1LAJp6yJtxQBCAfN .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-1LAJp6yJtxQBCAfN .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-1LAJp6yJtxQBCAfN .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-1LAJp6yJtxQBCAfN .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-1LAJp6yJtxQBCAfN .cluster text{fill:#333;}#mermaid-svg-1LAJp6yJtxQBCAfN .cluster span{color:#333;}#mermaid-svg-1LAJp6yJtxQBCAfN div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-1LAJp6yJtxQBCAfN :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-_head LE-_head" id="L-_head-_head" style="opacity: 1;"> 
      <path class="path" d="M23.91052158273381,54L21.25876798561151,57.888888888888886C18.60701438848921,61.77777777777777,13.303507194244602,69.55555555555556,10.651753597122301,74.41666666666667C8,79.27777777777777,8,81.22222222222223,13.265625,83.16666666666667C18.53125,85.11111111111111,29.0625,87.05555555555556,39.59375,87.05555555555556C50.125,87.05555555555556,60.65625,85.11111111111111,65.921875,83.16666666666667C71.1875,81.22222222222223,71.1875,79.27777777777777,68.5357464028777,74.41666666666667C65.8839928057554,69.55555555555556,60.580485611510795,61.77777777777777,57.928732014388494,57.888888888888886L55.27697841726619,54" marker-end="url(#arrowhead18)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead18" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="translate(39.59375,89)" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-_head-_head" class="edgeLabel L-LS-_head' L-LE-_head"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-_head-22" transform="translate(39.59375,31)" style="opacity: 1;"> 
      <rect rx="0" ry="0" x="-31.59375" y="-23" width="63.1875" height="46" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-21.59375,-13)"> 
        <foreignobject width="43.1875" height="26"> 
         <div style="display: inline-block; white-space: nowrap;">
           _head 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<pre><code class="prism language-cpp"><span class="token comment">//空list初始化</span>
<span class="token keyword">void</span> <span class="token function">empty_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    _head <span class="token operator">=</span> <span class="token keyword">new</span> Node<span class="token punctuation">;</span>
    _head<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> _head<span class="token punctuation">;</span>
    _head<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> _head<span class="token punctuation">;</span>

    _size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_229"></a>节点初始化</h4> 
<ul><li>默认构造函数</li><li>默认构造函数</li><li>用迭代器初始化</li><li>拷贝构造函数</li><li>赋值运算符重载</li><li>赋值运算符重载</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//默认构造函数</span>
<span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">empty_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//默认构造函数</span>
<span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> val <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">empty_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>n<span class="token operator">--</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">push_back</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token comment">//用迭代器初始化</span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">Iterator</span><span class="token operator">&gt;</span>
    <span class="token function">list</span><span class="token punctuation">(</span>Iterator first<span class="token punctuation">,</span> Iterator last<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">empty_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>first <span class="token operator">!=</span> last<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token operator">*</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">++</span>first<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//拷贝构造函数</span>
<span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">const</span> list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> lt<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">empty_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> lt<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">push_back</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//赋值运算符重载</span>
list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> lt<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">swap</span><span class="token punctuation">(</span>lt<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//赋值运算符重载</span>
<span class="token operator">~</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">delete</span> _head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_293"></a>迭代器</h4> 
<pre><code class="prism language-cpp">iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> _head<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="list_modify_314"></a><code>list modify</code></h3> 
<h4><a id="insert_316"></a>insert</h4> 
<ul><li>在pos位置插入节点，同数据结构是一样的，在这里面不过多赘述（<a href="https://blog.csdn.net/Cayyyy/article/details/139453508">可以参考</a>）</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//insert</span>
iterator <span class="token function">insert</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    Node<span class="token operator">*</span> newcode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Node</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Node<span class="token operator">*</span> cur <span class="token operator">=</span> pos<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
    Node<span class="token operator">*</span> prev <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>

    prev<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> newcode<span class="token punctuation">;</span>
    newcode<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>
    newcode<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> cur<span class="token punctuation">;</span>
    cur<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> newcode<span class="token punctuation">;</span>

    <span class="token operator">++</span>_size<span class="token punctuation">;</span>

    <span class="token keyword">return</span> pos<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="erase_339"></a>erase</h4> 
<ul><li>删除迫使位置的节点，同样（<a href="https://blog.csdn.net/Cayyyy/article/details/139453508">可以参考</a>）</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//erase</span>
iterator <span class="token function">erase</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">assert</span><span class="token punctuation">(</span>pos<span class="token punctuation">.</span>_node <span class="token operator">!=</span> _head<span class="token punctuation">)</span><span class="token punctuation">;</span>

    Node<span class="token operator">*</span> cur <span class="token operator">=</span> pos<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
    Node<span class="token operator">*</span> prev <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
    Node<span class="token operator">*</span> next <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>

    prev<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> next<span class="token punctuation">;</span>
    next<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>

    <span class="token keyword">delete</span> cur<span class="token punctuation">;</span>

    <span class="token operator">--</span>_size<span class="token punctuation">;</span>

    <span class="token keyword">return</span> next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_364"></a>头插、头删、尾插、尾删</h4> 
<ul><li>可以复用<code>insert</code> <code>ersae</code> STL标准模板库也是进行复用</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">// 头插</span>
<span class="token keyword">void</span> <span class="token function">push_front</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//头删</span>
<span class="token keyword">void</span> <span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//尾插</span>
<span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//尾删</span>
<span class="token keyword">void</span> <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">erase</span><span class="token punctuation">(</span><span class="token operator">--</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="list_operator_391"></a><code>list operator</code></h3> 
<h4><a id="_393"></a>交换</h4> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> lt<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_head<span class="token punctuation">,</span> lt<span class="token punctuation">.</span>_head<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_size<span class="token punctuation">,</span> lt<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="clear_404"></a>clear</h4> 
<ul><li>析构函数也是利用了clear</li></ul> 
<pre><code class="prism language-cpp"><span class="token comment">//删除</span>
<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    iterator it <span class="token operator">=</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        it <span class="token operator">=</span> <span class="token function">erase</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">++</span>it<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_423"></a>源码</h2> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;assert.h&gt;</span></span>

<span class="token keyword">namespace</span> MyList
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//节点</span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">_list_node</span>
	<span class="token punctuation">{<!-- --></span>
		_list_node<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> _next<span class="token punctuation">;</span>
		_list_node<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> _prev<span class="token punctuation">;</span>
		T _val<span class="token punctuation">;</span>

		<span class="token function">_list_node</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> val <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token operator">:</span> <span class="token function">_next</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_prev</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_val</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//迭代器</span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">Ref</span><span class="token punctuation">,</span><span class="token keyword">class</span> <span class="token class-name">ptr</span><span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">_list_iterator</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">typedef</span> _list_node<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> _list_iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span>ptr<span class="token operator">&gt;</span> self<span class="token punctuation">;</span>
		
		Node<span class="token operator">*</span> _node<span class="token punctuation">;</span>

		<span class="token function">_list_iterator</span> <span class="token punctuation">(</span>Node<span class="token operator">*</span> node<span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_node</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
		<span class="token comment">//重载operator*</span>
		Ref<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _node<span class="token operator">-&gt;</span>_val<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//重载operator-&gt;</span>
		ptr <span class="token keyword">operator</span><span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _node<span class="token operator">-&gt;</span>_val<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//重载operator++(前置)</span>
		self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//重载operator++(后置)</span>
		self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			self <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>

			<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//重载operator--(前置)</span>
		self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//重载operator--(后置)</span>
		self<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">--</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			self <span class="token function">tmp</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			_node <span class="token operator">=</span> _node<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>

			<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>


		<span class="token comment">//重载operator!=</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> it<span class="token punctuation">)</span><span class="token keyword">const</span> 
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _node <span class="token operator">!=</span> it<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//重载operator==</span>
		<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> it<span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _node <span class="token operator">==</span> it<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//list</span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
	<span class="token keyword">class</span> <span class="token class-name">list</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">typedef</span> _list_node<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
	<span class="token keyword">public</span><span class="token operator">:</span>

		<span class="token keyword">typedef</span> _list_iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span>T<span class="token operator">*</span><span class="token operator">&gt;</span> iterator<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> _list_iterator<span class="token operator">&lt;</span>T<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span><span class="token keyword">const</span> T<span class="token operator">*</span><span class="token operator">&gt;</span> const_iterator<span class="token punctuation">;</span>

		<span class="token comment">//空list初始化</span>
		<span class="token keyword">void</span> <span class="token function">empty_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_head <span class="token operator">=</span> <span class="token keyword">new</span> Node<span class="token punctuation">;</span>
			_head<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> _head<span class="token punctuation">;</span>
			_head<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> _head<span class="token punctuation">;</span>

			_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//用n个val初始化</span>
		<span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> val <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">empty_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span>n<span class="token operator">--</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">push_back</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span>
		<span class="token comment">//用迭代器初始化</span>
		<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">Iterator</span><span class="token operator">&gt;</span>
		<span class="token function">list</span><span class="token punctuation">(</span>Iterator first<span class="token punctuation">,</span> Iterator last<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">empty_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span>first <span class="token operator">!=</span> last<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">push_back</span><span class="token punctuation">(</span><span class="token operator">*</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token operator">++</span>first<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token comment">//默认构造函数</span>
		<span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">empty_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//拷贝构造函数</span>
		<span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">const</span> list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">&amp;</span> lt<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">empty_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> lt<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">push_back</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>


		<span class="token comment">//赋值运算符重载</span>
		list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span>list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> lt<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">swap</span><span class="token punctuation">(</span>lt<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">//析构函数</span>
		<span class="token operator">~</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">delete</span> _head<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//删除</span>
		<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			iterator it <span class="token operator">=</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				it <span class="token operator">=</span> <span class="token function">erase</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token operator">++</span>it<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span>


		<span class="token comment">//迭代器</span>
		iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _head<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _head<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">//void push_back(const T&amp; x)</span>
		<span class="token comment">//{<!-- --></span>
		<span class="token comment">//	Node* newcode = new Node(x);</span>
		<span class="token comment">//	Node* tail = _head-&gt;_prev;</span>

		<span class="token comment">//	tail-&gt;_next = newcode;</span>
		<span class="token comment">//	newcode-&gt;_next = _head;</span>

		<span class="token comment">//	newcode-&gt;_prev = tail;</span>
		<span class="token comment">//	_head-&gt;_prev = newcode;</span>

		<span class="token comment">//	++_size;</span>
		<span class="token comment">//}</span>
		
		<span class="token comment">// 头插</span>
		<span class="token keyword">void</span> <span class="token function">push_front</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//头删</span>
		<span class="token keyword">void</span> <span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//尾插</span>
		<span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//尾删</span>
		<span class="token keyword">void</span> <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">erase</span><span class="token punctuation">(</span><span class="token operator">--</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//insert</span>
		iterator <span class="token function">insert</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span> x<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span>pos<span class="token punctuation">.</span>_node <span class="token operator">!=</span> _head<span class="token punctuation">)</span><span class="token punctuation">;</span>

			Node<span class="token operator">*</span> newcode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Node</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
			Node<span class="token operator">*</span> cur <span class="token operator">=</span> pos<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
			Node<span class="token operator">*</span> prev <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>

			prev<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> newcode<span class="token punctuation">;</span>
			newcode<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>
			newcode<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> cur<span class="token punctuation">;</span>
			cur<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> newcode<span class="token punctuation">;</span>

			<span class="token operator">++</span>_size<span class="token punctuation">;</span>

			<span class="token keyword">return</span> pos<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//erase</span>
		iterator <span class="token function">erase</span><span class="token punctuation">(</span>iterator pos<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span>pos<span class="token punctuation">.</span>_node <span class="token operator">!=</span> _head<span class="token punctuation">)</span><span class="token punctuation">;</span>

			Node<span class="token operator">*</span> cur <span class="token operator">=</span> pos<span class="token punctuation">.</span>_node<span class="token punctuation">;</span>
			Node<span class="token operator">*</span> prev <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_prev<span class="token punctuation">;</span>
			Node<span class="token operator">*</span> next <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>

			prev<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> next<span class="token punctuation">;</span>
			next<span class="token operator">-&gt;</span>_prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>

			<span class="token keyword">delete</span> cur<span class="token punctuation">;</span>

			<span class="token operator">--</span>_size<span class="token punctuation">;</span>

			<span class="token keyword">return</span> next<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//大小</span>
		size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _size<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//交换</span>
		<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>list<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> lt<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_head<span class="token punctuation">,</span> lt<span class="token punctuation">.</span>_head<span class="token punctuation">)</span><span class="token punctuation">;</span>
			std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_size<span class="token punctuation">,</span> lt<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token punctuation">}</span>

	<span class="token keyword">private</span><span class="token operator">:</span>
		Node<span class="token operator">*</span> _head<span class="token punctuation">;</span>
		size_t _size<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/56062f166886d5eed689d233b068379f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C&#43;&#43;】vector介绍以及模拟实现（超级详细）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/91dbaafc50de22000d295cc1c6cb7fee/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何在亚马逊云科技AWS上利用LoRA高效微调AI大模型减少预测偏差</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>