<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python中的定时器用法：Timer定时器和schedule库 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/c1d8eaa80b86be47e19e81a88e52d516/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Python中的定时器用法：Timer定时器和schedule库">
  <meta property="og:description" content="目录
一、引言
二、Timer定时器
1、Timer定时器的原理
2、Timer定时器的使用方法
3、Timer定时器的实际应用案例
三、schedule库
1、schedule库的原理
2、schedule库的使用方法
3、schedule库的实际应用案例
四、Timer定时器和schedule库的比较
1、功能差异
2、适用场景
五、实际应用案例
六、总结
一、引言 在Python中，定时器是一种常用的工具，用于在指定的时间间隔内执行特定的任务。Timer定时器和schedule库是Python中两种常用的定时器实现方式。本文将分别介绍它们的原理、使用方法和实际应用案例。
二、Timer定时器 1、Timer定时器的原理 Timer定时器是一种基于线程的定时器，它通过在指定的时间间隔内启动一个线程来执行特定的任务。当时间间隔到达时，线程将自动执行任务，并在任务完成后自动退出。
2、Timer定时器的使用方法 使用Timer定时器需要先导入threading模块，然后创建一个Timer对象，指定要执行的任务和时间间隔。下面是一个简单的示例：
import threading def my_task(): print(&#34;Task executed!&#34;) timer = threading.Timer(10.0, my_task) # 创建一个10秒后执行的Timer对象 timer.start() # 启动Timer对象 在这个示例中，我们首先定义了一个名为my_task的函数，它将在Timer对象执行时被调用。然后，我们创建了一个10秒后执行的Timer对象，并调用start()方法启动它。当10秒时间间隔到达时，my_task函数将被自动执行。
3、Timer定时器的实际应用案例 Timer定时器在实际应用中可以用于各种场景，例如：
定时发送邮件：可以在特定的时间间隔内发送邮件提醒。
定时备份数据：可以在每天固定的时间点备份数据库数据。
定时执行清理任务：可以在每天晚上固定时间清理临时文件。
三、schedule库 1、schedule库的原理 schedule库是一种基于时间的任务调度库，它可以根据指定的时间间隔和时间点来执行特定的任务。与Timer定时器不同的是，schedule库支持同时执行多个任务，并且可以根据任务的优先级进行调度。
2、schedule库的使用方法 使用schedule库需要先安装它（可以使用pip install schedule命令进行安装），然后定义要执行的任务和时间间隔。下面是一个简单的示例：
import schedule import time def my_task(): print(&#34;Task executed!&#34;) schedule.every(10.0).seconds.do(my_task) # 每10秒执行一次my_task函数 while True: schedule.run_pending() # 运行待执行的任务队列 time.sleep(1) # 暂停1秒钟，等待下一个任务执行 在这个示例中，我们首先定义了一个名为my_task的函数，它将在schedule库执行时被调用。然后，我们使用schedule.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-19T10:20:06+08:00">
    <meta property="article:modified_time" content="2023-12-19T10:20:06+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python中的定时器用法：Timer定时器和schedule库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80" rel="nofollow">一、引言</a></p> 
<p id="%E4%BA%8C%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8" rel="nofollow">二、Timer定时器</a></p> 
<p id="1%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E5%8E%9F%E7%90%86-toc" style="margin-left:80px;"><a href="#1%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E5%8E%9F%E7%90%86" rel="nofollow">1、Timer定时器的原理</a></p> 
<p id="2%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><a href="#2%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" rel="nofollow">2、Timer定时器的使用方法</a></p> 
<p id="3%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B-toc" style="margin-left:80px;"><a href="#3%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B" rel="nofollow">3、Timer定时器的实际应用案例</a></p> 
<p id="%E4%B8%89%E3%80%81schedule%E5%BA%93-toc" style="margin-left:40px;"><a href="#%E4%B8%89%E3%80%81schedule%E5%BA%93" rel="nofollow">三、schedule库</a></p> 
<p id="1%E3%80%81schedule%E5%BA%93%E7%9A%84%E5%8E%9F%E7%90%86-toc" style="margin-left:80px;"><a href="#1%E3%80%81schedule%E5%BA%93%E7%9A%84%E5%8E%9F%E7%90%86" rel="nofollow">1、schedule库的原理</a></p> 
<p id="2%E3%80%81schedule%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-toc" style="margin-left:80px;"><a href="#2%E3%80%81schedule%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" rel="nofollow">2、schedule库的使用方法</a></p> 
<p id="3%E3%80%81schedule%E5%BA%93%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B-toc" style="margin-left:80px;"><a href="#3%E3%80%81schedule%E5%BA%93%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B" rel="nofollow">3、schedule库的实际应用案例</a></p> 
<p id="%E5%9B%9B%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E5%92%8Cschedule%E5%BA%93%E7%9A%84%E6%AF%94%E8%BE%83-toc" style="margin-left:40px;"><a href="#%E5%9B%9B%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E5%92%8Cschedule%E5%BA%93%E7%9A%84%E6%AF%94%E8%BE%83" rel="nofollow">四、Timer定时器和schedule库的比较</a></p> 
<p id="1%E3%80%81%E5%8A%9F%E8%83%BD%E5%B7%AE%E5%BC%82-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E5%8A%9F%E8%83%BD%E5%B7%AE%E5%BC%82" rel="nofollow">1、功能差异</a></p> 
<p id="2%E3%80%81%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF" rel="nofollow">2、适用场景</a></p> 
<p id="%E4%BA%94%E3%80%81%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B-toc" style="margin-left:40px;"><a href="#%E4%BA%94%E3%80%81%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B" rel="nofollow">五、实际应用案例</a></p> 
<p id="%E5%85%AD%E3%80%81%E6%80%BB%E7%BB%93-toc" style="margin-left:40px;"><a href="#%E5%85%AD%E3%80%81%E6%80%BB%E7%BB%93" rel="nofollow">六、总结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80">一、引言</h3> 
<p>在Python中，定时器是一种常用的工具，用于在指定的时间间隔内执行特定的任务。Timer定时器和schedule库是Python中两种常用的定时器实现方式。本文将分别介绍它们的原理、使用方法和实际应用案例。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/09/e0/nbgHlSdQ_o.jpg"></p> 
<h3 id="%E4%BA%8C%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8">二、Timer定时器</h3> 
<h4 id="1%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E5%8E%9F%E7%90%86">1、Timer定时器的原理</h4> 
<p>Timer定时器是一种基于线程的定时器，它通过在指定的时间间隔内启动一个线程来执行特定的任务。当时间间隔到达时，线程将自动执行任务，并在任务完成后自动退出。</p> 
<h4 id="2%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">2、Timer定时器的使用方法</h4> 
<p>使用Timer定时器需要先导入threading模块，然后创建一个Timer对象，指定要执行的任务和时间间隔。下面是一个简单的示例：</p> 
<pre><code class="language-python">import threading  
  
def my_task():  
    print("Task executed!")  
  
timer = threading.Timer(10.0, my_task)  # 创建一个10秒后执行的Timer对象  
timer.start()  # 启动Timer对象</code></pre> 
<p>在这个示例中，我们首先定义了一个名为my_task的函数，它将在Timer对象执行时被调用。然后，我们创建了一个10秒后执行的Timer对象，并调用start()方法启动它。当10秒时间间隔到达时，my_task函数将被自动执行。</p> 
<h4 id="3%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B">3、Timer定时器的实际应用案例</h4> 
<p>Timer定时器在实际应用中可以用于各种场景，例如：</p> 
<p>定时发送邮件：可以在特定的时间间隔内发送邮件提醒。<br> 定时备份数据：可以在每天固定的时间点备份数据库数据。<br> 定时执行清理任务：可以在每天晚上固定时间清理临时文件。</p> 
<h3 id="%E4%B8%89%E3%80%81schedule%E5%BA%93">三、schedule库</h3> 
<h4 id="1%E3%80%81schedule%E5%BA%93%E7%9A%84%E5%8E%9F%E7%90%86">1、schedule库的原理</h4> 
<p>schedule库是一种基于时间的任务调度库，它可以根据指定的时间间隔和时间点来执行特定的任务。与Timer定时器不同的是，schedule库支持同时执行多个任务，并且可以根据任务的优先级进行调度。</p> 
<h4 id="2%E3%80%81schedule%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">2、schedule库的使用方法</h4> 
<p>使用schedule库需要先安装它（可以使用pip install schedule命令进行安装），然后定义要执行的任务和时间间隔。下面是一个简单的示例：</p> 
<pre><code class="language-python">import schedule  
import time  
  
def my_task():  
    print("Task executed!")  
  
schedule.every(10.0).seconds.do(my_task)  # 每10秒执行一次my_task函数  
while True:  
    schedule.run_pending()  # 运行待执行的任务队列  
    time.sleep(1)  # 暂停1秒钟，等待下一个任务执行</code></pre> 
<p>在这个示例中，我们首先定义了一个名为my_task的函数，它将在schedule库执行时被调用。然后，我们使用schedule.every(10.0).seconds.do(my_task)语句指定每10秒执行一次my_task函数。最后，我们使用一个无限循环来运行待执行的任务队列，并使用time.sleep(1)语句暂停1秒钟，等待下一个任务执行。</p> 
<h4 id="3%E3%80%81schedule%E5%BA%93%E7%9A%84%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B">3、schedule库的实际应用案例</h4> 
<p>schedule库在实际应用中可以用于各种场景，例如：</p> 
<p>定时发送新闻推送：可以根据用户的订阅时间设置定时推送新闻消息。<br> 定时发送提醒通知：可以根据用户的设置时间设置定时发送提醒通知。<br> 定时清理缓存：可以根据缓存的大小和过期时间设置定时清理缓存的任务。</p> 
<h3 id="%E5%9B%9B%E3%80%81Timer%E5%AE%9A%E6%97%B6%E5%99%A8%E5%92%8Cschedule%E5%BA%93%E7%9A%84%E6%AF%94%E8%BE%83">四、Timer定时器和schedule库的比较</h3> 
<h4 id="1%E3%80%81%E5%8A%9F%E8%83%BD%E5%B7%AE%E5%BC%82">1、功能差异</h4> 
<p>Timer定时器和schedule库在功能上存在一些差异。Timer定时器是基于线程的，可以指定任务执行的延迟时间，但它不支持多个任务的并行执行，也不支持任务的周期性执行。而schedule库则支持多个任务的并行执行和周期性执行，并且可以根据任务的优先级进行调度。</p> 
<h4 id="2%E3%80%81%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF">2、适用场景</h4> 
<p>Timer定时器适用于需要一次性延迟执行任务的场景，例如定时发送邮件、定时备份数据等。而schedule库则适用于需要周期性执行任务的场景，例如定时发送新闻推送、定时发送提醒通知等。</p> 
<h3 id="%E4%BA%94%E3%80%81%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B">五、实际应用案例</h3> 
<p>下面是一个使用Timer定时器和schedule库实现定时发送邮件的示例：</p> 
<pre><code class="language-python">import smtplib  
from email.mime.text import MIMEText  
import threading  
import time  
import schedule  
  
def send_email():  
    # 发送邮件的代码  
    sender = "your_email@example.com"  
    receiver = "recipient_email@example.com"  
    message = MIMEText("Hello, this is a timer email!")  
    message["Subject"] = "Timer Email"  
    message["From"] = sender  
    message["To"] = receiver  
    smtp_server = "smtp.example.com"  
    smtp_port = 587  
    smtp_username = "your_username"  
    smtp_password = "your_password"  
    with smtplib.SMTP(smtp_server, smtp_port) as server:  
        server.starttls()  
        server.login(smtp_username, smtp_password)  
        server.sendmail(sender, receiver, message.as_string())  
  
# 使用Timer定时器发送邮件  
timer = threading.Timer(3600.0, send_email)  # 创建一个1小时后执行的Timer对象  
timer.start()  # 启动Timer对象  
  
# 使用schedule库定时发送邮件  
schedule.every(86400).seconds.do(send_email)  # 每天执行一次send_email函数  
while True:  
    schedule.run_pending()  # 运行待执行的任务队列  
    time.sleep(60)  # 暂停60秒钟，等待下一个任务执行</code></pre> 
<p>在这个示例中，我们定义了一个名为send_email的函数，用于发送邮件。然后，我们分别使用Timer定时器和schedule库创建了两个定时任务，一个是在1小时后执行send_email函数，另一个是每天执行一次send_email函数。这样，我们就实现了定时发送邮件的功能。</p> 
<h3 id="%E5%85%AD%E3%80%81%E6%80%BB%E7%BB%93">六、总结</h3> 
<p>通过本文的介绍，我们了解了Python中Timer定时器和schedule库的原理、使用方法和实际应用案例。Timer定时器适用于一次性延迟执行任务的场景，而schedule库适用于周期性执行任务的场景。它们可以帮助我们在Python程序中实现定时任务的执行，提高程序的效率和自动化程度。在未来的发展中，我们可以期待Python的定时器功能更加强大和灵活，以满足更多复杂任务的需求。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2872d8d8b8f2bc569a1ac865662ed2ab/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【MySQL】窗口函数详解（概念&#43;练习&#43;实战）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8cb92918d31cc43ed9ed7ef3f9404d5d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">DDSP-SVC-3.0完全指南：一步步教你用AI声音开启音乐之旅</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>