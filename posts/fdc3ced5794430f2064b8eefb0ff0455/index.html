<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【C&#43;&#43;】—— 从 C 到 C&#43;&#43; （下） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/fdc3ced5794430f2064b8eefb0ff0455/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【C&#43;&#43;】—— 从 C 到 C&#43;&#43; （下）">
  <meta property="og:description" content="【C&#43;&#43;】—— 从 C 到 C&#43;&#43; （下） 六、引用6.1、什么是引用6.2、引用在传参的使用6.2.1、例一6.2.2、例二 6.3、引用在做返回值的使用6.4、引用的特性6.5、引用的使用总结6.6、 c o n s t const const 引用6.6.1、 c o n s t const const 引用的规则6.6.2、 c o n s t const const 引用的情况6.6.2.1、常量6.6.2.2、表达式6.6.2.3、隐式类型转换 6.7、引用的本质6.8、指针与引用的关系 七、 i n l i n e inline inline 内联函数7.1、引子7.2、 i n l i n e inline inline 的特点 八、 n u l l p t r nullptr nullptr 空指针 六、引用 6.1、什么是引用 在大家学习C语言指针的部分时，是不是觉得指针特别难学，还有点繁琐，每次使用都要取地址、解引用、还有二级指针什么的。为此，C&#43;&#43;引入了引用的语法
引用并不是新定义一个变量，而是在已有变量的基础上给它取一个别名，编译器不会为引用变量开辟新的内存空间，它和它的引用变量公用一块内存空间。
什么意思呢？就拿《水浒传》中的任务来说，林冲别名叫豹子头、李逵别名叫黑旋风；林冲和豹子头指向的是同一个人，李逵和黑旋风也是指向同一个人
类型&amp; 应用别名 = 引用对象；">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-07-20T08:00:00+08:00">
    <meta property="article:modified_time" content="2024-07-20T08:00:00+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【C&#43;&#43;】—— 从 C 到 C&#43;&#43; （下）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>【C++】—— 从 C 到 C++ （下）</h4> 
 <ul><li><a href="#_1" rel="nofollow">六、引用</a></li><li><ul><li><a href="#61_3" rel="nofollow">6.1、什么是引用</a></li><li><a href="#62_50" rel="nofollow">6.2、引用在传参的使用</a></li><li><ul><li><a href="#621_51" rel="nofollow">6.2.1、例一</a></li><li><a href="#622_91" rel="nofollow">6.2.2、例二</a></li></ul> 
   </li><li><a href="#63_130" rel="nofollow">6.3、引用在做返回值的使用</a></li><li><a href="#64_221" rel="nofollow">6.4、引用的特性</a></li><li><a href="#65_257" rel="nofollow">6.5、引用的使用总结</a></li><li><a href="#66const__264" rel="nofollow">6.6、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
         
          
           
           
             c 
            
           
             o 
            
           
             n 
            
           
             s 
            
           
             t 
            
           
          
            const 
           
          
        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用</a></li><li><ul><li><a href="#661const__265" rel="nofollow">6.6.1、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
          
           
            
            
              c 
             
            
              o 
             
            
              n 
             
            
              s 
             
            
              t 
             
            
           
             const 
            
           
         </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用的规则</a></li><li><a href="#662const__335" rel="nofollow">6.6.2、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
          
           
            
            
              c 
             
            
              o 
             
            
              n 
             
            
              s 
             
            
              t 
             
            
           
             const 
            
           
         </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用的情况</a></li><li><ul><li><a href="#6621_338" rel="nofollow">6.6.2.1、常量</a></li><li><a href="#6622_350" rel="nofollow">6.6.2.2、表达式</a></li><li><a href="#6623_383" rel="nofollow">6.6.2.3、隐式类型转换</a></li></ul> 
   </li></ul> 
   </li><li><a href="#67_433" rel="nofollow">6.7、引用的本质</a></li><li><a href="#68_475" rel="nofollow">6.8、指针与引用的关系</a></li></ul> 
  </li><li><a href="#_inline__486" rel="nofollow">七、 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            i 
           
          
            n 
           
          
            l 
           
          
            i 
           
          
            n 
           
          
            e 
           
          
         
           inline 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">in</span><span class="mord mathnormal">e</span></span></span></span></span> 内联函数</a></li><li><ul><li><a href="#71_488" rel="nofollow">7.1、引子</a></li><li><a href="#72inline__513" rel="nofollow">7.2、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
         
          
           
           
             i 
            
           
             n 
            
           
             l 
            
           
             i 
            
           
             n 
            
           
             e 
            
           
          
            inline 
           
          
        </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">in</span><span class="mord mathnormal">e</span></span></span></span></span> 的特点</a></li></ul> 
  </li><li><a href="#nullptr__552" rel="nofollow">八、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            n 
           
          
            u 
           
          
            l 
           
          
            l 
           
          
            p 
           
          
            t 
           
          
            r 
           
          
         
           nullptr 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">llpt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> 空指针</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>六、引用</h2> 
<h3><a id="61_3"></a>6.1、什么是引用</h3> 
<p>  在大家学习C语言指针的部分时，是不是觉得指针特别难学，还有点繁琐，每次使用都要取地址、解引用、还有二级指针什么的。为此，C++引入了<mark>引用</mark>的语法</p> 
<p>  引用并不是新定义一个变量，而是在已有变量的基础上给它<mark>取一个<font color="red">别名</font></mark>，编译器<code>不会为引用变量开辟新的内存空间</code>，它和它的引用变量公用一块内存空间。</p> 
<p>  什么意思呢？就拿《水浒传》中的任务来说，林冲别名叫豹子头、李逵别名叫黑旋风；林冲和豹子头指向的是同一个人，李逵和黑旋风也是指向同一个人</p> 
<blockquote> 
 <p><code>类型&amp; 应用别名 = 引用对象；</code></p> 
</blockquote> 
<p>  C++ 中为了避免引入太多的运算符，会复用 C语言 的一些符号比如 <code>&lt;&lt;</code> 和 <code>&gt;&gt;</code>，这里引用也和取地址用了同一个符号 <mark>&amp;</mark>，大家应注意区分：放在<code>类型后面是引用</code>，放在<code>对象前面是取地址</code>。</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token comment">// 引⽤：b和c是a的别名</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> c <span class="token operator">=</span> a<span class="token punctuation">;</span>
	<span class="token comment">// 也可以给别名b取别名，d相当于还是a的别名</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> d <span class="token operator">=</span> b<span class="token punctuation">;</span>
	<span class="token operator">++</span>d<span class="token punctuation">;</span>


	cout <span class="token operator">&lt;&lt;</span> <span class="token operator">&amp;</span>a <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token operator">&amp;</span>b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token operator">&amp;</span>c <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token operator">&amp;</span>d <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  上述代码中，给 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 取别名 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         b 
        
       
      
        b 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span>，再给 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 取另一个别名 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
      
        c 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span></span>，最后再给 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 别名 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         b 
        
       
      
        b 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span> 取别名 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         d 
        
       
      
        d 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span>。<br>   可以看到是<mark>可以给别名取别名</mark>的</p> 
<p>  什么意思呢？<br>   我们看下面的图就明白了</p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/9a/3c/vywB8r4A_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         b 
        
       
      
        b 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
      
        c 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         d 
        
       
      
        d 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span> 指的是同一块空间，这块空间放着 0，什么这是这块空间的不同称谓而已，</p> 
<p>  我们取地址发现方面的<code>地址都是一样</code>的，也可以印证这一点</p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/2a/95/Qxzxihqd_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  </p> 
<h3><a id="62_50"></a>6.2、引用在传参的使用</h3> 
<h4><a id="621_51"></a>6.2.1、例一</h4> 
<p>  引用在实践中主要用于 <mark>函数的<font color="red">传参</font>和<font color="red">返回值</font></mark> 中，引用的使用会比指针更<code>容易</code>和<code>方便</code></p> 
<p>  我们写一个交换函数来感受一下<br>   众所周知，传参分为<code>传值传参</code>和<code>传值传参</code>，传值传参仅仅是实参的一份<mark>拷贝</mark>，要想改变实参的值，必须用<code>传址传参</code><br>   而现在，除了用指针来处理，还可以用<mark>引用</mark>，并且引用比指针<code>更加方便</code></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&amp;</span> rx<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> ry<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> temp <span class="token operator">=</span> rx<span class="token punctuation">;</span>
	rx <span class="token operator">=</span> ry<span class="token punctuation">;</span>
	ry <span class="token operator">=</span> temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
	<span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"a = "</span> <span class="token operator">&lt;&lt;</span> a <span class="token operator">&lt;&lt;</span> endl <span class="token operator">&lt;&lt;</span> <span class="token string">"b = "</span> <span class="token operator">&lt;&lt;</span> b <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>运行结果：</strong></p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/29/10/DeyJllXa_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  可以看到，交换是成功的</p> 
<p>  在<code>void swap(int&amp; rx, int&amp; ry);</code>函数中，传递实参 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         b 
        
       
      
        b 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span> 后，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         x 
        
       
      
        rx 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">x</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         y 
        
       
      
        ry 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">ry</span></span></span></span></span> 就是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         b 
        
       
      
        b 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span> 的<mark>别名</mark>，既然是别名他们就<code>指向同一块内存空间</code>，对别名 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         x 
        
       
      
        rx 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">x</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         y 
        
       
      
        ry 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">ry</span></span></span></span></span> 的修改就是对 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         b 
        
       
      
        b 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span> 的修改</p> 
<p>  可以看到，相比于使用指针，用引用就方便了很多，首先是传参时<code>不用再取地址</code>，函数<code>内部也不用再需要解引用</code>。</p> 
<p>  </p> 
<h4><a id="622_91"></a>6.2.2、例二</h4> 
<p>  在一些主要由 C语言 写成的数据结构的书本中，作者会认为指针太难，怕读者难以理解，而<code>使用引用代替指针</code>，以达到简化程序的目的</p> 
<p><strong>举个栗子</strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">ListNode</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> val<span class="token punctuation">;</span>
	<span class="token keyword">struct</span> <span class="token class-name">ListNode</span><span class="token operator">*</span> next<span class="token punctuation">;</span>
<span class="token punctuation">}</span>LTNode<span class="token punctuation">,</span> <span class="token operator">*</span> PNode<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">ListPushBack</span><span class="token punctuation">(</span>PNode<span class="token operator">&amp;</span> phead<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	PNode newnode <span class="token operator">=</span> <span class="token punctuation">(</span>PNode<span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>LTNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	newnode<span class="token operator">-&gt;</span>val <span class="token operator">=</span> x<span class="token punctuation">;</span>
	newnode<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>phead <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		phead <span class="token operator">=</span> newnode<span class="token punctuation">;</span>
	<span class="token punctuation">}</span> 
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//...</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  该段代码用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         t 
        
       
         y 
        
       
         p 
        
       
         e 
        
       
         d 
        
       
         e 
        
       
         f 
        
       
      
        typedef 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mord mathnormal">p</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span></span></span></span></span> 将 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         s 
        
       
         t 
        
       
         r 
        
       
         u 
        
       
         c 
        
       
         t 
        
       
      
        struct 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span></span></span></span></span> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         L 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
         N 
        
       
         o 
        
       
         d 
        
       
         e 
        
       
      
        ListNode 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right: 0.109em;">tN</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span> 重命名为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         L 
        
       
         T 
        
       
         N 
        
       
         o 
        
       
         d 
        
       
         e 
        
       
      
        LTNode 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal" style="margin-right: 0.109em;">TN</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         s 
        
       
         t 
        
       
         r 
        
       
         u 
        
       
         c 
        
       
         t 
        
       
      
        struct 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span></span></span></span></span> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         L 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
         N 
        
       
         o 
        
       
         d 
        
       
         e 
        
       
      
        ListNode 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right: 0.109em;">tN</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span>* 重命名为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         P 
        
       
         N 
        
       
         o 
        
       
         d 
        
       
         e 
        
       
      
        PNode 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">PN</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">ListPushBack</span><span class="token punctuation">(</span>PNode<span class="token operator">&amp;</span> phead<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span>
</code></pre> 
<p>  这段代码中形参<code>PNode&amp; phead</code>我们一起来理解一下<br>   <br>   这是链表的尾插函数，当链表中无数据时，尾插相当于头插，是要<mark>改变指针 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          p 
         
        
          l 
         
        
          i 
         
        
          s 
         
        
          t 
         
        
       
         plist 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span>（代码中没写）的指向的</mark>.<br>   因为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         l 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
      
        plist 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 本身是一个指针，因此要传<code>二级指针</code>。这里是用了<code>引用</code>，即给传递过来的 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         l 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
      
        plist 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 指针 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         s 
        
       
         t 
        
       
         r 
        
       
         u 
        
       
         c 
        
       
         t 
        
       
      
        struct 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span></span></span></span></span> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         L 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
         N 
        
       
         o 
        
       
         d 
        
       
         e 
        
       
      
        ListNode 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right: 0.109em;">tN</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span>* <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         l 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
      
        plist 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> <code>起别名</code>为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         h 
        
       
         e 
        
       
         a 
        
       
         d 
        
       
      
        phead 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         l 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
      
        plist 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">pl</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 即 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         h 
        
       
         e 
        
       
         a 
        
       
         d 
        
       
      
        phead 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span></span></span></span></span>，这样就不用二级指针了。<br>   形参 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         s 
        
       
         t 
        
       
         r 
        
       
         u 
        
       
         c 
        
       
         t 
        
       
      
        struct 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span></span></span></span></span> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         L 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
         N 
        
       
         o 
        
       
         d 
        
       
         e 
        
       
      
        ListNode 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right: 0.109em;">tN</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span> * &amp;  <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         h 
        
       
         e 
        
       
         a 
        
       
         d 
        
       
      
        phead 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span></span></span></span></span>，因为将 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         s 
        
       
         t 
        
       
         r 
        
       
         u 
        
       
         c 
        
       
         t 
        
       
      
        struct 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span></span></span></span></span> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         L 
        
       
         i 
        
       
         s 
        
       
         t 
        
       
         N 
        
       
         o 
        
       
         d 
        
       
         e 
        
       
      
        ListNode 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right: 0.109em;">tN</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span> * <code>重命名</code>为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         P 
        
       
         N 
        
       
         o 
        
       
         d 
        
       
         e 
        
       
      
        PNode 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">PN</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span>，所以是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         P 
        
       
         N 
        
       
         o 
        
       
         d 
        
       
         e 
        
       
      
        PNode 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">PN</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span>&amp; <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         h 
        
       
         e 
        
       
         a 
        
       
         d 
        
       
      
        phead 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">h</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span></span></span></span></span>。</p> 
<p>  </p> 
<h3><a id="63_130"></a>6.3、引用在做返回值的使用</h3> 
<p>  引用做<code>返回值</code>在<code>类和对象</code>中有很好的应用，这里我们简单提一下</p> 
<p>  现在有一个栈，我们想改变他的栈顶元素，怎么改呢？</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">STModityTop</span><span class="token punctuation">(</span>ST<span class="token operator">&amp;</span> rs<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	rs<span class="token punctuation">.</span>a<span class="token punctuation">[</span>rs<span class="token punctuation">.</span>top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  现在我们可以运用<code>引用做返回值</code>来完成<br>   我们先来看看传值返回</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">STModityTop</span><span class="token punctuation">(</span>ST<span class="token operator">&amp;</span> rs<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> rs<span class="token punctuation">.</span>a<span class="token punctuation">[</span>rs<span class="token punctuation">.</span>top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	ST st<span class="token punctuation">;</span>
	<span class="token function">STInit</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//初始化栈</span>
	<span class="token function">STPush</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//插入数据</span>

	<span class="token comment">//修改栈顶元素</span>
	<span class="token function">STModityTop</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/34/df/mz6Zr32i_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  可以看到报错了，显示的是左操作数<code>必须为可修改的左值</code></p> 
<p>  首先我们要知道一个知识点：<br>   函数的返回值并不是直接返回运算结果，它会将最终要返回的运算结果<code>拷贝</code>到在一个<mark>临时对象</mark>中（与传值传参类似），这个临时对象再做为函数的返回值，而临时对象具有<mark>常性</mark>（规定），因此是<code>不能直接修改返回值</code>的。</p> 
<p>  所谓临时对象，就是编译器需要一个<code>空间</code>暂存函数、表达式等返回值结果时创建的<code>一个未命名的对象</code>，C++中吧这个未命名的对象叫做<mark>临时对象</mark></p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/89/af/7yinAJEl_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  但是，今时不同往日，现在<code>引用</code>来啦</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span><span class="token operator">&amp;</span> <span class="token function">STModityTop</span><span class="token punctuation">(</span>ST<span class="token operator">&amp;</span> rs<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> rs<span class="token punctuation">.</span>a<span class="token punctuation">[</span>rs<span class="token punctuation">.</span>top <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	ST st<span class="token punctuation">;</span>
	<span class="token function">STInit</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//初始化栈</span>
	<span class="token function">STPush</span><span class="token punctuation">(</span>st<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//插入数据</span>

	<span class="token comment">//修改栈顶元素</span>
	<span class="token function">STModityTop</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  函数用引用作为返回值就可以<code>直接修改函数返回值</code>了</p> 
<p>  这是因为引用做返回值就是返回它的引用，<mark>中间没有产生临时对象</mark></p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/0f/2b/2hMYhC14_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  那既然引用这么好用，那我们能不能全部用引用返回呢？<br>   可定是<mark>不能</mark>的</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span><span class="token operator">&amp;</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> a<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  这个函数我返回 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 的别名（引用）会怎样？<br>   要知道 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 在出了函数作用域就<code>销毁</code>了，这是返回 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 的别名会出现<code>类似野指针一样的情况</code><br>   <br>   上述例子可用引用返回是因为引用返回的对象<code>不会因为出了函数作用域而销毁</code>，它是在<code>堆</code>上创建的。</p> 
<p>  </p> 
<h3><a id="64_221"></a>6.4、引用的特性</h3> 
<p>  了解了引用的使用，相信大家对引用由了初步的感觉，接下来我们一起来了解一下引用特性</p> 
<ol><li><strong>引用在定义时必须初始化</strong></li></ol> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> b<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/ff/55/3vs6DaMv_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<ol start="2"><li> <p><strong>一个变量可以有多个引用</strong></p> <p>这一点，在前面介绍引用的使用时已经介绍过了，这里就不再介绍了<br>   </p> </li><li> <p><strong>引用一旦引用一个实体就不能再引用其他实体</strong></p> </li></ol> 
<p>我们想一个问题：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">ListPushBack</span><span class="token punctuation">(</span>PNode<span class="token operator">&amp;</span> phead<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">ListPushBack</span><span class="token punctuation">(</span>LTNode<span class="token operator">&amp;&amp;</span> phead<span class="token punctuation">,</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>  既然可以用一次引用让二级指针变为一级指针，那能不能直接用两次引用 &amp;&amp; 替代二级指针呢？</p> 
<p>  答案是<code>不能</code>：因为引用时<mark>不能改变指向</mark>的，而链表这个头结点的指针是<code>需要不断改变指向</code>的<br> 同理，链表中的指向下一个节点的变量 <mark><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          n 
         
        
          e 
         
        
          x 
         
        
          t 
         
        
       
         next 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">t</span></span></span></span></span></mark> 也只能用指针</p> 
<p>  指针和引用更多的是 <mark><strong>相辅相成</strong></mark> 的效果，而不是取代</p> 
<p>  </p> 
<h3><a id="65_257"></a>6.5、引用的使用总结</h3> 
<ul><li>引⽤在实践中主要是于引⽤<code>传参</code>和引⽤<code>做返回值</code>中<mark>减少拷⻉提⾼效率</mark>和<mark>改变引⽤对象时同时改变被引⽤对象</mark>。</li><li>引⽤传参跟指针传参功能是<mark>类似</mark>的，引⽤传参相对<code>更⽅便</code>⼀些。</li><li>引⽤返回值的场景相对⽐较复杂，我们在这⾥只是简单讲了⼀下场景，还有⼀些内容后续类和对象章节中会继续深⼊讲解。</li><li>引⽤和指针在实践中<code>相辅相成</code>，功能有重叠性，但是各有特点，<code>互相不可替代</code>。C++的引⽤跟其他语⾔的引⽤(如Java)是有很⼤的区别的，除了⽤法，最⼤的点，C++引⽤定义后<code>不能改变指向</code>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          J 
         
        
          a 
         
        
          v 
         
        
          a 
         
        
       
         Java 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0962em;">J</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">a</span></span></span></span></span> 的引⽤可以改变指向。</li></ul> 
<p>  </p> 
<h3><a id="66const__264"></a>6.6、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用</h3> 
<h4><a id="661const__265"></a>6.6.1、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用的规则</h4> 
<p>在<a href="https://blog.csdn.net/yusjushd/article/details/136273723">【C语言】—— 指针二 ： 初识指针（下）</a>中，我们了解到 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 修饰变量和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 修饰指针。这里简单回顾一下。</p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
       
         const 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 修饰变量：变量<code>不可被修改</code>，变成<code>只读</code></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          c 
         
        
          o 
         
        
          n 
         
        
          s 
         
        
          t 
         
        
       
         const 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 修饰指针： 
  <ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            c 
           
          
            o 
           
          
            n 
           
          
            s 
           
          
            t 
           
          
         
           const 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span>在 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            ∗ 
           
          
         
           * 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4653em;"></span><span class="mord">∗</span></span></span></span></span> 的<mark>左边</mark>：修饰的是<code>指针所指向的内容</code>，指针所指向的内容不可被修改</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            c 
           
          
            o 
           
          
            n 
           
          
            s 
           
          
            t 
           
          
         
           const 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span>在 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
        
         
          
          
            ∗ 
           
          
         
           * 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4653em;"></span><span class="mord">∗</span></span></span></span></span> 的<mark>右边</mark>：修饰的是<code>指针本身</code>，指针的指向不能被修改。</li></ul> </li></ul> 
<p>  下面我们来看看 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用。</p> 
<p>  那我们对 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 修饰的变量进行引用，是不是要用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用呢</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> ra <span class="token operator">=</span> a<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/ae/ce/uy86EcgD_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  可以看到编译是通过的</p> 
<p>  那如果用普通的引用会发生什么</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> ra <span class="token operator">=</span> a<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/9f/cc/uhlPNMwD_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  可以看到是编不过去的。</p> 
<p>  其实也是，我自己本身的访问权限都只是只读，你变成我的别名后你竟然告诉我可以读写，这合理吗？不合理。</p> 
<blockquote> 
 <p>这里我们了解一下<mark>权限放大</mark>和<mark>权限缩小</mark>的概念</p> 
 <ul><li><strong>权限放大</strong>：当某个变量或文件等只有只读的权限，我们赋予它读写的权限，就是权限放大</li><li><strong>权限缩小</strong>：当某个变量或文件有读和写的权限，我们限制它其中某一项，就是权限缩小</li></ul> 
</blockquote> 
<p>  第二个例子就是权限放大，引用是不允许权限放大的。</p> 
<p>  既然权限放大不行，我们试试权限缩小</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> ra <span class="token operator">=</span> a<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/b3/26/6oxMNoID_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p><strong>没有问题！</strong></p> 
<p>  C++中规定，对象的访问权限在引用过程中，<mark>只能缩小，不能放大</mark></p> 
<p>  同时，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         a 
        
       
      
        ra 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">a</span></span></span></span></span> 并<mark>没有缩小</mark> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 的访问权限，用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 访问<code>可读可写</code>，用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         a 
        
       
      
        ra 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">a</span></span></span></span></span> 访问是<code>只读</code></p> 
<p>  为什么呢？举个不是很恰当的例子：鲁迅先生，原名周树人，当它是周树人身份时，是个普通人，可以很随意；当他是鲁迅的身份时，他是一个文人，要注意文人的风度，举止就被限制了。这里周树人和鲁迅都是指同一个人，但别名鲁迅相比周树人是权限缩小了的。<br>   </p> 
<h4><a id="662const__335"></a>6.6.2、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用的情况</h4> 
<p>  了解了 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用的规则后，我们来看看下面几种情况<br>   </p> 
<h5><a id="6621_338"></a>6.6.2.1、常量</h5> 
<p>  我们可不可以<code>对常量取别名</code>呢？听起来很神奇是不是，其实是<mark>可以</mark>的。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> ra <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  当然，普通的引用是不行的，<code>常量值只读量</code>，对常量的引用要用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用<br>   </p> 
<h5><a id="6622_350"></a>6.6.2.2、表达式</h5> 
<p>  除了对常量取别名，<code>给表达式取别名</code>也是可以的</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> c <span class="token operator">=</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  像是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
         + 
        
       
         3 
        
       
      
        a + 3 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">3</span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
         ∗ 
        
       
         b 
        
       
      
        a * b 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span> 等表达式，他们的计算<mark>结果返回值</mark>都是存放在一个<mark>临时对象</mark>中，前面曾提到。临时对象具有<mark>常性</mark>，即<mark>只读</mark>性质<br>   现在我想给它取个名字，要用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用。</p> 
<pre><code class="prism language-cpp">	<span class="token keyword">int</span> c <span class="token operator">=</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
</code></pre> 
<p>  大家思考一下，将表达式的结果赋值给 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
      
        c 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span></span>，这样是权限放大吗？</p> 
<p>  <mark>不是的</mark>，因为这是<mark>拷贝</mark>，将临时对象的值拷贝到整型 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
      
        c 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span></span> 中，而<code>临时对象本身的权限并没有改变</code>。<br>   这是<code>两块空间</code>，权限放大针对的是同一块空间</p> 
<pre><code class="prism language-cpp"><span class="token keyword">const</span> <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
</code></pre> 
<p>  同理，这也<code>没有发生权限放</code>大，是将 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 空间中的 10 <mark>拷贝</mark>到 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         b 
        
       
      
        b 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span> 空间中</p> 
<p>  </p> 
<h5><a id="6623_383"></a>6.6.2.3、隐式类型转换</h5> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">double</span> a <span class="token operator">=</span> <span class="token number">3.6</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">&amp;</span> ra <span class="token operator">=</span> a<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  这样引用可以吗？是不可以的</p> 
<p>  首先我们来看看下面这种情况：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">double</span> a <span class="token operator">=</span> <span class="token number">3.6</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> i <span class="token operator">=</span> a<span class="token punctuation">;</span>
</code></pre> 
<p>  <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 是直接赋值给 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         i 
        
       
      
        i 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span> 吗？<strong>不是的</strong>，他们<code>中间有个隐式类型转换的过程</code>，它中间会产生一个<mark>临时对象</mark>进行存储，既然是临时对象，那就要用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用啦</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">double</span> a <span class="token operator">=</span> <span class="token number">3.6</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> ra <span class="token operator">=</span> a<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  因此这样才是对的，这里的 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         a 
        
       
      
        ra 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">a</span></span></span></span></span> 并不是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span>，而是<code>中间产生的临时对象</code>。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">double</span> a <span class="token operator">=</span> <span class="token number">3.6</span><span class="token punctuation">;</span>
	<span class="token keyword">double</span><span class="token operator">&amp;</span> ra <span class="token operator">=</span> a<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  那这样对吗？是<strong>正确</strong>的<br>   为什么这里又不用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用呢？<br>   我们需要搞清楚上面为什么要 用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用<br>   因为上面发生了<mark>隐式类型转换</mark>，中间<code>产生了临时对象</code>，用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span> 引用的是<code>中间的临时对象</code><br>   这里没有产生临时对象，引用的就是 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
      
        a 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 变量<br>   <br>   有小伙伴问这个临时对象销毁了，那这个引用不就出问题了吗？<br>   <strong>不会的</strong>，当 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         o 
        
       
         n 
        
       
         s 
        
       
         t 
        
       
      
        const 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span></span></span></span></span>取引用了这个临时对象以后，这个<code>临时对象的生命周期就会跟着这个引用去走</code><br>   即 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         a 
        
       
      
        ra 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal">a</span></span></span></span></span> 销毁了，该临时对象才销毁</p> 
<p>  </p> 
<h3><a id="67_433"></a>6.7、引用的本质</h3> 
<p>  在这里，我要告诉大家引用的底层其实是<mark>指针</mark>！</p> 
<p>  我们通过观察汇编代码来印证这一点</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span>
	<span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span><span class="token operator">&amp;</span> ra <span class="token operator">=</span> a<span class="token punctuation">;</span>
	ra <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>   观看汇编代码方式如下：进入<code>调试模式</code>（按F10），鼠标右键，点击<code>反汇编</code></p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/74/ba/9E14DAEo_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  </p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/5f/13/BdOwghg5_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  可以看到，取地址的指令和取别名的汇编<code>指令是一样的</code>；通过解引用修改变量值，与修改别名的汇编指令是<code>一样的</code>。可见<mark>引用的底层就是指针</mark>。</p> 
<blockquote> 
 <p>  这里简单讲解一下汇编指令：</p> 
 <ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           l 
          
         
           e 
          
         
           a 
          
         
        
          lea 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span></span></span></span></span> 是取地址的意思，<code>00062576 lea eax,[a]</code> 表示取出 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           a 
          
         
        
          a 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span></span> 的地址放入 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           e 
          
         
           a 
          
         
           x 
          
         
        
          eax 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span></span></span></span></span> 中</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           m 
          
         
           o 
          
         
           v 
          
         
        
          mov 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span></span></span></span></span> 是移动的意思，把逗号右边的值移动给左边，<code>00062579 mov dword ptr [p],eax</code>表示把 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           e 
          
         
           a 
          
         
           x 
          
         
        
          eax 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span></span></span></span></span> 给 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           p 
          
         
        
          p 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span></li></ul> 
</blockquote> 
<p>  虽然引用底层还是指针，但是大家在学习的时候不要往这方面想，应还是<code>按照却别名的思想来理解引用。</code></p> 
<p>  </p> 
<h3><a id="68_475"></a>6.8、指针与引用的关系</h3> 
<p>  C++ 中指针和引用就像两个性格迥异的亲兄弟，指针是哥哥，引用是弟弟，在实践中他们<mark>相辅相成</mark>，功能由重叠性，但各有自己的特点，<mark>互相不可替代</mark></p> 
<ul><li>语法概念上引用是一个变量的<code>取别名不开空间</code>，指针是存储一个变量的地址，<code>要开空间</code></li><li>引用在定义时<code>必须初始化</code>，指针建议初始化，但语法上<code>不是必须</code>的</li><li>引用在初始化时引用一个对象后，就<code>不能再引用其他对象</code>；而指针可以在<code>不断地改变指向对象</code></li><li>引用可以<code>直接访问</code>指向对象，指针需要<code>解引用</code>才能访问指向对象</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          s 
         
        
          i 
         
        
          z 
         
        
          e 
         
        
          o 
         
        
          f 
         
        
       
         sizeof 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">zeo</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span></span></span></span></span> 含义不同，引用结果为<code>引用类型的大小</code>，但指针始终是<code>地址空间锁占字节个数</code>（32 位平台下占 4 个字节，64 位平台下是 8 字节）</li><li>指针很容易出现空指针和野指针的问题，引用很少出现，引用使用起来相对<code>更安全</code>一些</li></ul> 
<p>  </p> 
<h2><a id="_inline__486"></a>七、 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         i 
        
       
         n 
        
       
         l 
        
       
         i 
        
       
         n 
        
       
         e 
        
       
      
        inline 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">in</span><span class="mord mathnormal">e</span></span></span></span></span> 内联函数</h2> 
<h3><a id="71_488"></a>7.1、引子</h3> 
<p>  我们都知道，函数调用时会<mark>建立栈帧</mark>，但建立栈帧是需要额外的开销的。对于一些<code>短小并且需要大量调用</code>的函数，每次调用都要建立栈帧难免<code>效率太低</code>。<br> 有什么办法呢？通过<a href="https://blog.csdn.net/yusjushd/article/details/139688670">【C语言】 —— 预处理详解（上）</a>我们知道，可以运用<mark>宏函数</mark></p> 
<p>  比如实现一个 ADD宏函数：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">ADD</span><span class="token expression"><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">ADD</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">ADD</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span></span></span>
</code></pre> 
<p>  上面哪个是对的？</p> 
<p>  <strong>都是错的</strong>，正确答案如下：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">ADD</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
</code></pre> 
<p>  可见，写一个宏函数要注意的点还是很多的，很容易写错</p> 
<p>  C++ 看这个宏函数在就不爽了，因此引入了内联函数的概念。</p> 
<p>  </p> 
<h3><a id="72inline__513"></a>7.2、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         i 
        
       
         n 
        
       
         l 
        
       
         i 
        
       
         n 
        
       
         e 
        
       
      
        inline 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">in</span><span class="mord mathnormal">e</span></span></span></span></span> 的特点</h3> 
<p>  用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         i 
        
       
         n 
        
       
         l 
        
       
         i 
        
       
         n 
        
       
         e 
        
       
      
        inline 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">in</span><span class="mord mathnormal">e</span></span></span></span></span> 修饰的函数叫做<mark>内联函数</mark>，编译时 C++ 的编译器会在调用的地方<code>直接展开内联函数</code>，这样函数就<code>不用建立栈帧</code>了，就可以提高效率</p> 
<p>  内联函数的定义十分简单，只需要在 <mark>正常函数前加上 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          i 
         
        
          n 
         
        
          l 
         
        
          i 
         
        
          n 
         
        
          e 
         
        
       
         inline 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">in</span><span class="mord mathnormal">e</span></span></span></span></span></mark> 即可。</p> 
<p><font color="red">注</font>：展开相当于编译器直接将函数写在主函数中</p> 
<pre><code class="prism language-cpp"><span class="token keyword">inline</span> <span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
	<span class="token function">Add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  <br>   在 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         d 
        
       
         e 
        
       
         b 
        
       
         u 
        
       
         g 
        
       
      
        debug 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">b</span><span class="mord mathnormal" style="margin-right: 0.0359em;">ug</span></span></span></span></span> 环境下，为了方便调试，内联函数是<code>不展开</code>的，还是会建立栈帧，可以通过以下方法<code>使内联函数展开</code></p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/48/e3/rd50wL6R_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  展开对于编译器来说只是一个<mark>建议</mark>，也就是说<code>即使加了 inline 编译器并不是一定会将函数展开</code>。这取决于编译器自身，不同的编译器对 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         i 
        
       
         n 
        
       
         l 
        
       
         i 
        
       
         n 
        
       
         e 
        
       
      
        inline 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">in</span><span class="mord mathnormal">e</span></span></span></span></span> 什么时候展开并不相同，因为 C++ 中并没有规定这个。<code>当代码行数过多编译器就会选择不展开</code>，有可能是 5 行，也可能是 10 行。</p> 
<p>  为什么呢？<br>   想象一下，当函数有 100 行，要调用一万次，那全部展开代码就要<mark>增加 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          一万 
         
        
          ∗ 
         
        
          100 
         
        
       
         一万*100 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback">一万</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">100</span></span></span></span></span> 行</mark> ，而建立栈帧<mark>代码永远只有那一份</mark>，当调用该函数时再跳到该函数地址。要是这是个递归函数，那就代价更大了，同时也会导致<mark>代码膨胀</mark>。</p> 
<p>  注：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         i 
        
       
         n 
        
       
         l 
        
       
         i 
        
       
         n 
        
       
         e 
        
       
      
        inline 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">in</span><span class="mord mathnormal">e</span></span></span></span></span> <code>不建议声明和定义分离到两个文件</code>（在同一个文件没问题），分离会导致<mark>链接错误</mark>。因为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         i 
        
       
         n 
        
       
         l 
        
       
         i 
        
       
         n 
        
       
         e 
        
       
      
        inline 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">in</span><span class="mord mathnormal">e</span></span></span></span></span> 被展开，就没有函数地址，连接时就会出现<code>报错</code></p> 
<p>  原因是内联函数编译器是<mark>默认不需要地址</mark>的，因为它在调用的地方展开了。所以在进行链接的时候，链接器<code>不会把内联函数的地址放进符号表</code>，这样就<mark>找不到</mark>该内联函数的<mark>地址</mark>。</p> 
<p>  内联函数直接声明和定义都放到 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         . 
        
       
         h 
        
       
      
        .h 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord">.</span><span class="mord mathnormal">h</span></span></span></span></span> 文件，不要声明在 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         . 
        
       
         h 
        
       
      
        .h 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord">.</span><span class="mord mathnormal">h</span></span></span></span></span>，定义在 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         . 
        
       
         c 
        
       
      
        .c 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord">.</span><span class="mord mathnormal">c</span></span></span></span></span>。</p> 
<p>  </p> 
<h2><a id="nullptr__552"></a>八、<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
         u 
        
       
         l 
        
       
         l 
        
       
         p 
        
       
         t 
        
       
         r 
        
       
      
        nullptr 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">llpt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> 空指针</h2> 
<p>   在学习 <mark><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          n 
         
        
          u 
         
        
          l 
         
        
          l 
         
        
          p 
         
        
          t 
         
        
          r 
         
        
       
         nullptr 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">llpt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span></mark> 之前，我们先回顾一下 <mark>NULL</mark><br>   在 C语言 中，定义了一个宏 NULL，在头文件 <mark>&lt;<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          s 
         
        
          t 
         
        
          d 
         
        
          d 
         
        
          e 
         
        
          f 
         
        
          . 
         
        
          h 
         
        
       
         stddef.h 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">dd</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mord">.</span><span class="mord mathnormal">h</span></span></span></span></span>&gt;</mark> 中可以看到他的定义</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression"><span class="token constant">NULL</span></span></span>
	<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">__cplusplus</span></span>
		<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NULL</span> <span class="token expression"><span class="token number">0</span></span></span>
	<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>
		<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NULL</span> <span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">)</span></span></span>
	<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>
</code></pre> 
<p>  在 C++ 中 NULL 其实就是 <font color="red">0</font>，而 C语言 中将 0 强转成 <font color="red"><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          v 
         
        
          o 
         
        
          i 
         
        
          d 
         
        
       
         void 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">o</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span></span></span></span></span>*</font>，即 (<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         v 
        
       
         o 
        
       
         i 
        
       
         d 
        
       
      
        void 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">o</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span></span></span></span></span> *) 0</p> 
<p>  这样定义有什么弊端呢？搞得 C++ 要单独定义一个 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
         u 
        
       
         l 
        
       
         l 
        
       
         p 
        
       
         t 
        
       
         r 
        
       
      
        nullptr 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">llpt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> 呢</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"f(int x)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> ptr<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"f(int* ptr)"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">f</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/4a/89/5G5HqHxu_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  你会发现都是<code>调用第一个函数</code>，因为 NULL 是宏，替换成 0</p> 
<p>  那如果是 C语言 的 (<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         v 
        
       
         o 
        
       
         i 
        
       
         d 
        
       
      
        void 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">o</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span></span></span></span></span> *) 0 可以吗？会发现<code>编译报错</code>：</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/70/13/XnFtMVid_o.png" alt="在这里插入图片描述"><br>   你会发现这样也不行，甚至还报错。因为这时要<mark>发生隐试类型转换</mark>，那是转换成 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         i 
        
       
         n 
        
       
         t 
        
       
      
        int 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal">t</span></span></span></span></span> 还是转换成 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         i 
        
       
         n 
        
       
         t 
        
       
      
        int 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6595em;"></span><span class="mord mathnormal">in</span><span class="mord mathnormal">t</span></span></span></span></span>* 呢？</p> 
<p>  所以 NULL 不论是 C语言 的定义还是 C++ 的定义都是不好的</p> 
<p>  这里顺便说一下，为什么在 C语言 中好像没问题呢？因为 C语言 中的<code>类型检查没有那么严格</code> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         v 
        
       
         o 
        
       
         i 
        
       
         d 
        
       
      
        void 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">o</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span></span></span></span></span>* 类型可以<code>隐式转换成其他类型的指针</code>，而 C++ 的类型检查更严格，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         v 
        
       
         o 
        
       
         i 
        
       
         d 
        
       
      
        void 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mord mathnormal">o</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span></span></span></span></span>* 不能隐式转换成其他指针<br>   <br> <strong>举个栗子：</strong></p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">void</span><span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">*</span> p2 <span class="token operator">=</span> p1<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  这段代码在 C语言 中是可以编译过去的，但在 C++ 中不行，必须把 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         1 
        
       
      
        p1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8389em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord">1</span></span></span></span></span> 强制类型转换</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">void</span><span class="token operator">*</span> p1 <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">*</span> p2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span>p1<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>  因此 <mark>C++11</mark>（C++98中还未引入）中引入 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
         u 
        
       
         l 
        
       
         l 
        
       
         p 
        
       
         t 
        
       
         r 
        
       
      
        nullptr 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">llpt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
         u 
        
       
         l 
        
       
         l 
        
       
         p 
        
       
         t 
        
       
         r 
        
       
      
        nullptr 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">llpt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> 是一个特殊的<code>关键字</code>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
         u 
        
       
         l 
        
       
         l 
        
       
         p 
        
       
         t 
        
       
         r 
        
       
      
        nullptr 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">llpt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> 是一种<code>特殊类型的字面量</code>，它可以<code>转换成任意其他类型的指针类型</code>。使用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
         u 
        
       
         l 
        
       
         l 
        
       
         p 
        
       
         t 
        
       
         r 
        
       
      
        nullptr 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">llpt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> 定义空指针可以避免类型转换的问题，因为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
         u 
        
       
         l 
        
       
         l 
        
       
         p 
        
       
         t 
        
       
         r 
        
       
      
        nullptr 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">llpt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> <mark>只能被隐式地转换为<font color="red">指针类型</font></mark>，而<mark>不能转换为整数类型</mark>。</p> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/6e/86/k2QEPRKE_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>  使用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         n 
        
       
         u 
        
       
         l 
        
       
         l 
        
       
         p 
        
       
         t 
        
       
         r 
        
       
      
        nullptr 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">llpt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span> 后就没有歧义了，直接调用第二个函数</p> 
<p>   以后，<mark>C++ 中尽量都用 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          n 
         
        
          u 
         
        
          l 
         
        
          l 
         
        
          p 
         
        
          t 
         
        
          r 
         
        
       
         nullptr 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal">u</span><span class="mord mathnormal">llpt</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span></mark>，不用 NULL</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/48e581b6bde36c05caa0f71cd1a6dccc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何学习Flink：糙快猛的大数据之路（图文并茂）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/54b80a168d23285b6522486057fc7fd3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">概率论中的卷积公式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>