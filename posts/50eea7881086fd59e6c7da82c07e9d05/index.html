<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>statsmodels专栏1——探索数据的起点：Python中的statsmodels库简介 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/50eea7881086fd59e6c7da82c07e9d05/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="statsmodels专栏1——探索数据的起点：Python中的statsmodels库简介">
  <meta property="og:description" content="1 引言 在当今数据驱动的世界中，数据分析成为了解决问题和做出决策的关键步骤。为了更深入地了解和探索数据，我们需要强大而灵活的工具。其中，Statsmodels库是Python中一个不可或缺的工具，它为数据分析提供了丰富的统计模型和测试的功能。
1.1 数据分析基本概念 在开始探讨Statsmodels之前，让我们简要回顾一下数据分析的基本概念。数据分析是一项系统性的过程，旨在从大量数据中提取有意义的信息和洞察。这包括数据的收集、清理、转换和建模，以发现隐藏在数据背后的模式和规律。通过使用统计学、机器学习和可视化工具，数据分析师能够揭示数据之间的关系、趋势和变化，为决策制定提供支持。关键步骤包括描述性统计以总结数据特征，建立统计模型如线性回归进行预测，以及通过假设检验进行统计推断。
数据分析不仅适用于科学研究和学术领域，还在商业、医疗、社会科学等各个领域发挥关键作用，帮助人们更深刻地理解现象，做出明智的决策。这个过程不断演进，随着技术的进步和数据的不断增长，数据分析变得更加复杂和重要。
1.2 Statsmodels库的作用和重要性 Statsmodels库在Python中扮演着关键的角色，为数据分析提供了强大的统计建模和测试工具。其作用不仅限于描述性统计，还涵盖了多种统计模型，如线性回归和时间序列分析。
这个库的重要性体现在它能够帮助数据分析师更深入地理解数据背后的规律，通过生成详细的统计模型摘要和诊断图，使用户能够从数据中提取有意义的信息。Statsmodels的灵活性和丰富的功能，使其成为数据科学家和分析师们进行高级统计分析的不可或缺的工具，为数据驱动的决策提供了坚实的支持。
2 安装与导入Statsmodels 在开始使用Statsmodels之前，我们需要确保该库已成功安装，并将其导入到我们的Python环境中。
2.1 使用 pip 安装Statsmodels 要安装Statsmodels，您可以使用以下简单命令：
pip install statsmodels 2.2 导入Statsmodels模块 安装完成后，通过以下方式导入Statsmodels：
import statsmodels.api as sm 现在，我们已经准备好开始探索Statsmodels的功能了。
3 基础数据分析 Statsmodels提供了丰富的工具，可以进行基础的数据分析。
描述性统计分析：
describe()：生成数据的描述性统计信息，包括计数、均值、标准差、最小值、25%分位数、中位数、75%分位数和最大值。 方差分析（ANOVA）：
anova_lm()：进行方差分析，用于比较不同组之间的均值是否显著不同。 协方差分析（ANCOVA）：
ols()：进行协方差分析，用于比较组间均值是否显著不同，同时考虑一个或多个协变量。 统计检验：
ttest_ind()：进行两组间的独立样本t检验。ttest_rel()：进行两组相关样本t检验。 多元方差分析（MANOVA）：
Manova()：进行多元方差分析，适用于多个因变量。 卡方检验（Chi-squared Test）：
contingency_tables()：进行卡方检验，用于分析分类变量之间的关系。 独立性检验（Independence Test）：
association_tests()：用于执行独立性检验，例如卡方独立性检验。 正态性检验（Normality Test）：
normaltest()：用于检验数据是否服从正态分布。 相关性分析（Correlation Analysis）：
pearsonr()：计算Pearson相关系数，用于衡量两个变量之间的线性相关性。spearmanr()：计算Spearman秩相关系数，用于衡量变量之间的单调相关性。 置信区间（Confidence Intervals）：
DescrStatsW()：用于计算均值的置信区间。 秩和检验（Rank Sum Test）：
ranksums()：用于比较两组独立样本的中位数是否相等。 这些功能覆盖了一系列基础性统计分析的需求，包括检验独立性、检验正态性、计算相关系数等。后续的文章中我会陆续介绍这些基础性分析的使用方法，这里只做一个简单的介绍，以描述性分析和绘制图表为例。
3.1 利用Statsmodels进行描述性统计分析 使用Statsmodels的describe()函数，我们可以轻松获取数据的描述性统计信息：
import pandas as pd import numpy as np import statsmodels.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-28T18:57:01+08:00">
    <meta property="article:modified_time" content="2023-12-28T18:57:01+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">statsmodels专栏1——探索数据的起点：Python中的statsmodels库简介</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1__0"></a>1 引言</h2> 
<p>在当今数据驱动的世界中，数据分析成为了解决问题和做出决策的关键步骤。为了更深入地了解和探索数据，我们需要强大而灵活的工具。其中，Statsmodels库是Python中一个不可或缺的工具，它为数据分析提供了丰富的统计模型和测试的功能。</p> 
<h4><a id="11__4"></a>1.1 数据分析基本概念</h4> 
<p>在开始探讨Statsmodels之前，让我们简要回顾一下数据分析的基本概念。数据分析是一项系统性的过程，旨在从大量数据中提取有意义的信息和洞察。这包括数据的收集、清理、转换和建模，以发现隐藏在数据背后的模式和规律。通过使用统计学、机器学习和可视化工具，数据分析师能够揭示数据之间的关系、趋势和变化，为决策制定提供支持。关键步骤包括描述性统计以总结数据特征，建立统计模型如线性回归进行预测，以及通过假设检验进行统计推断。</p> 
<p>数据分析不仅适用于科学研究和学术领域，还在商业、医疗、社会科学等各个领域发挥关键作用，帮助人们更深刻地理解现象，做出明智的决策。这个过程不断演进，随着技术的进步和数据的不断增长，数据分析变得更加复杂和重要。</p> 
<h4><a id="12_Statsmodels_10"></a>1.2 Statsmodels库的作用和重要性</h4> 
<p>Statsmodels库在Python中扮演着关键的角色，为数据分析提供了强大的统计建模和测试工具。其作用不仅限于描述性统计，还涵盖了多种统计模型，如线性回归和时间序列分析。<br> 这个库的重要性体现在它能够帮助数据分析师更深入地理解数据背后的规律，通过生成详细的统计模型摘要和诊断图，使用户能够从数据中提取有意义的信息。Statsmodels的灵活性和丰富的功能，使其成为数据科学家和分析师们进行高级统计分析的不可或缺的工具，为数据驱动的决策提供了坚实的支持。</p> 
<h3><a id="2_Statsmodels_15"></a>2 安装与导入Statsmodels</h3> 
<p>在开始使用Statsmodels之前，我们需要确保该库已成功安装，并将其导入到我们的Python环境中。</p> 
<h3><a id="21__pip_Statsmodels_19"></a>2.1 使用 pip 安装Statsmodels</h3> 
<p>要安装Statsmodels，您可以使用以下简单命令：</p> 
<pre><code class="prism language-bash">pip <span class="token function">install</span> statsmodels
</code></pre> 
<h3><a id="22_Statsmodels_27"></a>2.2 导入Statsmodels模块</h3> 
<p>安装完成后，通过以下方式导入Statsmodels：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>api <span class="token keyword">as</span> sm
</code></pre> 
<p>现在，我们已经准备好开始探索Statsmodels的功能了。</p> 
<h2><a id="3__37"></a>3 基础数据分析</h2> 
<p>Statsmodels提供了丰富的工具，可以进行基础的数据分析。</p> 
<ol><li> <p><strong>描述性统计分析：</strong></p> 
  <ul><li><code>describe()</code>：生成数据的描述性统计信息，包括计数、均值、标准差、最小值、25%分位数、中位数、75%分位数和最大值。</li></ul> </li><li> <p><strong>方差分析（ANOVA）：</strong></p> 
  <ul><li><code>anova_lm()</code>：进行方差分析，用于比较不同组之间的均值是否显著不同。</li></ul> </li><li> <p><strong>协方差分析（ANCOVA）：</strong></p> 
  <ul><li><code>ols()</code>：进行协方差分析，用于比较组间均值是否显著不同，同时考虑一个或多个协变量。</li></ul> </li><li> <p><strong>统计检验：</strong></p> 
  <ul><li><code>ttest_ind()</code>：进行两组间的独立样本t检验。</li><li><code>ttest_rel()</code>：进行两组相关样本t检验。</li></ul> </li><li> <p><strong>多元方差分析（MANOVA）：</strong></p> 
  <ul><li><code>Manova()</code>：进行多元方差分析，适用于多个因变量。</li></ul> </li><li> <p><strong>卡方检验（Chi-squared Test）：</strong></p> 
  <ul><li><code>contingency_tables()</code>：进行卡方检验，用于分析分类变量之间的关系。</li></ul> </li><li> <p><strong>独立性检验（Independence Test）：</strong></p> 
  <ul><li><code>association_tests()</code>：用于执行独立性检验，例如卡方独立性检验。</li></ul> </li><li> <p><strong>正态性检验（Normality Test）：</strong></p> 
  <ul><li><code>normaltest()</code>：用于检验数据是否服从正态分布。</li></ul> </li><li> <p><strong>相关性分析（Correlation Analysis）：</strong></p> 
  <ul><li><code>pearsonr()</code>：计算Pearson相关系数，用于衡量两个变量之间的线性相关性。</li><li><code>spearmanr()</code>：计算Spearman秩相关系数，用于衡量变量之间的单调相关性。</li></ul> </li><li> <p><strong>置信区间（Confidence Intervals）：</strong></p> 
  <ul><li><code>DescrStatsW()</code>：用于计算均值的置信区间。</li></ul> </li><li> <p><strong>秩和检验（Rank Sum Test）：</strong></p> 
  <ul><li><code>ranksums()</code>：用于比较两组独立样本的中位数是否相等。</li></ul> </li></ol> 
<p>这些功能覆盖了一系列基础性统计分析的需求，包括检验独立性、检验正态性、计算相关系数等。后续的文章中我会陆续介绍这些基础性分析的使用方法，这里只做一个简单的介绍，以描述性分析和绘制图表为例。</p> 
<h3><a id="31_Statsmodels_78"></a>3.1 利用Statsmodels进行描述性统计分析</h3> 
<p>使用Statsmodels的<code>describe()</code>函数，我们可以轻松获取数据的描述性统计信息：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>api <span class="token keyword">as</span> sm

<span class="token comment"># 构建模拟数据</span>
np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">'Height'</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token number">170</span><span class="token punctuation">,</span> scale<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">'Weight'</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token number">65</span><span class="token punctuation">,</span> scale<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">'Age'</span><span class="token punctuation">:</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>data<span class="token punctuation">)</span>

<span class="token comment"># 使用Statsmodels进行描述性统计分析</span>
summary <span class="token operator">=</span> df<span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 打印结果</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>summary<span class="token punctuation">)</span>
</code></pre> 
<p>运行上述代码后，结果如下：<br> <img src="https://images2.imgbox.com/de/c9/ZypgslvB_o.png" alt="3.1.1"></p> 
<h3><a id="32__106"></a>3.2 绘制基本的数据图表</h3> 
<p>Statsmodels结合了Matplotlib的功能，使得绘制数据图表变得非常简单。</p> 
<h4><a id="321_QQ_109"></a>3.2.1 绘制QQ图</h4> 
<p>例如，使用<code>sm.qqplot()</code>函数，采用3.1的数据，绘制QQ图：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>api <span class="token keyword">as</span> sm
<span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>api <span class="token keyword">as</span> smg


<span class="token comment"># 绘制图形</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
smg<span class="token punctuation">.</span>qqplot<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">'Weight'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fit<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> line<span class="token operator">=</span><span class="token string">'45'</span><span class="token punctuation">,</span> ax<span class="token operator">=</span>ax<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p>运行上述结果后，截图如下：<br> <img src="https://images2.imgbox.com/a4/b2/e1jWcUga_o.png" alt="3.2.1"></p> 
<h4><a id="322__126"></a>3.2.2 绘制散点矩阵图</h4> 
<p>这里继续采用3.1的数据进行绘制：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>api <span class="token keyword">as</span> sm
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token comment"># 使用 pd.plotting.scatter_matrix 进行散点图矩阵</span>
pd<span class="token punctuation">.</span>plotting<span class="token punctuation">.</span>scatter_matrix<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'Height'</span><span class="token punctuation">,</span> <span class="token string">'Weight'</span><span class="token punctuation">,</span> <span class="token string">'Age'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p>绘制图像后如下：<br> <img src="https://images2.imgbox.com/b9/4b/lw6GvWZF_o.png" alt="3.2.2"></p> 
<h4><a id="323__142"></a>3.2.3 绘制残差和回归拟合图</h4> 
<pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>api <span class="token keyword">as</span> sm
<span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>regressionplots <span class="token keyword">as</span> smg
<span class="token keyword">from</span> statsmodels<span class="token punctuation">.</span>graphics<span class="token punctuation">.</span>regressionplots <span class="token keyword">import</span> plot_regress_exog
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt


<span class="token comment"># 假设你要拟合一个简单的线性回归模型</span>
X <span class="token operator">=</span> sm<span class="token punctuation">.</span>add_constant<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'Height'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
y <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Weight'</span><span class="token punctuation">]</span>
model <span class="token operator">=</span> sm<span class="token punctuation">.</span>OLS<span class="token punctuation">(</span>y<span class="token punctuation">,</span> X<span class="token punctuation">)</span><span class="token punctuation">.</span>fit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 绘制图像</span>
fig<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plot_regress_exog<span class="token punctuation">(</span>model<span class="token punctuation">,</span> <span class="token string">'Height'</span><span class="token punctuation">,</span> fig<span class="token operator">=</span>fig<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p>运行上述代码后，可以得到下面的图形：<br> <img src="https://images2.imgbox.com/7b/50/zWTGNWyV_o.png" alt="3.2.3.1"></p> 
<p><code>plot_regress_exog</code>生成了包括四个子图的图形，分别是：</p> 
<ol><li> <p><strong>回归拟合图（Fitted values vs. Observed）：</strong><br> 这个图显示了观测到的因变量值（实际体重）与模型预测的因变量值（拟合值）之间的关系。理想情况下，点应该沿着45度线分布，表示拟合值与实际值的一致性。</p> </li><li> <p><strong>残差图（Residuals versus Height）：</strong><br> 这个图显示了模型的残差（实际值与拟合值之差）与身高之间的关系。残差图用于检查模型的假设，理想情况下，残差应该随机分布在0附近。</p> </li><li> <p><strong>Q-Q图（Quantile-Quantile Plot）：</strong><br> 这个图用于检查残差是否符合正态分布。点在45度线上表示残差服从正态分布。</p> </li><li> <p><strong>标准化残差图（Standardized Residuals vs. Fitted Values）：</strong><br> 这个图显示了标准化残差（残差除以其标准差）与拟合值之间的关系。用于检查残差的异方差性（残差的方差是否与预测变量有关）。</p> </li></ol> 
<p>通过观察这些图，可以评估回归模型的拟合效果、检查残差的分布和模型假设是否得到满足。</p> 
<h3><a id="4__183"></a>4 示例：线性回归分析</h3> 
<p>线性回归是数据分析中常用的一种方法，Statsmodels提供了简便而强大的工具进行线性回归分析。</p> 
<p>假设我们有一组房屋数据，包括房屋的面积（SquareFeet）、卧室数量（Bedrooms）、以及售价（Price）。我们想要建立一个线性回归模型，通过房屋的面积和卧室数量来预测售价。以下是使用<code>statsmodels</code>库建立线性回归的例子：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> statsmodels<span class="token punctuation">.</span>api <span class="token keyword">as</span> sm
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token comment"># 生成模拟数据</span>
np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>
square_feet <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">,</span> <span class="token number">2500</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
price <span class="token operator">=</span> <span class="token number">150000</span> <span class="token operator">+</span> <span class="token number">300</span> <span class="token operator">*</span> square_feet <span class="token operator">+</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50000</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>

<span class="token comment"># 创建数据框</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">'SquareFeet'</span><span class="token punctuation">:</span> square_feet<span class="token punctuation">,</span> <span class="token string">'Price'</span><span class="token punctuation">:</span> price<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment"># 添加常数列</span>
X <span class="token operator">=</span> sm<span class="token punctuation">.</span>add_constant<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'SquareFeet'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 拟合线性回归模型</span>
model <span class="token operator">=</span> sm<span class="token punctuation">.</span>OLS<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'Price'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> X<span class="token punctuation">)</span><span class="token punctuation">.</span>fit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 打印模型摘要</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>model<span class="token punctuation">.</span>summary<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 绘制拟合结果</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'SquareFeet'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> df<span class="token punctuation">[</span><span class="token string">'Price'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'Data'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'SquareFeet'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> model<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X<span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">'Fitted Line'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'Square Feet'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'Price'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Linear Regression: House Price vs. Square Feet'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<p>运行上述代码后，输出结果如下：<br> <img src="https://images2.imgbox.com/60/01/qEK00L3v_o.png" alt="4.1"><br> <img src="https://images2.imgbox.com/f0/63/eK2geB5i_o.png" alt="4.2"><br> 根据输出信息，让我们逐项评价这个简单线性回归模型的拟合效果：</p> 
<ol><li> <p><strong>R-squared 和 Adj. R-squared：</strong></p> 
  <ul><li>R-squared为0.899，说明模型可以解释因变量（Price）89.9%的变异，这是一个相对较高的值，表明模型对数据的拟合效果较好。</li><li>Adj. R-squared为0.897，考虑了模型中只有一个自变量，因此与R-squared值非常接近。</li></ul> </li><li> <p><strong>F-statistic 和 Prob (F-statistic)：</strong></p> 
  <ul><li>F-statistic为428.4，而Prob (F-statistic)非常接近零（1.44e-25），表示模型整体上是显著的，说明SquareFeet对Price的解释是显著的。</li></ul> </li><li> <p><strong>系数（coef）和其显著性（P&gt;|t|）：</strong></p> 
  <ul><li>const（截距）的系数为1.249e+05，SquareFeet（房屋面积）的系数为316.2639。</li><li>P&gt;|t|的值都远小于通常的显著性水平（通常为0.05），表明这两个系数都是显著的。</li></ul> </li><li> <p><strong>残差统计和正态性检验：</strong></p> 
  <ul><li>Omnibus和Jarque-Bera统计量的P值都相对较大，表明残差可能符合正态分布。</li><li>Skew接近零，说明残差分布相对对称。</li></ul> </li><li> <p><strong>Durbin-Watson 统计量：</strong></p> 
  <ul><li>Durbin-Watson为2.144，接近2，表明残差可能没有显著的自相关性。</li></ul> </li><li> <p><strong>条件数（Cond. No.）：</strong></p> 
  <ul><li>条件数为6.44e+03，较大，可能表示自变量之间存在强烈的多重共线性。由于我们是单变量情况下进行建模的，因此此处不太相关，但如果是多元线性回归的话，要非常注意。</li></ul> </li></ol> 
<p><strong>总体评价：</strong><br> 模型的R-squared、F-statistic以及系数的显著性均表明该模型在解释因变量方面效果较好。残差统计和正态性检验结果也表明残差相对符合正态分布。Durbin-Watson统计量表明残差可能没有显著的自相关性。</p> 
<p><strong>建议：</strong></p> 
<ol><li>由于是单变量线性回归，无法通过变量选择来优化模型。然而，可以考虑添加更多自变量来提高模型的解释力，但需要注意多重共线性的问题。</li><li>尽管条件数较大，但在单变量情况下多重共线性通常不是主要问题，因此可能可以接受。然而，如果要添加更多自变量，就需要更仔细地考虑多重共线性的问题。</li></ol> 
<p>综合来看，这个简单线性回归模型已经相对有效，但如果希望提高解释力或者更深入地分析数据，可以考虑添加更多的自变量并进一步优化模型。</p> 
<h2><a id="_257"></a>写在最后</h2> 
<p>通过本文的介绍，我们初步了解了Statsmodels库的使用方法和基本功能。从描述性统计分析到线性回归分析，Statsmodels为数据分析提供了强大的工具。这只是开始，掌握Statsmodels将为我们未来更深入的数据分析学习奠定坚实的基础。在实际应用中，不断探索和运用Statsmodels将使我们能够更深入地理解和利用数据，为各种问题找到切实可行的解决方案。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0ed1af0658294b06c1d989d0e19ebe40/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL超详细学习教程，2023年硬核学习路线</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/78ecbf656457a62ed4ad4bc96c7400f6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">文心一言“拜师”了！金灿荣、王先进等成为首批“文心导师”</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>