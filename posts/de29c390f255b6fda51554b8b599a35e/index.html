<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mysql添加、删除、主键（外键） - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/de29c390f255b6fda51554b8b599a35e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="Mysql添加、删除、主键（外键）">
  <meta property="og:description" content="目录
索引与键的增删改
主键
单独设置主键
删除主键
外键
外键的使用
建表时添加外键
单独添加外键
删除外键
唯一键
索引与键的增删改 主键 主键会自动添加唯一索引，所以主键列不需要添加索引
建表时设置主键
方法1、
create table student( id int primary key ); 方法2、
create table student( id int, primary key (id) ); 单独设置主键 alter table student add primary key(id) 删除主键 alter table student drop primary key; 外键 外键是指引用另外一个表中的一列或多列数据，被引用的列应该具有主键约束或者唯一性约束（简单来说外键是另一个表的主键或者唯一约束）。外键可以有重复的, 可以是空值，用来建立和加强两个表数据之间的连接
外键的使用 外键的使用需要满足下列的条件：
1、两张表必须都是InnoDB表，并且它们没有临时表。
2、建立外键关系的对应列必须具有相似的InnoDB内部数据类型。
3、建立外键关系的对应列必须建立了索引。
创建外键的两种方式：
方式一：在创建表的时候进行添加
方式二：表已经创建好了，继续修改表的结构来添加外键。
建表时添加外键 方法1、
create table teacher( student_id int not null, foreign key(student_id) references student(id) ); alter table teacher add constraint teacher_ref_student(foreignKeyName) foreign key(student_id) references student(id); 方法2、">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-22T21:44:57+08:00">
    <meta property="article:modified_time" content="2023-09-22T21:44:57+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mysql添加、删除、主键（外键）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E7%B4%A2%E5%BC%95%E4%B8%8E%E9%94%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9-toc" style="margin-left:40px;"><a href="#%E7%B4%A2%E5%BC%95%E4%B8%8E%E9%94%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9" rel="nofollow">索引与键的增删改</a></p> 
<p id="%E4%B8%BB%E9%94%AE-toc" style="margin-left:40px;"><a href="#%E4%B8%BB%E9%94%AE" rel="nofollow">主键</a></p> 
<p id="%E5%8D%95%E7%8B%AC%E8%AE%BE%E7%BD%AE%E4%B8%BB%E9%94%AE-toc" style="margin-left:120px;"><a href="#%E5%8D%95%E7%8B%AC%E8%AE%BE%E7%BD%AE%E4%B8%BB%E9%94%AE" rel="nofollow">单独设置主键</a></p> 
<p id="%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE-toc" style="margin-left:120px;"><a href="#%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE" rel="nofollow">删除主键</a></p> 
<p id="%E5%A4%96%E9%94%AE-toc" style="margin-left:40px;"><a href="#%E5%A4%96%E9%94%AE" rel="nofollow">外键</a></p> 
<p id="%E5%A4%96%E9%94%AE%E7%9A%84%E4%BD%BF%E7%94%A8-toc" style="margin-left:80px;"><a href="#%E5%A4%96%E9%94%AE%E7%9A%84%E4%BD%BF%E7%94%A8" rel="nofollow">外键的使用</a></p> 
<p id="%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE-toc" style="margin-left:80px;"><a href="#%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE" rel="nofollow">建表时添加外键</a></p> 
<p id="%E5%8D%95%E7%8B%AC%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE-toc" style="margin-left:80px;"><a href="#%E5%8D%95%E7%8B%AC%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE" rel="nofollow">单独添加外键</a></p> 
<p id="%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE-toc" style="margin-left:80px;"><a href="#%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE" rel="nofollow">删除外键</a></p> 
<p id="%E5%94%AF%E4%B8%80%E9%94%AE-toc" style="margin-left:80px;"><a href="#%E5%94%AF%E4%B8%80%E9%94%AE" rel="nofollow">唯一键</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p></p> 
<h3 id="%E7%B4%A2%E5%BC%95%E4%B8%8E%E9%94%AE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9">索引与键的增删改</h3> 
<h3 id="%E4%B8%BB%E9%94%AE">主键</h3> 
<p>主键会自动添加唯一索引，所以主键列不需要添加索引</p> 
<p>建表时设置主键</p> 
<p>方法1、</p> 
<pre><code class="language-sql">create table student(
	id int primary key
);
</code></pre> 
<p>方法2、</p> 
<pre><code class="language-sql">create table student(
	id int,
	primary key (id)
);
</code></pre> 
<h5 id="%E5%8D%95%E7%8B%AC%E8%AE%BE%E7%BD%AE%E4%B8%BB%E9%94%AE">单独设置主键</h5> 
<pre><code class="language-sql">alter table student add primary key(id)
</code></pre> 
<h5 id="%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE">删除主键</h5> 
<pre><code class="language-sql">alter table student drop primary key;
</code></pre> 
<h3 id="%E5%A4%96%E9%94%AE">外键</h3> 
<p><strong>外键是指引用另外一个表中的一列或多列数据，被引用的列应该具有主键约束或者唯一性约束（简单来说外键是另一个表的主键或者唯一约束）。外键可以有重复的, 可以是空值，用来建立和加强两个表数据之间的连接</strong></p> 
<h4 id="%E5%A4%96%E9%94%AE%E7%9A%84%E4%BD%BF%E7%94%A8">外键的使用</h4> 
<p><br> 外键的使用需要满足下列的条件：<br> 1、两张表必须都是InnoDB表，并且它们没有临时表。</p> 
<p>2、建立外键关系的对应列必须具有相似的InnoDB内部数据类型。</p> 
<p>3、建立外键关系的对应列必须建立了索引。</p> 
<p>创建外键的两种方式：<br> 方式一：在创建表的时候进行添加<br> 方式二：表已经创建好了，继续修改表的结构来添加外键。</p> 
<h4 id="%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE"><br> 建表时添加外键</h4> 
<p>方法1、</p> 
<pre><code class="language-sql">create table teacher(
	student_id int not null,
	foreign key(student_id) references student(id)
);
</code></pre> 
<pre><code class="language-sql">alter table teacher add constraint teacher_ref_student(foreignKeyName)
 foreign key(student_id) references student(id);
</code></pre> 
<p>方法2、</p> 
<p>表1</p> 
<pre><code class="language-sql">create table student(	
		id int primary key,   --学生的学号
)comment '学生表';</code></pre> 
<p>表2</p> 
<pre><code class="language-sql">create table score(
studentID	int,
coureseID int,		
scoreID int primary key,	
foreign	key(studentID) references student(id)  --添加外键 
)comment '成绩表'
</code></pre> 
<h4 id="%E5%8D%95%E7%8B%AC%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE">单独添加外键</h4> 
<p>语法：alter table 表名称 add foreign key (列名称) references关联表名称（列名称）;</p> 
<p>eg1:</p> 
<pre><code class="language-sql">alter table teacher add constraint teacher_ref_student(foreignKeyName)
 foreign key(student_id) references student(id);
</code></pre> 
<p>eg2:</p> 
<pre><code class="language-sql">alter table student	add foreign key (id) references score(studentID);
</code></pre> 
<h4 id="%E5%88%A0%E9%99%A4%E5%A4%96%E9%94%AE">删除外键</h4> 
<p>语法：alter table 表名称 drop foreign key 外键名称;</p> 
<p>eg1:</p> 
<pre><code class="language-sql">alter table score drop foreign key score_1;	
</code></pre> 
<p>eg2:</p> 
<pre><code class="language-sql">alter table tableName1 drop foreign key foreignKeyName;</code></pre> 
<h4 id="%E5%94%AF%E4%B8%80%E9%94%AE">唯一键</h4> 
<p>唯一键会自动添加唯一索引，所以唯一键列不需要添加索引</p> 
<h4 id="3.1%20%E6%99%AE%E9%80%9A%E7%B4%A2%E5%BC%95">普通索引</h4> 
<p>创建一张表</p> 
<pre><code class="language-sql">create table member(id int(10) ,name varchar(10) ,age int(18) ,phone int(11) ,address varchar(50),);
 
 
insert into member values (1,'a','19','111','赣州');
insert into member values (2,'b','24','222','于都');
insert into member values (3,'c','20','333','九江');
insert into member values (4,'d','18','444','南昌');
insert into member values (5,'e','16','555','吉安');
 </code></pre> 
<h5 id="%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E7%9B%B4%E6%8E%A5%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95">方法一：直接创建索引</h5> 
<pre><code class="language-sql"> CREATE INDEX 索引名 ON 表名 (列名(length));</code></pre> 
<ul><li>(列名(length))：length是可选项，下同。如果忽略length 的值，则使用整个列的值作为索引。如果指定，使用列的前length个字符来创建索引，这样有利于减小索引文件的大小。在不损失精确性的情况下，长度越短越好。</li><li>索引名建议以“index"结尾。</li></ul> 
<pre><code class="language-sql"> create index name_index on member(name);  以name字段创建普通索引
 ​
 create index cardid_index on member(cardid(4));  指定cardid字段值的前4个字符做普通索引的值</code></pre> 
<h5 id="%C2%A0%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%96%B9%E5%BC%8F%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95">方法二：修改表方式创建索引</h5> 
<p>ALTER TABLE 表名 ADD INDEX 索引名(列名);</p> 
<pre><code class="language-sql">ALTER TABLE member ADD INDEX phone_index(phone);   以phone字段创建普通索引</code></pre> 
<h5 id="%C2%A0%E6%96%B9%E6%B3%95%E4%B8%89%EF%BC%9A%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%8C%87%E5%AE%9A%E7%B4%A2%E5%BC%95">方法三：创建表时指定索引</h5> 
<p>一般不在创建表的时候添加索引，会让插入数据变慢。</p> 
<ol><li> <p>CREATE TABLE 表名(字段1数据类型,字段2数据类型[,...],INDEX 索引名 (列名));</p> </li></ol> 
<pre><code class="language-sql">create table member(id int(10) ,name varchar(10) ,cardid int(18), phone int(11) ,address varchar(50),
INDEX name_index(name));</code></pre> 
<h5 id="%C2%A0%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95%EF%BC%9A"><a href="https://so.csdn.net/so/search?q=%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95&amp;spm=1001.2101.3001.7020" title="删除索引">删除索引</a>：</h5> 
<pre><code class="language-sql"> drop index name_index on member;      --直接删除索引​
 drop index cardid_index on member;    --直接删除索引​
 alter table member DROP index phone_index;   --以修改表的方式删除索引</code></pre> 
<h4>唯一索引（创建唯一键即创建唯一索引）</h4> 
<p><br> 唯一索引：与普通索引类似，但区别是唯一索引列的每个值都唯一。 唯一索引 允许有空值（注意和主键不同）。如果是用组合索引创建，则列值的组合必须唯一。添加唯一键将自动创建唯一索引。</p> 
<p>创建唯一键或者创建唯一索引都可实现。</p> 
<h5>方法一：直接创建唯一索引</h5> 
<p> CREATE UNIQUE INDEX 索引名 ON 表名(字段名);</p> 
<pre><code class="language-sql">create unique index address_index on member (address);</code></pre> 
<h5>方法二：以修改表的方式创建</h5> 
<p>ALTER TABLE 表名 ADD UNIQUE 索引名(字段名);</p> 
<pre><code class="language-sql">alter table member add unique phone_index(phone);</code></pre> 
<h5 id="%E6%96%B9%E6%B3%95%E4%B8%89%EF%BC%9A%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%8C%87%E5%AE%9A%E7%B4%A2%E5%BC%95">方法三：创建表时指定索引</h5> 
<p>CREATE TABLE 表名(字段1 数据类型,字段2 数据类型[...],UNIQUE 索引名(字段名));</p> 
<pre><code class="language-sql">create table member(id int(10) ,name varchar(10) ,cardid int(18) ,phone int(11) ,address varchar(50),unique phone_index(phone));
</code></pre> 
<h4 id="3.3%C2%A0%E4%B8%BB%E9%94%AE%E7%B4%A2%E5%BC%95%EF%BC%88%E5%92%8C%E5%88%9B%E5%BB%BA%E4%B8%BB%E9%94%AE%E7%9A%84%E6%96%B9%E5%BC%8F%E4%B8%80%E6%A0%B7%EF%BC%89">主键索引（和创建主键的方式一样）</h4> 
<p>主键索引是一种特殊的唯一索引，必须指定为“PRIMARY KEY”。一个表只能有一个主键，不允许有空值。 添加主键将自动创建主键索引。</p> 
<h5 id="%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%94%AE">方法一：创建表时添加主键</h5> 
<p>create table 表名(字段1 XXX, 字段2 XXX, ...primary key(字段));<br> create table 表名(字段1 XXX primary key, ...);     将主键作为字段1的属性</p> 
<pre><code class="language-sql">create table student(id int(10),name varchar(10),primary key(id));
 ​
create table student(id int(10) primary key,name varchar(10));</code></pre> 
<h5 id="%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%E5%9C%A8%E7%8E%B0%E6%9C%89%E8%A1%A8%E4%B8%AD%E6%B7%BB%E5%8A%A0%E4%B8%BB%E9%94%AE">方法二：在现有表中添加主键</h5> 
<h5>ALTER TABLE 表名 add primary key(字段名);</h5> 
<pre><code class="language-sql">ALTER TABLE member add primary key(id);    --将id字段添加为主键 </code></pre> 
<p>组合索引（单列索引与多列索引）<br> 组合索引（单列索引与多列索引）：可以是单列上创建的索引，也可以是在多列上创建的索引。</p> 
<p>需要满足最左原则，因为select 语句的where条件是依次从左往右执行的，所以在使用select 语句查询时where 条件使用的字段顺序必须和组合索引中的排序一致，否则索引将不会生效。</p> 
<h5>方法一：直接创建索引</h5> 
<p>CREATE INDEX 索引名 on 表名(字段1,字段2，字段3);</p> 
<pre><code class="language-sql">create index name_cardid_phone_index on member3(name,cardid,phone);   使用3个字段创建组合索引
alter table member3 drop index name_cardid_phone_index;   删除组合索引
遵循最左原则 
</code></pre> 
<h5 id="%C2%A0%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%9A%84%E6%96%B9%E5%BC%8F%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><strong>方法二：修改表的方式创建索引</strong></h5> 
<p><strong>alter table 表名 add index 索引名(字段1,字段2, ..., 字段n);</strong></p> 
<pre><code class="language-sql"> alter table member add index phone_name_cardid_index(phone,name,cardid);</code></pre> 
<h5 id="%C2%A0%E6%96%B9%E6%B3%95%E4%B8%89%EF%BC%9A%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%9A%84%E6%97%B6%E5%80%99%E6%8C%87%E5%AE%9A%E7%B4%A2%E5%BC%95">方法三：创建表的时候指定索引</h5> 
<p>CREATE TABLE 表名(列名1 数据类型,列名2 数据类型,列名3 数据类型, INDEX 索引名(字段1,字段2,字段3));</p> 
<pre><code class="language-sql">create table member(id int(10),name varchar(10),phone int(11),index name_phone_index(name,phone));</code></pre> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c0a66f44952f73a8e770be52db8be9b5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">华为云云耀云服务器L实例评测｜2核2G跑mysql性能测试</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8c109a2a42b7db1c81c3b1f4b273f27c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringBoot结合MyBatis 【超详细】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>