<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【小白专用】MySQL查询数据库所有表名及表结构其注释 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/2a65529d7f91cc25625a505889ae757e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="【小白专用】MySQL查询数据库所有表名及表结构其注释">
  <meta property="og:description" content="一、先了解下INFORMATION_SCHEMA
1、在MySQL中，把INFORMATION_SCHEMA看作是一个数据库，确切说是信息数据库。其中保存着关于MySQL服务器所维护的所有其他数据库的信息。如数据库名，数据库的表，表栏的数据类型与访问权 限等。在INFORMATION_SCHEMA中，有数个只读表。它们实际上是视图，而不是基本表，因此，你将无法看到与之相关的任何文件。
2、TABLES表：提供了关于数据库中的表的信息(包括视图)。详细表述了某个表属于哪个schema，表类型，表引擎，创建时间等信息。是show tables from schemaname的结果取之此表。
3、COLUMNS表：提供了表中的列信息。详细表述了某张表的所有列以及每个列的信息。是show columns from schemaname.tablename的结果取之此表。
#查询所有的数据库名称 SELECT SCHEMA_NAME AS Database FROM INFORMATION_SCHEMA.SCHEMATA; #查询指定数据库下的所有表名（例如information_schema数据库下的所有表名） select table_name as name from information_schema.TABLES where TABLE_SCHEMA=&#39;information_schema&#39; 查看ftp数据库内以oemp开头的所有的表名、表数据量、表备注、字段名称、字段类型、默认值、字段备注等；如果查整个数据库就把ftp后全删除。
string sql = $@&#34;SELECT TABLE_NAME as TableName, column_name AS DbColumnName, CASE WHEN left(COLUMN_TYPE,LOCATE(&#39;(&#39;,COLUMN_TYPE)-1)=&#39;&#39; THEN COLUMN_TYPE ELSE left(COLUMN_TYPE,LOCATE(&#39;(&#39;,COLUMN_TYPE)-1) END AS DataType, CAST(SUBSTRING(COLUMN_TYPE,LOCATE(&#39;(&#39;,COLUMN_TYPE)&#43;1,LOCATE(&#39;)&#39;,COLUMN_TYPE)-LOCATE(&#39;(&#39;,COLUMN_TYPE)-1) AS signed) AS Length, column_default AS `DefaultValue`, column_comment AS `ColumnComment`, CASE WHEN COLUMN_KEY = &#39;PRI&#39; THEN true ELSE false END AS `IsPrimaryKey`, CASE WHEN EXTRA=&#39;auto_increment&#39; THEN true ELSE false END as IsIdentity, CASE WHEN is_nullable = &#39;YES&#39; THEN true ELSE false END AS `IsNullable` FROM Information_schema.">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-05-17T19:09:56+08:00">
    <meta property="article:modified_time" content="2024-05-17T19:09:56+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【小白专用】MySQL查询数据库所有表名及表结构其注释</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p>一、先了解下INFORMATION_SCHEMA<br> 1、在MySQL中，把INFORMATION_SCHEMA看作是一个数据库，确切说是信息数据库。其中保存着关于MySQL服务器所维护的所有其他数据库的信息。如数据库名，数据库的表，表栏的数据类型与访问权 限等。在INFORMATION_SCHEMA中，有数个只读表。它们实际上是视图，而不是基本表，因此，你将无法看到与之相关的任何文件。</p> 
<p>2、TABLES表：提供了关于数据库中的表的信息(包括视图)。详细表述了某个表属于哪个schema，表类型，表引擎，创建时间等信息。是show tables from schemaname的结果取之此表。</p> 
<p>3、COLUMNS表：提供了表中的列信息。详细表述了某张表的所有列以及每个列的信息。是show columns from schemaname.tablename的结果取之此表。<br>  </p> 
<pre><code class="language-sql">#查询所有的数据库名称
SELECT SCHEMA_NAME AS Database FROM INFORMATION_SCHEMA.SCHEMATA;

#查询指定数据库下的所有表名（例如information_schema数据库下的所有表名）

select table_name as name  from information_schema.TABLES where TABLE_SCHEMA='information_schema'</code></pre> 
<p></p> 
<p>查看<strong>ftp</strong>数据库内以oemp开头的所有的表名、表数据量、表备注、字段名称、字段类型、默认值、字段备注等；如果查整个数据库就把ftp后全删除。</p> 
<pre><code class="language-cs">            string sql = $@"SELECT TABLE_NAME as TableName, 
                     column_name AS DbColumnName,
                     CASE WHEN  left(COLUMN_TYPE,LOCATE('(',COLUMN_TYPE)-1)='' THEN COLUMN_TYPE ELSE  left(COLUMN_TYPE,LOCATE('(',COLUMN_TYPE)-1) END AS DataType,
                     CAST(SUBSTRING(COLUMN_TYPE,LOCATE('(',COLUMN_TYPE)+1,LOCATE(')',COLUMN_TYPE)-LOCATE('(',COLUMN_TYPE)-1) AS signed) AS Length,
                     column_default  AS  `DefaultValue`,
                     column_comment  AS  `ColumnComment`,
                     CASE WHEN COLUMN_KEY = 'PRI' THEN true ELSE false END AS `IsPrimaryKey`,
                     CASE WHEN EXTRA='auto_increment' THEN true ELSE false END as IsIdentity,
                     CASE WHEN is_nullable = 'YES' THEN true ELSE false END AS `IsNullable`
                     FROM Information_schema.columns where TABLE_NAME='{tableName}' and  TABLE_SCHEMA=(select database()) ORDER BY TABLE_NAME";</code></pre> 
<p></p> 
<pre><code class="language-sql">SELECT  
    T1.TABLE_COMMENT 表注释,
    T1.TABLE_ROWS 表数据量,
    T2.TABLE_NAME 表名,
    T2.COLUMN_NAME 字段名,  
    T2.COLUMN_TYPE 数据类型,  
    T2.DATA_TYPE 字段类型,  
    T2.CHARACTER_MAXIMUM_LENGTH 长度,  
    T2.IS_NULLABLE 是否为空,  
    T2.COLUMN_DEFAULT 默认值,  
    T2.COLUMN_COMMENT 字段备注   
FROM 
    INFORMATION_SCHEMA.TABLES T1
LEFT JOIN
    INFORMATION_SCHEMA.COLUMNS T2
ON
    T1.TABLE_NAME = T2.TABLE_NAME
WHERE  
    T1.TABLE_SCHEMA ='ftp'
AND 
    T1.TABLE_NAME LIKE 'oemp%'
ORDER BY 
    T1.TABLE_NAME;

</code></pre> 
<p></p> 
<p><img alt="" height="274" src="https://images2.imgbox.com/be/43/pk1Go7OB_o.png" width="958"></p> 
<p></p> 
<h4>二、如何获取全部表名</h4> 
<p>基本的语句为</p> 
<pre><code class="language-sql">SELECT table_name FROM information_schema.tables</code></pre> 
<p>但是这个并不符合业务需求，因为这会返回全部的表名，而业务中需要限定是哪个数据库，并且，不同的业务可能会使用不同的表前缀，所以最好可以限定表前缀，并且需要展示表的注释，不然大家也不清楚表是属于哪个业务的。</p> 
<p>所以，完整的SQL语句如下</p> 
<p></p> 
<pre><code class="language-sql">SELECT
	TABLE_NAME,
	TABLE_COMMENT 
FROM
	information_schema.TABLES 
WHERE
	TABLE_SCHEMA = 'TABLE_SCHEMA' 
	AND TABLE_NAME LIKE 'x_%' 
	AND TABLE_NAME NOT LIKE 'xx_exp%' 
ORDER BY
	TABLE_NAME
</code></pre> 
<p></p> 
<p>需要配置几个参数，并且已经按表名进行排序，TABLE_COMMENT 为表注释。</p> 
<ol><li>TABLE_SCHEMA 数据库名称</li><li>x_ 表前缀</li></ol> 
<p>运行结果如下图</p> 
<p><img alt="" height="339" src="https://images2.imgbox.com/1c/b9/4ZahmK0a_o.png" width="236"></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<pre><code class="language-sql">1、查看Mysql 数据库 "ori_data"下所有表的表名、表注释及其数据量

SELECT 
TABLE_NAME 表名,TABLE_COMMENT 表注释,TABLE_ROWS 数据量
FROM information_schema.tables
WHERE TABLE_SCHEMA = 'ori_data' 
ORDER BY TABLE_NAME;
</code></pre> 
<pre><code class="language-sql">SELECT* FROM OPENQUERY (MYSQLTEST ,'
SELECT
	TABLE_NAME as 表名
	 
FROM
	information_schema.TABLES 
WHERE
	TABLE_SCHEMA = ''msldbalitest'' 
	AND TABLE_NAME LIKE ''tp_%'' 
	AND TABLE_NAME NOT LIKE ''cms_exp%'' 
    ORDER BY TABLE_NAME desc

')</code></pre> 
<p><img alt="" height="308" src="https://images2.imgbox.com/cf/f1/KcY9SK0v_o.png" width="218"></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<pre><code class="language-sql">2. 查询数据库 ‘ori_data’ 下表 ‘accumulation’ 所有字段注释

SELECT 
COLUMN_NAME 字段名,column_comment 字段注释 
FROM INFORMATION_SCHEMA.Columns 
WHERE table_name='accumulation' AND table_schema='ori_data'
</code></pre> 
<p></p> 
<pre><code class="language-sql">select COLUMN_NAME,DATA_TYPE,COLUMN_COMMENT from information_schema.COLUMNS where table_name = '表名' and table_schema = '数据库名称';</code></pre> 
<pre><code class="language-sql">SELECT* FROM OPENQUERY (MYSQLTEST ,'
SELECT 
COLUMN_NAME as 字段名,DATA_TYPE,column_comment as 字段注释 
FROM INFORMATION_SCHEMA.Columns 
WHERE table_name=''cms_goods'' AND table_schema=''msldbalitest''

')</code></pre> 
<p><img alt="" height="311" src="https://images2.imgbox.com/79/fa/6alj1ULc_o.png" width="313"></p> 
<p></p> 
<pre><code class="language-sql">3. 查询数据库 "ori_data" 下所有表的表名、表注释以及对应表字段注释

SELECT 
a.TABLE_NAME 表名,a.TABLE_COMMENT 表注释,b.COLUMN_NAME 表字段,b.COLUMN_TYPE 字段类型,b.COLUMN_COMMENT 字段注释
FROM information_schema.TABLES a,INFORMATION_SCHEMA.Columns b 
WHERE b.TABLE_NAME=a.TABLE_NAME AND a.TABLE_SCHEMA='ori_data'
</code></pre> 
<pre><code class="language-sql">SELECT* FROM OPENQUERY (MYSQLTEST ,'
SELECT 
a.TABLE_NAME as 表名,a.TABLE_COMMENT as 表注释,b.COLUMN_NAME as 表字段,b.COLUMN_TYPE as 字段类型,b.COLUMN_COMMENT as 字段注释
FROM information_schema.TABLES a,INFORMATION_SCHEMA.Columns b 
WHERE b.TABLE_NAME=a.TABLE_NAME AND a.TABLE_SCHEMA=''msldbalitest''

')</code></pre> 
<p><span style="color:#fe2c24;">information_schema数据库是MySQL数据库自带的数据库，里面存放的MySQL数据库所有的信息，包括数据表、数据注释、数据表的索引、数据库的权限等等。</span></p> 
<p><img alt="" height="336" src="https://images2.imgbox.com/76/4a/6sNW7Whm_o.png" width="734"></p> 
<p></p> 
<p></p> 
<p>Mysql数据库如何获取某数据库所有表名称（不包含表结构），Sql如下：</p> 
<p></p> 
<pre><code class="language-sql">SELECT 
	table_name 
FROM 
	information_schema.tables 
WHERE table_schema = 'xxx' AND table_type = 'base table'
</code></pre> 
<p>information_schema：Mysql自带的数据库，存放各类数据库相关信息的信息数据库，表多为视图<br><span style="color:#fe2c24;">information_schema.tables：该数据库下的tables表</span><br> table_schema：tables表下的一个字段，数据库名称<br> table_type：tables表下的一个字段，表类型，base table为基础表，注：有空格<br> table_name：tables表下的一个字段，数据表名称<br>  </p> 
<p></p> 
<h4>查看指定表的字段及注释</h4> 
<p></p> 
<pre><code class="language-sql">SELECT* FROM OPENQUERY (MYSQLTEST ,'
select
	a.ordinal_position,
	a.COLUMN_name,
	a.COLUMN_type,
	a.COLumn_comment,
	a.is_nullable,
	a.column_key
from
	information_schema.COLUMNS a
where
	TABLE_schema = ''msldbalitest''
	and TABLE_name = ''cms_admin_menu''

')</code></pre> 
<p><img alt="" height="217" src="https://images2.imgbox.com/c2/24/pHD29rqG_o.png" width="590"></p> 
<p></p> 
<p><img alt="" height="230" src="https://images2.imgbox.com/59/7c/SWvXcHGt_o.png" width="638"></p> 
<p></p> 
<h4>查看数据所有表名及注释</h4> 
<p></p> 
<pre><code class="language-sql">SELECT* FROM OPENQUERY (MYSQLTEST ,'
select
	t.TABLE_NAME,
	t.TABLE_COMMENT
from
	information_schema.tables t
where
	t.TABLE_TYPE = ''BASE TABLE''
	and TABLE_schema = ''msldbalitest''


')</code></pre> 
<p><img alt="" height="315" src="https://images2.imgbox.com/5a/21/cqaF5Lmn_o.png" width="351"></p> 
<p></p> 
<p>在mysql中，information_schema这个数据库中保存了mysql服务器所有数据库的信息。<br> 包括数据库名，数据库的表，表字段的数据类型等。<br> 简而言之，若想知道mysql中有哪些库，哪些表，表里面有哪些字段以及他们的注释，都可以从information_schema中获取<br>  </p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p>COLUMNS表<br> information_schema库中的COLUMNS表，存放MySQL所有表的字段详细信息。</p> 
<p>常用列<br> TABLE_SCHEMA：数据库名<br> TABLE_NAME：数据表名<br> COLUMN_NAME：数据列名<br> DATA_TYPE：数据类型，如：varchar<br> COLUMN_TYPE：数据列类型（含数据长度），如：varchar(32)<br> COLUMN_COMMENT：数据列注释/说明<br>  </p> 
<p><img alt="" height="601" src="https://images2.imgbox.com/4e/1f/b3G8xJI5_o.png" width="818"></p> 
<p></p> 
<pre><code class="language-cs">            string sql = $@"SELECT TABLE_NAME as TableName, 
                     column_name AS DbColumnName,
                     CASE WHEN  left(COLUMN_TYPE,LOCATE('(',COLUMN_TYPE)-1)='' THEN COLUMN_TYPE ELSE  left(COLUMN_TYPE,LOCATE('(',COLUMN_TYPE)-1) END AS DataType,
                     CAST(SUBSTRING(COLUMN_TYPE,LOCATE('(',COLUMN_TYPE)+1,LOCATE(')',COLUMN_TYPE)-LOCATE('(',COLUMN_TYPE)-1) AS signed) AS Length,
                     column_default  AS  `DefaultValue`,
                     column_comment  AS  `ColumnComment`,
                     CASE WHEN COLUMN_KEY = 'PRI' THEN true ELSE false END AS `IsPrimaryKey`,
                     CASE WHEN EXTRA='auto_increment' THEN true ELSE false END as IsIdentity,
                     CASE WHEN is_nullable = 'YES' THEN true ELSE false END AS `IsNullable`
                     FROM Information_schema.columns where TABLE_NAME='{tableName}' and  TABLE_SCHEMA=(select database()) ORDER BY TABLE_NAME";</code></pre> 
<p></p> 
<p>使用<code>MySQL</code>创建的表，无论是表注释、索引，还是字段的类型等等，都会存到<code>MySQL</code>自带的库表中，可以通过<code>SQL</code>查出来想要的表、字段信息。<br> 了解<code>information_schema</code>库，可以在工作中起到意想不到的效果</p> 
<p></p> 
<pre><code class="language-sql">-- database_name替换为库名，查出库中所有表的TABLE_NAME表名、TABLE_COMMENT表注释
SELECT TABLE_NAME,TABLE_COMMENT FROM information_schema.TABLES WHERE table_schema='database_name';
</code></pre> 
<p></p> 
<h5>TABLES表</h5> 
<blockquote> 
 <p><code>information_schema</code>库中的<code>TABLES</code>表，存放<code>MySQL</code>所有表的表信息。</p> 
</blockquote> 
<h6><a id="_12"></a>常用列</h6> 
<ul><li>TABLE_SCHEMA：数据库名</li><li>TABLE_NAME：数据表名</li><li>TABLE_COMMENT：数据表注释/说明</li></ul> 
<p></p> 
<p><img alt="" height="576" src="https://images2.imgbox.com/d5/9e/Di1FeoZz_o.png" width="762"></p> 
<p></p> 
<p></p> 
<p>查询某个表的所有字段</p> 
<pre><code class="language-sql">select column_name,data_type,column_comment,column_key,extra,character_maximum_length,is_nullable,column_default
from information_schema.columns 
where table_schema = 'seata' and table_name = 'users' ;</code></pre> 
<p></p> 
<p>组装表的所有列</p> 
<pre><code class="language-sql">select GROUP_CONCAT("t.",column_name) total
from information_schema.columns 
where table_schema = 'seata' and table_name = 'users' and column_name not in ('id');</code></pre> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f0f255dfaeb021e139771a9035f328b7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">20240518 每日AI必读资讯</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/719c7d4de84bf600b566faa5f93e62d3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">HDFS分布文件系统（Hadoop Distributed File System）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>