<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用WSGI部署Django的几种方式 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/24652481ce2ceab02a9973ca4fa8f0ad/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="使用WSGI部署Django的几种方式">
  <meta property="og:description" content="部署服务器介绍： Gunicorn (&#39;Green Unicorn&#39;) 是一个 UNIX 下的纯 Python WSGI 服务器uWSGI 是一个快速的，自我驱动的，对开发者和系统管理员友好的应用容器服务器，完全由 C 编写Apache 和 mod_wsgi 在生产环境部署已经过充分测试 方式一：使用 Gunicorn 托管 Django 安装 Gunicorn
&gt; pip install gunicorn
把 Django 当作普通 WSGI 应用在 Gunicorn 中运行
安装了 Gunicorn 后，将提供一个 gunicorn 命令，该命令用于启动 Gunicorn 服务器进程。最简单的使用方式是传递包含名为 application 的 WSGI 应用程序对象的模块的位置，对于典型的 Django 项目，如下所示：
&gt; gunicorn myproject.wsgi
这样会创建一个进程，包含了一个监听在 127.0.0.1:8000 的线程。前提是你的项目在 Python path 中，要满足这个条件，最简单的方法是在 manage.py 文件所在的目录中运行这条命令。
方式二：使用 uWSGI 托管 Django uWSGI 文档提供了一个覆盖 Django，nginx，和 uWSGI（一个配置，多种适配）。以下文档专注于如何用 uWSGI 集成 Django。
前置条件：uWSGI">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-08-13T11:48:11+08:00">
    <meta property="article:modified_time" content="2024-08-13T11:48:11+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用WSGI部署Django的几种方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3><strong>部署服务器介绍：</strong></h3> 
<ul><li>Gunicorn ('Green Unicorn') 是一个 UNIX 下的纯 Python WSGI 服务器</li><li>uWSGI 是一个快速的，自我驱动的，对开发者和系统管理员友好的应用容器服务器，完全由 C 编写</li><li>Apache 和 mod_wsgi 在生产环境部署已经过充分测试</li></ul> 
<h3><strong>方式一：使用 Gunicorn 托管 Django</strong></h3> 
<p>安装 Gunicorn</p> 
<p>&gt; pip install gunicorn</p> 
<p><strong>把 Django 当作普通 WSGI 应用在 Gunicorn 中运行</strong></p> 
<p>安装了 Gunicorn 后，将提供一个 <strong>gunicorn</strong> 命令，该命令用于启动 Gunicorn 服务器进程。最简单的使用方式是传递包含名为 <strong>application</strong> 的 WSGI 应用程序对象的模块的位置，对于典型的 Django 项目，如下所示：</p> 
<p><strong>&gt; gunicorn myproject.wsgi</strong></p> 
<p>这样会创建一个进程，包含了一个监听在 <strong>127.0.0.1:8000</strong> 的线程。前提是你的项目在 Python path 中，要满足这个条件，最简单的方法是在 <strong>manage.py</strong> 文件所在的目录中运行这条命令。</p> 
<p></p> 
<h3><strong>方式二：使用 uWSGI 托管 Django</strong></h3> 
<p>uWSGI 文档提供了一个覆盖 Django，nginx，和 uWSGI（一个配置，多种适配）。以下文档专注于如何用 uWSGI 集成 Django。</p> 
<p><strong>前置条件：uWSGI</strong></p> 
<p><strong>安装uwsgi</strong></p> 
<p>pip install uwsgi</p> 
<p><strong>配置并启动用于 Django 的 uWSGI 服务器</strong></p> 
<p>uWSGI 支持多种配置进程的方式</p> 
<p>以下是启动 uWSGI 服务器的示例命令：</p> 
<p>uwsgi --chdir=/path/to/your/project <strong>\</strong></p> 
<p>    --module=mysite.wsgi:application <strong>\</strong></p> 
<p>    --env DJANGO_SETTINGS_MODULE=mysite.settings <strong>\</strong></p> 
<p>    --master --pidfile=/tmp/project-master.pid <strong>\</strong></p> 
<p>    --socket=127.0.0.1:49152 <strong>\ </strong>     # can also be a file</p> 
<p>    --processes=5 <strong>\ </strong>                # number of worker processes</p> 
<p>    --uid=1000 --gid=2000 <strong>\ </strong>        # if root, uwsgi can drop privileges</p> 
<p>    --harakiri=20 <strong>\ </strong>                # respawn processes taking more than 20 seconds</p> 
<p>    --max-requests=5000 <strong>\ </strong>          # respawn processes after serving 5000 requests</p> 
<p>    --vacuum <strong>\ </strong>                     # clear environment on exit</p> 
<p>    --home=/path/to/virtual/env <strong>\ </strong>  # optional path to a virtual environment</p> 
<p>    --daemonize=/var/log/uwsgi/yourproject.log      # background the process</p> 
<p>假设你有个叫做 <strong>mysite</strong> 的顶级项目包，其中包含一个模板 <strong>mysite/wsgi.py</strong>，模块包含一个 WSGI <strong>application</strong> 对象。如果你使用的是较新的 Django，这就是你运行 <strong>django-admin startproject mysite</strong> （使用你的项目名替换 <strong>mysite</strong>）后得到的目录结构。若该文件不存在，你需要创建它</p> 
<p>Django 指定的参数如下：</p> 
<ul><li><strong>chdir</strong>：需要包含于 Python 的导入路径的目录的路径——例如，包含 <strong>mysite</strong> 包的目录</li><li><strong>module：</strong>要使用的 WSGI 模块——可能是 startproject 创建的 mysite.wsgi 的模块</li><li><strong>env：</strong>至少要包括 DJANGO_SETTINGS_MODULE</li><li><strong>home</strong>: 可选的路径，指向你工程的虚拟环境。</li></ul> 
<p><strong>示例 INI 配置文件：</strong></p> 
<p><strong>[uwsgi]</strong></p> 
<p>chdir=/path/to/your/project</p> 
<p>module=mysite.wsgi:application</p> 
<p>master=True</p> 
<p>pidfile=/tmp/project-master.pid</p> 
<p>vacuum=True</p> 
<p>max-requests=5000</p> 
<p>daemonize=/var/log/uwsgi/yourproject.log</p> 
<p><strong>示例 INI 配置文件的使用方法：</strong></p> 
<p>uwsgi --ini uwsgi.ini</p> 
<p></p> 
<h3><strong>方式三：使用 Apache 和 mod_wsgi 托管 Django</strong></h3> 
<p>mod_wsgi 是一个 Apache 模块，它可以管理任何 Python WSGI 应用，包括 Django</p> 
<p>Django 支持所有支持 mod_wsgi 的 Apache 版本</p> 
<p><strong>基础配置</strong></p> 
<p>一旦你安装了 mod_wsgi 并且启用了它，请在你的Apache服务器的 httpd.conf 文件中添加如下内容。</p> 
<p>WSGIScriptAlias / /path/to/mysite.com/mysite/wsgi.py</p> 
<p>WSGIPythonHome /path/to/venv</p> 
<p>WSGIPythonPath /path/to/mysite.com</p> 
<p><strong>&lt;Directory</strong> /path/to/mysite.com/mysite<strong>&gt;</strong></p> 
<p><strong>&lt;Files</strong> wsgi.py<strong>&gt;</strong></p> 
<p>Require <strong>all</strong> granted</p> 
<p><strong>&lt;/Files&gt;</strong></p> 
<p><strong>&lt;/Directory&gt;</strong></p> 
<p><strong>WSGIScriptAlias</strong> 行的第一项是你所期望的应用所在的基础 URL 路径（ <strong>/</strong> 根 url），第二项是 "WSGI 文件" 的位置——一般位于项目包之内（本例中是 <strong>mysite</strong>）。这告诉 Apache 用该文件中定义的 WSGI 应用响应指定 URL 下的请求。</p> 
<p>如果你在某个 <strong>virtual environment 1</strong> 内为应用安装项目的 Python 依赖，将该 virtualenv 的路径添加至 <strong>WSGIPythonHome</strong></p> 
<p><strong>WSGIPythonPath</strong> 行确保你的项目包能从 Python path 导入</p> 
<p><strong>使用 mod_wsgi 后台模式</strong></p> 
<p>"Daemon mode" 是运行 mod_wsgi 的推荐模式（在非 Windows 平台上）。为了创建必要的后台进程组并在其中运行 Django 实例，你需要添加合适的 <strong>WSGIDaemonProcess</strong> 和 <strong>WSGIProcessGroup</strong> 指令。上述配置在你使用后台模式时需要点小修改，即你不能使用 <strong>WSGIPythonPath</strong>；作为替换，你要在 <strong>WSGIDaemonProcess</strong> 中添加 <strong>python-path</strong> 选项，例如：</p> 
<p>WSGIDaemonProcess example.com python-home=/path/to/venv python-path=/path/to/mysite.com</p> 
<p>WSGIProcessGroup example.com</p> 
<p>如果你想在子目录中开放你的项目（本例中 <strong>https://example.com/mysite</strong>），你可在上述配置中添加 <strong>WSGIScriptAlias</strong>：</p> 
<p>WSGIScriptAlias /mysite /path/to/mysite.com/mysite/wsgi.py process-group=example.com</p> 
<p><strong>静态文件服务</strong></p> 
<p>Django 本身并不提供文件，它把这项工作留给你选择的任何一个网络服务器。</p> 
<p>我们建议使用一个单独的 Web 服务器独立提供静态文件服务如：</p> 
<ul><li>Nginx</li><li>Apache</li></ul> 
<p><strong>参考文档</strong></p> 
<p><a href="https://www.bookstack.cn/read/django-4.1-zh/5c499bf5b5865b8f.md" rel="nofollow" title="如何部署 Django - 如何使用 WSGI 进行部署 - 《Django v4.1 中文文档》 - 书栈网 · BookStack">如何部署 Django - 如何使用 WSGI 进行部署 - 《Django v4.1 中文文档》 - 书栈网 · BookStack</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3a53e758f37a996e8d6cac5505543b31/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux云计算 |【第二阶段】NETWORK-DAY5</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3febd7212860049798cf82c4c04007f0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux：修改网卡名称（redhat-centos-redora）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>