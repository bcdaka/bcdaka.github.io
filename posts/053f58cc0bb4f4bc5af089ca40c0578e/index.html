<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>大数据期末课程设计实验案例：网站用户行为分析 - 编程大咖</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:url" content="https://bcdaka.github.io/posts/053f58cc0bb4f4bc5af089ca40c0578e/">
  <meta property="og:site_name" content="编程大咖">
  <meta property="og:title" content="大数据期末课程设计实验案例：网站用户行为分析">
  <meta property="og:description" content="大数据课程实验案例：网站用户行为分析
案例目的
1.熟悉Linux系统、MySQL、Hadoop、HBase、Hive、Sqoop、R、Eclipse等系统和软件的安装和使用；
2.了解大数据处理的基本流程；
3.熟悉数据预处理方法；
4.熟悉在不同类型数据库之间进行数据相互导入导出；
5.熟悉使用R语言进行可视化分析；
6.熟悉使用Elipse编写Java程序操作HBase数据库。
案例任务
1.安装Linux操作系统
2.安装关系型数据库MySQL
3.安装大数据处理框架Hadoop
4.安装列族数据库HBase
5.安装数据仓库Hive
6.安装Sqoop
7.安装R
8.安装Eclipse
9.对文本文件形式的原始数据集进行预处理
10.把文本文件的数据集导入到数据仓库Hive中
11.对数据仓库Hive中的数据进行查询分析
12.使用Sqoop将数据从Hive导入MySQL
13.使用Sqoop将数据从MySQL导入HBase
14.使用HBase Java API把数据从本地导入到HBase中
15.使用R对MySQL中的数据进行可视化分析
说明：Word可能导致部分命令或代码有问题，每一个步骤都提供参考链接，详细查看参考链接
首先1.安装Linux系统；
参考https://dblab.xmu.edu.cn/blog/285/
以下是各软件的安装，通过启动来验证安装
所有准备好在这里
cd /home/hadoop/a
用户准备工作
sudo useradd -m hadoop -s /bin/bash
Shell 命令这条命令创建了可以登陆的 hadoop 用户，并使用 /bin/bash 作为 shell。
接着使用如下命令设置密码，可简单设置为 hadoop，按提示输入两次密码：
sudo passwd hadoop
密码：123
可为 hadoop 用户增加管理员权限，方便部署，避免一些对新手来说比较棘手的权限问题：
sudo adduser hadoop sudo
更新apt
用 hadoop 用户登录后，我们先更新一下 apt，后续我们使用 apt 安装软件，如果没更新可能有一些软件安装不了。按 ctrl&#43;alt&#43;t 打开终端窗口，执行如下命令：">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2022-12-13T09:57:36+08:00">
    <meta property="article:modified_time" content="2022-12-13T09:57:36+08:00">

	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
  


</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="编程大咖" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">编程大咖</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">大数据期末课程设计实验案例：网站用户行为分析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>大数据课程实验案例：网站用户行为分析<br> 案例目的<br> 1.熟悉Linux系统、MySQL、Hadoop、HBase、Hive、Sqoop、R、Eclipse等系统和软件的安装和使用；<br> 2.了解大数据处理的基本流程；<br> 3.熟悉数据预处理方法；<br> 4.熟悉在不同类型数据库之间进行数据相互导入导出；<br> 5.熟悉使用R语言进行可视化分析；<br> 6.熟悉使用Elipse编写Java程序操作HBase数据库。<br> <img src="https://images2.imgbox.com/64/b9/8VIvz8og_o.png" alt="在这里插入图片描述"></p> 
<p>案例任务<br> 1.安装Linux操作系统<br> 2.安装关系型数据库MySQL<br> 3.安装大数据处理框架Hadoop<br> 4.安装列族数据库HBase<br> 5.安装数据仓库Hive<br> 6.安装Sqoop<br> 7.安装R<br> 8.安装Eclipse<br> 9.对文本文件形式的原始数据集进行预处理<br> 10.把文本文件的数据集导入到数据仓库Hive中<br> 11.对数据仓库Hive中的数据进行查询分析<br> 12.使用Sqoop将数据从Hive导入MySQL<br> 13.使用Sqoop将数据从MySQL导入HBase<br> 14.使用HBase Java API把数据从本地导入到HBase中<br> 15.使用R对MySQL中的数据进行可视化分析</p> 
<p><img src="https://images2.imgbox.com/8f/db/I8hly76h_o.png" alt="在这里插入图片描述"></p> 
<p>说明：Word可能导致部分命令或代码有问题，每一个步骤都提供参考链接，详细查看参考链接</p> 
<p>首先1.安装Linux系统；<br> 参考https://dblab.xmu.edu.cn/blog/285/<br> 以下是各软件的安装，通过启动来验证安装<br> 所有准备好在这里<br> cd /home/hadoop/a<br> <img src="https://images2.imgbox.com/7f/0d/XubW7aCD_o.png" alt="在这里插入图片描述"></p> 
<p>用户准备工作<br> sudo useradd -m hadoop -s /bin/bash<br> Shell 命令这条命令创建了可以登陆的 hadoop 用户，并使用 /bin/bash 作为 shell。<br> 接着使用如下命令设置密码，可简单设置为 hadoop，按提示输入两次密码：<br> sudo passwd hadoop<br> 密码：123<br> 可为 hadoop 用户增加管理员权限，方便部署，避免一些对新手来说比较棘手的权限问题：</p> 
<p>sudo adduser hadoop sudo<br> 更新apt<br> 用 hadoop 用户登录后，我们先更新一下 apt，后续我们使用 apt 安装软件，如果没更新可能有一些软件安装不了。按 ctrl+alt+t 打开终端窗口，执行如下命令：<br> sudo apt-get update<br> 修改各个节点的主机名<br> sudo vi /etc/homename</p> 
<p>安装ssh工具<br> 1.打开终端键入如下命令：<br> apt-get update<br> apt-get install openssh-server<br> 启动SSH服务<br> 1.键入如下命令：<br> /etc/init.d/ssh start<br> 重启命令与关闭命令如下：<br> /etc/init.d/ssh restart #重启SSH服务<br> /etc/init.d/ssh stop #关闭SSH服务<br> 查看进程，检查是否启动成功，键入如下命令：<br> ps -e | grep sshd<br> 配置root用户SSH服务</p> 
<p>Ubuntu中SSH服务安装完成后查看是否允许root用户登陆，若不允许则无法远程登陆root用户，需要修改配置<br> 1.首先，打开“/etc/ssh/sshd_config”<br> gedit /etc/ssh/sshd_config<br> 2.查看是否有“PermitRootLogin yes”，没有添加即可，完成后保存退出<br> 解决进程问题<br> sudo rm -r -f /var/lib/dpkg/lock<br> sudo rm -r -f /var/lib/dpkg/lock-frontend</p> 
<p>安装vim<br> sudo apt-get install vim<br> 为当前用户设置权限<br> sudo chown -R 当前用户名 ./hadoop<br> 软件安装注意！！！先解压好软件，再去到解压后所在目录在开始运行安装命令<br> 大数据实验软件安装详细过程参考：<br> Linux操作系统的安装：https://dblab.xmu.edu.cn/blog/285/<br> Hadoop安装教程：https://dblab.xmu.edu.cn/blog/7/<br> MySQL的安装：https://dblab.xmu.edu.cn/blog/1002/<br> HBase的安装：https://dblab.xmu.edu.cn/blog/588/<br> Hive的安装：https://dblab.xmu.edu.cn/blog/1080/<br> Sqoop的安装:https://dblab.xmu.edu.cn/blog/1015/</p> 
<p>2.安装Hadoop；<br> Hadoop安装教程参考https://dblab.xmu.edu.cn/blog/7/</p> 
<p>我们选择将 Hadoop 安装至 /usr/local/ 中：<br> cd /home/hadoop/a<br> sudo tar -zxvf hadoop-2.7.1.tar.gz -C /usr/local # 解压到/usr/local中<br> cd /usr/local/<br> sudo mv hadoop-2.7.1/ ./hadoop<br> sudo chown -R hadoop /hadoop # 修改文件权限<br> Shell 命令<br> Hadoop 解压后即可使用。输入如下命令来检查 Hadoop 是否可用，成功则会显示 Hadoop 版本信息：<br> cd /usr/local/hadoop<br> ./bin/hadoop version</p> 
<p>安装与启动<br> ssh localhost<br> cd /usr/local/hadoop<br> ./sbin/start-dfs.sh<br> <img src="https://images2.imgbox.com/c8/a5/mV4TgD4F_o.png" alt="在这里插入图片描述"></p> 
<p>3.安装MySQL；<br> 详细参考:https://dblab.xmu.edu.cn/blog/1002/<br> sudo apt-get update #更新软件源<br> sudo apt-get install mysql-server #安装mysql<br> 启动和关闭mysql服务器：<br> service mysql start<br> 密码：123<br> service mysql stop</p> 
<p>确认是否启动成功，mysql节点处于LISTEN状态表示启动成功：<br> sudo netstat -tap | grep mysql<br> 启动：service mysql start<br> sudo netstat -tap | grep mysql<br> mysql -u root -p<br> <img src="https://images2.imgbox.com/0a/f1/kmcXx7sG_o.png" alt="在这里插入图片描述"></p> 
<p>4.安装HBase；<br> 详细参考：https://dblab.xmu.edu.cn/blog/588/</p> 
<p>1.1 解压安装包hbase-1.1.2-bin.tar.gz放至路径 /usr/local，命令如下：<br> cd /home/hadoop/a</p> 
<p>sudo tar -zxf hbase-1.1.5-bin.tar.gz -C /usr/local</p> 
<p>Shell 命令<br> 1.2 将解压的文件名hbase-1.1.2改为hbase，以方便使用，命令如下：<br> cd /usr/local</p> 
<h3><a id="sudo_mv_usrlocal_hbase115_usrlocalhbase_142"></a>sudo mv /usr/local/ hbase-1.1.5 /usr/local/hbase</h3> 
<p>1.3 配置环境变量<br> 将hbase下的bin目录添加到path中，这样，启动hbase就无需到/usr/local/hbase目录下，大大的方便了hbase的使用。教程下面的部分还是切换到了/usr/local/hbase目录操作，有助于初学者理解运行过程，熟练之后可以不必切换。<br> 编辑~/.bashrc文件加入如下内容</p> 
<p>vi ~/.bashrc</p> 
<p>export PATH=$PATH:/usr/local/hbase/bin<br> 保存后退出<br> 再执行source命令使上述配置在当前终端立即生效<br> source ~/.bashrc</p> 
<p>4 添加HBase权限</p> 
<p>cd /usr/local<br> sudo chown -R hadoop ./hbase<br> #将hbase下的所有文件的所有者改为hadoop，hadoop是当前用户的用户名。<br> 启动测试<br> cd /usr/local/hbase<br> bin/start-hbase.sh<br> <img src="https://images2.imgbox.com/05/38/9094LQRD_o.png" alt="在这里插入图片描述"></p> 
<p>2.2 伪分布式模式配置<br> 1.配置/usr/local/hbase/conf/hbase-env.sh。命令如下：</p> 
<p>vi /usr/local/hbase/conf/hbase-env.sh<br> Shell 命令<br> 配置JAVA_HOME，HBASE_CLASSPATH，HBASE_MANAGES_ZK.<br> HBASE_CLASSPATH设置为本机Hadoop安装目录下的conf目录（即/usr/local/hadoop/conf）<br> vim /usr/local/hadoop/conf<br> export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64<br> export HBASE_CLASSPATH=/usr/local/hadoop/conf<br> export HBASE_MANAGES_ZK=true</p> 
<p>2.配置/usr/local/hbase/conf/hbase-site.xml<br> 用命令vi打开并编辑hbase-site.xml，命令如下：</p> 
<p>vi /usr/local/hbase/conf/hbase-site.xml</p> hbase.rootdir hdfs://localhost:9000/hbase hbase.cluster.distributed true 接下来测试运行HBase。 第一步：首先登陆ssh，之前设置了无密码登陆，因此这里不需要密码；再切换目录至/usr/local/hadoop ；再启动hadoop，如果已经启动hadoop请跳过此步骤。命令如下： ssh localhost cd /usr/local/hadoop ./sbin/start-dfs.sh 切换目录至/usr/local/hbase;再启动HBase.命令如下： cd /usr/local/hbase bin/start-hbase.sh 进入shell界面： bin/hbase shell 停止HBase运行,命令如下： bin/stop-hbase.sh 
<p>5.安装Hive；启动验证<br> 详细过程参考Hive的安装：https://dblab.xmu.edu.cn/blog/1080/<br> cd /home/hadoop/a</p> 
<h2><a id="usrlocal_213"></a>先把软件解压到/usr/local中，再执行如下操作，这里不做演示了，接着如下</h2> 
<p>cd /usr/local/<br> sudo mv apache-hive-3.1.2-bin hive # 将文件夹名改为hive<br> sudo chown -R dblab:dblab hive # 修改文件权限</p> 
<p>vim编辑器打开.bashrc文件，命令如下：<br> vim ~/.bashrc<br> 在该文件最前面一行添加如下内容：<br> export HIVE_HOME=/usr/local/hive<br> export PATH=<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         P 
        
       
         A 
        
       
         T 
        
       
         H 
        
       
         : 
        
       
      
        PATH: 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span></span></span></span></span>HIVE_HOME/bin<br> export HADOOP_HOME=/usr/local/hadoop</p> 
<p>HADOOP_HOME需要被配置成你机器上Hadoop的安装路径，比如这里是安装在/usr/local./hadoop目录。<br> 保存退出后，运行如下命令使配置立即生效：<br> source ~/.bashrc<br> 修改/usr/local/hive/conf下的hive-site.xml<br> 执行如下命令：<br> cd /usr/local/hive/conf<br> sudo mv hive-default.xml.template hive-default.xml<br> 使用vim编辑器新建一个配置文件hive-site.xml，命令如下：<br> cd /usr/local/hive/conf<br> sudo vim hive-site.xml</p> 
<p>在hive-site.xml中添加如下配置信息：</p> &lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt; &lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt; javax.jdo.option.ConnectionURL jdbc:mysql://localhost:3306/hive?createDatabaseIfNotExist=true JDBC connect string for a JDBC metastore javax.jdo.option.ConnectionDriverName com.mysql.jdbc.Driver Driver class name for a JDBC metastore javax.jdo.option.ConnectionUserName hive username to use against metastore database javax.jdo.option.ConnectionPassword hive password to use against metastore database 然后，按键盘上的“ESC”键退出vim编辑状态，再输入:wq，保存并退出vim编辑器。 
<p>#将mysql-connector-java-5.1.40-bin.jar拷贝到/usr/local/hive/lib目录下 解压后<br> cd /自己软件压缩包的位置<br> sudo tar -zxvf mysql-connector-java-5.1.40.tar.gz</p> 
<p>Sudo cp/home/hadoop/Desktop/mysql-connector-java-5.1.40/mysql-connector-java-5.1.40-bin.jar /usr/local/hive/lib<br> <img src="https://images2.imgbox.com/7a/0f/niCJbgAd_o.png" alt="在这里插入图片描述"></p> 
<p>cd /usr/local/hive/lib</p> 
<p>3.启动并登陆mysql<br> sudo service mysql start #启动mysql服务<br> mysql -u root -p #登陆shell界面<br> 密码：123</p> 
<p>在终端上输入以下命令重启MySQL：</p> 
<p>sudo /etc/init.d/mysql stop<br> sudo /etc/init.d/mysql start</p> 
<p>service mysql start #启动mysql服务<br> mysql -u root -p #登陆shell界面</p> 
<ol start="4"><li>新建hive数据库。</li></ol> 
<p>mysql&gt; create database hive; #这个hive数据库与hive-site.xml中localhost:3306/hive的hive对应，用来保存hive元数据<br> mysql<br> 5. 配置mysql允许hive接入：<br> 先刷新一下权限表。<br> mysql&gt; flush privileges;<br> mysql&gt; grant all on <em>.</em> to hive@localhost identified by ‘hive’; #将所有数据库的所有表的所有权限赋给hive用户，后面的hive是配置hive-site.xml中配置的连接密码<br> mysql&gt; flush privileges; #刷新mysql系统权限关系表<br> 注意！！！<br> 启动hive之前，请先启动hadoop集群。<br> 验证<br> cd /usr/local/hadoop<br> ./sbin/start-all.sh<br> cd /usr/local/hive<br> ./bin/hive<br> <img src="https://images2.imgbox.com/e4/b4/MvKQ6xY1_o.png" alt="在这里插入图片描述"></p> 
<p>然后，执行jps命令看一下当前运行的进程：<br> 1.jps<br> 如果出现下面这些进程，说明Hadoop启动成功了。<br> 3765 NodeManager<br> 3639 ResourceManager<br> 3800 Jps<br> 3261 DataNode<br> 3134 NameNode<br> 3471 SecondaryNameNode</p> 
<p>6.安装Sqoop；<br> 详细参考Sqoop的安装:https://dblab.xmu.edu.cn/blog/1015/<br> cd /home/hadoop/a</p> 
<p>sudo tar -zxvf sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gz -C /usr/local #解压安装文件<br> cd /usr/local<br> sudo mv sqoop-1.4.6.bin__hadoop-2.0.4-alpha sqoop #修改文件名<br> sudo chown -R hadoop:hadoop sqoop #修改文件夹属主，如果你当前登录用户名不是hadoop，<br> 请修改成你自己的用户名<br> 2. 修改配置文件sqoop-env.sh</p> 
<p>cd sqoop/conf/</p> 
<p>cat sqoop-env-template.sh &gt;&gt; sqoop-env.sh<br> #将sqoop-env-template.sh复制一份并命名为sqoop-env.sh<br> vim sqoop-env.sh<br> #编辑sqoop-env.sh<br> export HADOOP_COMMON_HOME=/usr/local/hadoop<br> export HADOOP_MAPRED_HOME=/usr/local/hadoop<br> export HBASE_HOME=/usr/local/hbase<br> export HIVE_HOME=/usr/local/hive</p> 
<ol start="3"><li>配置环境变量<br> 打开当前用户的环境变量配置文件：<br> vim ~/.bashrc<br> 在配置文件第一行键入如下信息：<br> export SQOOP_HOME=/usr/local/sqoop<br> export PATH=<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          P 
         
        
          A 
         
        
          T 
         
        
          H 
         
        
          : 
         
        
       
         PATH: 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span></span></span></span></span>SBT_HOME/bin:<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          S 
         
        
          Q 
         
        
          O 
         
        
          O 
         
         
         
           P 
          
         
           H 
          
         
        
          O 
         
        
          M 
         
        
          E 
         
        
          / 
         
        
          b 
         
        
          i 
         
        
          n 
         
        
          e 
         
        
          x 
         
        
          p 
         
        
          o 
         
        
          r 
         
        
          t 
         
        
          C 
         
        
          L 
         
        
          A 
         
        
          S 
         
        
          S 
         
        
          P 
         
        
          A 
         
        
          T 
         
        
          H 
         
        
          = 
         
        
       
         SQOOP_HOME/bin export CLASSPATH= 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault">Q</span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault" style="margin-right: 0.10903em;">M</span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span><span class="mord">/</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">p</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mord mathdefault">L</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord mathdefault" style="margin-right: 0.08125em;">H</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span></span></span></span></span>CLASSPATH:$SQOOP_HOME/lib<br> 执行下面命令让配置文件立即生效:<br> source ~/.bashrc</li></ol> 
<p>将mysql驱动包拷贝到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         S 
        
       
         Q 
        
       
         O 
        
       
         O 
        
        
        
          P 
         
        
          H 
         
        
       
         O 
        
       
         M 
        
       
         E 
        
       
         / 
        
       
         l 
        
       
         i 
        
       
         b 
        
       
         下 
        
       
         面 
        
       
         要 
        
       
         把 
        
       
         M 
        
       
         y 
        
       
         S 
        
       
         Q 
        
       
         L 
        
       
         驱 
        
       
         动 
        
       
         程 
        
       
         序 
        
       
         拷 
        
       
         贝 
        
       
         到 
        
       
      
        SQOOP_HOME/lib 下面要把MySQL驱动程序拷贝到 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault">Q</span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.328331em;"><span class="" style="top: -2.55em; margin-left: -0.13889em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right: 0.08125em;">H</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mord mathdefault" style="margin-right: 0.10903em;">M</span><span class="mord mathdefault" style="margin-right: 0.05764em;">E</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mord cjk_fallback">下</span><span class="mord cjk_fallback">面</span><span class="mord cjk_fallback">要</span><span class="mord cjk_fallback">把</span><span class="mord mathdefault" style="margin-right: 0.10903em;">M</span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault">Q</span><span class="mord mathdefault">L</span><span class="mord cjk_fallback">驱</span><span class="mord cjk_fallback">动</span><span class="mord cjk_fallback">程</span><span class="mord cjk_fallback">序</span><span class="mord cjk_fallback">拷</span><span class="mord cjk_fallback">贝</span><span class="mord cjk_fallback">到</span></span></span></span></span>SQOOP_HOME/lib目录下，首先请在Linux系统的浏览器中请点击mysql驱动包下载地址下载驱动包。下载后，一般文件会被浏览器默认放置在当前用户的下载目录下，本教程采用hadoop用户登录Linux系统，因此，下载文件被默认放置在“/home/hadoop/下载”目录下面。<br> 下面执行命令拷贝文件：<br> 去到软件所在目录<br> cd /home/hadoop/a<br> #解压mysql驱动包</p> 
<p>sudo tar -zxvf mysql-connector-java-5.1.40.tar.gz<br> #解压mysql驱动包<br> ls #这时就可以看到解压缩后得到的目录mysql-connector-java-5.1.40<br> cp ./mysql-connector-java-5.1.40/mysql-connector-java-5.1.40-bin.jar /usr/local/sqoop/lib</p> 
<p>cd /usr/local/sqoop/lib</p> 
<p>测试与MySQL的连接</p> 
<p>首先请确保mysql服务已经启动了，如果没有启动，请执行下面命令启动：<br> service mysql start<br> 密码：123<br> 然后就可以测试sqoop与MySQL之间的连接是否成功：<br> 测试sqoop与MySQL之间的连接是否成功：</p> 
<p>sqoop list-databases --connect jdbc:mysql://127.0.0.1:3306/ --username root -P<br> <img src="https://images2.imgbox.com/f2/c7/oP8Ge4Hn_o.png" alt="在这里插入图片描述"></p> 
<p>7.安装R；（这里有时遇到问题自己都解决不了）Ubuntu 18 版本这里的问题实在没法解决！！<br> 利用vim打开/etc/apt/sources.list文件<br> 1.sudo vim /etc/apt/sources.list<br> 在文件的最后一行添加厦门大学的镜像源：<br> deb http://mirrors.tuna.tsinghua.edu.cn/CRAN/bin/linux/ubuntu/ trusty/<br> 退出vim，更新软件源列表<br> 1.sudo apt-get update</p> 
<p>如果更新软件源出现由于没有公钥，无法验证下列签名的错误，请执行如下命令: sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 51716619E084DAB9<br> 安装R语言<br> 1.sudo apt-get install r-base<br> Shell 命令<br> 会提示“您希望继续执行吗？[Y/n]”，可以直接键盘输入“Y”，就可以顺利安装结束。<br> 安装结束后，可以执行下面命令启动R：<br> 1.R<br> 启动后，会显示如下信息，并进入“&gt;”命令提示符状态：<br> R version 3.3.2 (2016-10-31) – “Sincere Pumpkin Patch”<br> Copyright © 2016 The R Foundation for Statistical Computing<br> Platform: x86_64-pc-linux-gnu (64-bit)</p> 
<p>R是自由软件，不带任何担保。<br> 在某些条件下你可以将其自由散布。<br> 用’license()'或’licence()'来看散布的详细条件。</p> 
<p>R是个合作计划，有许多人为之做出了贡献.<br> 用’contributors()'来看合作者的详细情况<br> 用’citation()'会告诉你如何在出版物中正确地引用R或R程序包。</p> 
<p>用’demo()'来看一些示范程序，用’help()'来阅读在线帮助文件，或<br> 用’help.start()'通过HTML浏览器来看帮助文件。<br> 用’q()'退出R.<br> “&gt;”就是R的命令提示符，你可以在后面输入R语言命令。<br> 可以执行下面命令退出R：<br> 1.&gt;q()<br> <img src="https://images2.imgbox.com/fc/55/QHOX1LoG_o.png" alt="在这里插入图片描述"></p> 
<ol start="8"><li>安装Eclipse</li></ol> 
<p><img src="https://images2.imgbox.com/d7/f7/zC2b9mIK_o.png" alt="在这里插入图片描述"></p> 
<p>本地数据集上传到数据仓库Hive<br> user.zip下载地址：https://pan.baidu.com/s/1nuOSo7B</p> 
<p>首先建立一个用于运行本案例的目录bigdatacase<br> 如果你把user.zip下载到了其他目录，这里请进入到你自己的存放user.zip的目录。<br> 下面需要把user.zip进行解压缩，我们需要首先建立一个用于运行本案例的目录bigdatacase<br> 请执行以下命令：user.zip注意自己的文件目录<br> 1.cd /usr/local<br> 2.ls<br> 3.sudo mkdir bigdatacase<br> 4.//这里会提示你输入当前用户（本教程是hadoop用户名）的密码</p> 
<p>5.//下面给hadoop用户赋予针对bigdatacase目录的各种操作权限<br> 6.sudo chown -R hadoop:hadoop ./bigdatacase<br> 7.cd bigdatacase<br> 8.//下面创建一个dataset目录，用于保存数据集<br> 9.mkdir dataset<br> 10.//下面就可以解压缩user.zip文件<br> 11.cd ~ //表示进入hadoop用户的目录<br> 12.cd 下载<br> 13.ls<br> 14.unzip user.zip -d /usr/local/bigdatacase/dataset<br> 15.cd /usr/local/bigdatacase/dataset<br> 16.ls<br> <img src="https://images2.imgbox.com/4e/44/XwTBXIQF_o.png" alt="在这里插入图片描述"></p> 
<p>raw_user.csv和small_user.csv。<br> 我们执行下面命令取出前面5条记录看一下：<br> head -5 raw_user.csv</p> 
<p><img src="https://images2.imgbox.com/13/5b/VhD10k9W_o.png" alt="在这里插入图片描述"></p> 
<p>数据集的预处理详细参考：https://dblab.xmu.edu.cn/blog/959/</p> 
<p>1.删除文件第一行记录，即字段名称<br> raw_user和small_user中的第一行都是字段名称，我们在文件中的数据导入到数据仓库Hive中时，不需要第一行字段名称，因此，这里在做数据预处理时，删除第一行<br> cd /usr/local/bigdatacase/dataset<br> //下面删除raw_user中的第1行<br> sed -i ‘1d’ raw_user //1d表示删除第1行，同理，3d表示删除第3行，nd表示删除第n行<br> //下面删除small_user中的第1行<br> sed -i ‘1d’ small_user<br> //下面再用head命令去查看文件的前5行记录，就看不到字段名称这一行了<br> head -5 raw_user.csv<br> 可以看出，每行记录都包含5个字段，数据集中的字段及其含义如下：<br> <img src="https://images2.imgbox.com/d5/a8/0ibMCBFM_o.png" alt="在这里插入图片描述"></p> 
<p>user_id（用户id）<br> item_id(商品id)<br> behaviour_type（包括浏览、收藏、加购物车、购买，对应取值分别是1、2、3、4）<br> user_geohash(用户地理位置哈希值，有些记录中没有这个字段值，所以后面我们会用脚本做数据预处理时把这个字段全部删除)<br> item_category（商品分类）<br> time（该记录产生时间）</p> 
<p>2.对字段进行预处理</p> 
<p>下面对数据集进行一些预处理，包括为每行记录增加一个id字段（让记录具有唯一性）、增加一个省份字段（用来后续进行可视化分析），并且丢弃user_geohash字段（后面分析不需要这个字段）。<br> 下面我们要建一个脚本文件pre_deal.sh，请把这个脚本文件放在dataset目录下，和数据集small_user.csv放在同一个目录下：<br> cd /usr/local/bigdatacase/dataset<br> vim pre_deal.sh<br> 上面使用vim编辑器新建了一个pre_deal.sh脚本文件，请在这个脚本文件中加入下面代码：<br> （Word文档导致部分代码可能出错参考https://dblab.xmu.edu.cn/blog/959/<br> ）</p> 
<p>#!/bin/bash<br> #下面设置输入文件，把用户执行pre_deal.sh命令时提供的第一个参数作为输入文件名称<br> infile=$1<br> #下面设置输出文件，把用户执行pre_deal.sh命令时提供的第二个参数作为输出文件名称<br> outfile=<span class="katex--inline">KaTeX parse error: Expected 'EOF', got '#' at position 3: 2 #̲注意！！最后的</span>infile &gt; $outfile必须跟在}’这两个字符的后面<br> awk -F “,” ‘BEGIN{<!-- --><br> srand();<br> id=0;<br> Province[0]=“山东”;Province[1]=“山西”;Province[2]=“河南”;Province[3]=“河北”;Province[4]=“陕西”;Province[5]=“内蒙古”;Province[6]=“上海市”;<br> Province[7]=“北京市”;Province[8]=“重庆市”;Province[9]=“天津市”;Province[10]=“福建”;Province[11]=“广东”;Province[12]=“广西”;Province[13]=“云南”;<br> Province[14]=“浙江”;Province[15]=“贵州”;Province[16]=“新疆”;Province[17]=“西藏”;Province[18]=“江西”;Province[19]=“湖南”;Province[20]=“湖北”;<br> Province[21]=“黑龙江”;Province[22]=“吉林”;Province[23]=“辽宁”; Province[24]=“江苏”;Province[25]=“甘肃”;Province[26]=“青海”;Province[27]=“四川”;<br> Province[28]=“安徽”; Province[29]=“宁夏”;Province[30]=“海南”;Province[31]=“香港”;Province[32]=“澳门”;Province[33]=“台湾”;<br> }<br> {<!-- --><br> id=id+1;<br> value=int(rand()*34);<br> print id"\t"$1"\t"$2"\t"$3"\t"$5"\t"substr($6,1,10)"\t"Province[value]<br> }’ $infile &gt; $outfile<br> 输入后查看<br> <img src="https://images2.imgbox.com/49/a1/J8vpxWoc_o.png" alt="在这里插入图片描述"></p> 
<p>上面的代码的基本形式是：<br> awk -F “,” ‘处理逻辑’ $infile &gt; $outfile<br> 使用awk可以逐行读取输入文件，并对逐行进行相应操作。</p> 
<p>下面就可以执行pre_deal.sh脚本文件，来对small_user.csv进行数据预处理，命令如下：<br> cd /usr/local/bigdatacase/dataset<br> bash ./pre_deal.sh small_user.csv user_table.txt<br> 可以使用head命令查看生成的user_table.txt，不要直接打开，文件过大，会出错，下面查看前10行数据：</p> 
<p>head -10 user_table.txt<br> <img src="https://images2.imgbox.com/3a/6c/jzMZd668_o.png" alt="在这里插入图片描述"></p> 
<p>a.启动HDFS</p> 
<p>请登录Linux系统，打开一个终端，执行下面命令启动Hadoop：</p> 
<p>cd /usr/local/hadoop<br> ./sbin/start-all.sh<br> Shell 命令<br> 然后，执行jps命令看一下当前运行的进程：</p> 
<p>jps<br> 如果出现下面这些进程，说明Hadoop启动成功了。</p> 
<p>3765 NodeManager<br> 3639 ResourceManager<br> 3800 Jps<br> 3261 DataNode<br> 3134 NameNode<br> 3471 SecondaryNameNode</p> 
<p>b.把user_table.txt上传到HDFS中<br> 现在，我们要把Linux本地文件系统中的user_table.txt上传到分布式文件系统HDFS中，存放在HDFS中的“/bigdatacase/dataset”目录下。<br> 首先，请执行下面命令，在HDFS的根目录下面创建一个新的目录bigdatacase，并在这个目录下创建一个子目录dataset，如下：</p> 
<p>cd /usr/local/hadoop<br> ./bin/hdfs dfs -mkdir -p /bigdatacase/dataset<br> 然后，把Linux本地文件系统中的user_table.txt上传到分布式文件系统HDFS的“/bigdatacase/dataset”目录下，命令如下：</p> 
<p>cd /usr/local/hadoop<br> ./bin/hdfs dfs -put /usr/local/bigdatacase/dataset/user_table.txt /bigdatacase/dataset<br> 下面可以查看一下HDFS中的user_table.txt的前10条记录，命令如下：</p> 
<p>cd /usr/local/hadoop<br> ./bin/hdfs dfs -cat /bigdatacase/dataset/user_table.txt | head -10</p> 
<p><img src="https://images2.imgbox.com/d4/3f/wgTLIsz1_o.png" alt="在这里插入图片描述"></p> 
<p>c.在Hive上创建数据库<br> 下面，请在Linux系统中，再新建一个终端（可以在刚才已经建好的终端界面的左上角，点击“终端”菜单，在弹出的子菜单中选择“新建终端”）。因为需要借助于MySQL保存Hive的元数据，所以，请首先启动MySQL数据库：<br> 启动MySQL<br> service mysql start //可以在Linux的任何目录下执行该命令</p> 
<p>由于Hive是基于Hadoop的数据仓库，使用HiveQL语言撰写的查询语句，最终都会被Hive自动解析成MapReduce任务由Hadoop去具体执行，因此，需要启动Hadoop，然后再启动Hive。由于前面我们已经启动了Hadoop，所以，这里不需要再次启动Hadoop。下面，在这个新的终端中执行下面命令进入Hive：<br> 启动Hive</p> 
<p>cd /usr/local/hive<br> ./bin/hive<br> <img src="https://images2.imgbox.com/fe/12/raFsdfYz_o.png" alt="在这里插入图片描述"></p> 
<p>启动成功以后，就进入了“hive&gt;”命令提示符状态，可以输入类似SQL语句的HiveQL语句。<br> hive&gt; create database dblab;<br> hive&gt; use dblab;<br> hive<br> d.创建外部表<br> 关于数据仓库Hive的内部表和外部表的区别，请访问网络文章《Hive内部表与外部表的区别》。本教程采用外部表方式。<br> 这里我们要在数据库dblab中创建一个外部表bigdata_user，它包含字段（id, uid, item_id, behavior_type, item_category, date, province），请在hive命令提示符下输入如下命令：</p> 
<p>hive&gt; CREATE EXTERNAL TABLE dblab.bigdata_user(id INT,uid STRING,item_id STRING,behavior_type INT,item_category STRING,visit_date DATE,province STRING) COMMENT ‘Welcome to xmu dblab!’ ROW FORMAT DELIMITED FIELDS TERMINATED BY ‘\t’ STORED AS TEXTFILE LOCATION ‘/bigdatacase/dataset’;<br> hive<br> 对于这条语句中LOCATION参数的含义如果有疑问，可以阅读博客《关于数据仓库Hive建表时的LOCATION参数问题》。<br> e.查询数据<br> 上面已经成功把HDFS中的“/bigdatacase/dataset”目录下的数据加载到了数据仓库Hive中，我们现在可以使用下面命令查询一下：<br> hive&gt; select * from bigdata_user limit 10;<br> <img src="https://images2.imgbox.com/30/ac/FYoTckq1_o.png" alt="在这里插入图片描述"></p> 
<p>hive&gt; select behavior_type from bigdata_user limit 10;<br> <img src="https://images2.imgbox.com/b9/4b/MvNfIAqt_o.png" alt="在这里插入图片描述"></p> 
<p>Hive数据分析参考：https://dblab.xmu.edu.cn/blog/1005/<br> 操作Hive<br> 请登录Linux系统（本教程统一采用hadoop用户名登录系统），然后，打开一个终端（可以按快捷键Ctrl+Alt+T）。<br> 本教程中，Hadoop的安装目录是“/usr/local/hadoop”，Hive的安装目录是“/usr/local/hive”。<br> 因为需要借助于MySQL保存Hive的元数据，所以，请首先启动MySQL数据库，请在终端中输入下面命令：</p> 
<p>service mysql start //可以在Linux的任何目录下执行该命令</p> 
<p>请执行下面命令启动Hadoop（如果你已经启动了Hadoop就不用再次启动了）：</p> 
<p>cd /usr/local/hadoop<br> ./sbin/start-all.sh<br> 执行jps命令看一下当前运行的进程：<br> jps<br> 继续执行下面命令启动进入Hive：</p> 
<p>cd /usr/local/hive<br> ./bin/hive //启动Hive<br> 在“hive&gt;”命令提示符状态下执行下面命令：</p> 
<p>hive&gt; use dblab; //使用dblab数据库<br> hive&gt; show tables; //显示数据库中所有表。<br> hive&gt; show create table bigdata_user; //查看bigdata_user表的各种属性；</p> 
<p>执行部分结果如下：<br> <img src="https://images2.imgbox.com/14/53/ttT9lbyq_o.png" alt="在这里插入图片描述"></p> 
<p>可以执行下面命令查看表的简单结构：</p> 
<p>hive&gt; desc bigdata_user;<br> 执行部分结果如下：<br> <img src="https://images2.imgbox.com/35/8b/BFDEc4Tv_o.png" alt="在这里插入图片描述"></p> 
<p>二、简单查询分析<br> 先测试一下简单的指令：<br> hive&gt; select behavior_type from bigdata_user limit 10;//查看前10位用户对商品的行为<br> 执行部分结果如下：<br> <img src="https://images2.imgbox.com/7f/29/Qa8TpC1x_o.png" alt="在这里插入图片描述"></p> 
<p>三、查询条数统计分析<br> (1)用聚合函数count()计算出表内有多少条行数据<br> hive&gt; select count(*) from bigdata_user;//用聚合函数count()计算出表内有多少条行数据<br> 执行结果部分如下：<br> <img src="https://images2.imgbox.com/7a/d5/SdASO6zL_o.png" alt="在这里插入图片描述"></p> 
<p>可视化分析MySQL中的数据<br> （按步骤操作，这里要先快照备份，有可能会出错自己解决不了，否则前功尽弃）<br> 安装依赖库<br> 为了完成可视化功能，我们需要为R安装一些依赖库，包括：RMySQL、ggplot2、devtools和recharts。<br> RMySQL是一个提供了访问MySQL数据库的R语言接口程序的R语言依赖库。<br> ggplot2和recharts则是R语言中提供绘图可视化功能的依赖库。<br> 请启动R进入R命令提示符状态,执行如下命令安装RMySQL：<br> 1.&gt; install.packages(‘RMySQL’)<br> R<br> 上面命令执行后， 屏幕会提示"Would you like to user a personal library instead?(y/n)"等问题，只要遇到提问，都在键盘输入y后回车即可。然后，屏幕会显示“—在此连线阶段时请选用CRAN的镜子—”，并会弹出一个白色背景的竖条形窗口，窗口标题是“HTTPS CRAN mirros”，标题下面列出了很多国家的镜像列表，我们可以选择位于China的镜像，比如，选择“China(Beijing)[https]”，然后点击“ok”按钮，就开始安装了。安装过程需要几分钟（当然，也和当前网络速度有关系）。<br> 由于不同用户的Ubuntu开发环境不一样，安装有很大可能因为缺少组件导致失败，如果出现如下错误信息：<br> Configuration failed because libmysqlclient was not found. Try installing:</p> 
<ul><li>deb: libmariadb-client-lgpl-dev (Debian, Ubuntu 16.04)<br> libmariadbclient-dev (Ubuntu 14.04)</li><li>rpm: mariadb-devel | mysql-devel (Fedora, CentOS, RHEL)</li><li>csw: mysql56_dev (Solaris)</li><li>brew: mariadb-connector-c (OSX)<br> …<br> ERROR: configuration failed for package ‘RMySQL’</li><li>removing ‘/home/hadoop/R/x86_64-pc-linux-gnu-library/3.3/RMySQL’</li></ul> 
<p>下载的程序包在‘/tmp/RtmpvEArxz/downloaded_packages’里<br> Warning message:<br> In install.packages(“RMySQL”) : 安装程序包‘RMySQL’时退出狀態的值不是0<br> 只要根据错误给出的错误信息，进行操作即可。q()退出R命令提示符状态，回到Shell状态,笔者的系统是Ubuntu 16.04,那么，根据上面的英文错误信息，就需要在Shell命令提示符状态下执行下面命令安装libmariadb-client-lgpl-dev：<br> 1.sudo apt-get install libmariadb-client-lgpl-dev<br> 然后，再次输入下面命令进入R命令提示符状态：<br> 1.R<br> 启动后，并进入“&gt;”命令提示符状态。然后，执行如下命令安装绘图包ggplot2，如果还出现缺少组件的错误，请按照上面的解决方案解决！<br> 1.&gt; install.packages(‘ggplot2’)<br> R<br> 然后，屏幕会显示“—在此连线阶段时请选用CRAN的镜子—”，并会弹出一个白色背景的竖条形窗口，窗口标题是“HTTPS CRAN mirros”，标题下面列出了很多国家的镜像列表，我们可以选择位于China的镜像，比如，选择“China(Beijing)[https]”，然后点击“ok”按钮，就开始安装了。这个命令运行后，大概需要安装10分钟时间（当然，也和当前网络速度有关系）。<br> 下面继续运行下面命令安装devtools：<br> 1.&gt; install.packages(‘devtools’)<br> R<br> 如果在上面安装devtools的过程中，又出现了错误，处理方法很简单，还是按照上面介绍的方法，根据屏幕上给出的英文错误信息，缺少什么软件，就用sudo apt-get install命令安装该软件就可以了。笔者在Ubuntu16.04上执行devtools安装时，出现了三次错误，笔者根据每次错误的英文提示信息，安装了三个软件libssl-dev、libssh2-1-dev、libcurl4-openssl-dev，安装命令如下：<br> 1.sudo apt-get install libssl-dev<br> 2.sudo apt-get install libssh2-1-dev<br> 3.sudo apt-get install libcurl4-openssl-dev<br> Shell 命令<br> 读者在安装过程中，可能会出现不同的错误，按照同样的处理方法可以顺利解决。<br> 下面在R命令提示符下再执行如下命令安装taiyun/recharts：<br> 1.&gt; devtools::install_github(‘taiyun/recharts’)</p> 
<p>结果测试与效果演示步骤<br> ssh localhost<br> cd /usr/local/hadoop<br> ./sbin/start-dfs.sh<br> <img src="https://images2.imgbox.com/42/1d/u1DtCnNR_o.png" alt="在这里插入图片描述"></p> 
<p>MySQL<br> service mysql start<br> sudo netstat -tap | grep mysql<br> mysql -u root -p<br> 密码:123<br> <img src="https://images2.imgbox.com/a8/f9/UAmbFhXi_o.png" alt="在这里插入图片描述"></p> 
<p>cd /usr/local/hadoop<br> ./sbin/start-dfs.sh</p> 
<p><img src="https://images2.imgbox.com/67/15/Crn3K5Ti_o.png" alt="在这里插入图片描述"></p> 
<p>cd /usr/local/hive<br> ./bin/hive<br> <img src="https://images2.imgbox.com/48/9a/RoG9m4Np_o.png" alt="在这里插入图片描述"></p> 
<p>jps<br> <img src="https://images2.imgbox.com/ea/ed/FUk5pGNh_o.png" alt="在这里插入图片描述"></p> 
<p>输入 R<br> 接着输入如下<br> <img src="https://images2.imgbox.com/7d/0e/nALn40Nv_o.png" alt="在这里插入图片描述"></p> 
<p>接着输入<br> <img src="https://images2.imgbox.com/b7/60/YY3NDNp2_o.png" alt="在这里插入图片描述"></p> 
<ol><li></ol> 
<p>summary(user_action<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         b 
        
       
         e 
        
       
         h 
        
       
         a 
        
       
         v 
        
       
         i 
        
       
         o 
        
        
        
          r 
         
        
          t 
         
        
       
         y 
        
       
         p 
        
       
         e 
        
       
         ) 
        
       
         s 
        
       
         u 
        
       
         m 
        
       
         m 
        
       
         a 
        
       
         r 
        
       
         y 
        
       
         ( 
        
       
         a 
        
       
         s 
        
       
         . 
        
       
         n 
        
       
         u 
        
       
         m 
        
       
         e 
        
       
         r 
        
       
         i 
        
       
         c 
        
       
         ( 
        
       
         u 
        
       
         s 
        
       
         e 
        
        
        
          r 
         
        
          a 
         
        
       
         c 
        
       
         t 
        
       
         i 
        
       
         o 
        
       
         n 
        
       
      
        behavior_type) summary(as.numeric(user_action 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">e</span><span class="mord mathdefault">h</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.280556em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mord mathdefault">p</span><span class="mord mathdefault">e</span><span class="mclose">)</span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord">.</span><span class="mord mathdefault">n</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">i</span><span class="mord mathdefault">c</span><span class="mopen">(</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.151392em;"><span class="" style="top: -2.55em; margin-left: -0.02778em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span></span></span></span></span>behavior_type))<br> library(ggplot2)<br> ggplot(user_action,aes(as.numeric(behavior_type)))+geom_histogram()<br> <img src="https://images2.imgbox.com/f4/c9/cbL6drbd_o.png" alt="在这里插入图片描述"></p> 
<p>结果展示</p> 
<p><img src="https://images2.imgbox.com/17/89/Q0UcZLr7_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li></ol> 
<p>temp &lt;- subset(user_action,as.numeric(behavior_type)==4) # 获取子数据集<br> count &lt;- sort(table(temp$item_category),decreasing = T) #排序<br> print(count[1:10]) # 获取第1到10个排序结果<br> result &lt;- as.data.frame(count[1:10]) #将count矩阵结果转换成数据框<br> ggplot(result,aes(Var1,Freq,col=factor(Var1)))+geom_point()<br> <img src="https://images2.imgbox.com/0f/3f/U4zqKzpl_o.png" alt="在这里插入图片描述"></p> 
<ol start="3"><li></ol> 
<p>month &lt;- substr(user_action$visit_date,6,7) # visit_date变量中截取月份<br> user_action &lt;- cbind(user_action,month) # user_action增加一列月份数据<br> ggplot(user_action,aes(as.numeric(behavior_type),col=factor(month)))+geom_histogram()+facet_grid(.~month)<br> <img src="https://images2.imgbox.com/5d/34/2KyM5FHD_o.png" alt="在这里插入图片描述"></p> 
<ol start="4"><li></ol> 
<p>library(recharts)<br> rel &lt;- as.data.frame(table(temp<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         r 
        
       
         o 
        
       
         v 
        
       
         i 
        
       
         n 
        
       
         c 
        
       
         e 
        
       
         ) 
        
       
         ) 
        
       
         p 
        
       
         r 
        
       
         o 
        
       
         v 
        
       
         i 
        
       
         n 
        
       
         c 
        
       
         e 
        
       
         s 
        
       
         &lt; 
        
       
         − 
        
       
         r 
        
       
         e 
        
       
         l 
        
       
      
        province)) provinces &lt;- rel 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault">c</span><span class="mord mathdefault">e</span><span class="mclose">)</span><span class="mclose">)</span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mord mathdefault">c</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord">−</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span></span></span></span></span>Var1<br> x = c()<br> for(n in provinces){<!-- --><br> x[length(x)+1] = nrow(subset(temp,(province==n)))<br> }<br> mapData &lt;- data.frame(province=rel$Var1,<br> count=x, stringsAsFactors=F) # 设置地图信息<br> eMap(mapData, namevar=~province, datavar = ~count) #画出中国地图<br> <img src="https://images2.imgbox.com/f0/ac/VCNRQLir_o.png" alt="在这里插入图片描述"></p> 
<p>验收效果展示与说明</p> 
<p><img src="https://images2.imgbox.com/24/58/zBMCbdfW_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/86/4f/1Lb9Fr0w_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/90/1a/sNPpcijT_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/4f/97/hMt0O2DB_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b5/91/GSeFvbCd_o.png" alt="在这里插入图片描述"></p> 
<p>测试演示命令汇总如下<br> <img src="https://images2.imgbox.com/bc/b9/9kuYkt59_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/a8/42/swv3ptKR_o.png" alt="在这里插入图片描述"></p> 
<p>以上是关键步骤汇总 参考：https://dblab.xmu.edu.cn/</p> 
<p>Ubuntu 16.04 Linux空白模板（只含大数据软件在桌面，可以在VM虚拟机导入使用）<br> 这个空白Linux虚拟机模板，在VM导入即可使用可以在此模板，<br> 自己可以在这个空白Linux虚拟机模板从头开始搭建大数据课程实验案例：网站用户行为分析。<br> 重磅：大数据课程实验案例：网站用户行为分析（免费共享）链接如下：<br> https://dblab.xmu.edu.cn/</p> 
<p>空白Linux虚拟机模板（只含大数据压缩软件包）</p> 
<p><img src="https://images2.imgbox.com/50/c4/He9jpU9K_o.png" alt="在这里插入图片描述"></p> 
<p>下载好就到导入空白Linux虚拟机模板<br> <img src="https://images2.imgbox.com/6d/46/ltObdcwl_o.png" alt="在这里插入图片描述"></p> 
<p>找到下载好模板的路径选择如下文件打开</p> 
<p><img src="https://images2.imgbox.com/fe/c4/WCBtyY8M_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/d3/40/hi5lIWke_o.png" alt="在这里插入图片描述"></p> 
<p>重命名Ubuntu16.04 qjp<br> <img src="https://images2.imgbox.com/a6/be/74aY3fur_o.png" alt="在这里插入图片描述"></p> 
<p>导入完成如下<br> <img src="https://images2.imgbox.com/6d/d0/vOEbYV0x_o.png" alt="在这里插入图片描述"></p> 
<p>开机之后如下<br> <img src="https://images2.imgbox.com/c2/b8/jE11XP6N_o.png" alt="在这里插入图片描述"></p> 
<p>有需要Linux空白模板请告知<br> 完整实验环境对外不提供，仅供个人学习使用。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5a728dfa4e4212a5c85b92909095e24d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">电力系统短期负荷预测（Python代码&#43;数据&#43;详细文章讲解）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/51ce41bcbaa463a5d26208874870d8b7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">DEMATEL-ISM模型的Python实现——方法介绍以及代码复现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 编程大咖.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://www.w3counter.com/tracker.js?id=151347"></script>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>